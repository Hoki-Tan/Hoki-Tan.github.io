import{_ as c}from"./ValaxyMain.vue_vue_type_style_index_0_lang.BnSDDTSC.js";import"./chunks/@vueuse/motion.ChokKGFY.js";import{n as b}from"./app.MJTB4mgM.js";import"./chunks/dayjs.BdcnXKr1.js";import{R as D,M as o,ac as A,ab as F,af as i,O as B,ak as f,ae as x,aa as m,as as v,aj as S,ap as k,ag as e,U as T,a8 as P,_ as a,ai as s,a1 as w}from"./framework.CzqXvcaZ.js";import{e as O,u as N,a as M}from"./chunks/vue-router.CrZ28bhR.js";import"./YunComment.vue_vue_type_style_index_0_lang.DO2ooqCJ.js";import"./index.C5okkQwF.js";import"./chunks/vue-i18n.DKUSMKgm.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.DNB4zIcK.js";import"./post.CMyL-HiC.js";import"./chunks/pinia.BnQGIDvb.js";/* empty css                    */import"./chunks/nprogress.B6x19dEb.js";const R=["src"],L=D({__name:"AFace",props:{face:{required:!0,type:String},suffix:String,size:String},setup(E){const p=b(),r=o(()=>p.value.addons["valaxy-addon-face"]),d=E,y=r.value.options?.defaultSuffix||"png";r.value.options?.defaultSize;const g=r.value.options?.path||"/img/face/";let[u,t]=d.face.split(":");t.match(/\.(jpg|jpeg|png|webp|gif|avif|jiff)$/i)||(t+="."+(d.suffix||y));let n=g+u+"/"+t;return(h,C)=>(F(),A("div",{class:"v-a-face",style:f(E.size?{height:E.size}:null)},[i("img",{class:"v-a-face-img",src:B(n),loading:"lazy"},null,8,R)],4))}}),U=D({__name:"ColorText",props:{color:{type:String,default:"inherit"},tag:{type:String,default:"span"},className:{type:String,default:""}},setup(E){const p=E,r=o(()=>p.color&&p.color!=="inherit"?{color:p.color}:void 0),d=o(()=>p.className);return(y,g)=>(F(),A(T,null,[x(`
    ColorText
    Usage in Markdown (Valaxy/VitePress):
      <ColorText color="red">你的文本</ColorText>
    or with a tag:
      <ColorText tag="p" color="#0f0">段落文本</ColorText>
  `),(F(),m(v(E.tag),{class:S(d.value),style:f(r.value)},{default:k(()=>[e(y.$slots,"default",{},void 0,!0)]),_:3},8,["class","style"]))],2112))}}),G=P(U,[["__scopeId","data-v-59b6df29"]]),I=O("/posts/Shader",async E=>JSON.parse('{"title":"shader入门学习","description":"","frontmatter":{"cover":"https://img.alicdn.com/imgextra/i2/3343836081/O1CN01WEkPZv1un9ZHW0TBS_!!3343836081.jpg","title":"shader入门学习","date":"2025-03-01","categories":"shader","tags":["shader"]},"headers":[],"relativePath":"pages/posts/Shader.md","lastUpdated":null}'),{lazy:(E,p)=>E.name===p.name}),ii={__name:"Shader",setup(E,{expose:p}){const{data:r}=I(),d=M(),y=N(),g=Object.assign(y.meta.frontmatter||{},r.value?.frontmatter||{});return d.currentRoute.value.data=r.value,w("valaxy:frontmatter",g),globalThis.$frontmatter=g,p({frontmatter:{cover:"https://img.alicdn.com/imgextra/i2/3343836081/O1CN01WEkPZv1un9ZHW0TBS_!!3343836081.jpg",title:"shader入门学习",date:"2025-03-01",categories:"shader",tags:["shader"]}}),(t,l)=>{const n=G,h=L,C=c;return F(),m(C,{frontmatter:B(g)},{"main-content-md":k(()=>[l[1630]||(l[1630]=i("h1",{id:"shader开发",tabindex:"-1"},[s("Shader开发 "),i("a",{class:"header-anchor",href:"#shader开发","aria-label":'Permalink to "Shader开发"'},"​")],-1)),l[1631]||(l[1631]=i("h2",{id:"坐标空间转换",tabindex:"-1"},[s("坐标空间转换 "),i("a",{class:"header-anchor",href:"#坐标空间转换","aria-label":'Permalink to "坐标空间转换"'},"​")],-1)),l[1632]||(l[1632]=i("h3",{id:"一、坐标空间",tabindex:"-1"},[s("一、坐标空间 "),i("a",{class:"header-anchor",href:"#一、坐标空间","aria-label":'Permalink to "一、坐标空间"'},"​")],-1)),l[1633]||(l[1633]=i("blockquote",null,[i("p",null,"坐标空间是什么?")],-1)),a(n,{color:"red"},{default:k(()=>[...l[0]||(l[0]=[s("**坐标空间是一个用于描述和定位物体位置的数学概念**。",-1)])]),_:1}),l[1634]||(l[1634]=i("p",null,"它一般由一个基础参照物（原点）和轴线（相互垂直的轴线）组成。",-1)),l[1635]||(l[1635]=i("p",null,"常见的坐标空间包括二维平面坐标空间和三维空间 在三维空间中，通常决定一个原点（0,0,0）并",-1)),l[1636]||(l[1636]=i("p",null,"使用三个坐标轴（通常是x轴、y轴和z轴）来描述点的位置。",-1)),l[1637]||(l[1637]=i("p",null,"例如，在三维坐标空间中，一个点可以通过其x、y和z坐标来确定其在空间中的位置。",-1)),l[1638]||(l[1638]=i("blockquote",null,[i("p",null,"坐标空间的变换")],-1)),l[1639]||(l[1639]=i("p",null,"在Shader开发中为了方便我们制作模型，使用模型，渲染模型，也存在很多不同的坐标空间",-1)),l[1640]||(l[1640]=i("p",null,"比如：模型空间、世界空间、观察空间、裁剪空间、屏幕空间",-1)),a(n,{color:"red"},{default:k(()=>[...l[1]||(l[1]=[s("这里的坐标空间的变换主要是指 在渲染管线中的，我们需要将坐标数据，在这几种空间当中进行变换计算（利用矩阵相关知识)",-1)])]),_:1}),l[1641]||(l[1641]=i("p",null,"举例: 在设计模型时，使用的是模型空间（所有的顶点、法线等等相关数据都是基于模型空间坐标系的） 当我们将模型导入到Unity后，最终能够被我们在屏幕上看到，这里面的就经历了我们看不到的坐标空间变换",-1)),a(n,{color:"red"},{default:k(()=>[...l[2]||(l[2]=[s("**变换过程：模型空间 → 世界空间 → 观察空间 → 裁剪空间 → 屏幕空间** ",-1)])]),_:1}),l[1642]||(l[1642]=i("hr",null,null,-1)),l[1643]||(l[1643]=i("h3",{id:"二、-坐标空间的变换规则",tabindex:"-1"},[s("二、 坐标空间的变换规则 "),i("a",{class:"header-anchor",href:"#二、-坐标空间的变换规则","aria-label":'Permalink to "二、 坐标空间的变换规则"'},"​")],-1)),l[1644]||(l[1644]=i("blockquote",null,[i("p",null,"坐标空间的组成")],-1)),l[1645]||(l[1645]=i("ol",null,[i("li",null,[i("strong",null,"坐标原点位置")]),i("li",null,[i("strong",null,"3个坐标轴的方向（三维坐标系中）")])],-1)),l[1646]||(l[1646]=i("blockquote",null,[i("p",null,"坐标空间的变换矩阵")],-1)),l[1647]||(l[1647]=i("p",null,"坐标空间之间是会存在父子关系的。",-1)),i("p",null,[l[5]||(l[5]=s("假设一个父坐标空间为 ",-1)),a(n,{color:"red"},{default:k(()=>[...l[3]||(l[3]=[i("strong",null,"F",-1)])]),_:1}),l[6]||(l[6]=s("，子坐标空间为 ",-1)),a(n,{color:"green"},{default:k(()=>[...l[4]||(l[4]=[s("S",-1)])]),_:1}),l[7]||(l[7]=s("。",-1))]),i("p",null,[l[10]||(l[10]=s("已知 ",-1)),a(n,{color:"green"},{default:k(()=>[...l[8]||(l[8]=[s("S",-1)])]),_:1}),l[11]||(l[11]=s("坐标空间的原点位置和3个单位坐标轴（基于",-1)),a(n,{color:"red"},{default:k(()=>[...l[9]||(l[9]=[i("strong",null,"F",-1)])]),_:1}),l[12]||(l[12]=s("坐标空间的数据表达）",-1))]),l[1648]||(l[1648]=i("p",null,"对于坐标空间转换我们一般会有以下两种需求：",-1)),i("ol",null,[i("li",null,[i("p",null,[l[17]||(l[17]=s("把子坐标空间 ",-1)),a(n,{color:"green"},{default:k(()=>[...l[13]||(l[13]=[s("S",-1)])]),_:1}),l[18]||(l[18]=s(" 下的点或向量 ",-1)),a(n,{color:"green"},{default:k(()=>[...l[14]||(l[14]=[i("strong",null,"As",-1)])]),_:1}),l[19]||(l[19]=s(" 转换到父坐标空间 ",-1)),a(n,{color:"red"},{default:k(()=>[...l[15]||(l[15]=[s("F",-1)])]),_:1}),l[20]||(l[20]=s(" 中为 ",-1)),a(n,{color:"red"},{default:k(()=>[...l[16]||(l[16]=[s("Af",-1)])]),_:1})])]),i("li",null,[i("p",null,[l[25]||(l[25]=s("把父坐标空间 ",-1)),a(n,{color:"red"},{default:k(()=>[...l[21]||(l[21]=[s("F",-1)])]),_:1}),l[26]||(l[26]=s(" 下的点或向量 ",-1)),a(n,{color:"red"},{default:k(()=>[...l[22]||(l[22]=[s("Bf",-1)])]),_:1}),l[27]||(l[27]=s(" 转换到子坐标空间 ",-1)),a(n,{color:"green"},{default:k(()=>[...l[23]||(l[23]=[s("S",-1)])]),_:1}),l[28]||(l[28]=s("中为 ",-1)),a(n,{color:"green"},{default:k(()=>[...l[24]||(l[24]=[s("Bs",-1)])]),_:1})])])]),l[1649]||(l[1649]=i("p",null,"如果用矩阵来表示的话：",-1)),a(n,{color:"red"},{default:k(()=>[...l[29]||(l[29]=[s("Af",-1)])]),_:1}),l[1650]||(l[1650]=s(" = `Ms-f` ",-1)),a(n,{color:"green"},{default:k(()=>[...l[30]||(l[30]=[s("As",-1)])]),_:1}),l[1651]||(l[1651]=s()),l[1652]||(l[1652]=i("code",null,"—— Ms-f",-1)),l[1653]||(l[1653]=s(" 代表从子坐标空间到父坐标空间的变换矩阵",-1)),a(n,{color:"green"},{default:k(()=>[...l[31]||(l[31]=[s("Bs",-1)])]),_:1}),l[1654]||(l[1654]=s(" = Mf-s ",-1)),a(n,{color:"red"},{default:k(()=>[...l[32]||(l[32]=[s("Bf",-1)])]),_:1}),l[1655]||(l[1655]=s()),l[1656]||(l[1656]=i("code",null,"—— Mf-s",-1)),l[1657]||(l[1657]=s(" 是 ",-1)),l[1658]||(l[1658]=i("code",null,"Ms-f",-1)),l[1659]||(l[1659]=s(" 的逆矩阵（逆矩阵可以进行逆向变换），代表父到子的变换矩阵",-1)),l[1660]||(l[1660]=i("p",null,"也就是说我们只要知道 Ms-f 和 Mf-s 的其中一个矩阵，另一个矩阵都可以通过求逆矩阵得到对应的结果",-1)),l[1661]||(l[1661]=i("blockquote",null,[i("p",null,"推导 Ms-f ，也就是子坐标空间到父坐标空间的变换矩阵")],-1)),a(h,{face:"shader/坐标变换:推导 Ms-f(子坐标空间到父坐标空间的变换矩阵)"}),a(h,{face:"shader/坐标变换:推导 Ms-f(子坐标空间到父坐标空间的变换矩阵)2"}),a(h,{face:"shader/坐标变换:推导 Ms-f(子坐标空间到父坐标空间的变换矩阵)3"}),a(h,{face:"shader/坐标变换:推导 Ms-f(子坐标空间到父坐标空间的变换矩阵)4"}),a(h,{face:"shader/坐标变换:推导 Ms-f(子坐标空间到父坐标空间的变换矩阵)5"}),a(h,{face:"shader/坐标变换:推导 Ms-f(子坐标空间到父坐标空间的变换矩阵)6"}),l[1662]||(l[1662]=i("blockquote",null,[i("p",null,"总结")],-1)),i("ol",null,[i("li",null,[l[34]||(l[34]=i("p",null,"坐标空间的组成",-1)),a(n,{color:"red"},{default:k(()=>[...l[33]||(l[33]=[s("**坐标原点位置 和 3个坐标轴的方向（三维坐标系中）** ",-1)])]),_:1})]),i("li",null,[l[37]||(l[37]=i("p",null,"坐标空间之间的关系",-1)),a(n,{color:"red"},{default:k(()=>[...l[35]||(l[35]=[s("**大部分坐标空间都是另一个坐标空间的子空间** ",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[36]||(l[36]=[s("**Unity中的坐标空间的变换实际上就是父空间和子空间之间对点或向量进行变换** ",-1)])]),_:1})]),i("li",null,[l[42]||(l[42]=i("p",null,"坐标空间之间的变换矩阵",-1)),a(n,{color:"red"},{default:k(()=>[...l[38]||(l[38]=[s("**子到父的变换矩阵： Ms−f = ** ",-1)])]),_:1}),a(h,{face:"shader/坐标变换:推导 Ms-f(子坐标空间到父坐标空间的变换矩阵)7"}),a(n,{color:"red"},{default:k(()=>[...l[39]||(l[39]=[s("**父到子的变换矩阵： Mf-s = Ms−f −1** ",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[40]||(l[40]=[s("**其中前三列在没有缩放时，使用轴向的单位方向向量** ",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[41]||(l[41]=[s("**存在缩放时可能就不是单位向量了**",-1)])]),_:1})])]),l[1663]||(l[1663]=i("hr",null,null,-1)),l[1664]||(l[1664]=i("h3",{id:"三、模型空间变换",tabindex:"-1"},[s("三、模型空间变换 "),i("a",{class:"header-anchor",href:"#三、模型空间变换","aria-label":'Permalink to "三、模型空间变换"'},"​")],-1)),l[1665]||(l[1665]=i("blockquote",null,[i("p",null,"模型空间变换意义")],-1)),l[1666]||(l[1666]=i("p",null,"模型空间（model space）也被称为",-1)),l[1667]||(l[1667]=i("p",null,"对象空间（object space）或局部空间（local space）",-1)),l[1668]||(l[1668]=i("p",null,"它一般指3D模型的局部坐标系，每个模型都有自己独立的坐标空间，",-1)),a(n,{color:"red"},{default:k(()=>[...l[43]||(l[43]=[s("**模型空间的主要意义是方便我们建模，模型的顶点等数据都是基于 模型空间表达的。** ",-1)])]),_:1}),l[1669]||(l[1669]=i("p",null,"注意：",-1)),a(n,{color:"red"},{default:k(()=>[...l[44]||(l[44]=[s("**在Unity中当模型移动或旋转时，模型空间坐标系也会随着变换， 因为此时的模型坐标空间是世界坐标空间的子空间**",-1)])]),_:1}),l[1670]||(l[1670]=i("p",null,"在模型空间中，我们一般会有上、下、左、右、前、后 六种方向概念",-1)),l[1671]||(l[1671]=i("p",null,[s("Unity使用的是"),i("strong",null,"左手坐标系"),s(" 因此模型空间的x、y、z轴，对应的是模型的"),i("strong",null,"右、上、前"),s("三个方向.")],-1)),l[1672]||(l[1672]=i("blockquote",null,[i("p",null,"如何进行模型空间变换")],-1)),l[1673]||(l[1673]=i("p",null,"在进行复合运算时，一定遵守先缩放、后旋转、再平移的规则。",-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[45]||(l[45]=[s("**认为一开始模型坐标空间和世界坐标空间重合，模型发生缩放、旋转、平移变换时 模型空间下的点和向量也应该发生相同的变换**",-1)])]),_:1}),i("p",null,[l[47]||(l[47]=s("等式如下：",-1)),a(n,{color:"red"},{default:k(()=>[...l[46]||(l[46]=[i("strong",null,"相对世界坐标系的位置 = 平移矩阵 * 旋转矩阵 * 缩放矩阵 * 模型空间下的点或向量",-1)])]),_:1})]),a(n,{color:"red"},{default:k(()=>[...l[48]||(l[48]=[s("其中平移、旋转、缩放矩阵中的具体变换值都是相对于世界空间下的数据",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[49]||(l[49]=[s("**使用坐标变换规则进行计算，如果存在缩放，直接用轴向单位向量乘以对应轴缩放因子**",-1)])]),_:1})])]),l[1674]||(l[1674]=i("hr",null,null,-1)),l[1675]||(l[1675]=i("h3",{id:"四、观察空间变换",tabindex:"-1"},[s("四、观察空间变换 "),i("a",{class:"header-anchor",href:"#四、观察空间变换","aria-label":'Permalink to "四、观察空间变换"'},"​")],-1)),l[1676]||(l[1676]=i("blockquote",null,[i("p",null,"观察空间变换的意义")],-1)),l[1677]||(l[1677]=i("p",null,"观察空间（view space）也被成为",-1)),l[1678]||(l[1678]=i("p",null,"摄像机空间（camera space）",-1)),l[1679]||(l[1679]=i("p",null,[i("strong",null,"观察空间"),s("可以认为"),i("strong",null,"是一个特殊的模型空间"),s("，这里的模型指的是场景中的 摄像机，摄像机可以认为是一个非常特殊的模型，它不可见，但是它可以 决定我们在屏幕上看到的内容，因此我们将"),i("strong",null,"摄像机的模型空间"),s("单独提出来 讨论和学习，并将它"),i("strong",null,"称为观察空间"),s("。")],-1)),l[1680]||(l[1680]=i("p",null,[i("strong",null,"观察空间的主要意义是摄像机决定了渲染的视角和视野")],-1)),l[1681]||(l[1681]=i("p",null,[i("strong",null,"注意：")],-1)),l[1682]||(l[1682]=i("p",null,"在模型空间中，我们讲过模型空间的x、y、z轴，对应的是模型的右、上、前三个方向。 是因为Unity中的模型空间遵循左手坐标系原则。",-1)),l[1683]||(l[1683]=i("p",null,[s("但是在Unity的观察空间中，"),i("strong",null,"观察空间是遵循右手坐标系原则的"),s("，因此它的坐标轴方向有所不同。")],-1)),l[1684]||(l[1684]=i("p",null,[s("观察空间中的x、y、z轴的正方向 分别对应摄像机的 "),i("strong",null,"右、上、后方"),s("。")],-1)),l[1685]||(l[1685]=i("p",null,"主要原因： 在计算机图形学的OpenGL中，为了统一处理场景中物体的渲染和投影 通常使用右手坐标系，为了方便之后的数据处理，因此在Unity当中 的观察空间，也遵循右手坐标系",-1)),l[1686]||(l[1686]=i("blockquote",null,[i("p",null,"观察空间变换指什么")],-1)),l[1687]||(l[1687]=i("p",null,[s("观察空间变换指的主要是"),i("strong",null,"将模型空间中的点或向量从世界空间中变换到观察空间中"),s("。 它是顶点变换的第二步，"),i("strong",null,"就是将 数据 从 世界空间—>观察空间 进行变换"),s(" 观察空间变换也可以称为观察变换（view transform）")],-1)),l[1688]||(l[1688]=i("blockquote",null,[i("p",null,"如何进行观察空间变换")],-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[50]||(l[50]=[s("**首先进行模型空间转换**",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[51]||(l[51]=[s("得到的结果再进行观察空间变换 变换方式有两种",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[52]||(l[52]=[s("**方法一：坐标空间变换规则**",-1)])]),_:1}),a(h,{face:"shader/坐标变换:坐标变换规则"}),a(n,{color:"red"},{default:k(()=>[...l[53]||(l[53]=[s("**方法二：逆向变换观察空间** ",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[54]||(l[54]=[s("**让观察空间和世界坐标空间重合**",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[55]||(l[55]=[s("**重合时观察空间下的点或向量的数据表达和世界空间下的数据表达式相同的**",-1)])]),_:1})])]),l[1689]||(l[1689]=i("h3",{id:"五、齐次裁剪空间",tabindex:"-1"},[s("五、齐次裁剪空间 "),i("a",{class:"header-anchor",href:"#五、齐次裁剪空间","aria-label":'Permalink to "五、齐次裁剪空间"'},"​")],-1)),l[1690]||(l[1690]=i("blockquote",null,[i("p",null,"视锥体")],-1)),l[1691]||(l[1691]=i("p",null,[s("摄像机的"),i("strong",null,"视锥体是在三维空间中表示摄像机可见区域的虚拟体积"),s("，它类似一个"),i("strong",null,"六面体的形状"),s("， 根据摄像机的属性和投影方式而定。")],-1)),l[1692]||(l[1692]=i("p",null,[i("strong",null,"视锥体定义了摄像机在场景中能够看到的物体区域，超出这个区域的物体将在渲染时被裁减掉， 从而提高渲染性能。")],-1)),a(h,{face:"shader/坐标变换:正交透视"}),l[1693]||(l[1693]=i("p",null,"视锥体主要包含几种重要部分：",-1)),l[1694]||(l[1694]=i("p",null,[i("strong",null,"远近裁剪平面")],-1)),l[1695]||(l[1695]=i("p",null,[i("strong",null,"左、右、上、下裁剪平面")],-1)),l[1696]||(l[1696]=i("p",null,[i("strong",null,"透视投影中，视锥体类似一个金字塔形状，远裁剪面比近裁剪面大，所以产生透视效果")],-1)),l[1697]||(l[1697]=i("p",null,[i("strong",null,"正交投影中，视锥体类似于长方体的形状，远近裁剪平面大小一致，不会产生透视效果")],-1)),l[1698]||(l[1698]=i("blockquote",null,[i("p",null,"齐次裁剪空间")],-1)),l[1699]||(l[1699]=i("p",null,[i("strong",null,"裁剪空间也被称为 齐次裁剪空间")],-1)),l[1700]||(l[1700]=i("p",null,[i("strong",null,"齐次裁剪空间"),s(" （裁剪空间）"),i("strong",null,"是一个非常特殊的坐标空间")],-1)),l[1701]||(l[1701]=i("p",null,[s("齐次裁剪空间 是一个三维空间，"),i("strong",null,"是在计算机图形学中用于在图形渲染过程中进行裁剪和投影的。 它的坐标范围为(-1,-1,-1)到（1,1,1），超出这个范围的坐标在渲染时会被裁减掉，只会保留范围 内的坐标。")],-1)),a(h,{face:"shader/坐标变换:齐次裁剪空间"}),l[1702]||(l[1702]=i("p",null,[i("strong",null,"齐次裁剪空间是通过将摄像机的视锥体投影到一个规范化的立方体而转换来的。 这个立方体就是齐次裁剪空间。")],-1)),l[1703]||(l[1703]=i("h4",{id:"_1-正交投影",tabindex:"-1"},[s("1. 正交投影 "),i("a",{class:"header-anchor",href:"#_1-正交投影","aria-label":'Permalink to "1. 正交投影"'},"​")],-1)),l[1704]||(l[1704]=i("blockquote",null,[i("p",null,"目标")],-1)),a(n,{color:"red"},{default:k(()=>[...l[56]||(l[56]=[s("将摄像机视锥体的 正交投影 空间 转换到 齐次坐标裁剪空间 时的 **变换矩阵**",-1)])]),_:1}),a(h,{face:"shader/坐标变换:正交裁剪"}),l[1705]||(l[1705]=i("p",null,"可以将其分成两步来完成",-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[57]||(l[57]=[s("**将视锥体中心位移到观察空间原点中心** ",-1)])]),_:1})]),i("li",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[58]||(l[58]=[s("将长方体视锥体的xyz坐标范围映射到(-1,1)长宽高为2的正方体中",-1)])]),_:1})])])]),a(h,{face:"shader/坐标变换:正交裁剪2"}),l[1706]||(l[1706]=i("blockquote",null,[i("p",null,"Unity中正交投影重要参数")],-1)),a(n,{color:"blue"},{default:k(()=>[...l[59]||(l[59]=[s("Projection：该参数为Orthographic时，为正交摄像机 ",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[60]||(l[60]=[s("Size：视锥体竖直方向上高度的一半 ",-1)])]),_:1}),a(n,{color:"blue"},{default:k(()=>[...l[61]||(l[61]=[s("Clipping Planes：裁剪平面 ",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[62]||(l[62]=[s("Near：近裁剪面离摄像机的距离 ",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[63]||(l[63]=[s("Far：远裁剪面离摄像机的距离",-1)])]),_:1}),a(h,{face:"shader/坐标变换:unity正交参数"}),a(h,{face:"shader/坐标变换:unity正交参数2"}),l[1707]||(l[1707]=i("p",null,"利用已知参数，获取到远近裁剪面的高度",-1)),l[1708]||(l[1708]=i("p",null,"已知：",-1)),a(n,{color:"red"},{default:k(()=>[...l[64]||(l[64]=[s("Size：视锥体竖直方向上高度的一半 ",-1)])]),_:1}),l[1709]||(l[1709]=i("p",null,"可得：",-1)),a(n,{color:"red"},{default:k(()=>[...l[65]||(l[65]=[s("近裁剪面高 = `2 * Size` ",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[66]||(l[66]=[s("远裁剪面高 = `2 * Size`",-1)])]),_:1}),l[1710]||(l[1710]=i("p",null,"远近裁剪面的宽通过摄像机参数得到Game窗口的宽高比",-1)),a(h,{face:"shader/坐标变换:unity正交参数3"}),l[1711]||(l[1711]=i("p",null,[s("Aspect = "),i("code",null,"宽 : 高 = 宽 / 高")],-1)),l[1712]||(l[1712]=i("p",null,"因此可以得到",-1)),a(n,{color:"red"},{default:k(()=>[...l[67]||(l[67]=[s("近裁剪面宽 = 远裁剪面宽 = Aspect * 高 = Aspect * 2 * Size",-1)])]),_:1}),l[1713]||(l[1713]=i("blockquote",null,[i("p",null,"正交投影变换矩阵")],-1)),a(n,{color:"red"},{default:k(()=>[...l[68]||(l[68]=[s("**第一步：将视锥体中心位移到观察空间原点中心**",-1)])]),_:1}),a(h,{face:"shader/坐标变换:正交投影变换矩阵"}),l[1714]||(l[1714]=i("p",null,"想要从图一变换到图二",-1)),l[1715]||(l[1715]=i("p",null,"我们只需要对视锥体进行Z方向的平移 X、Y方向是不需要变换的。",-1)),l[1716]||(l[1716]=i("p",null,"因此第一步的变换矩阵的结构一定是一个平移矩阵",-1)),l[1717]||(l[1717]=i("p",null,[i("span",{class:"katex-display"},[i("span",{class:"katex"},[i("span",{class:"katex-mathml"},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[i("semantics",null,[i("mtable",{rowspacing:"0.16em",columnalign:"center center center center",columnspacing:"1em"},[i("mtr",null,[i("mtd",null,[i("mstyle",{scriptlevel:"0",displaystyle:"false"},[i("mn",null,"1")])]),i("mtd",null,[i("mstyle",{scriptlevel:"0",displaystyle:"false"},[i("mn",null,"0")])]),i("mtd",null,[i("mstyle",{scriptlevel:"0",displaystyle:"false"},[i("mn",null,"0")])]),i("mtd",null,[i("mstyle",{scriptlevel:"0",displaystyle:"false"},[i("mn",null,"0")])])]),i("mtr",null,[i("mtd",null,[i("mstyle",{scriptlevel:"0",displaystyle:"false"},[i("mn",null,"0")])]),i("mtd",null,[i("mstyle",{scriptlevel:"0",displaystyle:"false"},[i("mn",null,"1")])]),i("mtd",null,[i("mstyle",{scriptlevel:"0",displaystyle:"false"},[i("mn",null,"0")])]),i("mtd",null,[i("mstyle",{scriptlevel:"0",displaystyle:"false"},[i("mn",null,"0")])])]),i("mtr",null,[i("mtd",null,[i("mstyle",{scriptlevel:"0",displaystyle:"false"},[i("mn",null,"0")])]),i("mtd",null,[i("mstyle",{scriptlevel:"0",displaystyle:"false"},[i("mn",null,"0")])]),i("mtd",null,[i("mstyle",{scriptlevel:"0",displaystyle:"false"},[i("mn",null,"1")])]),i("mtd",null,[i("mstyle",{scriptlevel:"0",displaystyle:"false"},[i("mi",null,"Z")])])]),i("mtr",null,[i("mtd",null,[i("mstyle",{scriptlevel:"0",displaystyle:"false"},[i("mn",null,"0")])]),i("mtd",null,[i("mstyle",{scriptlevel:"0",displaystyle:"false"},[i("mn",null,"0")])]),i("mtd",null,[i("mstyle",{scriptlevel:"0",displaystyle:"false"},[i("mn",null,"0")])]),i("mtd",null,[i("mstyle",{scriptlevel:"0",displaystyle:"false"},[i("mn",null,"1")])])])]),i("annotation",{encoding:"application/x-tex"},"\\begin{matrix} 1 & 0 & 0 & 0\\\\ 0 & 1 & 0 & 0\\\\ 0 & 0 & 1 & Z\\\\ 0 & 0 & 0 & 1 \\end{matrix} ")])])]),i("span",{class:"katex-html","aria-hidden":"true"},[i("span",{class:"base"},[i("span",{class:"strut",style:{height:"4.8em","vertical-align":"-2.15em"}}),i("span",{class:"mord"},[i("span",{class:"mtable"},[i("span",{class:"col-align-c"},[i("span",{class:"vlist-t vlist-t2"},[i("span",{class:"vlist-r"},[i("span",{class:"vlist",style:{height:"2.65em"}},[i("span",{style:{top:"-4.81em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"1")])]),i("span",{style:{top:"-3.61em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"0")])]),i("span",{style:{top:"-2.41em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"0")])]),i("span",{style:{top:"-1.21em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"0")])])]),i("span",{class:"vlist-s"},"​")]),i("span",{class:"vlist-r"},[i("span",{class:"vlist",style:{height:"2.15em"}},[i("span")])])])]),i("span",{class:"arraycolsep",style:{width:"0.5em"}}),i("span",{class:"arraycolsep",style:{width:"0.5em"}}),i("span",{class:"col-align-c"},[i("span",{class:"vlist-t vlist-t2"},[i("span",{class:"vlist-r"},[i("span",{class:"vlist",style:{height:"2.65em"}},[i("span",{style:{top:"-4.81em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"0")])]),i("span",{style:{top:"-3.61em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"1")])]),i("span",{style:{top:"-2.41em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"0")])]),i("span",{style:{top:"-1.21em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"0")])])]),i("span",{class:"vlist-s"},"​")]),i("span",{class:"vlist-r"},[i("span",{class:"vlist",style:{height:"2.15em"}},[i("span")])])])]),i("span",{class:"arraycolsep",style:{width:"0.5em"}}),i("span",{class:"arraycolsep",style:{width:"0.5em"}}),i("span",{class:"col-align-c"},[i("span",{class:"vlist-t vlist-t2"},[i("span",{class:"vlist-r"},[i("span",{class:"vlist",style:{height:"2.65em"}},[i("span",{style:{top:"-4.81em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"0")])]),i("span",{style:{top:"-3.61em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"0")])]),i("span",{style:{top:"-2.41em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"1")])]),i("span",{style:{top:"-1.21em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"0")])])]),i("span",{class:"vlist-s"},"​")]),i("span",{class:"vlist-r"},[i("span",{class:"vlist",style:{height:"2.15em"}},[i("span")])])])]),i("span",{class:"arraycolsep",style:{width:"0.5em"}}),i("span",{class:"arraycolsep",style:{width:"0.5em"}}),i("span",{class:"col-align-c"},[i("span",{class:"vlist-t vlist-t2"},[i("span",{class:"vlist-r"},[i("span",{class:"vlist",style:{height:"2.65em"}},[i("span",{style:{top:"-4.81em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"0")])]),i("span",{style:{top:"-3.61em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"0")])]),i("span",{style:{top:"-2.41em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord mathnormal",style:{"margin-right":"0.07153em"}},"Z")])]),i("span",{style:{top:"-1.21em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"1")])])]),i("span",{class:"vlist-s"},"​")]),i("span",{class:"vlist-r"},[i("span",{class:"vlist",style:{height:"2.15em"}},[i("span")])])])])])])])])])])],-1)),l[1718]||(l[1718]=i("p",null,"我们只需要求出该平移变换矩阵中Z应该平移多少即可",-1)),l[1719]||(l[1719]=i("p",null,"我们已知远近裁剪面离摄像机的距离为 Near 和 Far",-1)),l[1720]||(l[1720]=i("p",null,"而观察空间中Z方向是摄像机后方",-1)),i("p",null,[l[70]||(l[70]=s("因此可知 ",-1)),a(n,{color:"red"},{default:k(()=>[...l[69]||(l[69]=[i("strong",null,"视锥体中心点的 Z 坐标为",-1)])]),_:1})]),l[1721]||(l[1721]=i("p",null,[i("span",{class:"katex-display"},[i("span",{class:"katex"},[i("span",{class:"katex-mathml"},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[i("semantics",null,[i("mrow",null,[i("mfrac",null,[i("mrow",null,[i("mo",{stretchy:"false"},"("),i("mo",null,"−"),i("mi",null,"𝑁"),i("mi",null,"𝑒"),i("mi",null,"𝑎"),i("mi",null,"𝑟"),i("mo",{stretchy:"false"},")"),i("mo",null,"+"),i("mo",{stretchy:"false"},"("),i("mo",null,"−"),i("mi",null,"𝐹"),i("mi",null,"𝑎"),i("mi",null,"𝑟"),i("mo",{stretchy:"false"},")")]),i("mn",null,"2")])]),i("annotation",{encoding:"application/x-tex"},"\\frac{(−𝑁𝑒𝑎𝑟) +(−𝐹𝑎𝑟)}{2} ")])])]),i("span",{class:"katex-html","aria-hidden":"true"},[i("span",{class:"base"},[i("span",{class:"strut",style:{height:"2.113em","vertical-align":"-0.686em"}}),i("span",{class:"mord"},[i("span",{class:"mopen nulldelimiter"}),i("span",{class:"mfrac"},[i("span",{class:"vlist-t vlist-t2"},[i("span",{class:"vlist-r"},[i("span",{class:"vlist",style:{height:"1.427em"}},[i("span",{style:{top:"-2.314em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"2")])]),i("span",{style:{top:"-3.23em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),i("span",{style:{top:"-3.677em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mopen"},"("),i("span",{class:"mord"},"−"),i("span",{class:"mord mathnormal",style:{"margin-right":"0.10903em"}},"N"),i("span",{class:"mord mathnormal"},"e"),i("span",{class:"mord mathnormal"},"a"),i("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"r"),i("span",{class:"mclose"},")"),i("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),i("span",{class:"mbin"},"+"),i("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),i("span",{class:"mopen"},"("),i("span",{class:"mord"},"−"),i("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"F"),i("span",{class:"mord mathnormal"},"a"),i("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"r"),i("span",{class:"mclose"},")")])])]),i("span",{class:"vlist-s"},"​")]),i("span",{class:"vlist-r"},[i("span",{class:"vlist",style:{height:"0.686em"}},[i("span")])])])]),i("span",{class:"mclose nulldelimiter"})])])])])])],-1)),i("p",null,[l[72]||(l[72]=s("知道了视锥体中心点的Z坐标，那么我们只需要将视锥体平移 ",-1)),a(n,{color:"red"},{default:k(()=>[...l[71]||(l[71]=[i("code",null,"-((−𝑁𝑒𝑎𝑟) +(−𝐹𝑎𝑟) /2)",-1)])]),_:1}),l[73]||(l[73]=s(" 个单位即可",-1))]),l[1722]||(l[1722]=i("p",null,"所以，该平移矩阵为:",-1)),l[1723]||(l[1723]=i("p",null,[i("span",{class:"katex-display"},[i("span",{class:"katex"},[i("span",{class:"katex-mathml"},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[i("semantics",null,[i("mtable",{rowspacing:"0.16em",columnalign:"center center center center",columnspacing:"1em"},[i("mtr",null,[i("mtd",null,[i("mstyle",{scriptlevel:"0",displaystyle:"false"},[i("mn",null,"1")])]),i("mtd",null,[i("mstyle",{scriptlevel:"0",displaystyle:"false"},[i("mn",null,"0")])]),i("mtd",null,[i("mstyle",{scriptlevel:"0",displaystyle:"false"},[i("mn",null,"0")])]),i("mtd",null,[i("mstyle",{scriptlevel:"0",displaystyle:"false"},[i("mn",null,"0")])])]),i("mtr",null,[i("mtd",null,[i("mstyle",{scriptlevel:"0",displaystyle:"false"},[i("mn",null,"0")])]),i("mtd",null,[i("mstyle",{scriptlevel:"0",displaystyle:"false"},[i("mn",null,"1")])]),i("mtd",null,[i("mstyle",{scriptlevel:"0",displaystyle:"false"},[i("mn",null,"0")])]),i("mtd",null,[i("mstyle",{scriptlevel:"0",displaystyle:"false"},[i("mn",null,"0")])])]),i("mtr",null,[i("mtd",null,[i("mstyle",{scriptlevel:"0",displaystyle:"false"},[i("mn",null,"0")])]),i("mtd",null,[i("mstyle",{scriptlevel:"0",displaystyle:"false"},[i("mn",null,"0")])]),i("mtd",null,[i("mstyle",{scriptlevel:"0",displaystyle:"false"},[i("mn",null,"1")])]),i("mtd",null,[i("mstyle",{scriptlevel:"0",displaystyle:"false"},[i("mfrac",null,[i("mrow",null,[i("mi",null,"𝐹"),i("mi",null,"𝑎"),i("mi",null,"𝑟"),i("mo",null,"+"),i("mi",null,"𝑁"),i("mi",null,"𝑒"),i("mi",null,"𝑎"),i("mi",null,"𝑟")]),i("mn",null,"2")])])])]),i("mtr",null,[i("mtd",null,[i("mstyle",{scriptlevel:"0",displaystyle:"false"},[i("mn",null,"0")])]),i("mtd",null,[i("mstyle",{scriptlevel:"0",displaystyle:"false"},[i("mn",null,"0")])]),i("mtd",null,[i("mstyle",{scriptlevel:"0",displaystyle:"false"},[i("mn",null,"0")])]),i("mtd",null,[i("mstyle",{scriptlevel:"0",displaystyle:"false"},[i("mn",null,"1")])])])]),i("annotation",{encoding:"application/x-tex"},"\\begin{matrix} 1 & 0 & 0 & 0\\\\ 0 & 1 & 0 & 0\\\\ 0 & 0 & 1 & \\frac{𝐹𝑎𝑟+𝑁𝑒𝑎𝑟 }{2}\\\\ 0 & 0 & 0 & 1 \\end{matrix} ")])])]),i("span",{class:"katex-html","aria-hidden":"true"},[i("span",{class:"base"},[i("span",{class:"strut",style:{height:"4.8323em","vertical-align":"-2.1662em"}}),i("span",{class:"mord"},[i("span",{class:"mtable"},[i("span",{class:"col-align-c"},[i("span",{class:"vlist-t vlist-t2"},[i("span",{class:"vlist-r"},[i("span",{class:"vlist",style:{height:"2.6662em"}},[i("span",{style:{top:"-4.8262em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"1")])]),i("span",{style:{top:"-3.6262em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"0")])]),i("span",{style:{top:"-2.3938em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"0")])]),i("span",{style:{top:"-1.1938em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"0")])])]),i("span",{class:"vlist-s"},"​")]),i("span",{class:"vlist-r"},[i("span",{class:"vlist",style:{height:"2.1662em"}},[i("span")])])])]),i("span",{class:"arraycolsep",style:{width:"0.5em"}}),i("span",{class:"arraycolsep",style:{width:"0.5em"}}),i("span",{class:"col-align-c"},[i("span",{class:"vlist-t vlist-t2"},[i("span",{class:"vlist-r"},[i("span",{class:"vlist",style:{height:"2.6662em"}},[i("span",{style:{top:"-4.8262em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"0")])]),i("span",{style:{top:"-3.6262em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"1")])]),i("span",{style:{top:"-2.3938em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"0")])]),i("span",{style:{top:"-1.1938em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"0")])])]),i("span",{class:"vlist-s"},"​")]),i("span",{class:"vlist-r"},[i("span",{class:"vlist",style:{height:"2.1662em"}},[i("span")])])])]),i("span",{class:"arraycolsep",style:{width:"0.5em"}}),i("span",{class:"arraycolsep",style:{width:"0.5em"}}),i("span",{class:"col-align-c"},[i("span",{class:"vlist-t vlist-t2"},[i("span",{class:"vlist-r"},[i("span",{class:"vlist",style:{height:"2.6662em"}},[i("span",{style:{top:"-4.8262em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"0")])]),i("span",{style:{top:"-3.6262em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"0")])]),i("span",{style:{top:"-2.3938em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"1")])]),i("span",{style:{top:"-1.1938em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"0")])])]),i("span",{class:"vlist-s"},"​")]),i("span",{class:"vlist-r"},[i("span",{class:"vlist",style:{height:"2.1662em"}},[i("span")])])])]),i("span",{class:"arraycolsep",style:{width:"0.5em"}}),i("span",{class:"arraycolsep",style:{width:"0.5em"}}),i("span",{class:"col-align-c"},[i("span",{class:"vlist-t vlist-t2"},[i("span",{class:"vlist-r"},[i("span",{class:"vlist",style:{height:"2.6662em"}},[i("span",{style:{top:"-4.8262em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"0")])]),i("span",{style:{top:"-3.6262em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"0")])]),i("span",{style:{top:"-2.3938em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},[i("span",{class:"mopen nulldelimiter"}),i("span",{class:"mfrac"},[i("span",{class:"vlist-t vlist-t2"},[i("span",{class:"vlist-r"},[i("span",{class:"vlist",style:{height:"0.8723em"}},[i("span",{style:{top:"-2.655em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"sizing reset-size6 size3 mtight"},[i("span",{class:"mord mtight"},[i("span",{class:"mord mtight"},"2")])])]),i("span",{style:{top:"-3.23em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),i("span",{style:{top:"-3.394em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"sizing reset-size6 size3 mtight"},[i("span",{class:"mord mtight"},[i("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.13889em"}},"F"),i("span",{class:"mord mathnormal mtight"},"a"),i("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.02778em"}},"r"),i("span",{class:"mbin mtight"},"+"),i("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.10903em"}},"N"),i("span",{class:"mord mathnormal mtight"},"e"),i("span",{class:"mord mathnormal mtight"},"a"),i("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.02778em"}},"r")])])])]),i("span",{class:"vlist-s"},"​")]),i("span",{class:"vlist-r"},[i("span",{class:"vlist",style:{height:"0.345em"}},[i("span")])])])]),i("span",{class:"mclose nulldelimiter"})])])]),i("span",{style:{top:"-1.1938em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"1")])])]),i("span",{class:"vlist-s"},"​")]),i("span",{class:"vlist-r"},[i("span",{class:"vlist",style:{height:"2.1662em"}},[i("span")])])])])])])])])])])],-1)),a(n,{color:"red"},{default:k(()=>[...l[74]||(l[74]=[s("**第二步：将长方体视锥体的xyz坐标范围映射到(-1,1)长宽高为2的正方体中**",-1)])]),_:1}),l[1724]||(l[1724]=i("p",null,"可以得到观察空间中的xyz和齐次坐标系中xyz的关系如下图:",-1)),a(h,{face:"shader/坐标变换:观察空间中的xyz和齐次坐标系中xyz的关系"}),l[1725]||(l[1725]=i("p",null,"根据这些关系图，我们可以得到一些公式:",-1)),a(h,{face:"shader/坐标变换:观察空间中的xyz和齐次坐标系中xyz的关系2"}),l[1726]||(l[1726]=i("p",null,"因此，根据我们的推论，这一步的变换其实就是一个缩放变换，因此，我们可以根据刚才推导的公式",-1)),l[1727]||(l[1727]=i("p",null,"获得目标缩放矩阵",-1)),a(h,{face:"shader/坐标变换:目标缩放矩阵"}),l[1728]||(l[1728]=i("blockquote",null,[i("p",null,"正交投影变换矩阵")],-1)),l[1729]||(l[1729]=i("p",null,"我们现在得到了两步的对应平移平移矩阵和缩放矩阵，我们将其进行乘法计算后，便可以得到",-1)),a(n,{color:"red"},{default:k(()=>[...l[75]||(l[75]=[s("**将摄像机视锥体的 正交投影 空间 转换到 齐次坐标裁剪空间 时的 变换矩阵**",-1)])]),_:1}),a(h,{face:"shader/坐标变换:正交投影 空间 转换到 齐次坐标裁剪空间 时的 变换矩阵"}),l[1730]||(l[1730]=i("hr",null,null,-1)),l[1731]||(l[1731]=i("h4",{id:"_2-透视投影",tabindex:"-1"},[s("2. 透视投影 "),i("a",{class:"header-anchor",href:"#_2-透视投影","aria-label":'Permalink to "2. 透视投影"'},"​")],-1)),l[1732]||(l[1732]=i("blockquote",null,[i("p",null,"目标")],-1)),a(n,{color:"red"},{default:k(()=>[...l[76]||(l[76]=[s("将摄像机视锥体的 透视投影 转换到 齐次坐标系 时的 **变换矩阵**",-1)])]),_:1}),a(h,{face:"shader/坐标变换:透视投影 转换到 齐次坐标系 时的 变换矩阵"}),l[1733]||(l[1733]=i("blockquote",null,[i("p",null,"步骤")],-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[77]||(l[77]=[s("将透视视锥体变成一个长方体 ",-1)])]),_:1}),a(n,{color:"gray"},{default:k(()=>[...l[78]||(l[78]=[s("将该长方体进行正交投影变换的操作 ",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[79]||(l[79]=[s("将视锥体中心位移到观察空间原点中心 ",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[80]||(l[80]=[s("将长方体视锥体的xyz坐标范围映射到(-1,1)长宽高为2的正方体中",-1)])]),_:1})])]),a(h,{face:"shader/坐标变换:透视投影步骤"}),l[1734]||(l[1734]=i("blockquote",null,[i("p",null,"Unity中透视投影重要参数")],-1)),a(n,{color:"blue"},{default:k(()=>[...l[81]||(l[81]=[s("Projection：该参数为Perspective时，为透视摄像机 ",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[82]||(l[82]=[s("FOV（Field of View）：决定视锥开口角度 ",-1)])]),_:1}),a(n,{color:"blue"},{default:k(()=>[...l[83]||(l[83]=[s("Clipping Planes：裁剪平面 ",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[84]||(l[84]=[s("Near：近裁剪面离摄像机的距离 ",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[85]||(l[85]=[s("Far：远裁剪面离摄像机的距离",-1)])]),_:1}),a(h,{face:"shader/坐标变换:Unity中透视投影重要参数"}),a(h,{face:"shader/坐标变换:Unity中透视投影重要参数2"}),l[1735]||(l[1735]=i("p",null,"利用已知参数，获取到远近裁剪面的高度",-1)),l[1736]||(l[1736]=i("p",null,"已知：",-1)),l[1737]||(l[1737]=i("p",null,[i("strong",null,"Near：近裁剪面离摄像机的距离")],-1)),l[1738]||(l[1738]=i("p",null,[i("strong",null,"Far：远裁剪面离摄像机的距离")],-1)),l[1739]||(l[1739]=i("p",null,[i("strong",null,"FOV（Field of View）：决定视锥开口角度")],-1)),a(n,{color:"red"},{default:k(()=>[...l[86]||(l[86]=[s("可得： ",-1)])]),_:1}),l[1740]||(l[1740]=i("p",null,[i("span",{class:"katex-display"},[i("span",{class:"katex"},[i("span",{class:"katex-mathml"},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[i("semantics",null,[i("mrow",null,[i("mtext",null,"近裁剪面高"),i("mo",null,"="),i("mn",null,"2"),i("mo",null,"∗"),i("mi",null,"N"),i("mi",null,"e"),i("mi",null,"a"),i("mi",null,"r"),i("mo",null,"∗"),i("mi",null,"t"),i("mi",null,"a"),i("mi",null,"n"),i("mfrac",null,[i("mrow",null,[i("mo",{stretchy:"false"},"("),i("mi",null,"F"),i("mi",null,"O"),i("mi",null,"V"),i("mo",{stretchy:"false"},")")]),i("mn",null,"2")])]),i("annotation",{encoding:"application/x-tex"},"\\text{近裁剪面高} = 2 * Near * tan\\frac{ (FOV)}{2} ")])])]),i("span",{class:"katex-html","aria-hidden":"true"},[i("span",{class:"base"},[i("span",{class:"strut",style:{height:"0.6833em"}}),i("span",{class:"mord text"},[i("span",{class:"mord cjk_fallback"},"近裁剪面高")]),i("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),i("span",{class:"mrel"},"="),i("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),i("span",{class:"base"},[i("span",{class:"strut",style:{height:"0.6444em"}}),i("span",{class:"mord"},"2"),i("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),i("span",{class:"mbin"},"∗"),i("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),i("span",{class:"base"},[i("span",{class:"strut",style:{height:"0.6833em"}}),i("span",{class:"mord mathnormal",style:{"margin-right":"0.10903em"}},"N"),i("span",{class:"mord mathnormal"},"e"),i("span",{class:"mord mathnormal"},"a"),i("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"r"),i("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),i("span",{class:"mbin"},"∗"),i("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),i("span",{class:"base"},[i("span",{class:"strut",style:{height:"2.113em","vertical-align":"-0.686em"}}),i("span",{class:"mord mathnormal"},"t"),i("span",{class:"mord mathnormal"},"an"),i("span",{class:"mord"},[i("span",{class:"mopen nulldelimiter"}),i("span",{class:"mfrac"},[i("span",{class:"vlist-t vlist-t2"},[i("span",{class:"vlist-r"},[i("span",{class:"vlist",style:{height:"1.427em"}},[i("span",{style:{top:"-2.314em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"2")])]),i("span",{style:{top:"-3.23em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),i("span",{style:{top:"-3.677em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mopen"},"("),i("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"FO"),i("span",{class:"mord mathnormal",style:{"margin-right":"0.22222em"}},"V"),i("span",{class:"mclose"},")")])])]),i("span",{class:"vlist-s"},"​")]),i("span",{class:"vlist-r"},[i("span",{class:"vlist",style:{height:"0.686em"}},[i("span")])])])]),i("span",{class:"mclose nulldelimiter"})])])])])])],-1)),l[1741]||(l[1741]=i("p",null,[i("span",{class:"katex-display"},[i("span",{class:"katex"},[i("span",{class:"katex-mathml"},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[i("semantics",null,[i("mrow",null,[i("mtext",null,"远裁剪面高"),i("mo",null,"="),i("mn",null,"2"),i("mo",null,"∗"),i("mi",null,"F"),i("mi",null,"a"),i("mi",null,"r"),i("mo",null,"∗"),i("mi",null,"t"),i("mi",null,"a"),i("mi",null,"n"),i("mfrac",null,[i("mrow",null,[i("mo",{stretchy:"false"},"("),i("mi",null,"F"),i("mi",null,"O"),i("mi",null,"V"),i("mo",{stretchy:"false"},")")]),i("mn",null,"2")])]),i("annotation",{encoding:"application/x-tex"},"\\text{远裁剪面高} = 2 * Far * tan\\frac{ (FOV)}{2} ")])])]),i("span",{class:"katex-html","aria-hidden":"true"},[i("span",{class:"base"},[i("span",{class:"strut",style:{height:"0.6833em"}}),i("span",{class:"mord text"},[i("span",{class:"mord cjk_fallback"},"远裁剪面高")]),i("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),i("span",{class:"mrel"},"="),i("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),i("span",{class:"base"},[i("span",{class:"strut",style:{height:"0.6444em"}}),i("span",{class:"mord"},"2"),i("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),i("span",{class:"mbin"},"∗"),i("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),i("span",{class:"base"},[i("span",{class:"strut",style:{height:"0.6833em"}}),i("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"F"),i("span",{class:"mord mathnormal"},"a"),i("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"r"),i("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),i("span",{class:"mbin"},"∗"),i("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),i("span",{class:"base"},[i("span",{class:"strut",style:{height:"2.113em","vertical-align":"-0.686em"}}),i("span",{class:"mord mathnormal"},"t"),i("span",{class:"mord mathnormal"},"an"),i("span",{class:"mord"},[i("span",{class:"mopen nulldelimiter"}),i("span",{class:"mfrac"},[i("span",{class:"vlist-t vlist-t2"},[i("span",{class:"vlist-r"},[i("span",{class:"vlist",style:{height:"1.427em"}},[i("span",{style:{top:"-2.314em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"2")])]),i("span",{style:{top:"-3.23em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),i("span",{style:{top:"-3.677em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mopen"},"("),i("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"FO"),i("span",{class:"mord mathnormal",style:{"margin-right":"0.22222em"}},"V"),i("span",{class:"mclose"},")")])])]),i("span",{class:"vlist-s"},"​")]),i("span",{class:"vlist-r"},[i("span",{class:"vlist",style:{height:"0.686em"}},[i("span")])])])]),i("span",{class:"mclose nulldelimiter"})])])])])])],-1)),l[1742]||(l[1742]=i("p",null,[i("span",{class:"katex-display"},[i("span",{class:"katex"},[i("span",{class:"katex-mathml"},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[i("semantics",null,[i("mrow",null,[i("mtext",null,"近裁剪面宽"),i("mo",null,"="),i("mi",null,"A"),i("mi",null,"s"),i("mi",null,"p"),i("mi",null,"e"),i("mi",null,"c"),i("mi",null,"t"),i("mo",null,"∗"),i("mtext",null,"近裁剪面高"),i("mo",null,"="),i("mi",null,"A"),i("mi",null,"s"),i("mi",null,"p"),i("mi",null,"e"),i("mi",null,"c"),i("mi",null,"t"),i("mo",null,"∗"),i("mn",null,"2"),i("mo",null,"∗"),i("mi",null,"N"),i("mi",null,"e"),i("mi",null,"a"),i("mi",null,"r"),i("mo",null,"∗"),i("mi",null,"t"),i("mi",null,"a"),i("mi",null,"n"),i("mfrac",null,[i("mrow",null,[i("mo",{stretchy:"false"},"("),i("mi",null,"F"),i("mi",null,"O"),i("mi",null,"V"),i("mo",{stretchy:"false"},")")]),i("mn",null,"2")])]),i("annotation",{encoding:"application/x-tex"},"\\text{近裁剪面宽} = Aspect *\\text{近裁剪面高} = Aspect * 2 * Near *tan\\frac{ (FOV)}{2} ")])])]),i("span",{class:"katex-html","aria-hidden":"true"},[i("span",{class:"base"},[i("span",{class:"strut",style:{height:"0.6833em"}}),i("span",{class:"mord text"},[i("span",{class:"mord cjk_fallback"},"近裁剪面宽")]),i("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),i("span",{class:"mrel"},"="),i("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),i("span",{class:"base"},[i("span",{class:"strut",style:{height:"0.8778em","vertical-align":"-0.1944em"}}),i("span",{class:"mord mathnormal"},"A"),i("span",{class:"mord mathnormal"},"s"),i("span",{class:"mord mathnormal"},"p"),i("span",{class:"mord mathnormal"},"ec"),i("span",{class:"mord mathnormal"},"t"),i("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),i("span",{class:"mbin"},"∗"),i("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),i("span",{class:"base"},[i("span",{class:"strut",style:{height:"0.6833em"}}),i("span",{class:"mord text"},[i("span",{class:"mord cjk_fallback"},"近裁剪面高")]),i("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),i("span",{class:"mrel"},"="),i("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),i("span",{class:"base"},[i("span",{class:"strut",style:{height:"0.8778em","vertical-align":"-0.1944em"}}),i("span",{class:"mord mathnormal"},"A"),i("span",{class:"mord mathnormal"},"s"),i("span",{class:"mord mathnormal"},"p"),i("span",{class:"mord mathnormal"},"ec"),i("span",{class:"mord mathnormal"},"t"),i("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),i("span",{class:"mbin"},"∗"),i("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),i("span",{class:"base"},[i("span",{class:"strut",style:{height:"0.6444em"}}),i("span",{class:"mord"},"2"),i("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),i("span",{class:"mbin"},"∗"),i("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),i("span",{class:"base"},[i("span",{class:"strut",style:{height:"0.6833em"}}),i("span",{class:"mord mathnormal",style:{"margin-right":"0.10903em"}},"N"),i("span",{class:"mord mathnormal"},"e"),i("span",{class:"mord mathnormal"},"a"),i("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"r"),i("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),i("span",{class:"mbin"},"∗"),i("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),i("span",{class:"base"},[i("span",{class:"strut",style:{height:"2.113em","vertical-align":"-0.686em"}}),i("span",{class:"mord mathnormal"},"t"),i("span",{class:"mord mathnormal"},"an"),i("span",{class:"mord"},[i("span",{class:"mopen nulldelimiter"}),i("span",{class:"mfrac"},[i("span",{class:"vlist-t vlist-t2"},[i("span",{class:"vlist-r"},[i("span",{class:"vlist",style:{height:"1.427em"}},[i("span",{style:{top:"-2.314em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"2")])]),i("span",{style:{top:"-3.23em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),i("span",{style:{top:"-3.677em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mopen"},"("),i("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"FO"),i("span",{class:"mord mathnormal",style:{"margin-right":"0.22222em"}},"V"),i("span",{class:"mclose"},")")])])]),i("span",{class:"vlist-s"},"​")]),i("span",{class:"vlist-r"},[i("span",{class:"vlist",style:{height:"0.686em"}},[i("span")])])])]),i("span",{class:"mclose nulldelimiter"})])])])])])],-1)),l[1743]||(l[1743]=i("p",null,[i("span",{class:"katex-display"},[i("span",{class:"katex"},[i("span",{class:"katex-mathml"},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[i("semantics",null,[i("mrow",null,[i("mtext",null,"远裁剪面宽"),i("mo",null,"="),i("mi",null,"A"),i("mi",null,"s"),i("mi",null,"p"),i("mi",null,"e"),i("mi",null,"c"),i("mi",null,"t"),i("mo",null,"∗"),i("mtext",null,"远裁剪面高"),i("mo",null,"="),i("mi",null,"A"),i("mi",null,"s"),i("mi",null,"p"),i("mi",null,"e"),i("mi",null,"c"),i("mi",null,"t"),i("mo",null,"∗"),i("mn",null,"2"),i("mo",null,"∗"),i("mi",null,"F"),i("mi",null,"a"),i("mi",null,"r"),i("mo",null,"∗"),i("mi",null,"t"),i("mi",null,"a"),i("mi",null,"n"),i("mfrac",null,[i("mrow",null,[i("mo",{stretchy:"false"},"("),i("mi",null,"F"),i("mi",null,"O"),i("mi",null,"V"),i("mo",{stretchy:"false"},")")]),i("mn",null,"2")])]),i("annotation",{encoding:"application/x-tex"},"\\text{远裁剪面宽} = Aspect *\\text{远裁剪面高} = Aspect * 2 * Far *tan\\frac{ (FOV)}{2} ")])])]),i("span",{class:"katex-html","aria-hidden":"true"},[i("span",{class:"base"},[i("span",{class:"strut",style:{height:"0.6833em"}}),i("span",{class:"mord text"},[i("span",{class:"mord cjk_fallback"},"远裁剪面宽")]),i("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),i("span",{class:"mrel"},"="),i("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),i("span",{class:"base"},[i("span",{class:"strut",style:{height:"0.8778em","vertical-align":"-0.1944em"}}),i("span",{class:"mord mathnormal"},"A"),i("span",{class:"mord mathnormal"},"s"),i("span",{class:"mord mathnormal"},"p"),i("span",{class:"mord mathnormal"},"ec"),i("span",{class:"mord mathnormal"},"t"),i("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),i("span",{class:"mbin"},"∗"),i("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),i("span",{class:"base"},[i("span",{class:"strut",style:{height:"0.6833em"}}),i("span",{class:"mord text"},[i("span",{class:"mord cjk_fallback"},"远裁剪面高")]),i("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),i("span",{class:"mrel"},"="),i("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),i("span",{class:"base"},[i("span",{class:"strut",style:{height:"0.8778em","vertical-align":"-0.1944em"}}),i("span",{class:"mord mathnormal"},"A"),i("span",{class:"mord mathnormal"},"s"),i("span",{class:"mord mathnormal"},"p"),i("span",{class:"mord mathnormal"},"ec"),i("span",{class:"mord mathnormal"},"t"),i("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),i("span",{class:"mbin"},"∗"),i("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),i("span",{class:"base"},[i("span",{class:"strut",style:{height:"0.6444em"}}),i("span",{class:"mord"},"2"),i("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),i("span",{class:"mbin"},"∗"),i("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),i("span",{class:"base"},[i("span",{class:"strut",style:{height:"0.6833em"}}),i("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"F"),i("span",{class:"mord mathnormal"},"a"),i("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"r"),i("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),i("span",{class:"mbin"},"∗"),i("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),i("span",{class:"base"},[i("span",{class:"strut",style:{height:"2.113em","vertical-align":"-0.686em"}}),i("span",{class:"mord mathnormal"},"t"),i("span",{class:"mord mathnormal"},"an"),i("span",{class:"mord"},[i("span",{class:"mopen nulldelimiter"}),i("span",{class:"mfrac"},[i("span",{class:"vlist-t vlist-t2"},[i("span",{class:"vlist-r"},[i("span",{class:"vlist",style:{height:"1.427em"}},[i("span",{style:{top:"-2.314em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mord"},"2")])]),i("span",{style:{top:"-3.23em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),i("span",{style:{top:"-3.677em"}},[i("span",{class:"pstrut",style:{height:"3em"}}),i("span",{class:"mord"},[i("span",{class:"mopen"},"("),i("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"FO"),i("span",{class:"mord mathnormal",style:{"margin-right":"0.22222em"}},"V"),i("span",{class:"mclose"},")")])])]),i("span",{class:"vlist-s"},"​")]),i("span",{class:"vlist-r"},[i("span",{class:"vlist",style:{height:"0.686em"}},[i("span")])])])]),i("span",{class:"mclose nulldelimiter"})])])])])])],-1)),l[1744]||(l[1744]=i("blockquote",null,[i("p",null,"透视投影变换矩阵")],-1)),a(n,{color:"red"},{default:k(()=>[...l[87]||(l[87]=[s("**第一步：将透视视锥体变成一个长方体**",-1)])]),_:1}),l[1745]||(l[1745]=i("p",null,"我们需要满足3个特性",-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[88]||(l[88]=[s("近裁剪面上的所有点保持不变",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[89]||(l[89]=[s("远裁剪面的z值不变，远裁剪面的中心点不变 ",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[90]||(l[90]=[s("远裁剪面宽高映射成近裁剪面的宽高",-1)])]),_:1})])]),a(h,{face:"shader/坐标变换:透视投影变换矩阵"}),a(h,{face:"shader/坐标变换:透视投影变换矩阵2"}),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[91]||(l[91]=[s("近裁剪面上的所有点保持不变",-1)])]),_:1}),l[92]||(l[92]=i("p",null,"近裁剪面上的点 (x,y,Near,1) 变换后还是 (x,y,Near,1)",-1)),a(h,{face:"shader/坐标变换:近裁剪面上的所有点保持不变"}),l[93]||(l[93]=i("p",null,"其中，x和y等于0时，相当于就是近裁剪面的中心点，也满足下面的等式",-1)),a(h,{face:"shader/坐标变换:近裁剪面上的所有点保持不变2"})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[94]||(l[94]=[s("远裁剪面的z值不变，远裁剪面的中心点不变 ",-1)])]),_:1}),l[95]||(l[95]=i("p",null,"相当于Z 轴与远裁剪面的",-1)),l[96]||(l[96]=i("p",null,"交点（0,0,Far,1）变换后仍为（0,0,Far,1）",-1)),a(h,{face:"shader/坐标变换:将透视视锥体变成一个长方体3"})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[97]||(l[97]=[s("远裁剪面宽高映射成近裁剪面的宽高",-1)])]),_:1}),l[98]||(l[98]=i("p",null,"这一步相对来说复杂一些，我们需要利用之前学习的知识点 来进行一些推导",-1)),l[99]||(l[99]=i("p",null,[i("strong",null,"回顾知识点"),s("：")],-1)),l[100]||(l[100]=i("ol",null,[i("li",null,"视锥体内顶点和原点连接，在近裁剪面的交点为投影点"),i("li",null,[s("相似三角形的对应边成比例"),i("code",null," a/a’= b/b’= c/c’")])],-1))])]),a(h,{face:"shader/坐标变换:远裁剪面宽高映射成近裁剪面的宽高"}),a(h,{face:"shader/坐标变换:远裁剪面宽高映射成近裁剪面的宽高2"}),i("p",null,[l[102]||(l[102]=s("通过此推导我们发现，视锥体内的所有点的x、y坐标 都经过了同样的缩放，",-1)),a(n,{color:"red"},{default:k(()=>[...l[101]||(l[101]=[i("strong",null,"缩放因子为：",-1),s(),i("code",null,"−𝑁ear/𝑍",-1)])]),_:1})]),a(n,{color:"red"},{default:k(()=>[...l[103]||(l[103]=[s("其中 Near是近裁剪面离摄像机的距离，Z为视锥体中点的Z坐标",-1)])]),_:1}),l[1746]||(l[1746]=i("p",null,"因此我们已推导出：",-1)),a(h,{face:"shader/坐标变换:远裁剪面宽高映射成近裁剪面的宽高3"}),l[1747]||(l[1747]=i("p",null,"现在我们得到了三个和变换矩阵有关的等式",-1)),a(h,{face:"shader/坐标变换:了三个和变换矩阵有关的等式"}),l[1748]||(l[1748]=i("p",null,[i("strong",null,"补充知识点：")],-1)),a(n,{color:"blue"},{default:k(()=>[...l[104]||(l[104]=[s("四维齐次坐标中 乘以或者除以一个非零的数（标量）， 所映射的三维坐标始终是同一个坐标",-1)])]),_:1}),a(h,{face:"shader/坐标变换:df0a491a49563bd33613ccb06baae5e0"}),l[1749]||(l[1749]=i("p",null,"我们只需要推导出该变换矩阵的第三行的构成，就能够得到我们的目标：",-1)),l[1750]||(l[1750]=i("p",null,"将透视视锥体变成一个长方体的变换矩阵",-1)),l[1751]||(l[1751]=i("p",null,"因此，我们可以假设",-1)),a(h,{face:"shader/坐标变换:d38b27800029b6ff1dd4c26bef182231"}),a(h,{face:"shader/坐标变换:d3a8b8fd6c32b197edcbe6999bfd5b39"}),a(h,{face:"shader/坐标变换:6ddef20f2443818361eda7ad0aee3126"}),l[1752]||(l[1752]=i("p",null,"通过",-1)),a(n,{color:"red"},{default:k(()=>[...l[105]||(l[105]=[s("`-aNear + b = -Near²`",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[106]||(l[106]=[s("`-aFar + b = -Far²` ",-1)])]),_:1}),l[1753]||(l[1753]=i("p",null,"可以推导出 a、b的值",-1)),i("p",null,[l[108]||(l[108]=i("code",null,"-aNaer + aFar = Far² - Near² => a(Far – Near) = (Far + Near)(Far - Near) => ",-1)),a(n,{color:"red"},{default:k(()=>[...l[107]||(l[107]=[i("code",null,"a = Far + Near",-1)])]),_:1})]),i("p",null,[l[110]||(l[110]=i("code",null,"-(Far + Near)Near + b = -Near² => -FarNear – Near² + b = -Near²=> ",-1)),a(n,{color:"red"},{default:k(()=>[...l[109]||(l[109]=[i("code",null,"b = Far * Near",-1)])]),_:1})]),l[1754]||(l[1754]=i("p",null,"因此变换矩阵为",-1)),a(h,{face:"shader/坐标变换:d28ec1e5a06d1be1fe6ef75256ebafe3"}),a(n,{color:"red"},{default:k(()=>[...l[111]||(l[111]=[s("**第二步：将视锥体中心位移到观察空间原点中心**",-1)])]),_:1}),a(h,{face:"shader/坐标变换:eec9b1159a4bdf670d7ab98a353fae89"}),a(n,{color:"red"},{default:k(()=>[...l[112]||(l[112]=[s("**第三步：将长方体视锥体的xyz坐标范围映射到(-1,1)长宽高为2的正方体中**",-1)])]),_:1}),l[1755]||(l[1755]=i("p",null,"我们可以得到观察空间中的xyz和齐次坐标系中xyz的关系如下图",-1)),a(h,{face:"shader/坐标变换:f784dfde456cfa03c61b6b1c4342f5df"}),a(h,{face:"shader/坐标变换:a64d7b4f18f14e25979881bc2cc524c9"}),l[1756]||(l[1756]=i("p",null,"因此，根据我们的推论，这一步的变换其实就是一个缩放变换，因此，我们可以根据刚才推导的公式",-1)),a(h,{face:"shader/坐标变换:6bef041905037f0993cb01a0ae6b4cd0"}),l[1757]||(l[1757]=i("p",null,"我们现在得到了三个变换矩阵，我们将其进行乘法计算后，便可以得到",-1)),a(n,{color:"red"},{default:k(()=>[...l[113]||(l[113]=[s("**将摄像机视锥体的 透视投影 空间 转换到 齐次坐标裁剪空间 时的 变换矩阵**",-1)])]),_:1}),a(h,{face:"shader/坐标变换:53d727b0fffd87cf7bb4851fa97a4396"}),l[1758]||(l[1758]=i("h4",{id:"_3-裁剪空间变换的意义",tabindex:"-1"},[s("3.裁剪空间变换的意义 "),i("a",{class:"header-anchor",href:"#_3-裁剪空间变换的意义","aria-label":'Permalink to "3.裁剪空间变换的意义"'},"​")],-1)),l[1759]||(l[1759]=i("blockquote",null,[i("p",null,"裁剪空间变换的意义")],-1)),l[1760]||(l[1760]=i("p",null,"我们之所以要将观察空间中的顶点等信息变换到裁剪空间中",-1)),l[1761]||(l[1761]=i("p",null,"主要意义，其实我们一开始就提到过",-1)),l[1762]||(l[1762]=i("p",null,[i("strong",null,"是为了让我们可以更通用、便捷的来进行裁剪工作。")],-1)),l[1763]||(l[1763]=i("p",null,"因为如果直接使用视锥体定义的空间来进行裁剪，那不同的视锥体就需要不同的处理过程，",-1)),l[1764]||(l[1764]=i("p",null,"比如正交摄像机的 Size、Near、Far等参数，透视摄像机中的FOV、Near、Far等参数",-1)),l[1765]||(l[1765]=i("p",null,"他们决定了视锥体的体积大小会各不相同，而且对于透视投影的视锥体来说，判断顶点是否在 其范围内相对较麻烦。",-1)),l[1766]||(l[1766]=i("p",null,"**因此前辈们就制定了裁剪空间这一规则，让我们可以更容易的完成裁剪工作， **",-1)),l[1767]||(l[1767]=i("p",null,[i("strong",null,"这也是该变换的意义所在")],-1)),l[1768]||(l[1768]=i("blockquote",null,[i("p",null,"如何决定顶点是否被裁剪")],-1)),a(h,{face:"shader/坐标变换:555df39aa619240b37820a22647da853"}),l[1769]||(l[1769]=i("hr",null,null,-1)),l[1770]||(l[1770]=i("h3",{id:"六、屏幕空间变换",tabindex:"-1"},[s("六、屏幕空间变换 "),i("a",{class:"header-anchor",href:"#六、屏幕空间变换","aria-label":'Permalink to "六、屏幕空间变换"'},"​")],-1)),l[1771]||(l[1771]=i("blockquote",null,[i("p",null,"屏幕空间的意义")],-1)),l[1772]||(l[1772]=i("p",null,"屏幕空间（Screen Space）是计算机图形学中的概念",-1)),a(n,{color:"red"},{default:k(()=>[...l[114]||(l[114]=[s("指渲染结果在屏幕上显示的坐标空间 ",-1)])]),_:1}),l[1773]||(l[1773]=i("p",null,"三维坐标经过一系列转换后会转换到最终的二维屏幕坐标空间中",-1)),l[1774]||(l[1774]=i("p",null,"使得图像可以在屏幕上进行展示。",-1)),a(n,{color:"red"},{default:k(()=>[...l[115]||(l[115]=[s("屏幕空间的主要意义是屏幕空间中对应的位置信息是真正的像素位置，而不是虚拟的三维坐标。 有了相对屏幕空间的坐标位置，才能准确的控制屏幕上像素点的显示效果",-1)])]),_:1}),l[1775]||(l[1775]=i("p",null,"在Unity中",-1)),l[1776]||(l[1776]=i("p",null,"屏幕空间左下角为像素坐标（0,0）点",-1)),l[1777]||(l[1777]=i("p",null,"屏幕空间右上角为像素坐标（分辨率宽，分辨率高）",-1)),a(h,{face:"shader/坐标变换:5dcd6de833170660bb48128e61b40e66"}),l[1778]||(l[1778]=i("blockquote",null,[i("p",null,"屏幕空间变换指什么")],-1)),i("p",null,[l[117]||(l[117]=s("屏幕空间变换指的主要是",-1)),a(n,{color:"red"},{default:k(()=>[...l[116]||(l[116]=[s("将模型空间中的点或向量从裁剪空间中变换到屏幕空间中 它是顶点变换的第四步，就是将 数据 从裁剪空间 → 屏幕空间 进行变换",-1)])]),_:1})]),a(h,{face:"shader/坐标变换:f93a5367898cdab6830f31d004cc46c9"}),i("p",null,[l[119]||(l[119]=s("从图中我们可以看到，主要是将",-1)),a(n,{color:"red"},{default:k(()=>[...l[118]||(l[118]=[s("三维坐标(x,y,z)中的x,y分量映射到屏幕上，而z分量一般会被用于 深度缓冲",-1)])]),_:1}),l[120]||(l[120]=s("，之后用于深度测试等（决定是否被遮挡等）",-1))]),l[1779]||(l[1779]=i("blockquote",null,[i("p",null,"如何进行屏幕空间变换")],-1)),l[1780]||(l[1780]=i("p",null,"屏幕空间变换，可以说是所有空间变换中最简单的一步，我们只需要将齐次裁剪空间（xyz范围 在-1到1之间，长度为2的正方体）中的顶点映射到屏幕坐标即可。我们只需要找到他们的映射关 系即可。",-1)),l[1781]||(l[1781]=i("p",null,[s("首先我们通过上节课知道，正交投影中w分量为1，透视投影中w分量可能为任一数，我们首先 需要进行透视除法，保证裁剪空间中点的数据表达在齐次裁剪空间的范围内。 即，"),i("strong",null,"假设 裁剪空间中的点为（Xclip, Yclip, Zclip, Wclip）")],-1)),l[1782]||(l[1782]=i("p",null,[i("strong",null,"进行透视除法：")],-1)),a(h,{face:"shader/坐标变换:5d3437811917c592eb10ec0ab02545c1"}),l[1783]||(l[1783]=i("p",null,"对于正交投影来说 W 值为1，所以除以1后，xyz也不会改变",-1)),l[1784]||(l[1784]=i("p",null,"对于透视投影来说 W 值为任一值，所以除以W后，XYZ的范围将在-1到1之间，W为1",-1)),l[1785]||(l[1785]=i("p",null,"接着我们来找到齐次裁剪空间和屏幕空间的映射关系",-1)),l[1786]||(l[1786]=i("p",null,"主要就是找到直线的斜率",-1)),a(h,{face:"shader/坐标变换:1ef47586c4b3bba3b3ac83453ea6177b"}),l[1787]||(l[1787]=i("p",null,"那么裁剪空间中的Z和W应该如何处理呢？",-1)),a(h,{face:"shader/坐标变换:b2abddf8de7d74a760366602b0b33e55"}),l[1788]||(l[1788]=i("p",null,"举例：",-1)),l[1789]||(l[1789]=i("p",null,"首先我们还是之前用于举例的顶点来说明",-1)),a(n,{color:"green"},{default:k(()=>[...l[121]||(l[121]=[s("模型空间",-1)])]),_:1}),l[1790]||(l[1790]=s("下的顶点坐标为（",-1)),a(n,{color:"green"},{default:k(()=>[...l[122]||(l[122]=[s("0.63, 0.84, -0.04）",-1)])]),_:1}),l[1791]||(l[1791]=i("p",null,"当模型进行2倍缩放，又进行（0,45,0）的旋转，然后再进行(5,0,5)的平移后",-1)),i("p",null,[l[125]||(l[125]=s("该顶点的",-1)),a(n,{color:"blue"},{default:k(()=>[...l[123]||(l[123]=[s("世界空间",-1)])]),_:1}),l[126]||(l[126]=s("下的坐标为",-1)),a(n,{color:"blue"},{default:k(()=>[...l[124]||(l[124]=[s("（5.834, 1.68, 4.052）",-1)])]),_:1})]),l[1792]||(l[1792]=i("p",null,"摄像机的轴向和坐标为",-1)),i("p",null,[l[129]||(l[129]=s("转换到",-1)),a(n,{color:"orange"},{default:k(()=>[...l[127]||(l[127]=[s("观察空间",-1)])]),_:1}),l[130]||(l[130]=s("后的坐标为",-1)),a(n,{color:"orange"},{default:k(()=>[...l[128]||(l[128]=[s("（4.562, 0.679, -7.722, 1）",-1)])]),_:1})]),l[1793]||(l[1793]=i("p",null,"转换到裁剪空间后的坐标为",-1)),a(n,{color:"red"},{default:k(()=>[...l[131]||(l[131]=[s("正交摄像机：（0.513225, 0.1358, 0.492284, 1） ",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[132]||(l[132]=[s("透视摄像机：（4.446, 1.176, 7.2142, 7.722)",-1)])]),_:1}),a(h,{face:"shader/坐标变换:88bcf881039b7e20850dd60ed9d9e94f"}),l[1794]||(l[1794]=i("p",null,"假设屏幕分辨率为 1920*1080",-1)),l[1795]||(l[1795]=i("p",null,"那么只需要将数据带入公式中计算即可",-1)),i("p",null,[l[134]||(l[134]=s("屏幕坐标（正交摄像机）：",-1)),a(n,{color:"red"},{default:k(()=>[...l[133]||(l[133]=[s("（1452.696, 613.332） ",-1)])]),_:1})]),i("p",null,[l[136]||(l[136]=s("屏幕坐标（透视摄像机）：",-1)),a(n,{color:"red"},{default:k(()=>[...l[135]||(l[135]=[s("（1512.7272, 622.237）",-1)])]),_:1})]),l[1796]||(l[1796]=i("hr",null,null,-1)),l[1797]||(l[1797]=i("h2",{id:"shaderlab语法",tabindex:"-1"},[s("ShaderLab语法 "),i("a",{class:"header-anchor",href:"#shaderlab语法","aria-label":'Permalink to "ShaderLab语法"'},"​")],-1)),l[1798]||(l[1798]=i("h3",{id:"一、unity-shader-和-shader的区别",tabindex:"-1"},[s("一、Unity Shader 和 Shader的区别 "),i("a",{class:"header-anchor",href:"#一、unity-shader-和-shader的区别","aria-label":'Permalink to "一、Unity Shader 和 Shader的区别"'},"​")],-1)),l[1799]||(l[1799]=i("div",{class:"language-tex"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"tex"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader是一个更通用的概念，用于描述图形渲染程序中的着色器程序而Unity Shader是特指在Unity中使用的着色器")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"你可以认为Unity Shader是对Shader的一种封装")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"它是对底层图形渲染技术的封装，它提供了一种叫做ShaderLab的语言")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"来让我们更加轻松的编写和管理着色器")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1800]||(l[1800]=i("h3",{id:"二、unity中的shader",tabindex:"-1"},[s("二、Unity中的Shader "),i("a",{class:"header-anchor",href:"#二、unity中的shader","aria-label":'Permalink to "二、Unity中的Shader"'},"​")],-1)),l[1801]||(l[1801]=i("ol",null,[i("li",null,[i("strong",null,"Standard Surface Shader"),s("（标准曲面着色器） 包含标准光照模型的表面着色器模板")]),i("li",null,[i("strong",null,"Unlit Shader"),s(" 不包含光照的基本顶点/片元着色器")]),i("li",null,[i("strong",null,"Image Effect Shader"),s(" 用于实现屏幕后处理效果的基本模板")]),i("li",null,[i("strong",null,"Compute Shader"),s(" 利用GPU并行计算一些和常规渲染流水线无关的内容")]),i("li",null,[i("strong",null,"Ray Tracing Shader"),s(" 用于实现光线追踪效果的着色器")])],-1)),l[1802]||(l[1802]=i("h3",{id:"三、介绍shaderlab",tabindex:"-1"},[s("三、介绍ShaderLab "),i("a",{class:"header-anchor",href:"#三、介绍shaderlab","aria-label":'Permalink to "三、介绍ShaderLab"'},"​")],-1)),l[1803]||(l[1803]=i("div",{class:"language-tex"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"tex"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Unity Shader是对Shader的一种封装")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"它是对底层图形渲染技术的封装，它提供了一种叫做ShaderLab的语言")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"来让我们更加轻松的编写和管理着色器")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"ShaderLab其实就是Unity自定义的一种语法规则")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"是用于在Untiy中编写和管理着色器的专门的语言")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"它提供了一种结构化的方式来描述Unity着色器的各个部分")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"从而让我们可以更轻松的创建和管理着色器")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"总而言之：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"无论我们编写哪种类型的Shader，或是选择哪种语言去编写Shader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"在Unity中总会通过ShaderLab语言对其进行包装和组织")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"它是Unity自定义的一种语法规则")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1804]||(l[1804]=i("blockquote",null,[i("p",null,"ShaderLab 代码构成")],-1)),l[1805]||(l[1805]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ShaderLab主要由4个部分组成")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".Shader的名字")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".Shader的属性")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 3.1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"~"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"n个子着色器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".备用的Shader")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 第一部分")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"着色器名字"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     //第二部分")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"     Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"       {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"         //材质面板上可以看到的属性")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"     }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     //第三部分")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"     SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"       {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"         //顶点-片段着色器 或 表面着色器 或 固定函数着色器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"     }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"     SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"       {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"         //更加精简的版本")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"         //目的是适配旧设备")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"     }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"     ...."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".可以有n个SubShader代码块")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"     //第四部分")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"     Fallback "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"备用的Shader"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1806]||(l[1806]=i("h3",{id:"四、shader属性",tabindex:"-1"},[s("四、Shader属性 "),i("a",{class:"header-anchor",href:"#四、shader属性","aria-label":'Permalink to "四、Shader属性"'},"​")],-1)),l[1807]||(l[1807]=i("p",null,[s("Shader的属性具有两个"),i("strong",null,"特点")],-1)),l[1808]||(l[1808]=i("ol",null,[i("li",null,"可以在材质面板被编辑"),i("li",null,"可以在后续当作输入变量提供给所有子着色器使用")],-1)),l[1809]||(l[1809]=i("blockquote",null,[i("p",null,"语法")],-1)),l[1810]||(l[1810]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"_Name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Display Name"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", type) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," defaultValue[{ options}]")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"_Name"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 属性名字，规则是需要在前面加一个下划线，方便在之后获取")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Display Name"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 材质面板上显示的名字")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"type"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"属性的类型")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"defaultValue"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"将Shader指定给材质的时候初始化的默认值")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1811]||(l[1811]=i("blockquote",null,[i("p",null,"数值类型属性")],-1)),l[1812]||(l[1812]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".整形")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"_Name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Display Name"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Int) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," number")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".浮点型")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"_Name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Display Name"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Float) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," number")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".范围浮点型")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"_Name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Display Name"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(min, max)) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," number")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"注意：Unity "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Shader中的数值类型属性基本都是浮点型"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(Float)数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"     虽然提供了整数"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(Int)，但是编译时最终都会转换为浮点型")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"     因此我们更多的使用的还是Float类型")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1813]||(l[1813]=i("blockquote",null,[i("p",null,"颜色和向量类型属性")],-1)),l[1814]||(l[1814]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"_Name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Display Name"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (number1, number2, number3, number4)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"注意：颜色值中的RGBA的取值范围是 "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"~"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," （映射0"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"~"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"255"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"_Name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Display Name"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Vector) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (number1, number2, number3, number4)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"注意：向量值中的XYZW的取值范围没有限制")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1815]||(l[1815]=i("blockquote",null,[i("p",null,"贴图纹理类型属性")],-1)),l[1816]||(l[1816]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1.2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 纹理（最常用的纹理，漫反射贴图、法线贴图都属于2D纹理）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"_Name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Display Name"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "defaulttexture"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{ }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"2.2DArray"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 纹理（纹理数组，允许在纹理中存储多层图像数据，每层看做一个2D图像，一般使用脚本创建，较少使用，了解即可）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"_Name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Display Name"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"2DArray"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "defaulttexture"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{ }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".Cube map texture纹理（立方体纹理，由前后左右上下6张有联系的2D贴图拼成的立方体，比如天空盒和反射探针）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"_Name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Display Name"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Cube) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "defaulttexture"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{ }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4.3D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"纹理（一般使用脚本创建，极少使用，了解即可）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"_Name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Display Name"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "defaulttexture"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{ }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"注意：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".关于defaulttexture默认值取值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  不写"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 默认贴图为空")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"       white"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"默认白色贴图（RGBA"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"       black"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": 默认黑色贴图（"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"RGBA"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"       gray"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": 默认灰色贴图（"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"RGBA"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0.5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0.5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0.5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"       bump"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": 默认凸贴图（"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"RGBA"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0.5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0.5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"）,一般用于法线贴图默认贴图")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"       red：默认红色贴图（"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"RGBA"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"）")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".关于默认值后面的 { } ,固定写法（老版本中括号内可以控制固定函数纹理坐标的生成，但是新版本中没有该功能了）")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1817]||(l[1817]=i("h3",{id:"五、subshader",tabindex:"-1"},[s("五、SubShader "),i("a",{class:"header-anchor",href:"#五、subshader","aria-label":'Permalink to "五、SubShader"'},"​")],-1)),l[1818]||(l[1818]=i("blockquote",null,[i("p",null,[i("strong",null,"作用")])],-1)),l[1819]||(l[1819]=i("div",{class:"language-tex"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"tex"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"每一个Shader中都会包含至少一个SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"当Unity想要显示一个物体的时候")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"就会在Shader文件中去检测这些SubShader语句块")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"然后选择第一个能够在当前显卡运行的SubShader进行执行")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"因此在一个Shader当中实现一些高级效果时")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"为了避免在在某些设备上无法执行")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"可能会存在多个SubShader语句块，用于适配这些低端设备")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"SubShader当中包含最终的渲染相关代码，决定了最终的渲染效果")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1820]||(l[1820]=i("blockquote",null,[i("p",null,"构成")],-1)),l[1821]||(l[1821]=i("pre",null,[i("code",null,`SubShader
{
    1.渲染标签
    Tags{ "标签名1" = "标签值1" "标签名2" = "标签值2".....}

    2.渲染状态.....

    3.渲染通道
    Pass
    {
        第一个渲染通道fixed3 color = UNITY_LIGHTMODEL_AMBIENT.rgb * albedo + (lambertColor + specularColor)*atten;
    }
    Pass
    {
        第二个渲染通道
    }
	.............
}

注意：
在SubShader中每定义一个渲染通道Pass，就会让物体执行一次渲染
n个Pass，就会有n次渲染，在实现一些复杂渲染效果时需要使用多个Pass进行组合实现
但是我们要尽量减少它的数量，更多的Pass会增加性能消耗
`)],-1)),l[1822]||(l[1822]=i("blockquote",null,[i("p",null,"片元")],-1)),l[1823]||(l[1823]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//在渲染管线中，片元是指在光栅化阶段生成的像素或像素片段")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//片元是渲染管线中进行像素级别操作和计算的基本单位")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//每个片元代表了屏幕上的一个像素，并且具有位置信息和与之相关的属性")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//比如：颜色、深度值、法线等等")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1824]||(l[1824]=i("h3",{id:"六、tags-渲染标签",tabindex:"-1"},[s("六、Tags (渲染标签) "),i("a",{class:"header-anchor",href:"#六、tags-渲染标签","aria-label":'Permalink to "六、Tags (渲染标签)"'},"​")],-1)),l[1825]||(l[1825]=i("blockquote",null,[i("p",null,"渲染标签的语法结构")],-1)),l[1826]||(l[1826]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"标签名1"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "标签值1"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "标签名2"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "标签值2"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "标签名2"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "标签值2"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"......"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"渲染标签是通过键值对的形式进行声明的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"并且没有数量限制，可以使用任意多个标签")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1827]||(l[1827]=i("blockquote",null,[i("p",null,"渲染队列Queue")],-1)),l[1828]||(l[1828]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"主要作用：确定物体的渲染顺序")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Queue"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "标签值"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"常用Unity预先定义好的渲染队列标签值：")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Background"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(背景)("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"队列号"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1000"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"最早被渲染的物体的队列，一般用来渲染天空盒或者背景")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Queue"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Background"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Geometry"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(几何)("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"队列号"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2000"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"不透明的几何体通常使用该队列，当没有声明渲染队列时，Unity会默认使用这个队列")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Queue"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Geometry"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"AlphaTest"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(透明测试)("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"队列号"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2450"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"有透明通道的，需要进行Alpha测试的几何体会使用该队列")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"当所有Geometry队列实体绘制完后再绘制AlphaTest队列，效率更高")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Queue"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "AlphaTest"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Transparent"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(透明的)("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"队列号"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3000"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"该队列中几何体按照由远到近的顺序进行绘制，半透明物体的渲染队列，所有进行透明混合的几何体都应该使用该队列")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"比如：玻璃材质，粒子特效等")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Queue"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Transparent"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Overlay"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(覆盖)("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"队列号"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4000"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"用是放在最后渲染的队列，于叠加渲染的效果，比如镜头光晕等")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Queue"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Overlay"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"6"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".自定义队列")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"基于Unity预先定义好的这些渲染队列标签来进行加减运算来定义自己的渲染队列")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"比如：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Queue"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Geometry+1"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"代表的队列号就是 "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2001")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Queue"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Transparent-1"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"代表的队列号就是 "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2999")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"自定义队列在一些特殊情况下，特别有用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"比如 一些水的渲染 想要在不透明物体之后，半透明物体之前进行渲染，就可以自定义")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"注意：自定义队列只能基于预先定义好的各类型进行计算，不能在Shader中直接赋值数字")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"如果实在想要直接赋值数字，可以在材质面板中进行设置")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1829]||(l[1829]=i("blockquote",null,[i("p",null,"渲染类型RenderType")],-1)),l[1830]||(l[1830]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"主要作用：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"对着色器进行分类，之后可以用于着色器替换功能")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"摄像机上有对应的API，可以指定这个渲染类型来替换成别的着色器")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"RenderType"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "标签值"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"常用Unity预先定义好的渲染类型标签值：")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Opaque"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(不透明的)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"用于普通Shader，比如：不透明、自发光、反射等")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Transparent"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(透明的)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"用于半透明Shader，比如：透明、粒子")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"TransparentCutout"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(透明切割)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"用于透明测试Shader，比如：植物叶子")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Background"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(背景)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"用于天空盒Shader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Overlay"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(覆盖)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"用于GUI纹理、Halo（光环）、Flare（光晕）")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"了解即可")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"6"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".TreeOpaque")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"用于地形系统中的树干")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"7"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".TreeTransparentCutout")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"用于地形系统中的树叶")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"8"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".TreeBillboard")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"用于地形系统中的Billboarded树")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"9"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".Grass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"用于地形系统中的草")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"10"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".GrassBillboard")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"用于地形系统中的Billboarded草")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1831]||(l[1831]=i("blockquote",null,[i("p",null,"禁用批处理")],-1)),l[1832]||(l[1832]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"主要作用：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"当使用批处理时，模型会被变换到世界空间中，模型空间会被丢弃")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"这可能会导致某些使用模型空间顶点数据的Shader最终无法实现想要的结果")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"可以通过开启禁用批处理来解决该问题")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"总是禁用批处理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"DisableBatching"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "True"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"不禁用批处理（默认值）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"DisableBatching"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "False"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"了解即可")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"LOD效果激活时才会禁用批处理，主要用于地形系统上的树")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"DisableBatching"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "LODFading"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1833]||(l[1833]=i("blockquote",null,[i("p",null,"禁用阴影投影")],-1)),l[1834]||(l[1834]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"主要作用：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"控制该SubShader的物体是否会投射阴影")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"不投射阴影")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ForceNoShadowCasting"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "True"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"投射阴影（默认值）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ForceNoShadowCasting"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "False"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"English"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"--")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Force"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":强制")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shadow：阴影")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Casting：投射")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1835]||(l[1835]=i("blockquote",null,[i("p",null,"忽略投影机")],-1)),l[1836]||(l[1836]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"主要作用：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"物体是否受到Projector（投影机）的投射")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Projector是Unity中的一个功能")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"忽略Projector（一般半透明Shader需要开启该标签）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"IgnoreProjector"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "True"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"不忽略Projector（默认值）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"IgnoreProjector"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "False"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1837]||(l[1837]=i("blockquote",null,[i("p",null,"其他标签")],-1)),l[1838]||(l[1838]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".是否用于精灵")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 想要将该SubShader用于Sprite时，将该标签设置为False")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"CanUseSpriteAtlas"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "False"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".预览类型")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 材质在预览窗口默认为球形，如果想要改变为平面或天空盒")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 只需要改变预览标签即可")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 平面")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"PreviewType"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Panel"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 天空盒")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"PreviewType"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "SkyBox"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1839]||(l[1839]=i("h3",{id:"七、渲染状态",tabindex:"-1"},[s("七、渲染状态 "),i("a",{class:"header-anchor",href:"#七、渲染状态","aria-label":'Permalink to "七、渲染状态"'},"​")],-1)),l[1840]||(l[1840]=i("blockquote",null,[i("p",null,"语法结构")],-1)),l[1841]||(l[1841]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"渲染状态 状态类型")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"渲染状态是通过 渲染状态关键词"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"空格 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 状态类型 决定的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"如果存在多个渲染状态")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"可以通过空行隔开")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1842]||(l[1842]=i("h4",{id:"_1-剔除方式",tabindex:"-1"},[s("1.剔除方式 "),i("a",{class:"header-anchor",href:"#_1-剔除方式","aria-label":'Permalink to "1.剔除方式"'},"​")],-1)),l[1843]||(l[1843]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"主要作用：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"设置多边形的剔除方式，有背面剔除、正面剔除、不剔除")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"所谓的剔除，就是不渲染，背面剔除就是背面不渲染，正面剔除就是正面不渲染，不剔除就是都渲染")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Cull Back 背面剔除")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Cull Front    正面剔除")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Cull Off 不剔除")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"不设置的话，默认为背面剔除")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"一般情况下，我们需要两面渲染时，会设置为不剔除")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1844]||(l[1844]=i("h4",{id:"_2-深度缓冲",tabindex:"-1"},[s("2."),i("strong",null,"深度缓冲"),s(),i("a",{class:"header-anchor",href:"#_2-深度缓冲","aria-label":'Permalink to "2.**深度缓冲**"'},"​")],-1)),l[1845]||(l[1845]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"主要作用：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"是否写入深度缓冲")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"深度缓冲（Depth Buffer）：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"深度缓冲是一个与屏幕像素对应的缓冲区，用于存储每个像素的深度值（距离相机的距离）。")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"在渲染场景之前，深度缓冲被初始化为最大深度值，表示所有像素都在相机之外。")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"最后留在深度缓冲中的信息会被渲染")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"ZWrite On 	写入深度缓冲")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"ZWrite Off  不写入深度缓冲")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"不设置的话，默认为写入")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"一般情况下，我们在做透明等特殊效果时，会设置为不写入")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1846]||(l[1846]=i("h4",{id:"_3-深度测试",tabindex:"-1"},[s("3."),i("strong",null,"深度测试"),s(),i("a",{class:"header-anchor",href:"#_3-深度测试","aria-label":'Permalink to "3.**深度测试**"'},"​")],-1)),a(h,{face:"shader:深度测试图"}),l[1847]||(l[1847]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"主要作用：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"设置深度测试的对比方式")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"深度测试的主要目的是确保在渲染时，像素按照正确的深度（距离相机的距离）顺序进行绘制，")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"从而创建正确的遮挡关系和透视效果")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"在渲染场景之前，深度缓冲被初始化为最大深度值，表示所有像素都在相机之外。")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"在渲染过程中，对于每个像素，深度测试会将当前像素的深度值与深度缓冲中对应位置的值进行比较。")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"一般情况下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".如果当前像素的深度值小于深度缓冲中的值，说明当前像素在其他物体之前，它会被绘制，并更新深度缓冲。")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".如果当前像素的深度值大于等于深度缓冲中的值，说明当前像素在其他物体之后，它会被丢弃，不会被绘制，并保持深度缓冲不变。")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"ZTest Less      小于当前深度缓冲中的值，就通过测试，写入到深度缓冲中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"ZTest Greater 	大于当前深度缓冲中的值，就通过测试，写入到深度缓冲中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"ZTest LEqual 	小于等于当前深度缓冲中的值，就通过测试，写入到深度缓冲中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"ZTest GEqual 	大于等于当前深度缓冲中的值，就通过测试，写入到深度缓冲中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"ZTest Equal 	等于当前深度缓冲中的值，就通过测试，写入到深度缓冲中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"ZTest NotEqual 	不等于当前深度缓冲中的值，就通过测试，写入到深度缓冲中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"ZTest Always 	始终通过深度测试写入深度缓冲中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"不设置的话，默认为LEqual 小于等于")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"一般情况下，我们只有在实现一些特殊效果时才会区修改深度测试方式，比如透明物体渲染会修改为Less，描边效果会修改为Greater等")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),a(h,{face:"shader:深度测试举例"}),l[1848]||(l[1848]=i("h4",{id:"_4-混合方式",tabindex:"-1"},[s("4.混合方式 "),i("a",{class:"header-anchor",href:"#_4-混合方式","aria-label":'Permalink to "4.混合方式"'},"​")],-1)),a(h,{face:"shader:混合流程图"}),l[1849]||(l[1849]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"主要作用：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"设置渲染图像的混合方式（多种颜色叠加混合，比如透明、半透明效果和遮挡的物体进行颜色混合）")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Blend One One 线性减淡")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Blend SrcAlpha OneMinusSrcAlpha 正常透明混合")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Blend OneMinusDstColor One 滤色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Blend DstColor Zero 正片叠底")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Blend DstColor SrcColor X光片效果")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Blend One OneMinusSrcAlpha 透明度混合")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"等等")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"不设置的话，默认不会进行混合")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"一般情况下，我们需要多种颜色叠加渲染时，就需要设置混合方式，具体情况具体处理")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1850]||(l[1850]=i("blockquote",null,[i("p",null,"其他渲染状态")],-1)),l[1851]||(l[1851]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".LOD         控制LOD级别，在不同距离下使用不同的渲染方式处理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".ColorMask   设置颜色通道的写入蒙版，默认蒙版为RGBA")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"等等")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1852]||(l[1852]=i("h4",{id:"_5-深度测试和深度写入带来的好处",tabindex:"-1"},[s("5.深度测试和深度写入带来的好处 "),i("a",{class:"header-anchor",href:"#_5-深度测试和深度写入带来的好处","aria-label":'Permalink to "5.深度测试和深度写入带来的好处"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[137]||(l[137]=[s("有了深度测试和深度写入发挥作用 ",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[138]||(l[138]=[s("让我们不需要关心不透明物体的渲染顺序",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[139]||(l[139]=[s("注意：处理透明混合时，需要**关闭深度写入**",-1)])]),_:1}),l[1853]||(l[1853]=i("h3",{id:"八、pass-渲染通道",tabindex:"-1"},[s("八、Pass(渲染通道)* "),i("a",{class:"header-anchor",href:"#八、pass-渲染通道","aria-label":'Permalink to "八、Pass(渲染通道)*"'},"​")],-1)),l[1854]||(l[1854]=i("blockquote",null,[i("p",null,"渲染通道的语法结构")],-1)),l[1855]||(l[1855]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Pass{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".Name 名称")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".渲染标签")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".渲染状态")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".其他着色器代码")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1856]||(l[1856]=i("blockquote",null,[i("p",null,"调用其他代码Pass")],-1)),l[1857]||(l[1857]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"UsePass "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Shader路径/Pass名"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"注意：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Unity内部会把Pass名称转换为大写字母")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"因此在使用UsePass命令时必须使用大写形式的名字")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Pass{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Name MyPass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"在其他Shader中复用该Pass代码时")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"UsePass "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"TeachShader/Lesson4/MYPASS"')])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1858]||(l[1858]=i("blockquote",null,[i("p",null,"Pass中的渲染标签")],-1)),l[1859]||(l[1859]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Pass中的渲染标签语法和SubShader中相同")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"标签名1"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "标签值1"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "标签名2"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "标签值2"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "标签名2"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "标签值2"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"......"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"SubShader语句块中的渲染标签不能够在Pass中使用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Pass当中有自己专门的渲染标签")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1860]||(l[1860]=i("blockquote",null,[i("p",null,[i("code",null,'Tags{ "LightMode" = "标签值" }')])],-1)),l[1861]||(l[1861]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"LightMode"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "标签值"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"主要作用：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"指定了该Pass应该在哪个阶段执行")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"可以将着色器代码分配给适当的渲染阶段，以实现所需的效果")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".Always")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    始终渲染；不应用光照")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".ForwardBase")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    在前向渲染中使用；应用环境光、主方向光、顶点 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," SH 光源和光照贴图")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".ForwardAdd")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    在前向渲染中使用；应用附加的每像素光源（每个光源有一个通道）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".Deferred")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    在延迟渲染中使用；渲染 G 缓冲区")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".ShadowCaster")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    将对象深度渲染到阴影贴图或深度纹理中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 6"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".MotionVectors")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    用于计算每对象运动矢量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 7"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".PrepassBase")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    在旧版延迟光照中使用；渲染法线和镜面反射指数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 8"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".PrepassFinal")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    在旧版延迟光照中使用；通过组合纹理、光照和反光来渲染最终颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 9"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".Vertex")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    当对象不进行光照贴图时在旧版顶点光照渲染中使用；应用所有顶点光源")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 10"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".VertexLMRGBM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    当对象不进行光照贴图时在旧版顶点光照渲染中使用；在光照贴图为 RGBM 编码的平台上（PC 和游戏主机）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 11"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".VertexLM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    当对象不进行光照贴图时在旧版顶点光照渲染中使用；在光照贴图为双 LDR 编码的平台上（移动平台）")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"关于向前渲染、延迟渲染、旧版光照等概念了解")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"https"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//docs.unity.cn/cn/2019.4/Manual/RenderingPaths.html")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1862]||(l[1862]=i("blockquote",null,[i("p",null,[i("code",null,'Tags{ "RequireOptions" = "标签值" }')])],-1)),l[1863]||(l[1863]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"RequireOptions"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "标签值"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 主要作用：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 用于指定当满足某些条件时才渲染该Pass")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 目前Unity仅支持")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"RequireOptions"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "SoftVegetation"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 仅当Quality窗口中开启了SoftVegetation时才渲染此通道")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1864]||(l[1864]=i("blockquote",null,[i("p",null,'`Tags{ "PassFlags" = "标签值" }``')],-1)),l[1865]||(l[1865]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 主要作用：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 一个渲染通道Pass可指示一些标志来更改渲染管线向Pass传递数据的方式")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 目前Unity仅支持")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"PassFlags"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "OnlyDirectional"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 在 ForwardBase 向前渲染的通道类型中使用时，此标志的作用是仅允许主方向光和环境光 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 光照探针数据传递到着色器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 这意味着非重要光源的数据将不会传递到顶点光源或球谐函数着色器变量")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1866]||(l[1866]=i("blockquote",null,[i("p",null,"GrabPass命令")],-1)),l[1867]||(l[1867]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"可以利用GrabPass命令把即将绘制对象时的屏幕内容抓取到纹理中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"在后续通道中即可使用此纹理，从而执行基于图像的高级效果。")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"举例：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"将绘制该对象之前的屏幕抓取到 _BackgroundTexture 中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"GrabPass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'    "_BackgroundTexture"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"注意：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"该命令一般写在某个Pass前，在之后的Pass代码中可以利用_BackgroundTexture变量进行处理")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1868]||(l[1868]=i("h3",{id:"九、备用shader",tabindex:"-1"},[s("九、备用Shader "),i("a",{class:"header-anchor",href:"#九、备用shader","aria-label":'Permalink to "九、备用Shader"'},"​")],-1)),l[1869]||(l[1869]=i("blockquote",null,[i("p",null,"备用Shader的作用")],-1)),l[1870]||(l[1870]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"我们知道ShaderLab当中允许有多个SubShader子着色器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"当执行渲染时，会从上到下使用第一个能够正常执行的SubShader子着色器来渲染对象")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"那有没有可能所有SubShade子着色器都不能够在显卡上执行呢？")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"答案是肯定的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"有可能出现在某一个设备上，我们自定义的所有SubShader都无法正常执行（设备显卡无法支持一些api等情况）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"那么这时备用Shader就可以起到很大作用了，它至少可以让对象能够正常渲染出来")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"因此")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"备用Shader主要作用就是当Shader文件中的所有SubShader子着色器都无法正常运行时")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"起到一个保险作用，让物体能够使用一个最低级的Shader去渲染出来（效果略差，但至少能够显示）")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1871]||(l[1871]=i("blockquote",null,[i("p",null,"备用Shader的语法")],-1)),l[1872]||(l[1872]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Fallback "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Shader名"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"或者")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Fallback Off")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"在Fallback关键词后面空格并通过一个字符串来告诉Unity")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"“最低级的Unity Shader”是谁")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"也可以直接关闭Fallback功能，但是如果关闭那就意味着“放弃治疗”")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1873]||(l[1873]=i("h3",{id:"十、shader的编写形式",tabindex:"-1"},[s("十、Shader的编写形式* "),i("a",{class:"header-anchor",href:"#十、shader的编写形式","aria-label":'Permalink to "十、Shader的编写形式*"'},"​")],-1)),l[1874]||(l[1874]=i("blockquote",null,[i("p",null,"Shader的形式是什么？")],-1)),l[1875]||(l[1875]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"通过之前的课程，我们已经对Shader文件的文件结构有一定的认识")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"并且学习了ShaderLab语法相关的知识")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"通过学习我们知道 在Unity Shader当中我们可以通过ShaderLab语法去设置很多内容")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"比如属性、渲染状态、渲染标签等等")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"但是其最主要的作用是需要指定各种着色器所需的代码")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"而这些着色器代码即可以放在SubShader子着色器语句块中，也可以放在其中的Pass渲染通道语句块中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"不同的Shader形式放置着色器代码的位置也有所不同")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"我们一般会使用以下3种形式来编写Unity Shader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".表面着色器（可控性较低）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".顶点 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 片元着色器（重点学习）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".固定函数着色器（基本已弃用，了解即可）")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1876]||(l[1876]=i("h4",{id:"_1-表面着色器",tabindex:"-1"},[s("1. 表面着色器 "),i("a",{class:"header-anchor",href:"#_1-表面着色器","aria-label":'Permalink to "1. 表面着色器"'},"​")],-1)),l[1877]||(l[1877]=i("div",{class:"language-tex"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"tex"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"表面着色器（Surface Shader）是Unity自己创造的一种着色器代码类型")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"它的本质是对顶点 / 片元着色器的一层封装")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"它需要的代码量很少，很多工作都帮助我们去完成了")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"但是缺点是渲染的消耗较大，可控性较低")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"它的优点在于，它帮助我们处理了很多光照细节，我们可以直接使用而无需自己计算实现光照细节")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"我们可以在创建Shader时，选择创建Standard Surface Shader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"通过观察该Shader文件的内部结构，你会发现")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"着色器相关代码被放在SubShader语句块中（并非Pass）的 CGPROGRAM 和 ENDCG 之间")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),i("p",null,[l[141]||(l[141]=s("表面着色器的",-1)),a(n,{color:"red"},{default:k(()=>[...l[140]||(l[140]=[s(" 特点",-1)])]),_:1})]),l[1878]||(l[1878]=i("ol",null,[i("li",null,"直接在SubShader语句块中书写着色器逻辑"),i("li",null,[i("strong",null,"我们不需要关心也不需要使用多个Pass，每个Pass如何渲染，Unity会在内部帮助我们去处理")]),i("li",null,"可以使用CG或HLSL两种Shader语言去编写Shader逻辑"),i("li",null,[i("strong",null,"代码量较少，可控性较低，性能消耗较高")]),i("li",null,[i("strong",null,"适用于处理需要和各种光源打交道的着色器（主机、PC平台时更适用，移动平台需要考虑性能消耗）")])],-1)),l[1879]||(l[1879]=i("h4",{id:"_2-顶点-片元着色器",tabindex:"-1"},[s("2. 顶点/片元着色器 "),i("a",{class:"header-anchor",href:"#_2-顶点-片元着色器","aria-label":'Permalink to "2. 顶点/片元着色器"'},"​")],-1)),l[1880]||(l[1880]=i("div",{class:"language-tex"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"tex"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"我们可以在创建Shader时，选择创建Unlit Shader来快速创建顶点/ 片元着色器模板")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"通过观察，我们发现")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"顶点 / 片元着色器的着色器代码是编写在Pass语句块中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"我们需要自己定义每个Pass需要使用的Shader代码")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"虽然比起表面着色器来说我们需要编写的代码较多")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"但是好处是灵活性更高，可控性更强，可以控制更多的渲染细节")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"决定对性能影响的高低")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),a(n,{color:"red"},{default:k(()=>[...l[142]||(l[142]=[s(" 特点",-1)])]),_:1}),l[1881]||(l[1881]=i("ol",null,[i("li",null,"需要在Pass渲染通道中编写着色器逻辑"),i("li",null,"可以使用CG或HLSL两种Shader语言去编写Shader逻辑"),i("li",null,[i("strong",null,"代码量较多，灵活性较强，性能消耗更可控，可以实现更多渲染细节")]),i("li",null,[i("strong",null,"适用于光照处理较少，自定义渲染效果较多时（移动平台首选）")])],-1)),l[1882]||(l[1882]=i("h4",{id:"_3-固定函数着色器",tabindex:"-1"},[s("3. 固定函数着色器 "),i("a",{class:"header-anchor",href:"#_3-固定函数着色器","aria-label":'Permalink to "3. 固定函数着色器"'},"​")],-1)),l[1883]||(l[1883]=i("div",{class:"language-tex"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"tex"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"表面着色器 和 顶点 / 片元着色器 这两种Unity Shader形式都使用了可编程管线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"而对于一些老设备（DX7.0、OpenGL1.5或OpenGL ES 1.1），它们不支持可编程管线着色器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"这时就需要使用固定函数着色器来进行渲染")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"这些着色器只能实现一些非常简单的效果")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),a(n,{color:"red"},{default:k(()=>[...l[143]||(l[143]=[s(" 特点",-1)])]),_:1}),l[1884]||(l[1884]=i("ol",null,[i("li",null,"需要在Pass渲染通道中编写着色器逻辑"),i("li",null,"需要使用ShaderLab语法中的渲染设置命令来编写，而非CG和HLSL着色器语言")],-1)),l[1885]||(l[1885]=i("h2",{id:"cg-语法",tabindex:"-1"},[s("CG 语法 "),i("a",{class:"header-anchor",href:"#cg-语法","aria-label":'Permalink to "CG 语法"'},"​")],-1)),l[1886]||(l[1886]=i("h3",{id:"一、cg代码",tabindex:"-1"},[s("一、CG代码 "),i("a",{class:"header-anchor",href:"#一、cg代码","aria-label":'Permalink to "一、CG代码"'},"​")],-1)),l[1887]||(l[1887]=i("blockquote",null,[i("p",null,"CG语句写在哪里？")],-1)),l[1888]||(l[1888]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"对于顶点\\片元着色器来说")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"CG语句需要写在Pass渲染通道语句块中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"我们需要在Pass语句块中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"加入指令")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"CGPROGRAM")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"在这两个指令之间 就是我们书写CG代码的地方")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"ENDCG")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1889]||(l[1889]=i("blockquote",null,[i("p",null,"重要的编译指令 —— 指定着色器函数")],-1)),l[1890]||(l[1890]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        在真正书写CG代码之前")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        我们需要先使用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"#pragma 声明编译指令")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        定义实现 顶点 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 片元着色器 代码的函数名称")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"#pragma vertex name(实现顶点着色器的函数名)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"#pragma fragment name(实现片元着色器的函数名)")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        这两个编译指令的作用是将顶点\\片元着色器实现定位到两个函数中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        之后我们只需要在这两个函数中书写Shader逻辑即可")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1891]||(l[1891]=i("h3",{id:"二、基础数据类型",tabindex:"-1"},[s("二、基础数据类型 "),i("a",{class:"header-anchor",href:"#二、基础数据类型","aria-label":'Permalink to "二、基础数据类型"'},"​")],-1)),l[1892]||(l[1892]=i("blockquote",null,[i("p",null,"基础数据类型")],-1)),l[1893]||(l[1893]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"uint"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"      32"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"为无符号整形")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"int"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"       32"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"位整形")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"float"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"     32"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"位浮点数 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"符号"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"half      "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"16"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"位浮点数 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"符号"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":h")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"     12位浮点数(浮点符号一般用这个)")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"bool"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 布尔类型")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"string"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 字符串")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"sampler 纹理对象句柄")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  sampler"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": 通用的纹理采样器，可以用于处理各种不同维度和类型的纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  sampler1D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":   用于一维纹理，通常用于对一维纹理进行采样，例如从左到右的渐变色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  sampler2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":   用于二维纹理，最常见的纹理类型之一。它用于处理二维图像纹理，例如贴图")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  sampler3D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":   用于三维纹理，通常用于体积纹理，例如体积渲染")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  samplerCUBE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": 用于立方体纹理，通常用于处理环境映射等需要立方体贴图的情况")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  samplerRECT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": 用于处理矩形纹理，通常用于一些非标准的纹理映射需求")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  他们都是用于处理纹理（Texture）数据的数据类型")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  他们的主要区别是纹理的维度和类型")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1894]||(l[1894]=i("blockquote",null,[i("p",null,"基础复合数据类型")],-1)),l[1895]||(l[1895]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"数组：和C#中类似")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"一维")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"int"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," a["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," { "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"长度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"a.length")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"二维")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"int"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," b["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," { { "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"},{ "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"6"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"} }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"长度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"b.length为2")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"b["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"].length为3")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"结构体")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"和C#基本一样")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"没有访问修饰符")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"结构体声明结束加分号")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"一般在函数外声明")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1896]||(l[1896]=i("h3",{id:"三、特殊数据类型",tabindex:"-1"},[s("三、特殊数据类型 "),i("a",{class:"header-anchor",href:"#三、特殊数据类型","aria-label":'Permalink to "三、特殊数据类型"'},"​")],-1)),l[1897]||(l[1897]=i("blockquote",null,[i("p",null,"向量")],-1)),l[1898]||(l[1898]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"向量类型属于CG语言的内置数据类型")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"内置的向量类型是基于基础数据类型声明的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"向量的最大维度不超过4维")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"数据类型可以是任意数值类型")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"基本构成")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"数据类型2 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," 数据类型2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(n1, n2)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"数据类型3 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," 数据类型3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(n1, n2, n3)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"数据类型4 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," 数据类型4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(n1, n2, n3, n4)")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1899]||(l[1899]=i("blockquote",null,[i("p",null,"矩阵")],-1)),l[1900]||(l[1900]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"矩阵类型属于CG语言的内置数据类型")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"矩阵的最大行列不大于4，不小于1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"数据类型可以是任意数值类型")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"基本构成")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"数据类型"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'n'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"x"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'m'"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," { n1m1,n1m2,n1m3"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"...."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"数据类型2x2")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"数据类型3x3")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"数据类型4x4")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1901]||(l[1901]=i("blockquote",null,[i("p",null,"bool类型特殊使用")],-1)),l[1902]||(l[1902]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"bool类型同样可以用于如同向量一样声明")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"它可以用于存储一些逻辑判断结果")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"比如")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," a"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0.5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0.0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1.0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," b"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0.6"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0.1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0.9"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"bool3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," c"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," a "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," b;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"运算后向量c的结果为bool3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"true"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"false"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"false"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1903]||(l[1903]=i("h3",{id:"四、swizzle操作符",tabindex:"-1"},[s("四、Swizzle操作符 "),i("a",{class:"header-anchor",href:"#四、swizzle操作符","aria-label":'Permalink to "四、Swizzle操作符"'},"​")],-1)),l[1904]||(l[1904]=i("blockquote",null,[i("p",null,"什么是Swizzle操作符")],-1)),l[1905]||(l[1905]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Swizzle操作符通常以点号"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(.)的形式使用，后面跟着所需的分量顺序")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"对于四维向量来说")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"我们可以通过")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"向量.xyzw")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"或")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"向量.rgba")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"两种分量的写法来表示向量中的四个值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"其中 xyzw和rgba分别代表四维向量中的四个元素")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"在此的意义就是向量一般可以用来表示坐标和颜色")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".向量获取元素可以利用Swizzle操作符获取")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".矩阵获取元素和二维数组获取方式一样")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".Swizzle操作符可以让我们对向量进行方便的操作")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".向量和矩阵在声明和获取时可以配合使用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".高维向量或矩阵可以用低维容器装载，可以利用这个特点将4维变3维，"),i("span",{style:{"--shiki-light":"#B31D28","--shiki-light-font-style":"italic","--shiki-dark":"#FDAEB7","--shiki-dark-font-style":"italic"}},"4x4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"变3x3")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1906]||(l[1906]=i("h3",{id:"五、函数",tabindex:"-1"},[s("五、函数 "),i("a",{class:"header-anchor",href:"#五、函数","aria-label":'Permalink to "五、函数"'},"​")],-1)),l[1907]||(l[1907]=i("blockquote",null,[i("p",null,"运算符")],-1)),l[1908]||(l[1908]=i("div",{class:"language-tex"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"tex"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"//CG语法中比较、条件、逻辑、数学等运算符的使用和C#中一致")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"//需要注意的是：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'//1.逻辑运算符在CG中不存在C#中的"短路"操作')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"//2.数学运算符在CG中取余符号只能向整数取余")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1909]||(l[1909]=i("blockquote",null,[i("p",null,"无返回值的函数")],-1)),l[1910]||(l[1910]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"基本结构")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"void"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"in"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," 参数类型"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," 参数名"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"out"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," 参数类型"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," 参数名"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    函数体")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"void"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"：以void开头，表示没有返回值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"name：函数的名称")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"in：表示是输入参数，表示由函数外部传递给函数内部，内部不会修改该参数，只会使用该参数进行计算，允许有多个")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"out：表示是输出参数，表示由函数内部传递给函数的调用者，在函数内部必须对该参数值进行初始化或修改，允许有多个")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"注意：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"in和out都可以省略，省略后就没有了in和out相关的限制")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"虽然可以省略，但是建议在编写Shader时不要省略in和out")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"因为他们可以明确参数的传递方式，提高代码的可读性和可维护性")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"可以让我们更容易的理解函数是如何与参数交互的，减少潜在的误解可能")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1911]||(l[1911]=i("blockquote",null,[i("p",null,"有返回值的函数")],-1)),l[1912]||(l[1912]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 基本结构")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," type"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"in"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," 参数类型"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," 参数名"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"     函数体")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"       return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 返回值;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," type：返回值类型")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"：返回指定类型的数据")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 注意：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 虽然可以在有返回值的函数中使用out参数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 但是这并不是常见做法，除非是一些自定义逻辑函数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 对于顶点 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 片元着色器函数只会使用单返回值的方式进行处理")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1913]||(l[1913]=i("h3",{id:"六、顶点-片元着色器",tabindex:"-1"},[s("六、顶点/片元着色器 "),i("a",{class:"header-anchor",href:"#六、顶点-片元着色器","aria-label":'Permalink to "六、顶点/片元着色器"'},"​")],-1)),l[1914]||(l[1914]=i("blockquote",null,[i("p",null,"顶点着色器")],-1)),l[1915]||(l[1915]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"顶点着色器 回调函数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    POSITION 和 SV_POSITION是CG语言的语义")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    POSITION：把模型的顶点坐标填充到输入的参数v当中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SV_POSITION：顶点着色器输出的内容是裁剪空间中的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    如果没有这些语义来限定输入和输出参数的话，那么渲染器就完全不知道用户输入输出的是什么，就会得到错误的效果")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," myVert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":POSITION):SV_POSITION")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //mul是CG语言提供的矩阵和向量的乘法运算函数（就是一个内置的函数）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //UNITY_MATRIX_MVP 代表一个变换矩阵 是Unity内置的模型、观察、投影矩阵的集合")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //UnityObjectToClipPos它的作用和之前的矩阵乘法是一样的，主要目的就是在进行坐标变换 只不过新版本将其封装起来了 使用更加方便")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //mul(UNITY_MATRIX_MVP,v);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1916]||(l[1916]=i("blockquote",null,[i("p",null,"片元着色器")],-1)),l[1917]||(l[1917]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//片元着色器 回调函数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//SV_Target:告诉渲染器，把用户输出颜色存储到一个渲染目标中，这里将输出到默认的帧缓存中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," myFrag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"():SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1918]||(l[1918]=i("h3",{id:"七、语义",tabindex:"-1"},[s("七、语义* "),i("a",{class:"header-anchor",href:"#七、语义","aria-label":'Permalink to "七、语义*"'},"​")],-1)),l[1919]||(l[1919]=i("blockquote",null,[i("p",null,"语义的作用")],-1)),l[1920]||(l[1920]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"CG语言中提供了 语义 这种特殊关键字用于修饰函数中的传入参数和返回值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"它的主要作用是让Shader知道从哪里读取数据，并把数据输出到哪里")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"让我们在Shader开发当中可以获取到想要的数据，并且可以把数据传递出去")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"注意：Unity中只支持CG当中的部分语义")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"语义的主要作用是让Shader知道从哪里读取数据，并把数据输出到哪里")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"我们在编写顶点片元着色器回调函数的相关逻辑时")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"我们需要使用语义去修饰函数参数和返回值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"这样我们才能获取到我们想要的数据，并且把结果数据明确的返回出去用于下一流程处理")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1921]||(l[1921]=i("blockquote",null,[i("p",null,"应用阶段——>顶点着色器")],-1)),l[1922]||(l[1922]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"应用阶段传递模型数据给顶点着色器时Unity支持的语义")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"一般在顶点着色器回调函数的传入参数中应用")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"POSITION"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"模型空间中的顶点位置，通常是float4类型")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"NORMAL"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"顶点法线，通常是float3类型")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"TANGENT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"顶点切线，通常是float4类型")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"TEXCOORDn"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"比如"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," TEXCOORD0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"TEXCOORD1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"...."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"该顶点的纹理坐标"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"，"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"通常是float2或者float4类型")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                           TEXCOORD0表示第一组纹理坐标"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"，"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"依次类推")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                           纹理坐标"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"："),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"也称UV坐标"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"，"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"表示该顶点对应纹理图像上的位置")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                           COLOR"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"顶点颜色"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"，"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"通常是fixed4或float4类型")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1923]||(l[1923]=i("blockquote",null,[i("p",null,"顶点着色器——>片元着色器")],-1)),l[1924]||(l[1924]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"从顶点着色器传递数据给片元着色器时Unity支持的语义")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"一般在顶点着色器回调函数的返回值中应用")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"SV_POSITION"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"裁剪空间中的顶点坐标（必备）")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"COLOR0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"通常用于输出第一组顶点颜色（不是必须的）")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"COLOR1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"通常用于输出第二组顶点颜色（不是必须的）")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"TEXCOORD0"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"~"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"TEXCOORD7"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"通常用于输出纹理坐标（不是必须的）")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1925]||(l[1925]=i("blockquote",null,[i("p",null,"片元着色器输出")],-1)),l[1926]||(l[1926]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 片元着色器输出时Unity支持的常用语义")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 一般在片元着色器回调函数的返回值中应用")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," SV_Target"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 输出值会存储到渲染目标中")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1927]||(l[1927]=i("blockquote",null,[i("p",null,"更多语义")],-1)),l[1928]||(l[1928]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//HLSL语义汇总：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//https://learn.microsoft.com/zh-cn/windows/win32/direct3dhlsl/dx-graphics-hlsl-semantics?redirectedfrom=MSDN")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//CG的语义大部分和HLSL的相同，在此做了解即可")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//以后我们用到其他语义时，再着重讲解即可")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1929]||(l[1929]=i("h3",{id:"八、顶点-片元着色器传递更多参数",tabindex:"-1"},[s("八、顶点/片元着色器传递更多参数 "),i("a",{class:"header-anchor",href:"#八、顶点-片元着色器传递更多参数","aria-label":'Permalink to "八、顶点/片元着色器传递更多参数"'},"​")],-1)),l[1930]||(l[1930]=i("blockquote",null,[i("p",null,"顶点着色器获取更多数据信息")],-1)),l[1931]||(l[1931]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"当我们在顶点着色器当中想要获取更多模型相关信息时")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"可以使用结构体对数据进行封装")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"通过对结构体中成员变量加语义的方式来定义想要获取的信息")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1932]||(l[1932]=i("blockquote",null,[i("p",null,"片元着色器获取更多数据信息")],-1)),l[1933]||(l[1933]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"当我们在片元着色器当中想要获取更多信息时")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"采用的方式还是封装结构体的方式")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"注意：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"片元着色器中获取的数据基本上都是由顶点着色器传递过来的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"所以我们封装的结构体还需要作为顶点着色器的返回值类型")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1934]||(l[1934]=i("blockquote",null,[i("p",null,"例子")],-1)),l[1935]||(l[1935]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson22"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //该结构体")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //是用于从应用阶段获取对应语义数据后")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //传递给顶点着色器回调函数的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct a2v")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //顶点坐标(基于模型空间)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vertex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //顶点法线(基于模型空间)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":NORMAL;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //纹理坐标(uv坐标)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //从顶点着色器传递给片元着色器的 结构体数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //同样这里面的成员也需要用语义去进行修饰")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //裁剪空间下的坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"position"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //顶点法线(基于模型空间)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":NORMAL;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //纹理坐标(uv坐标)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"a2v"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," data"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //需要传递给片元着色器的数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v2fData"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2fData.position "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(data.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2fData.normal "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," data.normal;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2fData.uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," data.uv;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v2fData;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," data"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"):SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1936]||(l[1936]=i("h3",{id:"九、shaderlab属性类型和cg变量类型的匹配关系",tabindex:"-1"},[s("九、ShaderLab属性类型和CG变量类型的匹配关系 "),i("a",{class:"header-anchor",href:"#九、shaderlab属性类型和cg变量类型的匹配关系","aria-label":'Permalink to "九、ShaderLab属性类型和CG变量类型的匹配关系"'},"​")],-1)),l[1937]||(l[1937]=i("table",null,[i("thead",null,[i("tr",null,[i("th",null,"ShaderLab属性类型"),i("th",null,"CG变量类型")])]),i("tbody",null,[i("tr",null,[i("td",null,"Color,Vector"),i("td",null,"float4,half4,fixed4")]),i("tr",null,[i("td",null,"Range,Float,Int"),i("td",null,"float,half,fixed")]),i("tr",null,[i("td",null,"2D"),i("td",null,"sampler2D")]),i("tr",null,[i("td",null,"Cube"),i("td",null,"samplerCube")]),i("tr",null,[i("td",null,"3D"),i("td",null,"sampler3D")]),i("tr",null,[i("td",null,"2DArray"),i("td",null,"sampler2DArray")])])],-1)),l[1938]||(l[1938]=i("blockquote",null,[i("p",null,"如何在CG语句块中使用ShaderLab中声明的属性")],-1)),l[1939]||(l[1939]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"直接在CG语句块中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"声明和属性中对应类型的同名变量即可")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1940]||(l[1940]=i("h3",{id:"十、cg内置函数",tabindex:"-1"},[s("十、CG内置函数* "),i("a",{class:"header-anchor",href:"#十、cg内置函数","aria-label":'Permalink to "十、CG内置函数*"'},"​")],-1)),l[1941]||(l[1941]=i("blockquote",null,[i("p",null,"CG内置函数是什么")],-1)),l[1942]||(l[1942]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Unity Shader中的CG语言")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"提供了各种用于图形编程的函数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"这些函数是CG为我们封装好的逻辑")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"我们可以使用它们来编写Unity Shader")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1943]||(l[1943]=i("h4",{id:"_1-数学函数",tabindex:"-1"},[s("1. 数学函数 "),i("a",{class:"header-anchor",href:"#_1-数学函数","aria-label":'Permalink to "1. 数学函数"'},"​")],-1)),l[1944]||(l[1944]=i("blockquote",null,[i("p",null,"三角函数")],-1)),l[1945]||(l[1945]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sincos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"float"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," x, "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"out"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," s, "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"out"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," c)     该函数同时计算x的sin值和cos值通过s和c进行返回（比分别运算快很多）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sin"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x)                            正弦函数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"cos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x)                            余弦函数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tan"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x)                            正切函数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sinh"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x)                           双曲正弦函数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"cosh"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x)                           双曲余弦函数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tanh"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x)                           双曲正切函数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"asin"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x)                           反正弦函数，输入参数范围["),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]，返回["),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"π "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", π "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]区间的角度值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"acos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x)                           反余弦函数，输入参数范围["),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]，返回["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", π]区间的角度值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"atan"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x)                           反正切函数，输入参数范围["),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]，返回["),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"π "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", π "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]区间的角度值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"atan2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(y, x)                        计算y "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," x的反正切值。和atan功能一样，只是输入参数不同。"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"atan"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," atan2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1946]||(l[1946]=i("blockquote",null,[i("p",null,"向量、矩阵相关")],-1)),l[1947]||(l[1947]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"cross"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(A, B)                        叉乘（注意：传入向量必须是三维向量）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(A, B)                          点乘（注意：传入向量必须是三维向量）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(M, N)                          计算两个矩阵相乘")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(M, v)                          计算矩阵和向量相乘")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v, M)                          计算向量和矩阵相乘")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"transpose"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(M)                      M为矩阵，计算M的转置矩阵")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"determinant"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(m)                    计算矩阵的行列式因子")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1948]||(l[1948]=i("blockquote",null,[i("p",null,"数值相关")],-1)),l[1949]||(l[1949]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"abs"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x)                            返回输入参数的绝对值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ceil"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x)                           对输入参数向上取整")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"floor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x)                          对输入参数向下取整")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"clamp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x, a, b)                      如果x小于a，则返回a；x大于b，则返回b；否则，返回x（"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"夹紧"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"函数）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"radians"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x)                        角度转弧度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"degrees"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x)                        弧度转角度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(a, b)                          返回最大值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"min"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(a, b)                          返回最小值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sqrt"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x)                           求x的平方根，x必须大于0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x, y)                          x的y次方的值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"round"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x)                          对x四舍五入")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"rsqrt"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x)                          x的反平方根，x必须大于0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"lerp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(a, b, f)                       差值函数，"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"计算"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," f) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," a "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," b "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," f 或者 a "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"f "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (b "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," a)的值")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"exp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x)                            计算e的x次方的值，e "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 2.71828182845904523536")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"exp2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x)                           计算2的x次方的值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"fmod"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x, y)                         返回x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," y的余数，y不为0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"frac"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x)                           返回标量或每个矢量分量的小数部分")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"frexp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x, "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"out"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," exp)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"将浮点数x分解为尾数和直属，即 x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," m "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"的exp次方，返回m，将指数存储exp中")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"isfinite"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"判断标量或者向量中的每个数据是否是有限数，如果是返回true，否则返回false")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"isinf"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"判断标量或者向量中的每个数据是否是无限，如果是返回true，否则返回false")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"isnan"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"判断标量或者向量中的每个数据是否是非数据，如果是返回true，否则返回false")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ldexp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x, n)                       计算x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"的n次方 的值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"log"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x)                            "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"计算ln"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x)的值，x必须大于0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"log2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x)                           "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"计算log2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x次方)的值，x必须大于0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"log10"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x)                          "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"计算log2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x次方)的值，x必须大于0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"saturate"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x)                       如果x小于0，返回0；如果x大于1，返回1；否则，返回x")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sign"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x)                           如果x大于0，返回1；如果x小于0，返回 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"；否则，返回0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"smoothstep"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(min, max, x)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"值x位于min、max区间内，如果x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," min，返回0；如果x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," max，返回1；如果在两者之间，返回"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 2"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ((x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," min) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (max "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," min))的三次方 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 3"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ((x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," min) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (max "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," min))的2次方")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"step"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(a, x)                        如果x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," a,返回0；否则，返回1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"all"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x)                            输入参数均不为0，则返回true; 否则返回False。相当于逻辑与 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"&&")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"any"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x)                            输入参数只要有其中一个不为0，则返回true。相当于逻辑或"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"||")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1950]||(l[1950]=i("blockquote",null,[i("p",null,"其他")],-1)),l[1951]||(l[1951]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"lit"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(NdotL, NdotH, m)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"N表示法向量；L表示入射光向量；H表示半角向量；m表示高光系数该函数计算环境光、散射光、镜面光的贡献，返回4维向量；x位表示环境光贡献；y位表示散射光贡献；z位表示镜面光贡献；w始终为1")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"noise"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"噪声函数，返回值始终是0"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"~"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"之间；对于相同的输入，始终返回相同值，不是真正意义的随机噪声")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1952]||(l[1952]=i("h4",{id:"_2-几何函数",tabindex:"-1"},[s("2. 几何函数 "),i("a",{class:"header-anchor",href:"#_2-几何函数","aria-label":'Permalink to "2. 几何函数"'},"​")],-1)),l[1953]||(l[1953]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"length"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v)                     返回一个向量的模长")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v)                  归一化向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"distance"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(p1, p2)               计算两点之间的距离")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"reflect"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(I, N)                  计算反射光方向向量，I为入射光，N为顶点法向量，。I是指向顶点的，I和N必须被归一化，必须是3维向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"refract"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(I, N, eta)              计算折射向量，I为入射光，N为顶点法向量，eta为折射系数。I是指向顶点的，I和N必须被归一化，必须是3维向量")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1954]||(l[1954]=i("h4",{id:"_3-纹理函数",tabindex:"-1"},[s("3. 纹理函数 "),i("a",{class:"header-anchor",href:"#_3-纹理函数","aria-label":'Permalink to "3. 纹理函数"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[144]||(l[144]=[s("注意：这些纹理采样函数返回值为 fixed4 类型的颜色值",-1)])]),_:1}),l[1955]||(l[1955]=i("blockquote",null,[i("p",null,"二维纹理")],-1)),l[1956]||(l[1956]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(sampler2D tex, float2 s)                                    二维纹理查询")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(sampler2D tex, float2 s, float2 dsdx, float2 dsdy)          使用导数值查询二维纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(sampler2D tex, float3 sz)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"二维纹理查询，并进行深度值比较")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(sampler2D tex, float3 sz, float2 dsdx, float2 dsdy)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"使用导数值查询二维纹理，并进行深度值比较")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex2Dproj"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(sampler2D tex, float3 sq)                               二维投影纹理查询")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex2Dproj"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(sampler2D tex, float4 szq)")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1957]||(l[1957]=i("blockquote",null,[i("p",null,"立方体纹理")],-1)),l[1958]||(l[1958]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"texCUBE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(samplerCUBE tex, float3 s)                                查询立方体纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"texCUBE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(samplerCUBE tex, float3 s, float3 dsdx, float3 dsdy)      结合导数值查询立方体纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"texCUBEDproj"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(samplerCUBE tex, float4 sq)")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1959]||(l[1959]=i("blockquote",null,[i("p",null,"其他纹理")],-1)),l[1960]||(l[1960]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex1D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(sampler1D tex, "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"float"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," s)                                     一维纹理查询")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex1D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(sampler1D tex, "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"float"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," s, "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"float"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," dsdx, "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"float"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," dsdy)             使用导数值查询一维纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex1D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(sampler1D tex, float2 sz)                                   一维纹理查询，并进行深度值比较")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex1D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(sampler1D tex, float2 sz, "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"float"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," dsdx, "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"float"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," dsdy)           使用导数值查询一维纹理，并进行深度值比较")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex1Dproj"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(sampler1D tex, float2 sq)                               一维投影纹理查询")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex1Dproj"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(sampler1D tex, float3 szq)                              一维投影纹理查询，并进行深度值比较")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"texRECT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(samplerRECT tex, float2 s)                                矩形纹理查询")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"texRECT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(samplerRECT tex, float2 s, float2 dsdx, float2 dsdy)      使用导数值查询矩形纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"texRECT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(samplerRECT tex, float3 sz)                               矩形纹理查询，并进行深度值比较")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"texRECT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(samplerRECT tex, float3 sz, float2 dsdx, float2 dsdy)     使用导数值查询矩形纹理，并进行深度值比较")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"texRECTproj"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(samplerRECT tex, float3 sq)                           矩形投影纹理查询")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"texRECTproj"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(samplerRECT tex, float3 szq)                          矩形投影纹理查询，并进行深度值比较")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex3D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(sampler3D tex, float3 s)                                    查询三维纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex3D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(sampler3D tex, float3 s, float3 dsdx, float3 dsdy)          结合导数值查询三维纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex3DDproj"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(sampler3D tex, float4 sq)")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1961]||(l[1961]=i("h4",{id:"_4-hlsl内置函数",tabindex:"-1"},[s("4. HLSL内置函数 "),i("a",{class:"header-anchor",href:"#_4-hlsl内置函数","aria-label":'Permalink to "4. HLSL内置函数"'},"​")],-1)),l[1962]||(l[1962]=i("blockquote",null,[i("p",null,"HLSL内置函数")],-1)),l[1963]||(l[1963]=i("p",null,[i("a",{href:"https://learn.microsoft.com/en-us/windows/win32/direct3dhlsl/dx-graphics-hlsl-intrinsic-functions",target:"_blank",rel:"noreferrer"},"https://learn.microsoft.com/en-us/windows/win32/direct3dhlsl/dx-graphics-hlsl-intrinsic-functions")],-1)),l[1964]||(l[1964]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"这是HLSL对应的内置函数，CG和它类似（注意：不是所有函数都在Unity中被支持）")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1965]||(l[1965]=i("h3",{id:"十一、cg内置文件",tabindex:"-1"},[s("十一、CG内置文件* "),i("a",{class:"header-anchor",href:"#十一、cg内置文件","aria-label":'Permalink to "十一、CG内置文件*"'},"​")],-1)),l[1966]||(l[1966]=i("blockquote",null,[i("p",null,"CG内置文件的位置和作用")],-1)),l[1967]||(l[1967]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"我们可以在Unity的安装目录中找到CG内置文件")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"在Editor—"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Data—"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," CGIncludes中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"后缀为cginc的文件为CG语言内置文件")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"后缀为glslinc的文件为GLSL语言内置文件")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"他们是预定义的Shader文件")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"里面包含了一些已经写好的Shader相关逻辑")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"作用和CG内置函数一样，可以提升我们的Shader开发效率")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"可以直接使用其中的方法等内容来进行逻辑开发")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Unity中常用的内置文件有")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".UnityCG.cginc                     包含最常用的帮助函数、宏和结构体等")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".Lighting.cginc                    包含各种内置光照模型。"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"如果编写的是Surface"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Shader"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(标准表面着色器），会自动包含进来")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"3."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"UnityShaderVariables"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"cginc"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        编译UnityShader时"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"，会自动包含进来。包含许多内置的全局变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"4."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"HLSLSupport"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"cginc"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                 编译UnityShader时"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"，会自动包含进来。声明了很多用于跨平台编译的宏和定义")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"等等")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1968]||(l[1968]=i("blockquote",null,[i("p",null,"如何使用CG内置文件")],-1)),l[1969]||(l[1969]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"在CG语句块中进行引用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"通过编译指令")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'#include "内置文件名.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"的形式进行引用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"我们便可以在CG语言中使用其中的内容")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"注意：一些常用的函数、宏、变量，可以不用引用，Unity会在编译时自动识别")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"     但是为了避免报错，建议都引用")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"宏"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"通常指的是一种预处理指令或代码片段，用于在代码中进行文本替换。")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"宏允许程序员定义一个标识符（通常以大写字母表示）来代表一个代码片段，")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"然后在编译时将这个标识符替换为相应的代码，这种替换过程称为宏展开。")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"说人话：就是为一些代码片段，取一个别名，方便使用。在真正编译时在把这个别名翻译成对应的代码。")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1970]||(l[1970]=i("h4",{id:"_1-常用内容",tabindex:"-1"},[s("1. 常用内容 "),i("a",{class:"header-anchor",href:"#_1-常用内容","aria-label":'Permalink to "1. 常用内容"'},"​")],-1)),l[1971]||(l[1971]=i("blockquote",null,[i("p",null,"方法(UnigyCG.cginc中)")],-1)),l[1972]||(l[1972]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"WorldSpaceViewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(float4 v)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  输入一个模型空间中的顶点位置，返回世界空间中从该点到摄像机的观察方向")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ObjSpaceViewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(float4 v)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  输入一个模型空间中的顶点位置，返回模型空间中从该点到摄像机的观察方向")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"WorldSpaceLightDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(float4 v)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  仅用于向前渲染中。输入一个模型空间中的顶点位置，返回世界空间中从该点到光源的光照方向。（返回值没有被归一化）")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".flaot3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ObjSpaceLightDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(float4 v)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  仅用于向前渲染中。输入一个模型空间中的顶点位置，返回模型空间中从该点到光源的光照方向。（返回值没有被归一化）")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(float3 norm)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  把法线方向从模型空间转换到世界空间中")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"6"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"UnityObjectToWorldDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"in"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," float3 dir)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  把方向矢量从模型空间转换到世界空间中")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"7"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"UnityWorldToObjectDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(float3 dir)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  把方向矢量从世界空间转换到模型空间中")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"等等")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1973]||(l[1973]=i("blockquote",null,[i("p",null,"结构体(UnigyCG.cginc中)")],-1)),l[1974]||(l[1974]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".appdata_base")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  用于顶点着色器输入")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  顶点位置、顶点法线、第一组纹理坐标")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".appdata_tan")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  用于顶点着色器输入")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  顶点位置、顶点法线、顶点切线、第一组纹理坐标")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".appdata_full")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  用于顶点着色器输入")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  顶点位置、顶点法线、顶点切线、四组（或更多）纹理坐标")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".appdata_img")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  用于顶点着色器输入")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  顶点位置、第一组纹理坐标")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".v2f_img")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  用于顶点着色器输出")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  裁剪空间中的位置，纹理坐标")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"等等")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1975]||(l[1975]=i("blockquote",null,[i("p",null,"变换矩阵宏(UnityShaderVariables.cginc中)")],-1)),l[1976]||(l[1976]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"坐标空间变换顺序")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  模型空间->世界空间->观察空间->裁剪空间->屏幕空间")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".UNITY_MATRIX_MVP")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  当前的模型"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 观察"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"投影矩阵，用于将顶点 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 方向向量从模型空间变换到裁剪空间中")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".UNITY_MATRIX_MV")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  当前的模型"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 观察矩阵，用于将顶点 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 方向向量从模型空间变换到观察空间中")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".UNITY_MATRIX_V")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  当前的观察矩阵，用于将顶点 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 方向向量从世界空间变换到观察空间中")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".UNITY_MATRIX_P")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  当前的投影矩阵，用于将顶点 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 方向向量从观察空间变换到裁剪空间中")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".UNITY_MATRIX_VP")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  当前的观察"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 投影矩阵，用于将顶点 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 方向向量从世界空间变换到裁剪空间中")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"6"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".UNITY_MATRIX_T_MV")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  UNITY_MATRIX_MV的转置矩阵")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"7"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".UNITY_MATRIX_IT_MV")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  UNITY_MATRIX_MV的逆转置矩阵，用于将法线从模型空间变换到观察空间，也可用于得到UNITY_MATRIX_MV的逆矩阵")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"8"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"._Object2World")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  当前的模型矩阵，用于将顶点 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 方向矢量从模型空间变换到世界空间")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"9"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"._World2Object")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  _Object2World的逆矩阵，用于将顶点 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 方向矢量从世界空间变换到模型空间")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"等等")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1977]||(l[1977]=i("blockquote",null,[i("p",null,"变量")],-1)),l[1978]||(l[1978]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"_Time"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(不用引用，直接使用即可)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  自关卡加载以来的时间（t "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 20"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"、t、t "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"、t "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"）用于对着色器内的事物进行动画处理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"_LightColor0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(向前渲染时，UnityLightingCommon.cginc；延迟渲染，UnityDeferredLibrary.cginc)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  光的颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"等等")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1979]||(l[1979]=i("blockquote",null,[i("p",null,"总结")],-1)),l[1980]||(l[1980]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"CG中的内置文件和内置函数一样")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"是用于帮助我们进行Shader开发的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"利用其中的函数、宏、全局变量等内容")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"可以提升我们Shader的开发效率")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1981]||(l[1981]=i("p",null,[s("内置文件相关："),i("a",{href:"https://docs.unity3d.com/Manual/SL-BuiltinIncludes.html",target:"_blank",rel:"noreferrer"},"https://docs.unity3d.com/Manual/SL-BuiltinIncludes.html"),s(" 函数相关："),i("a",{href:"https://docs.unity3d.com/Manual/SL-BuiltinFunctions.html",target:"_blank",rel:"noreferrer"},"https://docs.unity3d.com/Manual/SL-BuiltinFunctions.html"),s(" 宏相关："),i("a",{href:"https://docs.unity3d.com/Manual/SL-BuiltinMacros.html",target:"_blank",rel:"noreferrer"},"https://docs.unity3d.com/Manual/SL-BuiltinMacros.html"),s(" 变量相关："),i("a",{href:"https://docs.unity3d.com/Manual/SL-UnityShaderVariables.html",target:"_blank",rel:"noreferrer"},"https://docs.unity3d.com/Manual/SL-UnityShaderVariables.html")],-1)),l[1982]||(l[1982]=i("h3",{id:"十二、常用内置函数",tabindex:"-1"},[s("十二、常用内置函数 "),i("a",{class:"header-anchor",href:"#十二、常用内置函数","aria-label":'Permalink to "十二、常用内置函数"'},"​")],-1)),l[1983]||(l[1983]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},". float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"WorldSpaceViewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(float4 v)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"   传入模型空间下的顶点位置，返回世界空间中从该点到摄像机的观察方向")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},". float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"UnityWorldSpaceViewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(flaot4 v)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"   传入世界空间中的顶点位置，返回世界空间中从该点到摄像机的观察方向")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},". float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ObjSpaceViewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(float4 v)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"   传入模型空间中的顶点位置，返回模型空间中从该点到摄像机的观察方向")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},". float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"WorldSpaceLightDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(float4 v)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"   (仅用于向前渲染中)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"   传入模型空间中的顶点位置，返回世界空间中该点到光源的光照方向（没有归一化）")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},". float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"UnityWorldSpaceLightDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(float4 v)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"   (仅用于向前渲染中)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"   传入世界空间中的顶点位置，返回世界空间中从该点到光源的光照方向（没有归一化）")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"6"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},". float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ObjSpaceLightDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(float4 v)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"   (仅用于向前渲染中)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"   传入模型空间中的顶点位置，返回模型空间中从该点到光源的光照方向（没有归一化）")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"7"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},". float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(float3 normal)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"   把法线从模型空间转换到世界空间中")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"8"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},". float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"UnityObjectToWorldDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(float3 dir)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"   把方向矢量从模型空间转换到世界空间中")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"9"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},". float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"UnityWorldToObjectDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(float3 dir)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"   把方向矢量从世界空间转换到模型空间中")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"10"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(float4 v)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"   输入模型空间中的顶点位置，返回裁剪空间下的顶点位置")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[1984]||(l[1984]=i("hr",null,null,-1)),l[1985]||(l[1985]=i("h2",{id:"光照模型",tabindex:"-1"},[s("光照模型 "),i("a",{class:"header-anchor",href:"#光照模型","aria-label":'Permalink to "光照模型"'},"​")],-1)),l[1986]||(l[1986]=i("h3",{id:"一、逐顶点光照和逐片元光照",tabindex:"-1"},[s("一、逐顶点光照和逐片元光照 "),i("a",{class:"header-anchor",href:"#一、逐顶点光照和逐片元光照","aria-label":'Permalink to "一、逐顶点光照和逐片元光照"'},"​")],-1)),l[1987]||(l[1987]=i("blockquote",null,[i("p",null,"逐顶点光照")],-1)),l[1988]||(l[1988]=i("p",null,"在哪计算： 顶点着色器 回调函数中",-1)),l[1989]||(l[1989]=i("p",null,[i("strong",null,"计算方式："),s(" 逐顶点光照会在每个物体的顶点上进行光照计算 这意味着光照计算只在物体的顶点位置上执行 而在顶点之间的内部区域使用插值来获得颜色信息")],-1)),l[1990]||(l[1990]=i("p",null,[i("strong",null,"优点："),i("strong",null,"逐顶点光照的计算量较小，通常在移动设备上性能较好"),s("，适用于移动游戏等要求性能的场景")],-1)),l[1991]||(l[1991]=i("p",null,[i("strong",null,"缺点:"),i("strong",null,"照明效果可能不够精细"),s("，特别是在物体表面上的细节区域，因为颜色插值可能不足以捕捉到细微的照明变化")],-1)),l[1992]||(l[1992]=i("p",null,[i("strong",null,"适用场景："),s(" 逐顶点光照适用于需要在有限资源下获得较好性能的场景，例如移动游戏")],-1)),l[1993]||(l[1993]=i("blockquote",null,[i("p",null,"逐片元光照")],-1)),l[1994]||(l[1994]=i("p",null,[i("strong",null,"在哪计算："),s(" 片元着色器 回调函数中")],-1)),l[1995]||(l[1995]=i("p",null,[i("strong",null,"计算方式："),s(" 逐片元光照会在每个像素（片元）上进行光照计算 这意味着每个像素都会根据其位置、法线、材质等信息独立地进行光照计算")],-1)),l[1996]||(l[1996]=i("p",null,[i("strong",null,"优点："),s(" 逐片元光照提供了更高的精细度，可以捕捉到物体表面上的细微照明变化，"),i("strong",null,"提供更逼真的效果")],-1)),l[1997]||(l[1997]=i("p",null,[i("strong",null,"缺点:"),i("strong",null,"计算量较大"),s("，对于像素密集的场景需要更多的计算资源")],-1)),l[1998]||(l[1998]=i("p",null,"适用场景： 逐片元光照通常用于需要高质量照明效果的PC和主机游戏，以及要求视觉逼真度较高的场景",-1)),l[1999]||(l[1999]=i("h3",{id:"二、兰伯特光照模型",tabindex:"-1"},[s("二、兰伯特光照模型 "),i("a",{class:"header-anchor",href:"#二、兰伯特光照模型","aria-label":'Permalink to "二、兰伯特光照模型"'},"​")],-1)),l[2e3]||(l[2e3]=i("blockquote",null,[i("p",null,"两个颜色相乘")],-1)),l[2001]||(l[2001]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"两个颜色变量相乘，通常用于计算光照、材质混合、纹理混合等等需求")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"它是一种用于混合颜色的操作")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"计算结果可以理解为两种颜色叠加在一起的效果")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"在颜色相乘中，通常是使用颜色通道的值来执行逐通道的乘法")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"举例：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"颜色A、B都是 fixed4 类型的变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"颜色A"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"* "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"颜色B"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (A.r "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," B.r, A.g "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," B.g, A.b "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," B.b, A.a "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," B.a);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"那么得到的这个结果就是A、B颜色叠加后的结果")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"总结：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"两个颜色变量相乘，得到的结果表示两个颜色叠加在一起")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2002]||(l[2002]=i("blockquote",null,[i("p",null,"漫反射")],-1)),l[2003]||(l[2003]=i("div",{class:"language-tex"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"tex"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"漫反射（Diffuse Reflection）是光线撞击一个物体表面后以各个方向均匀地反射出去的过程")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"在漫反射下，光线以无规律的方式散射，而不像镜面反射那样按照特定的角度反射。")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"这种散射导致了物体表面看起来均匀而不闪烁的效果。")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2004]||(l[2004]=i("blockquote",null,[i("p",null,"原理")],-1)),l[2005]||(l[2005]=i("div",{class:"language-tex"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"tex"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"认为漫反射光的强度仅与入射光的方向和反射点处表面法线的夹角的余弦成正比")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2006]||(l[2006]=i("h4",{id:"_1-公式",tabindex:"-1"},[s("1. 公式 "),i("a",{class:"header-anchor",href:"#_1-公式","aria-label":'Permalink to "1. 公式"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[145]||(l[145]=[s("`漫反射光照颜色 = 光源的颜色 * 材质的漫反射颜色 * max(0, 标准化后物体表面法线向量· 标准化后光源方向向量)`",-1)])]),_:1}),l[2007]||(l[2007]=i("p",null,"其中：",-1)),l[2008]||(l[2008]=i("ol",null,[i("li",null,"标准化后物体表面法线向量· 标准化后光源方向向量 得到的结果就是 cosθ"),i("li",null,[i("code",null,"max(0, cosθ)"),s("的目的是避免负数，对于模型背面的部分，认为找不到光，直接乘以0，变为黑色")])],-1)),l[2009]||(l[2009]=i("blockquote",null,[i("p",null,"相关公式")],-1)),l[2010]||(l[2010]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".光源的颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  Lighting.cginc 内置文件中的 _LightColor0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".光源的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  _WorldSpaceLightPos0 表示光源0在世界坐标系下的位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".向量归一化方法")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  normalize")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".取最大值方法")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  max")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".点乘方法")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  dot")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"6"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".兰伯特光照模型环境光变量（用于模拟环境光对物体的影响，避免物体阴影部分完全黑暗）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  UNITY_LIGHTMODEL_AMBIENT.rgb")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"7"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".将法线从模型空间转换到世界空间")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  UnityObjectToWorldNormal")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2011]||(l[2011]=i("h3",{id:"三、半兰伯特光照",tabindex:"-1"},[s("三、半兰伯特光照 "),i("a",{class:"header-anchor",href:"#三、半兰伯特光照","aria-label":'Permalink to "三、半兰伯特光照"'},"​")],-1)),l[2012]||(l[2012]=i("blockquote",null,[i("p",null,"原理")],-1)),l[2013]||(l[2013]=i("p",null,"和兰伯特光照模型的理论是一样的 认为漫反射光的强度仅与入射光的方向和反射点处表面法线的夹角的余弦成正比",-1)),l[2014]||(l[2014]=i("h4",{id:"_1-公式-1",tabindex:"-1"},[s("1. 公式 "),i("a",{class:"header-anchor",href:"#_1-公式-1","aria-label":'Permalink to "1. 公式"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[146]||(l[146]=[s("`漫反射光照颜色 = 光源的颜色 x 材质的漫反射颜色 x（（标准化后物体表面法线向量 x 标准化后光源方向向量）x 0.5 + 0.5）`",-1)])]),_:1}),l[2015]||(l[2015]=i("blockquote",null,[i("p",null,"对比")],-1)),l[2016]||(l[2016]=i("p",null,"兰伯特光照模型的 后半部分： max（0, 标准化后物体表面法线向量· 标准化后光源方向向量） 点乘小于0的部分都会变成0",-1)),l[2017]||(l[2017]=i("p",null,"半兰伯特光照模型的 后半部分： `（（标准化后物体表面法线向量· 标准化后光源方向向量）*0.5 + 0.5）````````````````````````````````````````````` 点乘小于0的部分都会变成 0 ~0.5",-1)),l[2018]||(l[2018]=i("p",null,"1 ~1 映射到了 0 ~1",-1)),l[2019]||(l[2019]=i("hr",null,null,-1)),l[2020]||(l[2020]=i("h3",{id:"四、phong式高光反射光照模型",tabindex:"-1"},[s("四、Phong式高光反射光照模型 "),i("a",{class:"header-anchor",href:"#四、phong式高光反射光照模型","aria-label":'Permalink to "四、Phong式高光反射光照模型"'},"​")],-1)),l[2021]||(l[2021]=i("blockquote",null,[i("p",null,"Phong式高光反射光照模型原理")],-1)),l[2022]||(l[2022]=i("p",null,"Phong式高光反射光照模型的理论是 基于光的反射行为和观察者的位置决定高光反射的表现效果 认为高光反射的颜色和 光源的反射光线以及观察者位置方向向量夹角的余弦成正比 并且通过对余弦值取n次幂来表示光泽度（或反光度）",-1)),l[2023]||(l[2023]=i("h4",{id:"_1-公式-2",tabindex:"-1"},[s("1. 公式 "),i("a",{class:"header-anchor",href:"#_1-公式-2","aria-label":'Permalink to "1. 公式"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[147]||(l[147]=[i("b",null,"高光反射光照颜色:",-1)])]),_:1}),l[2024]||(l[2024]=i("p",null,[i("span",{class:"katex-display"},[i("span",{class:"katex"},[i("span",{class:"katex-mathml"},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[i("semantics",null,[i("mrow",null,[i("mtext",null,"光源的颜色"),i("mo",null,"∗"),i("mtext",null,"材质高光反射颜色"),i("mo",null,"∗"),i("mi",null,"p"),i("mi",null,"o"),i("mi",null,"w"),i("mo",{stretchy:"false"},"("),i("mi",null,"m"),i("mi",null,"a"),i("mi",null,"x"),i("mo",{stretchy:"false"},"("),i("mn",null,"0"),i("mo",{separator:"true"},","),i("mtext",null,"标准化后观察方向向量"),i("mi",null,"x"),i("mtext",null,"标准化后的反射方向"),i("mo",{stretchy:"false"},")"),i("mo",{separator:"true"},","),i("mtext",null,"光泽度"),i("mo",{stretchy:"false"},")")]),i("annotation",{encoding:"application/x-tex"},"\\text{光源的颜色} * \\text{材质高光反射颜色} * pow (max(0, \\text{标准化后观察方向向量}x\\text{标准化后的反射方向} ),\\text{光泽度} ) ")])])]),i("span",{class:"katex-html","aria-hidden":"true"},[i("span",{class:"base"},[i("span",{class:"strut",style:{height:"0.6833em"}}),i("span",{class:"mord text"},[i("span",{class:"mord cjk_fallback"},"光源的颜色")]),i("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),i("span",{class:"mbin"},"∗"),i("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),i("span",{class:"base"},[i("span",{class:"strut",style:{height:"0.6833em"}}),i("span",{class:"mord text"},[i("span",{class:"mord cjk_fallback"},"材质高光反射颜色")]),i("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),i("span",{class:"mbin"},"∗"),i("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),i("span",{class:"base"},[i("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),i("span",{class:"mord mathnormal"},"p"),i("span",{class:"mord mathnormal"},"o"),i("span",{class:"mord mathnormal",style:{"margin-right":"0.02691em"}},"w"),i("span",{class:"mopen"},"("),i("span",{class:"mord mathnormal"},"ma"),i("span",{class:"mord mathnormal"},"x"),i("span",{class:"mopen"},"("),i("span",{class:"mord"},"0"),i("span",{class:"mpunct"},","),i("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),i("span",{class:"mord text"},[i("span",{class:"mord cjk_fallback"},"标准化后观察方向向量")]),i("span",{class:"mord mathnormal"},"x"),i("span",{class:"mord text"},[i("span",{class:"mord cjk_fallback"},"标准化后的反射方向")]),i("span",{class:"mclose"},")"),i("span",{class:"mpunct"},","),i("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),i("span",{class:"mord text"},[i("span",{class:"mord cjk_fallback"},"光泽度")]),i("span",{class:"mclose"},")")])])])])],-1)),a(n,{color:"red"},{default:k(()=>[...l[148]||(l[148]=[i("b",null,"标准化后观察方向向量",-1)])]),_:1}),l[2025]||(l[2025]=i("p",null,[i("span",{class:"katex-display"},[i("span",{class:"katex"},[i("span",{class:"katex-mathml"},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[i("semantics",null,[i("mrow",null,[i("mi",null,"n"),i("mi",null,"o"),i("mi",null,"r"),i("mi",null,"m"),i("mi",null,"a"),i("mi",null,"l"),i("mi",null,"i"),i("mi",null,"z"),i("mi",null,"e"),i("mo",{stretchy:"false"},"("),i("mtext",null,"观察者的位置（摄像机的位置） - 世界空间下顶点位置"),i("mo",{stretchy:"false"},")")]),i("annotation",{encoding:"application/x-tex"},"normalize(\\text{观察者的位置（摄像机的位置） - 世界空间下顶点位置}) ")])])]),i("span",{class:"katex-html","aria-hidden":"true"},[i("span",{class:"base"},[i("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),i("span",{class:"mord mathnormal"},"n"),i("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"or"),i("span",{class:"mord mathnormal"},"ma"),i("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),i("span",{class:"mord mathnormal"},"i"),i("span",{class:"mord mathnormal"},"ze"),i("span",{class:"mopen"},"("),i("span",{class:"mord text"},[i("span",{class:"mord cjk_fallback"},"观察者的位置（摄像机的位置）"),i("span",{class:"mord"}," - "),i("span",{class:"mord cjk_fallback"},"世界空间下顶点位置")]),i("span",{class:"mclose"},")")])])])])],-1)),a(n,{color:"red"},{default:k(()=>[...l[149]||(l[149]=[i("b",null,"标准化后的反射方向",-1)])]),_:1}),l[2026]||(l[2026]=i("p",null,[i("span",{class:"katex-display"},[i("span",{class:"katex"},[i("span",{class:"katex-mathml"},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[i("semantics",null,[i("mrow",null,[i("mi",null,"r"),i("mi",null,"e"),i("mi",null,"f"),i("mi",null,"l"),i("mi",null,"e"),i("mi",null,"c"),i("mi",null,"t"),i("mo",{stretchy:"false"},"("),i("mo",null,"−"),i("mtext",null,"世界空间下的光位置的方向向量, 世界空间下的法线"),i("mo",{stretchy:"false"},")")]),i("annotation",{encoding:"application/x-tex"},"reflect(-\\text{世界空间下的光位置的方向向量, 世界空间下的法线}) ")])])]),i("span",{class:"katex-html","aria-hidden":"true"},[i("span",{class:"base"},[i("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),i("span",{class:"mord mathnormal"},"re"),i("span",{class:"mord mathnormal",style:{"margin-right":"0.10764em"}},"f"),i("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),i("span",{class:"mord mathnormal"},"ec"),i("span",{class:"mord mathnormal"},"t"),i("span",{class:"mopen"},"("),i("span",{class:"mord"},"−"),i("span",{class:"mord text"},[i("span",{class:"mord cjk_fallback"},"世界空间下的光位置的方向向量"),i("span",{class:"mord"},", "),i("span",{class:"mord cjk_fallback"},"世界空间下的法线")]),i("span",{class:"mclose"},")")])])])])],-1)),l[2027]||(l[2027]=i("blockquote",null,[i("p",null,"关键api")],-1)),l[2028]||(l[2028]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//1.观察者的位置（摄像机的位置）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"_WorldSpaceCameraPos")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//2.相对于法向量的反射向量 方法")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"reflect"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(入射向量,顶点法向量) 返回反射向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//3.指数幂 方法")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(底数，指数) 返回计算结果")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2029]||(l[2029]=i("h4",{id:"_2-逐顶点",tabindex:"-1"},[s("2. 逐顶点 "),i("a",{class:"header-anchor",href:"#_2-逐顶点","aria-label":'Permalink to "2. 逐顶点"'},"​")],-1)),l[2030]||(l[2030]=i("div",{class:"language-Shader"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"Shader"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Shader"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Unlit/Lesson35_Specular"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //高光反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        _SpecularColor("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"Color"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") = ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //光泽度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        _SpecularNum("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularNum"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"20"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0.5")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        Tags"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," { "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"LightMode"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ForwardBase"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            #pragma"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            #pragma"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            #include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            #include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Lighting.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            struct"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //裁剪空间下的 顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pos:"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"SV_POSITION"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //颜色信息")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color:"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"COLOR"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //对应属性当中的颜色和光泽度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularColor;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularNum;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            v2f "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"appdata_base"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2f data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //1.将顶点坐标转换到裁剪空间当中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.pos = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //2.计算颜色相关")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //高光反射光照颜色 = 光源的颜色 * 材质高光反射颜色 * max（0, 标准化后观察方向向量· 标准化后的反射方向）幂")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //光源的颜色 _LightColor.rgb")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //材质高光反射颜色 _SpecularColor.rgb")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //幂(光泽度) _SpecularNum")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //1.标准化后观察方向向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //将模型空间下的顶点位置 转换到 世界空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                // UNITY_MATRIX_M : 从模型空间下 转到 世界空间下的转换矩阵")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," worldPos = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"UNITY_MATRIX_M"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //得到的就是视角方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," viewDir = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"_WorldSpaceCameraPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".xyz - worldPos;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //单位化（归一化）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                viewDir = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(viewDir);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //2.标准化后的反射方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //得到的光位置的方向向量（世界空间下的）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lightDir = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"_WorldSpaceLightPos0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".xyz);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //法线在世界空间下的向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," normal = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //反射光线向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," reflectDir = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"reflect"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(-lightDir, normal);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //高光反射光照颜色 = 光源的颜色 * 材质高光反射颜色 * max（0, 标准化后观察方向向量· 标准化后的反射方向）幂")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"_LightColor0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".rgb * _SpecularColor.rgb * "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"( "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(viewDir, reflectDir)), _SpecularNum);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.color = color;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed4"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (v2f i) : "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.color.rgb, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2031]||(l[2031]=i("h4",{id:"_3-逐片元",tabindex:"-1"},[s("3. 逐片元 "),i("a",{class:"header-anchor",href:"#_3-逐片元","aria-label":'Permalink to "3. 逐片元"'},"​")],-1)),l[2032]||(l[2032]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson36_SpecularF"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //高光反射颜色  光泽度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _SpecularNum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularNum"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"20"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //如果有多个Pass渲染通道时 一般情况下会把光照模式的 Tags放到对应的Pass中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //以免影响其他Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Tags { "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"LightMode"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ForwardBase"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "Lighting.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //裁剪空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的 法线信息")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"wNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":NORMAL;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的 顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"wPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularNum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," data"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //1.顶点裁剪空间变换")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.pos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //2.进行法线空间变换")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.wNormal "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //3.顶点转到世界空间")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //data.wPos = mul(UNITY_MATRIX_M, v.vertex).xyz;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //data.wPos = mul(_Object2World, v.vertex).xyz;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.wPos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(unity_ObjectToWorld, v.vertex).xyz;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //1.视角单位向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," viewDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_WorldSpaceCameraPos.xyz "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," i.wPos );")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //2.光的反射单位向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //光的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lightDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_WorldSpaceLightPos0.xyz);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //光反射光线的单位向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," reflectDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," reflect"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"lightDir, i.wNormal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //color = 光源颜色 * 材质高光反射颜色 * pow( max(0, dot(视角单位向量, 光的反射单位向量)), 光泽度 )")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," color"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularColor.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"( "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(viewDir, reflectDir)), _SpecularNum );")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(color.rgb, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2033]||(l[2033]=i("h3",{id:"五、phong光照模型",tabindex:"-1"},[s("五、Phong光照模型 "),i("a",{class:"header-anchor",href:"#五、phong光照模型","aria-label":'Permalink to "五、Phong光照模型"'},"​")],-1)),l[2034]||(l[2034]=i("blockquote",null,[i("p",null,"颜色相乘和相加的不同")],-1)),l[2035]||(l[2035]=i("p",null,[i("strong",null,"相乘:"),s(" 颜色相乘时，最终颜色会往黑色靠拢 计算两个颜色混合时一般用颜色相乘 因为真实世界中多个颜色混在一起最终会变成黑色")],-1)),l[2036]||(l[2036]=i("p",null,[i("strong",null,"相加:"),s(" 颜色相加时，最终颜色会往白色靠拢 计算光照反射时一般用颜色相加，因为向白色靠拢能带来 更亮的感觉，复合光的表现")],-1)),l[2037]||(l[2037]=i("blockquote",null,[i("p",null,"Unity Shader中的环境光")],-1)),l[2038]||(l[2038]=i("p",null,[i("code",null,"Window——> Rendering——> Lighting"),s(" ` Environment(环境)页签中的Environment Lighting(环境光) 这里可以设置环境光来源 当是Skybox和Color时，我们可以通过 UNITY_LIGHTMODEL_AMBIENT 获取到对应环境光颜色 当是Gradient（渐变）时，通过以下3个成员可以得到对应的环境光 unity_AmbientSky（周围的天空环境光） unity_AmbientEquator（周围的赤道环境光） unity_AmbientGround（周围的地面环境光）")],-1)),l[2039]||(l[2039]=i("p",null,[i("strong",null,"注意"),s("： 这些内置变量都包含在 "),i("code",null,"UnityShaderVariables.cginc"),s(" 中 在编译时，会自动包含该文件，可以不用手动包含")],-1)),l[2040]||(l[2040]=i("blockquote",null,[i("p",null,"原理")],-1)),l[2041]||(l[2041]=i("p",null,"裴祥风认为物体表面反射光线是由三部分组成的 环境光 + 漫反射光 + 镜面反射光（高光反射光）",-1)),l[2042]||(l[2042]=i("h4",{id:"_1-公式-3",tabindex:"-1"},[s("1. 公式 "),i("a",{class:"header-anchor",href:"#_1-公式-3","aria-label":'Permalink to "1. 公式"'},"​")],-1)),l[2043]||(l[2043]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"物体表面光照颜色 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 环境光颜色 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 漫反射光颜色 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 高光反射光颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"其中：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"环境光颜色 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UNITY_LIGHTMODEL_AMBIENT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(unity_AmbientSky、unity_AmbientEquator、unity_AmbientGround)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"漫反射光颜色 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 兰伯特光照模型 计算得到的颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"高光反射光颜色 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Phong式高光反射光照模型 计算得到的颜色")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2044]||(l[2044]=i("hr",null,null,-1)),l[2045]||(l[2045]=i("h4",{id:"_2-逐顶点-1",tabindex:"-1"},[s("2.逐顶点 "),i("a",{class:"header-anchor",href:"#_2-逐顶点-1","aria-label":'Permalink to "2.逐顶点"'},"​")],-1)),l[2046]||(l[2046]=i("div",{class:"language-ShaderLab"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"ShaderLab"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Shader"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Unlit/Lesson38_Phong"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //材质的漫反射光照颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        _MainColor("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"Color"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") = ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //高光反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        _SpecularColor("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"Color"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") = ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //光泽度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        _SpecularNum("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularNum"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"20"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0.5")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //设置我们的光照模式 ForwardBase这种向前渲染模式 主要是用来处理 不透明物体的 光照渲染的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"            Tags"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," { "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"LightMode"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ForwardBase"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            #pragma"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            #pragma"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //引用对应的内置文件")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //主要是为了之后 的 比如内置结构体使用，内置变量使用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            #include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            #include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Lighting.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //材质的漫反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainColor;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //对应属性当中的颜色和光泽度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularColor;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularNum;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //顶点着色器传递给片元着色器的内容")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            struct"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //裁剪空间下的顶点坐标信息")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pos:"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"SV_POSITION"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //对应顶点的漫反射光照颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color:"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"COLOR"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //计算兰伯特光照模型 颜色 相关函数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed3"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," getLambertColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"in"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," objNormal)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //在模型空间下的发现")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //v.normal")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //获取到 相对于世界坐标系下的 发现信息")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," normal = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(objNormal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lightDir = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"_WorldSpaceLightPos0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".xyz);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //有了相关的参数 就可以用公式来进行计算了")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //光照颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //_LightColor0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"_LightColor0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".rgb * _MainColor.rgb * "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(normal, lightDir));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //计算Phong高光反射光照模型 颜色 相关函数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed3"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," getSpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"in"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," float4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," objVertex, "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"in"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," objNormal)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //1.标准化后观察方向向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //将模型空间下的顶点位置 转换到 世界空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                // UNITY_MATRIX_M : 从模型空间下 转到 世界空间下的转换矩阵")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," worldPos = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"UNITY_MATRIX_M"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", objVertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //得到的就是视角方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," viewDir = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"_WorldSpaceCameraPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".xyz - worldPos;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //单位化（归一化）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                viewDir = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(viewDir);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //2.标准化后的反射方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //得到的光位置的方向向量（世界空间下的）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lightDir = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"_WorldSpaceLightPos0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".xyz);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //法线在世界空间下的向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," normal = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(objNormal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //反射光线向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," reflectDir = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"reflect"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(-lightDir, normal);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //高光反射光照颜色 = 光源的颜色 * 材质高光反射颜色 * max（0, 标准化后观察方向向量· 标准化后的反射方向）幂")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"_LightColor0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".rgb * _SpecularColor.rgb * "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"( "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(viewDir, reflectDir)), _SpecularNum);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            v2f "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"appdata_base"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2f v2fData;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //把模型空间下的 顶点转换到裁剪空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2fData.pos = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算兰伯特光照模型所得颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lambertColor = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"getLambertColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算Phong式高光反射光照模型所得颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," specularColor = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"getSpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex, v.normal);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //利用Phong光照模型公式 进行颜色计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //物体表面光照颜色 = 环境光颜色 + 兰伯特光照模型所得颜色 + Phong式高光反射光照模型所得颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2fData.color = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"UNITY_LIGHTMODEL_AMBIENT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".rgb + lambertColor + specularColor;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v2fData;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed4"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (v2f i) : "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.color.rgb, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2047]||(l[2047]=i("h4",{id:"_3-逐片元-1",tabindex:"-1"},[s("3.逐片元 "),i("a",{class:"header-anchor",href:"#_3-逐片元-1","aria-label":'Permalink to "3.逐片元"'},"​")],-1)),l[2048]||(l[2048]=i("div",{class:"language-ShaderLab"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"ShaderLab"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Shader"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Unlit/Lesson39_PhongF"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        _MainColor("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"Color"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") = ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //高光反射颜色  光泽度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        _SpecularColor("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"Color"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") = ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        _SpecularNum("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularNum"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"20"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"            Tags"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," { "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"LightMode"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ForwardBase"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            #pragma"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            #pragma"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," fragment frag")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            #include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            #include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Lighting.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //材质漫反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainColor;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularColor;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularNum;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //顶点着色器返回出去的内容")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            struct"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //裁剪空间下的顶点位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pos:"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"SV_POSITION"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的法线位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," wNormal:"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"NORMAL"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的 顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," wPos:"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"TEXCOORD0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //得到兰伯特光照模型计算的颜色 （逐片元）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed3"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," getLambertFColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"in"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," wNormal)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //得到光源单位向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lightDir = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"_WorldSpaceLightPos0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".xyz);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算除了兰伯特光照的漫反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"_LightColor0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".rgb * _MainColor.rgb * "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(wNormal, lightDir));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //得到Phong式高光反射模型计算的颜色（逐片元）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed3"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," getSpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"in"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," wPos, "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"in"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," wNormal)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //1.视角单位向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," viewDir = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"_WorldSpaceCameraPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".xyz - wPos );")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //2.光的反射单位向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //光的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lightDir = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"_WorldSpaceLightPos0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".xyz);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //光反射光线的单位向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," reflectDir = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"reflect"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(-lightDir, wNormal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //color = 光源颜色 * 材质高光反射颜色 * pow( max(0, dot(视角单位向量, 光的反射单位向量)), 光泽度 )")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"_LightColor0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".rgb * _SpecularColor.rgb * "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"( "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(viewDir, reflectDir)), _SpecularNum );")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            v2f "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"appdata_base"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               v2f v2fData;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //转换模型空间下的顶点到裁剪空间中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               v2fData.pos = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //转换模型空间下的法线到世界空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               v2fData.wNormal = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //顶点转到世界空间")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               v2fData.wPos = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"unity_ObjectToWorld"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", v.vertex).xyz;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"               return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v2fData;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed4"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (v2f i) : "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算兰伯特光照颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lambertColor = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"getLambertFColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wNormal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算Phong式高光反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," specularColor = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"getSpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wPos, i.wNormal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //物体表面光照颜色 = 环境光颜色 + 兰伯特光照模型所得颜色 + Phong式高光反射光照模型所得颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," phongColor = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"UNITY_LIGHTMODEL_AMBIENT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".rgb + lambertColor + specularColor;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(phongColor.rgb, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2049]||(l[2049]=i("h3",{id:"六、blinn-phong式高光反射光照模型",tabindex:"-1"},[s("六、Blinn-Phong式高光反射光照模型 "),i("a",{class:"header-anchor",href:"#六、blinn-phong式高光反射光照模型","aria-label":'Permalink to "六、Blinn-Phong式高光反射光照模型"'},"​")],-1)),l[2050]||(l[2050]=i("blockquote",null,[i("p",null,[i("strong",null,"原理")])],-1)),l[2051]||(l[2051]=i("ul",null,[i("li",null,"它是对Phong式高光反射光照模型的改进"),i("li",null,"它不再使用反射向量计算镜面反射，而是使用半角向量来进行计算半角向量为视角方向和灯光方向的角平分线方向"),i("li",null,"认为高光反射的颜色和 顶点法线向量以及半角向量夹角的余弦成正比"),i("li",null,"并且通过对余弦值取n次幂来表示光泽度（或反光度）")],-1)),l[2052]||(l[2052]=i("blockquote",null,[i("p",null,"Phong和Blinn-Phong的区别")],-1)),l[2053]||(l[2053]=i("p",null,"由于两个光照模型中高光反射光照模型的计算方式不一样,从而会带来一些表现上的不同",-1)),l[2054]||(l[2054]=i("ol",null,[i("li",null,[i("p",null,[i("strong",null,"高光散射"),s(" Blinn-Phong模型的高光通常会产生相对均匀的高光散射，这会使物体看起来光滑而均匀。 Phong模型的高光可能会呈现更为锐利的高光散射，因为它基于观察者和光源之间的夹角。 这可能导致一些区域看起来特别亮，而另一些区域则非常暗。")])]),i("li",null,[i("p",null,[i("strong",null,"高光锐度")]),i("p",null,"Blinn-Phong模型的高光通常具有较广的散射角，因此看起来不那么锐利。 Phong模型的高光可能会更加锐利，特别是在观察者和光源夹角较小时，可能表现为小而亮的点。")]),i("li",null,[i("p",null,[i("strong",null,"光滑度和表面纹理")]),i("p",null,"Blinn-Phong模型通常更适合表现光滑的表面，因为它考虑了表面微观凹凸之间的相互作用，使得光照在表面上更加均匀分布。 Phong模型有时更适合表现具有粗糙表面纹理的物体，因为它的高光散射可能会使纹理和细节更加突出。")]),i("li",null,[i("p",null,[i("strong",null,"镜面高光大小")]),i("p",null,"Blinn-Phong模型通常产生的镜面高光相对较大，但均匀分布。 Phong模型可能会产生较小且锐利的镜面高光。")])],-1)),l[2055]||(l[2055]=i("hr",null,null,-1)),l[2056]||(l[2056]=i("h4",{id:"_1-公式-4",tabindex:"-1"},[s("1.公式 "),i("a",{class:"header-anchor",href:"#_1-公式-4","aria-label":'Permalink to "1.公式"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[150]||(l[150]=[s("`高光反射光照颜色 = 光源的颜色 * 材质高光反射颜色 * max（0, 标准化后顶点法线方向向量 · 标准化后半角向量方向向量）幂`",-1)])]),_:1}),l[2057]||(l[2057]=i("ol",null,[i("li",null,"标准化后顶点法线方向向量 · 标准化后半角向量方向向量 得到的结果就是 cosθ"),i("li",null,[i("strong",null,"半角向量方向向量 = 视角单位向量 + 入射光单位向量")]),i("li",null,"幂 代表的是光泽度 余弦值取n次幂")],-1)),l[2058]||(l[2058]=i("h4",{id:"_2-逐顶点-2",tabindex:"-1"},[s("2.逐顶点 "),i("a",{class:"header-anchor",href:"#_2-逐顶点-2","aria-label":'Permalink to "2.逐顶点"'},"​")],-1)),l[2059]||(l[2059]=i("div",{class:"language-ShaderLab"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"ShaderLab"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Shader"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Unlit/Lesson41_Blinn-Phong"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"		_SpecularColor("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"Color"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")=("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"		_SpecularNum("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularNum"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"20"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"5")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"		Tags")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'			"LightMode"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ForwardBase"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"		LOD"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 100")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"		Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"			CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"			#pragma"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"			#pragma"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," fragment frag")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"			#include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"			#include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Lighting.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"			float4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularColor;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"			float"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularNum;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"			struct"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"				float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color:"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"COLOR"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"				float4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pos:"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"SV_POSITION"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			};")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			v2f "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"appdata_base"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"				v2f data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"				data.pos = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"				float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," wNormal = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"				//标准化后变焦向量方向向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"				float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," wPos = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"UNITY_MATRIX_M"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"				float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," viewDic = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"_WorldSpaceCameraPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".xyz - wPos);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"				//光线方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"				float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," LightDic = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"_WorldSpaceLightPos0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".xyz);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"				//半角方向向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"				float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," halfA = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(viewDic + LightDic);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"				data.color = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"_LightColor0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".rgb * _SpecularColor.rgb * "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(wNormal, halfA)), _SpecularNum);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"				return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"			fixed4"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v2f i) : "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"				return"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.color.rgb, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"			ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2060]||(l[2060]=i("h4",{id:"_3-逐片元-2",tabindex:"-1"},[s("3.逐片元 "),i("a",{class:"header-anchor",href:"#_3-逐片元-2","aria-label":'Permalink to "3.逐片元"'},"​")],-1)),l[2061]||(l[2061]=i("div",{class:"language-ShaderLab"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"ShaderLab"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Shader"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Unlit/Lesson42_Blinn-Phong"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"		//高光反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"		_SpecularColor("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"Color"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") = ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"		//光泽度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"		_SpecularNum("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularNum"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"20"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"5")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"		Tags")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'			"LightMode"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ForwardBase"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"		Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"			CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"			#pragma"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"			#pragma"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"			#include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"			#include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Lighting.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"			struct"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"				//裁剪空间下的 顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"				float4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pos:"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"SV_POSITION"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"				float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," wNormal:"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"NORMAL"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"				float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," wPos:"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"TEXCOORD0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			};")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"			//对应属性当中的颜色和光泽度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"			float4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularColor;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"			float"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularNum;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			v2f "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"appdata_base"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"				v2f data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"				data.pos = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"				data.wPos = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"unity_ObjectToWorld"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"				data.wNormal = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"				return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"			fixed4"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v2f i) : "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			{")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"				//高光反射光照颜色 = 光源的颜色 * 材质高光反射颜色 * max（0, 标准化后顶点法线方向向量 · 标准化后半角向量方向向量）幂")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," viewDir = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"( "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"_WorldSpaceCameraPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".xyz - i.wPos );")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //光线方向 单位向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lightDir = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"_WorldSpaceLightPos0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".xyz);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //半角方向向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," halfA = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(viewDir + lightDir);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //高光反射光照颜色 = 光源的颜色 * 材质高光反射颜色 * max（0, 标准化后顶点法线方向向量 · 标准化后半角向量方向向量）幂")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"_LightColor0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".rgb * _SpecularColor.rgb * "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"( "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wNormal, halfA)) , _SpecularNum);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(color.rgb, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"			ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2062]||(l[2062]=i("hr",null,null,-1)),l[2063]||(l[2063]=i("h3",{id:"七、blinn-phong光照模型",tabindex:"-1"},[s("七、Blinn Phong光照模型 "),i("a",{class:"header-anchor",href:"#七、blinn-phong光照模型","aria-label":'Permalink to "七、Blinn Phong光照模型"'},"​")],-1)),l[2064]||(l[2064]=i("blockquote",null,[i("p",null,"来历")],-1)),l[2065]||(l[2065]=i("p",null,"Blinn Phong光照模型它是由吉姆·布林（Jim Blinn，美国计算机科学家）在1977年时，在Phong光照模型基础上进行修改提出的",-1)),l[2066]||(l[2066]=i("ul",null,[i("li",null,"它和Phong一样是一个经验模型，并不符合真实世界中的光照现象 它们只是看起来正确")],-1)),l[2067]||(l[2067]=i("blockquote",null,[i("p",null,"原理")],-1)),l[2068]||(l[2068]=i("p",null,"Blinn Phong和Phong光照模型一样，认为物体表面反射光线是由三部分组成的",-1)),l[2069]||(l[2069]=i("ul",null,[i("li",null,[i("strong",null,"环境光 + 漫反射光 + 镜面反射光（高光反射光）")])],-1)),l[2070]||(l[2070]=i("h4",{id:"_1-公式-5",tabindex:"-1"},[s("1.公式 "),i("a",{class:"header-anchor",href:"#_1-公式-5","aria-label":'Permalink to "1.公式"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[151]||(l[151]=[s("物体表面光照颜色 = 环境光颜色 + 漫反射光颜色 + 高光反射光颜色",-1)])]),_:1}),l[2071]||(l[2071]=i("p",null,"物体表面光照颜色 = 环境光颜色 + 兰伯特光照模型所得颜色 + Blinn Phong式高光反射光照模型所得颜色",-1)),l[2072]||(l[2072]=i("p",null,"其中：",-1)),l[2073]||(l[2073]=i("ul",null,[i("li",null,[s("环境光颜色 = "),i("code",null,"UNITY_LIGHTMODEL_AMBIENT(unity_AmbientSky、unity_AmbientEquator、unity_AmbientGround)")]),i("li",null,"漫反射光颜色 = 兰伯特光照模型 计算得到的颜色"),i("li",null,"高光反射光颜色 = Blinn Phong式高光反射光照模型 计算得到的颜色")],-1)),l[2074]||(l[2074]=i("h4",{id:"_2-逐顶点-3",tabindex:"-1"},[s("2.逐顶点 "),i("a",{class:"header-anchor",href:"#_2-逐顶点-3","aria-label":'Permalink to "2.逐顶点"'},"​")],-1)),l[2075]||(l[2075]=i("div",{class:"language-ShaderLab"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"ShaderLab"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Shader"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Unlit/Lesson44_BlinnPhong"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //材质的漫反射光照颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        _MainColor("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"Color"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") = ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //高光反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        _SpecularColor("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"Color"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") = ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //光泽度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        _SpecularNum("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularNum"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"20"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0.5")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //设置我们的光照模式 ForwardBase这种向前渲染模式 主要是用来处理 不透明物体的 光照渲染的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"            Tags"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," { "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"LightMode"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ForwardBase"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            #pragma"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            #pragma"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //引用对应的内置文件")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //主要是为了之后 的 比如内置结构体使用，内置变量使用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            #include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            #include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Lighting.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //材质的漫反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainColor;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //对应属性当中的颜色和光泽度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularColor;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularNum;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //顶点着色器传递给片元着色器的内容")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            struct"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //裁剪空间下的顶点坐标信息")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pos:"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"SV_POSITION"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //对应顶点的漫反射光照颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color:"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"COLOR"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //计算兰伯特光照模型 颜色 相关函数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed3"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," getLambertColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"in"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," objNormal)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //在模型空间下的发现")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //v.normal")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //获取到 相对于世界坐标系下的 发现信息")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," normal = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(objNormal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lightDir = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"_WorldSpaceLightPos0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".xyz);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //有了相关的参数 就可以用公式来进行计算了")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //光照颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //_LightColor0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"_LightColor0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".rgb * _MainColor.rgb * "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(normal, lightDir));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //计算BlinnPhong高光反射光照模型 颜色 相关函数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed3"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," getSpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"in"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," float4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," objVertex, "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"in"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," objNormal)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //1.标准化后观察方向向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //将模型空间下的顶点位置 转换到 世界空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                // UNITY_MATRIX_M : 从模型空间下 转到 世界空间下的转换矩阵")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," worldPos = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"UNITY_MATRIX_M"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", objVertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //得到的就是视角方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," viewDir = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"_WorldSpaceCameraPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".xyz - worldPos;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //单位化（归一化）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                viewDir = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(viewDir);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //2.标准化后的反射方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //得到的光位置的方向向量（世界空间下的）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lightDir = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"_WorldSpaceLightPos0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".xyz);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //法线在世界空间下的向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," normal = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(objNormal);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //半角方向向量的单位向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," halfA = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(viewDir + lightDir);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //高光反射光照颜色 = 光源的颜色 * 材质高光反射颜色 * max（0, 标准化后观察方向向量· 标准化后的反射方向）幂")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"_LightColor0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".rgb * _SpecularColor.rgb * "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"( "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(normal, halfA)), _SpecularNum);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            v2f "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"appdata_base"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2f v2fData;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //把模型空间下的 顶点转换到裁剪空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2fData.pos = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算兰伯特光照模型所得颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lambertColor = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"getLambertColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算BlinnPhong式高光反射光照模型所得颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," specularColor = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"getSpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex, v.normal);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //利用Phong光照模型公式 进行颜色计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //物体表面光照颜色 = 环境光颜色 + 兰伯特光照模型所得颜色 + Phong式高光反射光照模型所得颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2fData.color = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"UNITY_LIGHTMODEL_AMBIENT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".rgb + lambertColor + specularColor;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v2fData;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed4"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (v2f i) : "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.color.rgb, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2076]||(l[2076]=i("h4",{id:"_3-逐片元-3",tabindex:"-1"},[s("3.逐片元 "),i("a",{class:"header-anchor",href:"#_3-逐片元-3","aria-label":'Permalink to "3.逐片元"'},"​")],-1)),l[2077]||(l[2077]=i("div",{class:"language-ShaderLab"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"ShaderLab"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Shader"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Unlit/Lesson45_BlinnPhongF"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        _MainColor("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"Color"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") = ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //高光反射颜色  光泽度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        _SpecularColor("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"Color"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") = ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        _SpecularNum("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularNum"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"20"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"            Tags"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," { "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"LightMode"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ForwardBase"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            #pragma"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            #pragma"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," fragment frag")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            #include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            #include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Lighting.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //材质漫反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainColor;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularColor;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularNum;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //顶点着色器返回出去的内容")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            struct"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //裁剪空间下的顶点位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pos:"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"SV_POSITION"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的法线位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," wNormal:"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"NORMAL"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的 顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," wPos:"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"TEXCOORD0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //得到兰伯特光照模型计算的颜色 （逐片元）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed3"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," getLambertFColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"in"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," wNormal)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //得到光源单位向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lightDir = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"_WorldSpaceLightPos0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".xyz);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算除了兰伯特光照的漫反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"_LightColor0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".rgb * _MainColor.rgb * "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(wNormal, lightDir));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //得到Blinn Phong式高光反射模型计算的颜色（逐片元）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed3"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," getSpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"in"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," wPos, "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"in"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," wNormal)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //1.视角单位向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," viewDir = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"_WorldSpaceCameraPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".xyz - wPos );")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //2.光的反射单位向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //光的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lightDir = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"_WorldSpaceLightPos0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".xyz);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //半角方向向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," halfA = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(viewDir + lightDir);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //color = 光源颜色 * 材质高光反射颜色 * pow( max(0, dot(视角单位向量, 光的反射单位向量)), 光泽度 )")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"_LightColor0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".rgb * _SpecularColor.rgb * "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"( "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(wNormal, halfA)), _SpecularNum );")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            v2f "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"appdata_base"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                 v2f v2fData;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //转换模型空间下的顶点到裁剪空间中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2fData.pos = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //转换模型空间下的法线到世界空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2fData.wNormal = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //顶点转到世界空间")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2fData.wPos = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"unity_ObjectToWorld"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", v.vertex).xyz;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v2fData;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed4"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (v2f i) : "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算兰伯特光照颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lambertColor = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"getLambertFColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wNormal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算BlinnPhong式高光反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," specularColor = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"getSpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wPos, i.wNormal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //物体表面光照颜色 = 环境光颜色 + 兰伯特光照模型所得颜色 + Phong式高光反射光照模型所得颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," blinnPhongColor = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"UNITY_LIGHTMODEL_AMBIENT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".rgb + lambertColor + specularColor;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(blinnPhongColor.rgb, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2078]||(l[2078]=i("h3",{id:"八、-为何逐片元比逐顶点平滑",tabindex:"-1"},[s("八、**为何逐片元比逐顶点平滑 "),i("a",{class:"header-anchor",href:"#八、-为何逐片元比逐顶点平滑","aria-label":'Permalink to "八、**为何逐片元比逐顶点平滑"'},"​")],-1)),l[2079]||(l[2079]=i("blockquote",null,[i("p",null,"为什么逐顶点光照的渲染表现比较粗糙")],-1)),a(n,{color:"red"},{default:k(()=>[...l[152]||(l[152]=[s("顶点以外的像素点颜色，是进行插值运算的结果，效果不真实 ",-1)])]),_:1}),l[2080]||(l[2080]=i("blockquote",null,[i("p",null,"为什么逐片元光照的渲染表现更加的平滑")],-1)),a(n,{color:"red"},{default:k(()=>[...l[153]||(l[153]=[s("每一个像素点都利用其相关数据（法线、位置等）进行颜色计算，效果更真实 ",-1)])]),_:1}),l[2081]||(l[2081]=i("p",null,"注意： 也侧面说明了片元着色器的性能消耗更大，顶点着色器的性能消耗更小",-1)),l[2082]||(l[2082]=i("hr",null,null,-1)),l[2083]||(l[2083]=i("h2",{id:"纹理",tabindex:"-1"},[s("纹理 "),i("a",{class:"header-anchor",href:"#纹理","aria-label":'Permalink to "纹理"'},"​")],-1)),l[2084]||(l[2084]=i("blockquote",null,[i("p",null,"纹理是用来干嘛的")],-1)),l[2085]||(l[2085]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"模型的骨肉皮")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"骨：模型骨骼")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"肉：三角面片（由模型顶点围成模型的轮廓）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"皮：纹理图片")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"由此可以看出")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"纹理的主要作用就是使用一张图片来控制模型的外观")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"使用纹理映射技术，将图片和模型联系起来，让模型能呈现出图片中的颜色表现")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2086]||(l[2086]=i("h3",{id:"一、纹理映射",tabindex:"-1"},[s("一、纹理映射 "),i("a",{class:"header-anchor",href:"#一、纹理映射","aria-label":'Permalink to "一、纹理映射"'},"​")],-1)),l[2087]||(l[2087]=i("p",null,"是计算机图形学中的一种技术，它用来将图像（纹理）映射到三维模型的表面，从而赋予模型更加真实和细致的外观",-1)),l[2088]||(l[2088]=i("p",null,"这个过程实际上是将二维图像映射到三维空间的过程",-1)),l[2089]||(l[2089]=i("blockquote",null,[i("p",null,"如何进行纹理映射")],-1)),l[2090]||(l[2090]=i("p",null,"在建模软件中，美术同学会利用纹理展开技术把纹理映射坐标存储在每个顶点上",-1)),l[2091]||(l[2091]=i("p",null,"模型表面的顶点都与纹理坐标相关联",-1)),l[2092]||(l[2092]=i("p",null,[i("strong",null,"纹理坐标通常使用二维坐标系统（称为UV坐标），其中U表示水平轴，V表示垂直轴")],-1)),l[2093]||(l[2093]=i("h4",{id:"_1-uv坐标",tabindex:"-1"},[s("1.UV坐标 "),i("a",{class:"header-anchor",href:"#_1-uv坐标","aria-label":'Permalink to "1.UV坐标"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[154]||(l[154]=[s("二维坐标系统，其中U表示水平轴，V表示垂直轴",-1)])]),_:1}),l[2094]||(l[2094]=i("blockquote",null,[i("p",null,"UV坐标的注意事项")],-1)),l[2095]||(l[2095]=i("ol",null,[i("li",null,[i("p",null,[s("纹理坐标（UV坐标）的"),i("strong",null,[s("横轴和纵轴的取值范围是被归一化过的，在"),i("code",null,"[0,1]"),s("的范围中")])]),i("p",null,"主要目的是为了适应不同大小的纹理图片（256x256、512x512、1024x1024等等）")]),i("li",null,[i("p",null,"顶点之间的点（片元），会通过插值运算得到对应的UV坐标"),i("p",null,"从而从纹理图片中取出对应位置的颜色")])],-1)),l[2096]||(l[2096]=i("blockquote",null,[i("p",null,"如何用缩放平移参数参与uv值计算")],-1)),i("ol",null,[l[159]||(l[159]=i("li",null,[i("p",null,"如何获取模型中携带的uv信息？"),i("p",null,"在顶点着色器中，我们可以利用TEXCOORD语义获取到模型中的纹理坐标信息"),i("p",null,"它是一个float4类型的"),i("p",null,"xy获取到的是纹理坐标的水平和垂直坐标 zw获取到的是纹理携带的一些额外信息，例如深度值等")],-1)),i("li",null,[l[156]||(l[156]=i("p",null,"如何计算",-1)),l[157]||(l[157]=i("p",null,"固定算法",-1)),a(n,{color:"red"},{default:k(()=>[...l[155]||(l[155]=[s("先缩放，后平(偏)移 缩放用乘法，平(偏)用加法",-1)])]),_:1}),l[158]||(l[158]=i("p",null,[i("code",null,"纹理坐标.xy * 纹理名_ST.xy + 纹理名_ST.wz"),s(" 或者直接用内置宏 TRANSFORM_TEX(纹理坐标变量, 纹理变量) 该宏在内部会进行相同的计算")],-1))])]),l[2097]||(l[2097]=i("hr",null,null,-1)),l[2098]||(l[2098]=i("h3",{id:"二、重要纹理相关设置",tabindex:"-1"},[s("二、重要纹理相关设置 "),i("a",{class:"header-anchor",href:"#二、重要纹理相关设置","aria-label":'Permalink to "二、重要纹理相关设置"'},"​")],-1)),l[2099]||(l[2099]=i("ol",null,[i("li",null,[i("p",null,"Texture Type(纹理图片类型) 和 Texture Shape(纹理图片类型)"),i("div",{class:"language-tex"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"tex"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"决定了我们是否能在Shader当中获取正确数据")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"Wrap Mode(循环模式)"),i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"决定了缩放偏移的表现效果")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Repeat：在区块中重复纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Clamp： 拉伸纹理的边缘")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Mirror：在每个整数边界上镜像纹理以创建重复图案")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Mirror Once：镜像纹理一次，然后将拉伸边缘纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Per"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"axis：单独控制如何在U轴和V轴上包裹纹理")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"Filter Mode(过滤模式)"),i("div",{class:"language-tex"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"tex"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"决定了放大缩小纹理时看到的图片质量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Point：纹理在靠近时变为块状")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Bilinear：纹理在靠近时变得模糊")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Trilinear：与Bilinear类似，但纹理也在不同的Mip级别之间模糊")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"过滤模式在开启MipMaps根据实际表现选择，可以达到不同的表现效果")])])]),i("button",{class:"code-block-unfold-btn"})])])],-1)),l[2100]||(l[2100]=i("h3",{id:"三、单张纹理结合blinnphong光照模型",tabindex:"-1"},[s("三、单张纹理结合BlinnPhong光照模型 "),i("a",{class:"header-anchor",href:"#三、单张纹理结合blinnphong光照模型","aria-label":'Permalink to "三、单张纹理结合BlinnPhong光照模型"'},"​")],-1)),l[2101]||(l[2101]=i("blockquote",null,[i("p",null,"3点注意点")],-1)),l[2102]||(l[2102]=i("ol",null,[i("li",null,"纹理颜色需要和漫反射颜色 进行乘法叠加, 它们两共同影响最终的颜色"),i("li",null,"兰伯特光照模型计算时，漫反射材质颜色使用 1 中的叠加颜色计算"),i("li",null,"最终使用的环境光叠加时，环境光变量UNITY_LIGHTMODEL_AMBIENT需要和 1 中颜色进行乘法叠加 为了避免最终的渲染效果偏灰")],-1)),l[2103]||(l[2103]=i("div",{class:"language-ShaderLab"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"ShaderLab"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Shader"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Unlit/Lesson50"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"       //主要就是将单张纹理Shader和布林方光照模型逐片元Shader进行一个结合")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"       _MainTex("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainTex"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") = "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"       //漫反射颜色、高光反射颜色、光泽度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"       _MainColor("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"Color"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") = ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"       _SpecularColor("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"Color"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") = ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"       _SpecularNum("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularNum"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"20"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"15")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"            Tags"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"LightMode"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," = "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ForwardBase"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            #pragma"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            #pragma"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            #include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            #include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Lighting.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //纹理贴图对应的映射成员")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_ST;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //漫反射颜色、高光反射颜色、光泽度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainColor;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularColor;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularNum;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            struct"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //裁剪空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pos:"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"SV_POSITION"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //UV坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," uv:"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"TEXCOORD0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," wNormal:"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"NORMAL"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," wPos:"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"TEXCOORD1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            v2f "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"appdata_base"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               v2f data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //把模型空间下的顶点转换到裁剪空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.pos = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //uv坐标计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.uv = v.texcoord.xy * _MainTex_ST.xy + _MainTex_ST.zw;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //世界空间下的法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.wNormal = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //世界空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.wPos = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"unity_ObjectToWorld"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"               return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed4"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (v2f i) : "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //新知识点：纹理颜色需要和漫反射材质颜色叠加（乘法） 共同决定最终的颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," albedo = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv).rgb * _MainColor.rgb;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //光的方向（指向光源方向）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lightDir = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"_WorldSpaceLightPos0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".xyz);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //兰伯特漫反射颜色 = 光的颜色 * 漫反射材质的颜色 * max(0, dot(世界坐标系下的法线, 光的方向))")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //新知识点：兰伯特光照模型计算时，漫反射材质颜色使用 1 中的叠加颜色计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lambertColor = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"_LightColor0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".rgb * albedo.rgb * "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wNormal, lightDir));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                // 视角方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //float3 viewDir = normalize(_WorldSpaceCameraPos.xyz - i.wPos);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," viewDir = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"UnityWorldSpaceViewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wPos));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //半角向量 = 视角方向 + 光的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," halfA = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(viewDir + lightDir);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //高光反射的颜色 = 光的颜色 * 高光反射材质的颜色 * pow(max(0, dot(世界坐标系下的法线, 半角向量)), 光泽度)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," specularColor = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"_LightColor0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".rgb * _SpecularColor * "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"( "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wNormal, halfA)), _SpecularNum);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //布林方光照颜色 = 环境光颜色 + 兰伯特漫反射颜色 + 高光反射的颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //新知识点：最终使用的环境光叠加时，环境光变量UNITY_LIGHTMODEL_AMBIENT需要和 1 中颜色进行乘法叠加")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //         为了避免最终的渲染效果偏灰")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"UNITY_LIGHTMODEL_AMBIENT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".rgb * albedo + lambertColor + specularColor;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(color.rgb, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2104]||(l[2104]=i("hr",null,null,-1)),l[2105]||(l[2105]=i("h3",{id:"四、凹凸纹理基本概念",tabindex:"-1"},[s("四、凹凸纹理基本概念 "),i("a",{class:"header-anchor",href:"#四、凹凸纹理基本概念","aria-label":'Permalink to "四、凹凸纹理基本概念"'},"​")],-1)),l[2106]||(l[2106]=i("blockquote",null,[i("p",null,"凹凸纹理是用来做什么的")],-1)),l[2107]||(l[2107]=i("p",null,"通过高度纹理或法线纹理在不添加顶点（不增加面）的情况下让模型看起来同样充满细节（凹凸感） 原理：计算“假”凹凸面时，使用“真”凹凸面的法线参与计算",-1)),l[2108]||(l[2108]=i("h4",{id:"_4-1-高度纹理贴图",tabindex:"-1"},[s("4.1 高度纹理贴图 "),i("a",{class:"header-anchor",href:"#_4-1-高度纹理贴图","aria-label":'Permalink to "4.1 高度纹理贴图"'},"​")],-1)),l[2109]||(l[2109]=i("p",null,"RGB都存储高度值，表现为一张灰度图，由于需要更多额外计算，我们一般不使用",-1)),l[2110]||(l[2110]=i("h4",{id:"_4-2-法线纹理贴图",tabindex:"-1"},[s("4.2 法线纹理贴图 "),i("a",{class:"header-anchor",href:"#_4-2-法线纹理贴图","aria-label":'Permalink to "4.2 法线纹理贴图"'},"​")],-1)),l[2111]||(l[2111]=i("p",null,"RGB分别存储法线的XYZ值，有相对模型空间（彩色）和切线空间（蓝色）两种法线贴图",-1)),l[2112]||(l[2112]=i("h4",{id:"_4-3-为什么要使用切线空间下的法线纹理贴图",tabindex:"-1"},[s("4.3 为什么要使用切线空间下的法线纹理贴图 "),i("a",{class:"header-anchor",href:"#_4-3-为什么要使用切线空间下的法线纹理贴图","aria-label":'Permalink to "4.3 为什么要使用切线空间下的法线纹理贴图"'},"​")],-1)),l[2113]||(l[2113]=i("p",null,"切线空间法线贴图虽然要产生额外计算，但是能让法线贴图更加的通用，灵活",-1)),l[2114]||(l[2114]=i("hr",null,null,-1)),l[2115]||(l[2115]=i("h3",{id:"五、法线贴图的计算方式",tabindex:"-1"},[s("五、法线贴图的计算方式 "),i("a",{class:"header-anchor",href:"#五、法线贴图的计算方式","aria-label":'Permalink to "五、法线贴图的计算方式"'},"​")],-1)),l[2116]||(l[2116]=i("blockquote",null,[i("p",null,"两种主流计算方式")],-1)),i("ol",null,[i("li",null,[l[164]||(l[164]=i("p",null,[i("strong",null,"切线空间下计算（效率高，全局性差）")],-1)),a(n,{color:"red"},{default:k(()=>[...l[160]||(l[160]=[s("在切线空间中计算，效率更高",-1)])]),_:1}),l[165]||(l[165]=s("，因为可以在顶点着色器中就完成对光照、视角方向的矩 阵变换，计算量相对较小。",-1)),a(n,{color:"red"},{default:k(()=>[...l[161]||(l[161]=[s("(矩阵变换在顶点着色器中计算) ",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[162]||(l[162]=[s("在世界空间中计算，效率较低",-1)])]),_:1}),l[166]||(l[166]=s("，由于需要对法线贴图进行采样，所以变换过程必须在片 元着色器中实现，我们需要在片元着色器中对法线进行矩阵变换。",-1)),a(n,{color:"red"},{default:k(()=>[...l[163]||(l[163]=[s("(矩阵变换在片元着色器中计算)",-1)])]),_:1})]),i("li",null,[l[169]||(l[169]=i("p",null,[i("strong",null,"世界空间下计算（效率低，全局性好）")],-1)),a(n,{color:"red"},{default:k(()=>[...l[167]||(l[167]=[s("在切线空间中计算，对全局效果的表现可能会不够准确",-1)])]),_:1}),l[170]||(l[170]=i("p",null,"在处理一些列如镜面反射、环境映射效果时表现效果可能不够准确",-1)),a(n,{color:"red"},{default:k(()=>[...l[168]||(l[168]=[s("在世界空间中计算，对全局效果的表现更准确 ",-1)])]),_:1}),l[171]||(l[171]=i("p",null,"可以更容易的应用于全局效果的计算",-1))])]),l[2117]||(l[2117]=i("blockquote",null,[i("p",null,"在切线空间下计算")],-1)),l[2118]||(l[2118]=i("p",null,"主要是计算模型空间到切线空间的变换矩阵",-1)),a(n,{color:"red"},{default:k(()=>[...l[172]||(l[172]=[s("在切线空间下进行光照计算，需要把光照方向、视角方向变换到切线空间下参与计算",-1)])]),_:1}),l[2119]||(l[2119]=i("p",null,[i("strong",null,"关键点：")],-1)),a(n,{color:"red"},{default:k(()=>[...l[173]||(l[173]=[s("计算模型空间到切线空间的变换矩阵",-1)])]),_:1}),l[2120]||(l[2120]=i("p",null,[s("由于我们"),i("strong",null,"主要用变换矩阵来进行矢量的变换"),s("而非点的变换，因此可以变为3x3矩阵")],-1)),l[2121]||(l[2121]=i("p",null,[s("而"),i("strong",null,"x、y、z"),s("轴分别为切线空间中顶点的"),i("strong",null,"切线、副切线、法线")],-1)),l[2122]||(l[2122]=i("p",null,"已知切线、法线（从模型数据中可以获取），副切线为切线、法线的叉乘结果",-1)),l[2123]||(l[2123]=i("p",null,"而3个轴为相互垂直的单位向量，因此可以推出是正交矩阵",-1)),l[2124]||(l[2124]=i("p",null,[s("因此该"),i("strong",null,"变换矩阵的逆矩阵为其转置矩阵"),s("它就是"),i("strong",null,"模型空间到切线空间的变换矩阵")],-1)),l[2125]||(l[2125]=i("p",null,[i("strong",null,"内置函数：")],-1)),i("p",null,[l[175]||(l[175]=s("得到模型空间光的方向：",-1)),a(n,{color:"red"},{default:k(()=>[...l[174]||(l[174]=[i("strong",null,"ObjSpaceLightDir",-1),s("(模型空间顶点坐标) ",-1)])]),_:1})]),i("p",null,[l[177]||(l[177]=s("得到模型空间视角方向：",-1)),a(n,{color:"red"},{default:k(()=>[...l[176]||(l[176]=[i("strong",null,"ObjSpaceViewDir",-1),s("(模型空间顶点坐标) ",-1)])]),_:1})]),l[2126]||(l[2126]=i("p",null,"得到光方向和视角方向相对于模型空间的数据表达后",-1)),l[2127]||(l[2127]=i("p",null,"再与模型空间到切线空间的变换矩阵进行运算",-1)),l[2128]||(l[2128]=i("p",null,"即可将他们转换到切线空间下参与后续计算",-1)),l[2129]||(l[2129]=i("blockquote",null,[i("p",null,"在世界空间下计算")],-1)),a(n,{color:"red"},{default:k(()=>[...l[178]||(l[178]=[s("在世界空间下进行光照计算，需要把法线方向变换到世界空间下参与计算",-1)])]),_:1}),l[2130]||(l[2130]=i("p",null,"关键点：",-1)),a(n,{color:"red"},{default:k(()=>[...l[179]||(l[179]=[s("计算切线空间到世界空间的变换矩阵",-1)])]),_:1}),l[2131]||(l[2131]=i("p",null,"变换矩阵为子到父的变换",-1)),i("p",null,[l[181]||(l[181]=s("由于我们",-1)),a(n,{color:"red"},{default:k(()=>[...l[180]||(l[180]=[s("主要用变换矩阵来进行矢量的变换",-1)])]),_:1}),l[182]||(l[182]=s("而非点的变换，因此可以变为3x3矩阵",-1))]),i("p",null,[l[185]||(l[185]=s("而",-1)),a(n,{color:"red"},{default:k(()=>[...l[183]||(l[183]=[s("x、y、z",-1)])]),_:1}),l[186]||(l[186]=s("轴分别为切线空间中顶点的",-1)),a(n,{color:"red"},{default:k(()=>[...l[184]||(l[184]=[s("切线、副切线、法线 ",-1)])]),_:1})]),l[2132]||(l[2132]=i("p",null,"我们只需要得到3个轴相对于世界空间的向量表达，即可得到该变换矩阵",-1)),l[2133]||(l[2133]=i("p",null,"主要是计算切线空间到世界空间的变换矩阵",-1)),i("p",null,[l[188]||(l[188]=s("法线从模型空间到世界空间：",-1)),a(n,{color:"red"},{default:k(()=>[...l[187]||(l[187]=[i("strong",null,"UnityObjectToWorldNormal(模型空间法线数据)",-1)])]),_:1})]),i("p",null,[l[190]||(l[190]=s("切线从模型空间到世界空间：",-1)),a(n,{color:"red"},{default:k(()=>[...l[189]||(l[189]=[i("strong",null,"UnityObjectToWorldDir(模型空间切线数据)",-1)])]),_:1})]),i("p",null,[l[192]||(l[192]=s("世界空间的副切线：",-1)),a(n,{color:"red"},{default:k(()=>[...l[191]||(l[191]=[i("strong",null,"用上面计算的结果叉乘即可",-1)])]),_:1})]),l[2134]||(l[2134]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//计算副切线 计算叉乘结果后 垂直与切线和法线的向量有两条 通过乘以 切线当中的w，就可以确定是哪一条")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," binormal"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," cross"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.tangent), "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal)) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.tangent.w;")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2135]||(l[2135]=i("blockquote",null,[i("p",null,"补充")],-1)),i("ol",null,[i("li",null,[l[195]||(l[195]=i("p",null,[i("strong",null,"模型空间下的切线数据")],-1)),a(n,{color:"red"},{default:k(()=>[...l[193]||(l[193]=[s("模型数据中的切线数据为**float4类型**的，其中的w表示副切线的方向",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[194]||(l[194]=[s("用法线和切线叉乘得到的副切线方向可能有两个，用切线数据中的w与之相乘确定副切线方向",-1)])]),_:1})]),i("li",null,[l[201]||(l[201]=i("p",null,[i("strong",null,"Unity当中的法线纹理类型")],-1)),i("p",null,[l[197]||(l[197]=s("当我们把纹理类型设置为Normal map(法线贴图)时，我们可以使用Unity提供的内置函数 ",-1)),l[198]||(l[198]=i("strong",null,"UnpackNormal",-1)),l[199]||(l[199]=s("来得到正确的法线方向。该函数内部不仅可以进行",-1)),a(n,{color:"red"},{default:k(()=>[...l[196]||(l[196]=[i("strong",null,"法线分量 = 像素分量 * 2 –1",-1)])]),_:1}),l[200]||(l[200]=s("的逆运算，还会进行解压运算（Unity会根据不同平台对法线纹理进行压缩）",-1))])]),i("li",null,[l[203]||(l[203]=i("p",null,[i("strong",null,"法线纹理属性命名一般为_BumpMap(凸块贴图)")],-1)),a(n,{color:"red"},{default:k(()=>[...l[202]||(l[202]=[s("**我们还会声明一个名为_BumpScale (凸块缩放) 的float属性**",-1)])]),_:1}),l[204]||(l[204]=i("p",null,[i("strong",null,"它主要用于控制凹凸程度")],-1)),l[205]||(l[205]=i("p",null,"当它为0时，表示没有法线效果，法线的影响会被消除",-1)),l[206]||(l[206]=i("p",null,"当它为1时，表示使用法线贴图中的原始法线信息，没有缩放",-1)),l[207]||(l[207]=i("p",null,"我们可以根据实际需求调整它的值，来达到视觉上令人满意的效果",-1))]),l[208]||(l[208]=i("li",null,[i("p",null,[i("strong",null,"如果使用的凹凸纹理不是法线纹理，而是高度纹理，我们需要进行如下设置")]),i("p",null,[i("strong",null,"图片类型设置为Normal map（法线贴图）")]),i("p",null,[i("strong",null,"勾选 Create from Grayscale（从灰度创建）")]),i("p",null,[i("strong",null,"这样我们就可以把高度纹理当成切线空间下的法线纹理处理了")]),i("p",null,"多出的Bumpiness（颠簸值）"),i("p",null,"控制凹凸程度 Filtering（过滤模式）决定计算凹凸程度的算法"),i("p",null,"​ Sharp：滤波生成法线"),i("p",null,"​ Smooth：平滑的生成法线")],-1))]),l[2136]||(l[2136]=i("hr",null,null,-1)),l[2137]||(l[2137]=i("h3",{id:"六、凹凸纹理",tabindex:"-1"},[s("六、凹凸纹理 "),i("a",{class:"header-anchor",href:"#六、凹凸纹理","aria-label":'Permalink to "六、凹凸纹理"'},"​")],-1)),l[2138]||(l[2138]=i("h4",{id:"_6-1-切线空间实现法线纹理",tabindex:"-1"},[s("6.1 切线空间实现法线纹理 "),i("a",{class:"header-anchor",href:"#_6-1-切线空间实现法线纹理","aria-label":'Permalink to "6.1 切线空间实现法线纹理"'},"​")],-1)),l[2139]||(l[2139]=i("blockquote",null,[i("p",null,"关键点")],-1)),l[2140]||(l[2140]=i("ol",null,[i("li",null,[i("p",null,[i("strong",null,"属性相关：")]),i("ul",null,[i("li",null,[i("p",null,"漫反射颜色")]),i("li",null,[i("p",null,"单张纹理")]),i("li",null,[i("p",null,"法线纹理")]),i("li",null,[i("p",null,"凹凸程度")]),i("li",null,[i("p",null,"高光反射颜色")]),i("li",null,[i("p",null,"光泽度")])])]),i("li",null,[i("p",null,"结构体相关")])],-1)),l[2141]||(l[2141]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  顶点着色器中传入：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  可以使用 UnityCG.cginc 中的 appdata_full")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  其中包含了我们需要的顶点、法线、切线、纹理坐标相关数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  片元着色器中传入：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  自定义一个结构体")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  其中包含 裁剪空间下坐标、uv坐标、光的方向、视角的方向")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2142]||(l[2142]=i("ol",{start:"3"},[i("li",null,"顶点着色器回调函数中")],-1)),l[2143]||(l[2143]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  2-1 顶点坐标模型转裁剪")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  2-2 单张纹理和法线纹理 UV坐标缩放偏移计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  2-3 副切线计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      用模型空间中的法线和切线进行叉乘 再乘以切线中的w（确定副切线方向）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  2-4 构建模型空间到切线空间的变换矩阵")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      ——  切线  ——")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      —— 副切线  ——")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      ——  法线  ——")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  2-5 将光照方向和视角方向转换到模型空间（利用ObjSpaceLightDir和ObjSpaceViewDir内置函数）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  2-6 将光照方向和视角方向转换到切线空间（利用变换矩阵进行乘法运算）")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2144]||(l[2144]=i("ol",{start:"4"},[i("li",null,"片元着色器回调函数中")],-1)),l[2145]||(l[2145]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  3-1 取出法线贴图中的法线信息（利用纹理采样函数tex2D）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  3-2 利用内置的UnpackNormal函数对法线信息进行逆运算以及可能的解压")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  3-3 用得到的切线空间的法线数据 乘以 BumpScale 来控制凹凸程度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  3-4 得到单张纹理颜色和漫反射颜色的叠加颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  3-5 用切线空间下的 光方向、视角方向、法线方向 进行Blinn Phong光照模型计算")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2146]||(l[2146]=i("blockquote",null,[i("p",null,"实现")],-1)),l[2147]||(l[2147]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson51"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainTex"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _BumpMap"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"BumpMap"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _BumpScale"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"BumpScale"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _SpecularNum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularNum"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"20"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 18")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Tags { "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"LightMode"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ForwardBase"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "Lighting.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //float2 uvTex:TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //float2 uvBump:TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //我们可以单独的声明两个float2的成员用于记录 颜色和法线纹理的uv坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //也可以直接声明一个float4的成员 xy用于记录颜色纹理的uv，zw用于记录法线纹理的uv")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //光的方向 相对于切线空间下的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"lightDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //视角的方向 相对于切线空间下的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"viewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD2;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//漫反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//颜色纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//颜色纹理的缩放和平移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _BumpMap"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//法线纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _BumpMap_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//法线纹理的缩放和平移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _BumpScale"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//凹凸程度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//高光颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularNum;"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//光泽度")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_full"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," data"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //把模型空间下的顶点转到裁剪空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.pos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算纹理的缩放偏移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.uv.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_ST.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_ST.zw;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.uv.zw "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _BumpMap_ST.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _BumpMap_ST.zw;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //在顶点着色器当中 得到 模型空间到切线空间的 转换矩阵")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //切线、副切线、法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算副切线 计算叉乘结果后 垂直与切线和法线的向量有两条 通过乘以 切线当中的w，就可以确定是哪一条")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," binormal"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," cross"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.tangent), "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal)) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.tangent.w;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //转换矩阵")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3x3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," rotation"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," float3x3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"( v.tangent.xyz,")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                                              binormal,")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                                              v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //模型空间下的光的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //data.lightDir = ObjSpaceLightDir(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //乘以模型空间到切线空间的转换矩阵 就可以得到切线空间下的 光的方向了")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.lightDir "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(rotation, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ObjSpaceLightDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //模型空间下的视角的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //data.viewDir = ObjSpaceViewDir(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.viewDir "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(rotation, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ObjSpaceViewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //通过纹理采样函数 取出法线纹理贴图当中的数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," packedNormal"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_BumpMap, i.uv.zw);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //将我们取出来的法线数据 进行逆运算并且可能会进行解压缩的运算，最终得到切线空间下的法线数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tangentNormal"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnpackNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(packedNormal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //乘以凹凸程度的系数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                tangentNormal "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _BumpScale;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"				tangentNormal.z "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," sqrt"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1.0"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," saturate"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(tangentNormal.xy, tangentNormal.xy)));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //接下来就来处理 带颜色纹理的 布林方光照模型计算")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //颜色纹理和漫反射颜色的 叠加")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," albedo"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv.xy) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainColor.rgb;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //兰伯特")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lambertColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," albedo.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(tangentNormal, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.lightDir)));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //半角向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," halfA"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.viewDir) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.lightDir));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //高光反射")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," specularColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularColor.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(tangentNormal, halfA)), _SpecularNum);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //布林方")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," color"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," UNITY_LIGHTMODEL_AMBIENT.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," albedo "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lambertColor "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," specularColor;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(color.rgb, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2148]||(l[2148]=i("hr",null,null,-1)),l[2149]||(l[2149]=i("h4",{id:"_6-2-世界空间实现法线纹理",tabindex:"-1"},[s("6.2 世界空间实现法线纹理 "),i("a",{class:"header-anchor",href:"#_6-2-世界空间实现法线纹理","aria-label":'Permalink to "6.2 世界空间实现法线纹理"'},"​")],-1)),l[2150]||(l[2150]=i("blockquote",null,[i("p",null,"主要思路")],-1)),l[2151]||(l[2151]=i("ul",null,[i("li",null,"在顶点着色器中计算切线空间到世界空间的变换矩阵"),i("li",null,"在片元着色器中进行法线采样转换")],-1)),l[2152]||(l[2152]=i("blockquote",null,[i("p",null,"关键点")],-1)),l[2153]||(l[2153]=i("ol",null,[i("li",null,[i("p",null,"属性相关（和切下空间下计算相同）")]),i("li",null,[i("p",null,"结构体相关"),i("p",null,[i("strong",null,"顶点着色器中传入："),s(" 可以使用 UnityCG.cginc 中的 appdata_full 其中包含了我们需要的顶点、法线、切线、纹理坐标相关数据")]),i("p",null,[i("strong",null,"片元着色器中传入："),s(" 自定义一个结构体 其中包含 裁剪空间下坐标、uv坐标、世界空间下顶点位置、变换矩阵")])]),i("li",null,[i("p",null,"顶点着色器回调函数中"),i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  2-1 顶点坐标模型转裁剪")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  2-2 单张纹理和法线纹理 UV坐标缩放偏移计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  2-3 模型空间下顶点转换到世界空间下（之后在片元着色器中用于计算视角方向）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  2-4 将模型空间下的法线、切线转换到世界空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  2-5 副切线计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      用世界空间下的法线和切线进行叉乘 再乘以切线中的w（确定副切线方向）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  2-6 构建模型空间到切线空间的变换矩阵")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//       |    |     |")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      切线 副切线 法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//       |    |     |")])])]),i("button",{class:"code-block-unfold-btn"})])]),i("li",null,[i("p",null,"片元着色器回调函数中"),i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  3-1 计算光的方向、视角方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  3-2 取出法线贴图中的法线信息（利用纹理采样函数tex2D）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  3-3 利用内置的UnpackNormal函数对法线信息进行逆运算以及可能的解压")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  3-4 用得到的切线空间的法线数据 乘以 BumpScale 来控制凹凸程度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  3-5 将计算完毕后的切线空间下的法线转换到世界空间下")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  3-6 得到单张纹理颜色和漫反射颜色的叠加颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  3-7 用切线空间下的 光方向、视角方向、法线方向 进行Blinn Phong光照模型计算")])])]),i("button",{class:"code-block-unfold-btn"})])])],-1)),l[2154]||(l[2154]=i("hr",null,null,-1)),l[2155]||(l[2155]=i("h4",{id:"_6-3-光照方向的计算方式",tabindex:"-1"},[s("6.3 光照方向的计算方式 "),i("a",{class:"header-anchor",href:"#_6-3-光照方向的计算方式","aria-label":'Permalink to "6.3 光照方向的计算方式"'},"​")],-1)),l[2156]||(l[2156]=i("p",null,"计算光照方式的两种方式：",-1)),l[2157]||(l[2157]=i("ol",null,[i("li",null,[i("p",null,[i("strong",null,"模拟定向光源")]),i("p",null,"直接得到_WorldSpaceLightPos0光照位置 作为光照方向"),i("p",null,"表示光线是平行的，而不是从特定点发射"),i("p",null,"一般模拟太阳光效果 采用这种方式")]),i("li",null,[i("p",null,[i("strong",null,"模拟点光源")]),i("p",null,"用光照位置_WorldSpaceLightPos0 减去 顶点坐标 表示光线是从特定点发射的，并朝着顶点方向 一般定点光源 采用这种方式")])],-1)),l[2158]||(l[2158]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson52"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainTex"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _BumpMap"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"BumpMap"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _BumpScale"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"BumpScale"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _SpecularNum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularNum"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"20"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 18")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Tags { "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"LightMode"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ForwardBase"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "Lighting.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//漫反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//颜色纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//颜色纹理的缩放和平移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _BumpMap"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//法线纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _BumpMap_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//法线纹理的缩放和平移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _BumpScale"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//凹凸程度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//高光颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularNum;"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//光泽度")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //float2 uvTex:TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //float2 uvBump:TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //我们可以单独的声明两个float2的成员用于记录 颜色和法线纹理的uv坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //也可以直接声明一个float4的成员 xy用于记录颜色纹理的uv，zw用于记录法线纹理的uv")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //顶点相对于世界坐标的位置 主要用于 之后的 视角方向的计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //float3 worldPos:TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //切线 到 世界空间的 变换矩阵")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //float3x3 rotation:TEXCOORD2;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //代表我们切线空间到世界空间的 变换矩阵的3行 tangent to world")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"TtoW0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"TtoW1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD2;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"TtoW2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD3;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_full"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," data"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //把模型空间下的顶点转到裁剪空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.pos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算纹理的缩放偏移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.uv.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_ST.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_ST.zw;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.uv.zw "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _BumpMap_ST.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _BumpMap_ST.zw;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //得到世界空间下的 顶点位置 用于之后在片元中计算视角方向（世界空间下的）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //data.worldPos = mul(unity_ObjectToWorld, v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldPos"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(unity_ObjectToWorld, v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //把模型空间下的法线、切线转换到世界空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldNormal"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldTangent"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToWorldDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.tangent);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算副切线 计算叉乘结果后 垂直与切线和法线的向量有两条 通过乘以 切线当中的w，就可以确定是哪一条")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldBinormal"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," cross"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(worldTangent), "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(worldNormal)) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.tangent.w;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //这个就是我们 切线空间到世界空间的 转换矩阵")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //data.rotation = float3x3( worldTangent.x, worldBinormal.x,  worldNormal.x,")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //                          worldTangent.y, worldBinormal.y,  worldNormal.y,")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //                          worldTangent.z, worldBinormal.z,  worldNormal.z);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.TtoW0 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," float4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(worldTangent.x, worldBinormal.x,  worldNormal.x, worldPos.x);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.TtoW1 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," float4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(worldTangent.y, worldBinormal.y,  worldNormal.y, worldPos.y);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.TtoW2 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," float4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(worldTangent.z, worldBinormal.z,  worldNormal.z, worldPos.z);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下光的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lightDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_WorldSpaceLightPos0.xyz);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下视角方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldPos"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.TtoW0.w, i.TtoW1.w, i.TtoW2.w);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," viewDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"UnityWorldSpaceViewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(worldPos));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //通过纹理采样函数 取出法线纹理贴图当中的数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," packedNormal"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_BumpMap, i.uv.zw);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //将我们取出来的法线数据 进行逆运算并且可能会进行解压缩的运算，最终得到切线空间下的法线数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tangentNormal"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnpackNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(packedNormal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //乘以凹凸程度的系数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                tangentNormal.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _BumpScale;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                tangentNormal.z "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," sqrt"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1.0"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," saturate"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(tangentNormal.xy, tangentNormal.xy)));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //把计算完毕后的切线空间下的法线转换到世界空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //float3x3 rotation = float3x3(i.TtoW0.xyz, i.TtoW1.xyz, i.TtoW2.xyz );")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //float3 worldNormal = mul(rotation, tangentNormal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //本质 就是在进行矩阵运算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldNormal"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.TtoW0.xyz, tangentNormal), "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.TtoW1.xyz, tangentNormal), "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.TtoW2.xyz, tangentNormal));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //接下来就来处理 带颜色纹理的 布林方光照模型计算")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //颜色纹理和漫反射颜色的 叠加")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," albedo"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv.xy) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainColor.rgb;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //兰伯特")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lambertColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," albedo.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(worldNormal, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(lightDir)));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //半角向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," halfA"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(viewDir) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(lightDir));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //高光反射")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," specularColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularColor.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(worldNormal, halfA)), _SpecularNum);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //布林方")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," color"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," UNITY_LIGHTMODEL_AMBIENT.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," albedo "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lambertColor "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," specularColor;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(color.rgb, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2159]||(l[2159]=i("hr",null,null,-1)),l[2160]||(l[2160]=i("h4",{id:"_6-4-如何让凹凸系数不影响光的效果",tabindex:"-1"},[s("6.4 如何让凹凸系数不影响光的效果 "),i("a",{class:"header-anchor",href:"#_6-4-如何让凹凸系数不影响光的效果","aria-label":'Permalink to "6.4 如何让凹凸系数不影响光的效果"'},"​")],-1)),l[2161]||(l[2161]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//有一种专门的算法")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//1.只让法线中的xy乘以凹凸系数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//tangentNormal.xy *= _BumpScale;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//2.保证法线为单位向量（让法线不会为0，而是趋近于顶点法线）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  x² + y² + z² = 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  z² = 1 - (x² + y²)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  z = 根号下(1 - (x² + y²))")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//tangentNormal.z = sqrt(1.0 - saturate(dot(tangentNormal.xy, tangentNormal.xy)));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//通过这样的计算，当凹凸系数在0~1之间变化时，会保证法线为单位向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//这样就不会影响光照表现了")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//注意：这种算法并不是来自真实的物理规律")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      只是为了“看起来正常”")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2162]||(l[2162]=i("hr",null,null,-1)),l[2163]||(l[2163]=i("h4",{id:"_6-5-提升性能的写法",tabindex:"-1"},[s("6.5 提升性能的写法 "),i("a",{class:"header-anchor",href:"#_6-5-提升性能的写法","aria-label":'Permalink to "6.5 提升性能的写法"'},"​")],-1)),l[2164]||(l[2164]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//我们目前在v2f结构体中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//世界坐标顶点位置和变换矩阵使用了")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//float3 和 float3x3 的两个变量来存储")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//但是在很多世界空间下计算 法线贴图的Shader中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//往往会使用3个 float4 类型的变量来存储它们")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//这样做的目的是因为")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//这种写法在很多情况下可以提高性能，因为它更好地与GPU的硬件架构匹配")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//float4 类型的寄存器是非常高效的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//因为现代GPU通常会以 4 分量的向量为基本单位进行并行计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//float3x3 矩阵相对来说需要更多的寄存器和指令来表示和计算")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2165]||(l[2165]=i("hr",null,null,-1)),l[2166]||(l[2166]=i("h3",{id:"七、渐变纹理",tabindex:"-1"},[s("七、渐变纹理 "),i("a",{class:"header-anchor",href:"#七、渐变纹理","aria-label":'Permalink to "七、渐变纹理"'},"​")],-1)),l[2167]||(l[2167]=i("blockquote",null,[i("p",null,"渐变纹理是用来做什么的")],-1)),l[2168]||(l[2168]=i("p",null,"通过单张纹理和凹凸纹理相关知识的学习，我们知道图片中存储的数据不仅仅可以是颜 色数据，还可以是高度、法线数据。",-1)),l[2169]||(l[2169]=i("p",null,"理论上来说，图片中存储的数据我们可以自定义规则，我们可以往图片中存储任何满足 我们需求的数据用于渲染。",-1)),a(n,{color:"red"},{default:k(()=>[...l[209]||(l[209]=[s("而渐变纹理就是用于控制漫反射光照结果的一种存储数据的方式 ",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[210]||(l[210]=[s("**它的主要作用是让游戏中的对象具有插画卡通风格**",-1)])]),_:1}),l[2170]||(l[2170]=i("blockquote",null,[i("p",null,"基本原理")],-1)),l[2171]||(l[2171]=i("p",null,[s("渐变纹理的基本原理就是在计算漫反射时利用"),i("strong",null,"半兰伯特光照模型"),s("公式中"),i("strong",null,"后半部分")],-1)),l[2172]||(l[2172]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"半兰伯特：漫反射光照颜色 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 光源的颜色 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 材质的漫反射颜色 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"（（标准化后物体表面法线向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"· 标准化后光源方向向量）"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," +"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"）")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2173]||(l[2173]=i("p",null,[i("strong",null,"得到一个0~1区间的值"),s("，将这个值"),i("strong",null,"作为uv坐标中的uv值，从渐变纹理中取出颜色"),s("与 公式中前面部分"),i("strong",null,"进行颜色叠加"),s("，最终得到漫反射光照颜色。")],-1)),l[2174]||(l[2174]=i("p",null,"也就是说",-1)),l[2175]||(l[2175]=i("p",null,"决定漫反射明暗的不再是由 0~1这个值决定 而是由渐变纹理中取出的颜色进行叠加达到最终效果",-1)),l[2176]||(l[2176]=i("h4",{id:"_7-1-渐变纹理基础shader实现",tabindex:"-1"},[s("7.1 渐变纹理基础Shader实现 "),i("a",{class:"header-anchor",href:"#_7-1-渐变纹理基础shader实现","aria-label":'Permalink to "7.1 渐变纹理基础Shader实现"'},"​")],-1)),l[2177]||(l[2177]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//关键点：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//1.属性相关")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  漫反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  渐变纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  高光反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  光泽度")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//2.结构体相关")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  顶点着色器中传入：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  可以使用 UnityCG.cginc 中的 appdata_base")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  其中包含了我们需要的顶点、法线相关数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  片元着色器中传入：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  自定义一个结构体")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  其中包含 裁剪空间下坐标、世界空间下顶点坐标、世界空间下法线方向")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//3.顶点着色器回调函数中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  3-1 顶点坐标模型转裁剪")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  3-2 顶点坐标模型转世界")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  3-3 法线从模型转世界")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//4.片元着色器回调函数中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  4-1 计算光的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  4-2 计算半兰伯特光照后半部分公式值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  diffuseColor = 光源的颜色 * 材质的漫反射颜色 *（（标准化后物体表面法线向量· 标准化后光源方向向量）* 0.5 + 0.5）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  4-3 利用该值从渐变纹理中取出对应颜色，参与漫反射光照计算 得出漫反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  diffuseColor = 光源的颜色 * 材质的漫反射颜色 * 渐变纹理中取出的颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  4-4 计算Blinn Phong光照模型，其中的漫反射光照颜色使用上一步计算出来的颜色")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2178]||(l[2178]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson53"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _RampTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"RampTex"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _SpecularNum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularNum"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"8"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"256"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 18")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Tags {"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"LightMode"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "ForwardBase"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "Lighting.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _RampTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _RampTex_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularNum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //裁剪空间下顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"worldPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"worldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," data"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.pos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.worldPos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(unity_ObjectToWorld, v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.worldNormal "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //光的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lightDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_WorldSpaceLightPos0);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //漫反射颜色（通过渐变纹理得到的颜色来进行叠加）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," halfLambertNum = dot(normalize(i.worldNormal), lightDir) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," +"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //漫反射颜色 = 光的颜色 * 漫反射颜色 * 渐变纹理中取出的颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," diffuseColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainColor.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_RampTex, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"fixed2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(halfLambertNum, halfLambertNum));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //高光反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //视角方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," viewDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"UnityWorldSpaceViewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.worldPos));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," halfDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(lightDir "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," viewDir);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," specularColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecColor.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.worldNormal, halfDir)), _SpecularNum);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //布林方 公式")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," color"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," UNITY_LIGHTMODEL_AMBIENT.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," diffuseColor "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," specularColor;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(color.rgb, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2179]||(l[2179]=i("h4",{id:"_7-2-避免黑点出现",tabindex:"-1"},[s("7.2 避免黑点出现 "),i("a",{class:"header-anchor",href:"#_7-2-避免黑点出现","aria-label":'Permalink to "7.2 避免黑点出现"'},"​")],-1)),l[2180]||(l[2180]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//避免渐变纹理接缝处有黑点")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//我们需要将 Wrap Mode(循环模式)切换为 Clamp(拉伸模式)")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//出现黑点的原因是：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//浮点数计算可能存在误差，会出现超过1的值（1.00001）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//如果使用Repeat(重复模式)，会舍弃整数部分，保留小数0.00001")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//这时对应的颜色会是最左边的值，因此会出现黑色")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2181]||(l[2181]=i("h4",{id:"_7-3-渐变纹理综合shader实现",tabindex:"-1"},[s("7.3 渐变纹理综合Shader实现 "),i("a",{class:"header-anchor",href:"#_7-3-渐变纹理综合shader实现","aria-label":'Permalink to "7.3 渐变纹理综合Shader实现"'},"​")],-1)),l[2182]||(l[2182]=i("blockquote",null,[i("p",null,"关键点")],-1)),l[2183]||(l[2183]=i("p",null,"将原本兰伯特光照模型 修改为渐变纹理的计算方式",-1)),l[2184]||(l[2184]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson54"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainTex"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _BumpMap"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"BumpMap"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _BumpScale"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"BumpScale"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _RampTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"RampTex"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _SpecularNum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularNum"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"8"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"256"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 18")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Tags { "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"LightMode"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ForwardBase"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "Lighting.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //float2 uvTex:TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //float2 uvBump:TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //我们可以单独的声明两个float2的成员用于记录 颜色和法线纹理的uv坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //也可以直接声明一个float4的成员 xy用于记录颜色纹理的uv，zw用于记录法线纹理的uv")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //光的方向 相对于切线空间下的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"lightDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //视角的方向 相对于切线空间下的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"viewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD2;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//漫反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//颜色纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//颜色纹理的缩放和平移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _BumpMap"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//法线纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _BumpMap_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//法线纹理的缩放和平移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _BumpScale"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//凹凸程度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _RampTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//渐变纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _RampTex_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//渐变纹理的缩放和平移（基本不会用）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//高光颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularNum;"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//光泽度")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_full"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," data"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //把模型空间下的顶点转到裁剪空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.pos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算纹理的缩放偏移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.uv.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_ST.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_ST.zw;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.uv.zw "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _BumpMap_ST.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _BumpMap_ST.zw;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //在顶点着色器当中 得到 模型空间到切线空间的 转换矩阵")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //切线、副切线、法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算副切线 计算叉乘结果后 垂直与切线和法线的向量有两条 通过乘以 切线当中的w，就可以确定是哪一条")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," binormal"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," cross"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.tangent), "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal)) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.tangent.w;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //转换矩阵")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3x3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," rotation"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," float3x3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"( v.tangent.xyz,")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                                              binormal,")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                                              v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //模型空间下的光的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //data.lightDir = ObjSpaceLightDir(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //乘以模型空间到切线空间的转换矩阵 就可以得到切线空间下的 光的方向了")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.lightDir "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(rotation, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ObjSpaceLightDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //模型空间下的视角的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //data.viewDir = ObjSpaceViewDir(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.viewDir "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(rotation, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ObjSpaceViewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //通过纹理采样函数 取出法线纹理贴图当中的数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," packedNormal"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_BumpMap, i.uv.zw);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //将我们取出来的法线数据 进行逆运算并且可能会进行解压缩的运算，最终得到切线空间下的法线数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tangentNormal"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnpackNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(packedNormal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //乘以凹凸程度的系数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                tangentNormal.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _BumpScale;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                tangentNormal.z "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," sqrt"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1.0"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," saturate"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(tangentNormal.xy, tangentNormal.xy)));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //接下来就来处理 带颜色纹理的 布林方光照模型计算")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //颜色纹理和漫反射颜色的 叠加")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," albedo"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv.xy) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainColor.rgb;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //修改为 渐变纹理相关的计算方式")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," halfLambertNum = dot(normalize(tangentNormal), "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.lightDir)) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," +"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //渐变纹理 漫反射计算方式")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," diffuseColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," albedo.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_RampTex, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"fixed2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(halfLambertNum,halfLambertNum)).rgb;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //半角向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," halfA"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.viewDir) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.lightDir));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //高光反射")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," specularColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularColor.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(tangentNormal, halfA)), _SpecularNum);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //布林方")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," color"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," UNITY_LIGHTMODEL_AMBIENT.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," albedo "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," diffuseColor "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," specularColor;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(color.rgb, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2185]||(l[2185]=i("h3",{id:"八、遮罩纹理",tabindex:"-1"},[s("八、遮罩纹理 "),i("a",{class:"header-anchor",href:"#八、遮罩纹理","aria-label":'Permalink to "八、遮罩纹理"'},"​")],-1)),l[2186]||(l[2186]=i("blockquote",null,[i("p",null,"遮罩纹理是用来做什么的")],-1)),l[2187]||(l[2187]=i("p",null,"用于控制或限制某些效果的显示范围，如光照、透明度、特效等等",-1)),l[2188]||(l[2188]=i("blockquote",null,[i("p",null,"高光遮罩纹理的基本原理")],-1)),l[2189]||(l[2189]=i("ol",null,[i("li",null,"从纹理中取出对应的遮罩掩码值（颜色的RGB值都可以使用）"),i("li",null,"用该掩码值和遮罩系数(我们自己定义的)相乘得到遮罩值"),i("li",null,"用该遮罩值和高光反射计算出来的颜色相乘 通过 高光遮罩纹理 和 遮罩系数 共同影响高光反射表现效果")],-1)),l[2190]||(l[2190]=i("blockquote",null,[i("p",null,"复用法线纹理贴图Shader代码（切线空间下的）")],-1)),l[2191]||(l[2191]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"#"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"region"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 知识点二 将高光遮罩纹理实现融入其中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //1.从纹理中取出对应的遮罩掩码值（颜色的RGB值都可以使用）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //2.用该掩码值和遮罩系数(我们自己定义的)相乘得到遮罩值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //3.用该遮罩值和高光反射计算出来的颜色相乘")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"endregion")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"region"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 知识点三 遮罩纹理中的RGBA值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //对于高光遮罩纹理中的RGBA值，是非常浪费的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //因为我们只使用其中一个值就可以得到我们想要的数据")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //因此对于遮罩纹理来说")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //我们可以合理的利用其中的每一个值来存储我们想要的数据")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //随着以后的学习")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //我们可以在遮罩纹理当中存储更多信息")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //比如：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //R值代表高光遮罩数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //G值代表透明遮罩数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //B值代表特效遮罩数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //等等")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //甚至可以用 n 张遮挡纹理存储 4xn 个会参与 每个片元渲染计算的值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"endregion")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2192]||(l[2192]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson55"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainTex"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _BumpMap"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"BumpMap"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _BumpScale"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"BumpScale"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _SpecularMask"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularMask"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _SpecularScale"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularScale"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Float) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _SpecularNum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularNum"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"8"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"256"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 18")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Tags { "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"LightMode"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ForwardBase"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "Lighting.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //float2 uvTex:TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //float2 uvBump:TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //我们可以单独的声明两个float2的成员用于记录 颜色和法线纹理的uv坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //也可以直接声明一个float4的成员 xy用于记录颜色纹理的uv，zw用于记录法线纹理的uv")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //光的方向 相对于切线空间下的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"lightDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //视角的方向 相对于切线空间下的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"viewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD2;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//漫反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//颜色纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//颜色纹理的缩放和平移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _BumpMap"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//法线纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _BumpMap_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//法线纹理的缩放和平移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _BumpScale"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//凹凸程度")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularMask"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//高光遮罩纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularMask_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//高光遮罩纹理的缩放和平移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularScale"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//遮罩系数")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//高光颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularNum;"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//光泽度")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_full"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," data"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //把模型空间下的顶点转到裁剪空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.pos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算纹理的缩放偏移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.uv.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_ST.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_ST.zw;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.uv.zw "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _BumpMap_ST.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _BumpMap_ST.zw;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //在顶点着色器当中 得到 模型空间到切线空间的 转换矩阵")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //切线、副切线、法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算副切线 计算叉乘结果后 垂直与切线和法线的向量有两条 通过乘以 切线当中的w，就可以确定是哪一条")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," binormal"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," cross"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.tangent), "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal)) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.tangent.w;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //转换矩阵")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3x3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," rotation"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," float3x3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"( v.tangent.xyz,")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                                              binormal,")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                                              v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //模型空间下的光的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //data.lightDir = ObjSpaceLightDir(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //乘以模型空间到切线空间的转换矩阵 就可以得到切线空间下的 光的方向了")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.lightDir "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(rotation, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ObjSpaceLightDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //模型空间下的视角的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //data.viewDir = ObjSpaceViewDir(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.viewDir "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(rotation, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ObjSpaceViewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //通过纹理采样函数 取出法线纹理贴图当中的数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," packedNormal"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_BumpMap, i.uv.zw);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //将我们取出来的法线数据 进行逆运算并且可能会进行解压缩的运算，最终得到切线空间下的法线数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tangentNormal"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnpackNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(packedNormal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //乘以凹凸程度的系数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                tangentNormal.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _BumpScale;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                tangentNormal.z "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," sqrt"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1.0"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," saturate"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(tangentNormal.xy, tangentNormal.xy)));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //接下来就来处理 带颜色纹理的 布林方光照模型计算")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //颜色纹理和漫反射颜色的 叠加")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," albedo"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv.xy) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainColor.rgb;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //兰伯特")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lambertColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," albedo.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(tangentNormal, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.lightDir)));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //半角向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," halfA"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.viewDir) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.lightDir));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //1.从纹理中取出对应的遮罩掩码值（颜色的RGB值都可以使用）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //2.用该掩码值和遮罩系数(我们自己定义的)相乘得到遮罩值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," specularMaskNum = tex2D(_SpecularMask, i.uv.xy).r "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularScale;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //3.用该遮罩值和高光反射计算出来的颜色相乘")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //高光反射")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," specularColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularColor.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(tangentNormal, halfA)), _SpecularNum) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," specularMaskNum;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //布林方")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," color"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," UNITY_LIGHTMODEL_AMBIENT.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," albedo "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lambertColor "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," specularColor;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(color.rgb, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2193]||(l[2193]=i("hr",null,null,-1)),l[2194]||(l[2194]=i("h2",{id:"透明",tabindex:"-1"},[s("透明 "),i("a",{class:"header-anchor",href:"#透明","aria-label":'Permalink to "透明"'},"​")],-1)),l[2195]||(l[2195]=i("h3",{id:"一、渲染顺序的重要性",tabindex:"-1"},[s("一、渲染顺序的重要性 "),i("a",{class:"header-anchor",href:"#一、渲染顺序的重要性","aria-label":'Permalink to "一、渲染顺序的重要性"'},"​")],-1)),l[2196]||(l[2196]=i("blockquote",null,[i("p",null,"透明混合为什么需要关闭深度写入")],-1)),i("p",null,[l[212]||(l[212]=s("在",-1)),a(n,{color:"red"},{default:k(()=>[...l[211]||(l[211]=[s("图形学中模拟出现实世界的半透明效果是通过将 ",-1)])]),_:1})]),a(n,{color:"red"},{default:k(()=>[...l[213]||(l[213]=[s("多个颜色进行混合计算呈现出来的",-1)])]),_:1}),l[2197]||(l[2197]=i("p",null,[i("strong",null,"举例：")],-1)),l[2198]||(l[2198]=i("p",null,"如果前方的A对象不关闭深度写入",-1)),l[2199]||(l[2199]=i("p",null,"那么B被A遮挡的部分会在深度测试时被舍弃（因为A离摄像机更近深度更小）",-1)),l[2200]||(l[2200]=i("p",null,"那么我们就无法得到被遮挡部分的颜色，也就无法进行颜色的混合计算",-1)),i("p",null,[l[215]||(l[215]=s("因此",-1)),a(n,{color:"red"},{default:k(()=>[...l[214]||(l[214]=[s("我们必须关闭透明物体的深度写入 ",-1)])]),_:1})]),a(n,{color:"red"},{default:k(()=>[...l[216]||(l[216]=[s("让其不会导致被遮挡物体无法通过深度测试从而无法进行颜色混合",-1)])]),_:1}),l[2201]||(l[2201]=i("blockquote",null,[i("p",null,"关闭深度写入带来的问题")],-1)),l[2202]||(l[2202]=i("p",null,"若关闭深度写入，那么物体的渲染顺序就会变得非常的重要",-1)),a(n,{color:"red"},{default:k(()=>[...l[217]||(l[217]=[s("**谁先被渲染，谁后被渲染都会影响最终的呈现效果** ",-1)])]),_:1}),l[2203]||(l[2203]=i("p",null,[i("strong",null,"举例一:")],-1)),l[2204]||(l[2204]=i("p",null,"事例一 两个物体A为半透明物体 B为不透明物体",-1)),l[2205]||(l[2205]=i("p",null,"两种可能的渲染顺序",-1)),a(n,{color:"red"},{default:k(()=>[...l[218]||(l[218]=[s("第一种：先渲染B，再渲染A，可以得到正确的半透明效果 ",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[219]||(l[219]=[s("第二种：先渲染A，再渲染B，只会看到B的颜色",-1)])]),_:1}),l[2206]||(l[2206]=i("p",null,[i("strong",null,"从这个例子我们看出，想要得到正确的半透明混合效果")],-1)),l[2207]||(l[2207]=i("p",null,[i("strong",null,"需要先渲染不透明物体，再渲染透明物体")],-1)),l[2208]||(l[2208]=i("p",null,[i("strong",null,"举例二:")],-1)),l[2209]||(l[2209]=i("p",null,"两个物体A B 都为半透明物体",-1)),l[2210]||(l[2210]=i("p",null,"两种可能的渲染顺序",-1)),a(n,{color:"red"},{default:k(()=>[...l[220]||(l[220]=[s("**第一种：先渲染B，再渲染A，得到正确的半透明效果** ",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[221]||(l[221]=[s("**第二种：先渲染A，再渲染B，得到错误的半透明效果（B在前）** ",-1)])]),_:1}),l[2211]||(l[2211]=i("p",null,[i("strong",null,"从这个例子我们看出，想要得到正确的半透明混合效果")],-1)),l[2212]||(l[2212]=i("p",null,[i("strong",null,"半透明物体之间也需要正确的渲染顺序才能得到正确结果")],-1)),l[2213]||(l[2213]=i("h4",{id:"_1-如何解决渲染顺序带来的问题",tabindex:"-1"},[s("1.如何解决渲染顺序带来的问题 "),i("a",{class:"header-anchor",href:"#_1-如何解决渲染顺序带来的问题","aria-label":'Permalink to "1.如何解决渲染顺序带来的问题"'},"​")],-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[222]||(l[222]=[s("先渲染所有不透明物体 开启它们的深度测试和深度写入 ",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[223]||(l[223]=[s("将半透明物体按照离摄像机的远近进行排序，然后从后往前的顺序渲染它们 开启深度测试关闭深度写入",-1)])]),_:1})])]),l[2214]||(l[2214]=i("h4",{id:"_2-特殊情况",tabindex:"-1"},[s("2.特殊情况 "),i("a",{class:"header-anchor",href:"#_2-特殊情况","aria-label":'Permalink to "2.特殊情况"'},"​")],-1)),a(h,{face:"shader/图集:渲染顺序特殊情况"}),l[2215]||(l[2215]=i("p",null,"常规方法：",-1)),l[2216]||(l[2216]=i("ol",null,[i("li",null,[i("strong",null,"先渲染所有不透明物体 开启它们的深度测试和深度写入")]),i("li",null,[i("strong",null,"将半透明物体按照离摄像机的远近进行排序，然后从后往前的顺序渲染它们 开启深度测试关闭深度写入（排序是基于物体的，而不是片元的）")])],-1)),l[2217]||(l[2217]=i("p",null,"解决方案：",-1)),l[2218]||(l[2218]=i("ol",null,[i("li",null,"忍一忍，接受部分细节的小瑕疵"),i("li",null,"从模型入手：拆分模型"),i("li",null,"使用开启深度写入的半透明效果来模拟半透明（性能消耗较高）")],-1)),l[2219]||(l[2219]=i("hr",null,null,-1)),l[2220]||(l[2220]=i("h3",{id:"二、设置深度写入和渲染队列",tabindex:"-1"},[s("二、设置深度写入和渲染队列 "),i("a",{class:"header-anchor",href:"#二、设置深度写入和渲染队列","aria-label":'Permalink to "二、设置深度写入和渲染队列"'},"​")],-1)),l[2221]||(l[2221]=i("blockquote",null,[i("p",null,"Unity Shader中设置深度写入")],-1)),l[2222]||(l[2222]=i("p",null,"深度写入默认是开启的",-1)),i("p",null,[l[225]||(l[225]=s("我们需要通过渲染状态中的",-1)),a(n,{color:"blue"},{default:k(()=>[...l[224]||(l[224]=[s("ZWrite off",-1)])]),_:1}),l[226]||(l[226]=s(" 指令主动关闭深度写入",-1))]),a(n,{color:"red"},{default:k(()=>[...l[227]||(l[227]=[s("**当我们把它写在Pass渲染通道中时，它只会影响该Pass** ",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[228]||(l[228]=[s("**若我们把它写在SubShader语句块中，它将影响其中的所有Pass**",-1)])]),_:1}),l[2223]||(l[2223]=i("blockquote",null,[i("p",null,"Unity Shader中设置渲染队列")],-1)),a(h,{face:"shader/图集:Unity Shader中设置渲染队列"}),l[2224]||(l[2224]=i("p",null,"渲染队列一般都定义在SubShader语句块中，影响之后的所有Pass渲染通道",-1)),l[2225]||(l[2225]=i("p",null,"使用该Shader(着色器)的物体，就会根据你设置的渲染队列在特定的时间进行渲染",-1)),a(n,{color:"red"},{default:k(()=>[...l[229]||(l[229]=[s("在使用渲染队列Queue 时，一般会搭配忽视投影器IgnoreProjector 和渲染类型RenderType 一起使用",-1)])]),_:1}),l[2226]||(l[2226]=i("p",null,[i("strong",null,"忽视投影器IgnoreProjector 标签：")],-1)),l[2227]||(l[2227]=i("p",null,"投影器（Projector）是Unity中的一种特殊的光源，它用于在场景中投射纹理（Texture）或简单的几何形状（如圆形 或方形）来模拟光照、阴影或其他视觉效果。",-1)),l[2228]||(l[2228]=i("p",null,[i("strong",null,"渲染类型RenderType 标签：")],-1)),l[2229]||(l[2229]=i("p",null,"对着色器进行分类，用于着色器替换功能，摄像机上有对应API，可以指定渲染类型替换成别的着色器 Opaque(不透明的)、 Transparent(透明的)、 TransparentCutout(透明切割)、 Background(背景)、 Overlay(覆盖)",-1)),l[2230]||(l[2230]=i("h3",{id:"三、设置混合命令",tabindex:"-1"},[s("三、设置混合命令 "),i("a",{class:"header-anchor",href:"#三、设置混合命令","aria-label":'Permalink to "三、设置混合命令"'},"​")],-1)),l[2231]||(l[2231]=i("blockquote",null,[i("p",null,"混合的基本原理")],-1)),l[2232]||(l[2232]=i("p",null,"当我们在进行渲染时，当片元通过了深度测试后，会进入到混合流程中。 在混合流程中：",-1)),i("p",null,[i("strong",null,[l[231]||(l[231]=s("当前片元的颜色被称为",-1)),a(n,{color:"red"},{default:k(()=>[...l[230]||(l[230]=[s("源颜色",-1)])]),_:1})])]),i("p",null,[i("strong",null,[l[233]||(l[233]=s("颜色缓冲区中的颜色被称为",-1)),a(n,{color:"red"},{default:k(()=>[...l[232]||(l[232]=[s("目标颜色",-1)])]),_:1})])]),l[2233]||(l[2233]=i("p",null,[i("strong",null,"混合就是将")],-1)),i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[234]||(l[234]=[s("源颜色和目标颜色用对应的混合算法进行计算后",-1)])]),_:1})])]),i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[235]||(l[235]=[s("输出一个新的颜色更新到颜色缓冲区中",-1)])]),_:1})])]),l[2234]||(l[2234]=i("p",null,[i("strong",null,"注意：这些颜色都是RGBA包含透明通道A")],-1)),a(h,{face:"shader/图集:混合透明原理"}),l[2235]||(l[2235]=i("h4",{id:"_1-混合的计算规则",tabindex:"-1"},[s("1.混合的计算规则 "),i("a",{class:"header-anchor",href:"#_1-混合的计算规则","aria-label":'Permalink to "1.混合的计算规则"'},"​")],-1)),l[2236]||(l[2236]=i("blockquote",null,[i("p",null,"混合的计算规则—— 混合因子")],-1)),l[2237]||(l[2237]=i("p",null,"混合计算的规则就是需要构建两个混合等式",-1)),a(h,{face:"shader/图集:混合因子"}),a(h,{face:"shader/图集:混合因子2"}),l[2238]||(l[2238]=i("p",null,"如果我们使用方式二来设置因子",-1)),l[2239]||(l[2239]=i("p",null,"由于没有指定透明相关因子，因此，在计算时",-1)),l[2240]||(l[2240]=i("p",null,[i("strong",null,"源透明因子= 源因子")],-1)),l[2241]||(l[2241]=i("p",null,[i("strong",null,"目标透明因子= 目标因子 即")],-1)),a(h,{face:"shader/图集:混合因子3"}),a(h,{face:"shader/图集:混合因子4"}),a(h,{face:"shader/图集:混合因子5"}),l[2242]||(l[2242]=i("blockquote",null,[i("p",null,"混合的计算规则—— 混合操作")],-1)),i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[236]||(l[236]=[s("BlendOp 混合操作命令来设定混合的计算方式",-1)])]),_:1})])]),a(h,{face:"shader/图集:混合操作"}),a(h,{face:"shader/图集:混合操作1"}),l[2243]||(l[2243]=i("h4",{id:"_2-常见的混合类型",tabindex:"-1"},[s("2.常见的混合类型 "),i("a",{class:"header-anchor",href:"#_2-常见的混合类型","aria-label":'Permalink to "2.常见的混合类型"'},"​")],-1)),l[2244]||(l[2244]=i("p",null,[i("strong",null,"Blend：")],-1)),a(h,{face:"shader/图集:常见混合规则"}),l[2245]||(l[2245]=i("h3",{id:"四、透明度测试",tabindex:"-1"},[s("四、透明度测试 "),i("a",{class:"header-anchor",href:"#四、透明度测试","aria-label":'Permalink to "四、透明度测试"'},"​")],-1)),l[2246]||(l[2246]=i("blockquote",null,[i("p",null,"透明测试的基本原理")],-1)),l[2247]||(l[2247]=i("p",null,[i("strong",null,"基本原理：")],-1)),l[2248]||(l[2248]=i("p",null,"通过一个阈值来决定哪些像素应该被保留，哪些应该被丢弃",-1)),l[2249]||(l[2249]=i("p",null,[i("strong",null,"具体实现：")],-1)),l[2250]||(l[2250]=i("p",null,"片元携带的颜色信息中的透明度（A值）",-1)),l[2251]||(l[2251]=i("p",null,"不满足条件时（通常是小于某个阈值）",-1)),l[2252]||(l[2252]=i("p",null,"该片元就会被舍弃，被舍弃的片元不会在进行任何处理，不会对颜色缓冲区产生任何影响",-1)),l[2253]||(l[2253]=i("p",null,"满足条件时（通常是大于等于某个阈值）",-1)),l[2254]||(l[2254]=i("p",null,"该片元会按照不透明物体的处理方式来处理",-1)),l[2255]||(l[2255]=i("p",null,[i("strong",null,"阈值判断使用的方法：")],-1)),a(n,{color:"red"},{default:k(()=>[...l[237]||(l[237]=[s("**利用CG中的内置函数：clip(参数)**",-1)])]),_:1}),i("p",null,[l[239]||(l[239]=s("该函数有重载，参数类型可以是 float4 float3 float2 float 等等 如果传入的参数任何一个分量是负数就会舍弃当前片元 它的内部实现会用到一个 ",-1)),a(n,{color:"red"},{default:k(()=>[...l[238]||(l[238]=[s("discard",-1)])]),_:1}),l[240]||(l[240]=s(" 指令，代表剔除该片元 不再参与渲染",-1))]),l[2256]||(l[2256]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"void"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," clip"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," x"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"   if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"any"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"))")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      discard;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2257]||(l[2257]=i("h4",{id:"_1-实现",tabindex:"-1"},[s("1.实现 "),i("a",{class:"header-anchor",href:"#_1-实现","aria-label":'Permalink to "1.实现"'},"​")],-1)),i("ol",null,[i("li",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[241]||(l[241]=[s("在属性中加一个阈值_Cutoff,取值范围为0~1，用来设定用来判断的阈值。并在CG中添加属性的映射成员",-1)])]),_:1})])]),i("li",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[242]||(l[242]=[s("将渲染队列设置为AlphaTest，并配合IgnoreProjector和RenderType一起设置",-1)])]),_:1})])]),i("li",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[243]||(l[243]=[s("在片元着色器中获取了颜色贴图颜色后，就进行阈值判断",-1)])]),_:1})])])]),l[2258]||(l[2258]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson56_AlphaTest"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"       //主要就是将单张纹理Shader和布林方光照模型逐片元Shader进行一个结合")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"       _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainTex"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"       //漫反射颜色、高光反射颜色、光泽度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"       _MainColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"       _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"       _SpecularNum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularNum"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"20"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 15")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"       //透明度测试用的阈值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"       _Cutoff"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Cutoff"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //设置渲染队列 决定对象在何时渲染")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Tags{"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Queue"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"AlphaTest"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "IgnoreProjector"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"True"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "RenderType"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"TransparentCutout"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"LightMode"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "ForwardBase"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "Lighting.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //纹理贴图对应的映射成员")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //漫反射颜色、高光反射颜色、光泽度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularNum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //透明度测试用的阈值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Cutoff;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //裁剪空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //UV坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"wNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":NORMAL;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"wPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"               v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," data"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //把模型空间下的顶点转换到裁剪空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.pos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //uv坐标计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_ST.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_ST.zw;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //世界空间下的法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.wNormal "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //世界空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.wPos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(unity_ObjectToWorld, v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"               return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //颜色纹理的颜色信息")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," texColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //判断贴图的 颜色信息中的 透明通道 有没有小于阈值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //如果小于了 就直接丢弃")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                clip"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(texColor.a "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Cutoff);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //相当于")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //if(texColor.a - _Cutoff < 0)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //if(texColor.a < _Cutoff)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //    discard;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //新知识点：纹理颜色需要和漫反射材质颜色叠加（乘法） 共同决定最终的颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," albedo"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," texColor.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainColor.rgb;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //光的方向（指向光源方向）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lightDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_WorldSpaceLightPos0.xyz);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //兰伯特漫反射颜色 = 光的颜色 * 漫反射材质的颜色 * max(0, dot(世界坐标系下的法线, 光的方向))")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //新知识点：兰伯特光照模型计算时，漫反射材质颜色使用 1 中的叠加颜色计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lambertColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," albedo.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wNormal, lightDir));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                // 视角方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //float3 viewDir = normalize(_WorldSpaceCameraPos.xyz - i.wPos);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," viewDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"UnityWorldSpaceViewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wPos));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //半角向量 = 视角方向 + 光的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," halfA"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(viewDir "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lightDir);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //高光反射的颜色 = 光的颜色 * 高光反射材质的颜色 * pow(max(0, dot(世界坐标系下的法线, 半角向量)), 光泽度)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," specularColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularColor "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"( "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wNormal, halfA)), _SpecularNum);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //布林方光照颜色 = 环境光颜色 + 兰伯特漫反射颜色 + 高光反射的颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //新知识点：最终使用的环境光叠加时，环境光变量UNITY_LIGHTMODEL_AMBIENT需要和 1 中颜色进行乘法叠加")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //         为了避免最终的渲染效果偏灰")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," color"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," UNITY_LIGHTMODEL_AMBIENT.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," albedo "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lambertColor "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," specularColor;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(color.rgb, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2259]||(l[2259]=i("h3",{id:"五、透明度混合",tabindex:"-1"},[s("五、透明度混合 "),i("a",{class:"header-anchor",href:"#五、透明度混合","aria-label":'Permalink to "五、透明度混合"'},"​")],-1)),l[2260]||(l[2260]=i("blockquote",null,[i("p",null,"基本原理")],-1)),l[2261]||(l[2261]=i("p",null,[i("strong",null,"关闭深度写入，开启混合，让片元颜色和颜色缓冲区中颜色进行混合计算")],-1)),l[2262]||(l[2262]=i("blockquote",null,[i("p",null,"具体实现")],-1)),l[2263]||(l[2263]=i("ol",null,[i("li",null,"采用半透明的混合因子进行混合 Blend SrcAlpha OneMinusSrcAlpha")],-1)),l[2264]||(l[2264]=i("p",null,"​ 因此",-1)),l[2265]||(l[2265]=i("p",null,[s("​ *"),i("em",null,[s("目标颜色 = SrcAlpha * 源颜色 + (1-SrcAlpha)"),i("em",null,"目标颜色")])],-1)),l[2266]||(l[2266]=i("p",null,[s("​ "),i("strong",null,"= 源颜色透明度 * 源颜色 + (1-源颜色透明度) * 目标颜色")],-1)),l[2267]||(l[2267]=i("ol",{start:"2"},[i("li",null,"声明一个0~1区间的_AlphaScale用于控制对象整体透明度")],-1)),l[2268]||(l[2268]=i("hr",null,null,-1)),l[2269]||(l[2269]=i("h4",{id:"_1-实现-1",tabindex:"-1"},[s("1.实现 "),i("a",{class:"header-anchor",href:"#_1-实现-1","aria-label":'Permalink to "1.实现"'},"​")],-1)),i("ol",null,[i("li",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[244]||(l[244]=[s("在属性中加一个阈值_AlphaScale,取值范围为0~1，用来设定对象整体透明度。并在CG中添加属性的映射成员",-1)])]),_:1})])]),i("li",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[245]||(l[245]=[s("将渲染队列设置为Transparent，并配合IgnoreProjector和RenderType一起设置",-1)])]),_:1})])]),i("li",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[246]||(l[246]=[s("关闭深度写入Zwrite off，设置混合因子Blend SrcAlpha OneMinusSrcAlpha",-1)])]),_:1})])]),i("li",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[247]||(l[247]=[s("在片元着色器中获取了颜色贴图颜色后，修改最后返回颜色的A值为 纹理.a * _AlphaScale",-1)])]),_:1})])])]),l[2270]||(l[2270]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson57_Transparent"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"   Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"       //主要就是将单张纹理Shader和布林方光照模型逐片元Shader进行一个结合")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"       _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainTex"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"       //漫反射颜色、高光反射颜色、光泽度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"       _MainColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"       _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"       _SpecularNum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularNum"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"20"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 15")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"       //用于控制对象整体透明度的值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"       _AlphaScale"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"AlphaScale"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //设置透明度混合的渲染队列 为 透明的Transparent")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Queue"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Transparent"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "IgnoreProjector"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"True"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "RenderType"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Transparent"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"LightMode"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "ForwardBase"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //对于处理半透明效果 需要")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //关闭深度写入")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ZWrite Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //将混合因子 设置为半透明效果的 搭配")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Blend SrcAlpha OneMinusSrcAlpha")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "Lighting.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //纹理贴图对应的映射成员")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //漫反射颜色、高光反射颜色、光泽度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularNum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //用于控制对象整体透明度的值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _AlphaScale;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //裁剪空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //UV坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"wNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":NORMAL;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"wPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"               v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," data"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //把模型空间下的顶点转换到裁剪空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.pos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //uv坐标计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_ST.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_ST.zw;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //世界空间下的法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.wNormal "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //世界空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.wPos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(unity_ObjectToWorld, v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"               return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //取出纹理当中的颜色RGBA")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," texColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //新知识点：纹理颜色需要和漫反射材质颜色叠加（乘法） 共同决定最终的颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," albedo"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," texColor.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainColor.rgb;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //光的方向（指向光源方向）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lightDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_WorldSpaceLightPos0.xyz);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //兰伯特漫反射颜色 = 光的颜色 * 漫反射材质的颜色 * max(0, dot(世界坐标系下的法线, 光的方向))")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //新知识点：兰伯特光照模型计算时，漫反射材质颜色使用 1 中的叠加颜色计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lambertColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," albedo.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wNormal, lightDir));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                // 视角方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //float3 viewDir = normalize(_WorldSpaceCameraPos.xyz - i.wPos);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," viewDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"UnityWorldSpaceViewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wPos));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //半角向量 = 视角方向 + 光的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," halfA"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(viewDir "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lightDir);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //高光反射的颜色 = 光的颜色 * 高光反射材质的颜色 * pow(max(0, dot(世界坐标系下的法线, 半角向量)), 光泽度)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," specularColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularColor "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"( "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wNormal, halfA)), _SpecularNum);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //布林方光照颜色 = 环境光颜色 + 兰伯特漫反射颜色 + 高光反射的颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //新知识点：最终使用的环境光叠加时，环境光变量UNITY_LIGHTMODEL_AMBIENT需要和 1 中颜色进行乘法叠加")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //         为了避免最终的渲染效果偏灰")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," color"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," UNITY_LIGHTMODEL_AMBIENT.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," albedo "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lambertColor "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," specularColor;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //修改我们的 Alpha返回值 决定颜色的透明度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(color.rgb, texColor.a "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _AlphaScale);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2271]||(l[2271]=i("hr",null,null,-1)),l[2272]||(l[2272]=i("h3",{id:"六、开启深度写入的半透明效果",tabindex:"-1"},[s("六、开启深度写入的半透明效果 "),i("a",{class:"header-anchor",href:"#六、开启深度写入的半透明效果","aria-label":'Permalink to "六、开启深度写入的半透明效果"'},"​")],-1)),l[2273]||(l[2273]=i("blockquote",null,[i("p",null,"开启深度写入的半透明效果是用来处理哪种需求的？")],-1)),l[2274]||(l[2274]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//对于本身结构较为复杂的模型")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//使用之前的透明度混合Shader会由于关闭了深度写入")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//会产生错误的渲染效果")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//虽然我们可以通过拆分模型的方式解决部分问题")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//但是对于一些结构复杂的模型，拆分模型的方式会增加工作量")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//因此我们可以采用 开启深度写入的半透明Shader 来优化效果")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2275]||(l[2275]=i("blockquote",null,[i("p",null,"基本原理")],-1)),l[2276]||(l[2276]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"使用两个Pass渲染通道来处理渲染逻辑")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"第一个Pass：开启深度写入，不输出颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	目的是让该模型各片元的深度值能写入深度缓冲")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"第二个Pass：进行正常的透明度混合")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"这样做的话，当执行第一个Pass时，会执行深度测试，并进行深度写入")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"如果此时该片元没有通过深度测试会直接丢弃，不会再执行第二个Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"对于同一个模型中处于屏幕同一位置的片元们，会进行该位置的深度测试再决定渲染哪个片元")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2277]||(l[2277]=i("blockquote",null,[i("p",null,"如何做到不输出颜色？")],-1)),l[2278]||(l[2278]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"使用 ColorMask "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"颜色遮罩"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," 渲染状态"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(命令)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"它主要用于控制颜色分量是否写入到颜色缓冲区中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"ColorMask RGBA 表示写入颜色的RGBA通道")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"ColorMask 0    表示不写入颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"ColorMask RB   表示只写入红色和蓝色通道")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2279]||(l[2279]=i("blockquote",null,[i("p",null,"注意")],-1)),l[2280]||(l[2280]=i("ol",null,[i("li",null,"开启深度写入的半透明效果，模型内部之间不会有任何半透明效果（因为模型内部深度较大的片元会被丢弃掉）"),i("li",null,"由于有两个Pass渲染通道，因此它会带来一定的性能开销")],-1)),l[2281]||(l[2281]=i("hr",null,null,-1)),l[2282]||(l[2282]=i("h4",{id:"_1-实现-2",tabindex:"-1"},[s("1.实现 "),i("a",{class:"header-anchor",href:"#_1-实现-2","aria-label":'Permalink to "1.实现"'},"​")],-1)),i("ol",null,[i("li",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[248]||(l[248]=[s("在SubShader中之前的Pass渲染通道前面加一个Pass渲染通道",-1)])]),_:1})])]),i("li",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[249]||(l[249]=[s("在新加Pass渲染通道中开启深度写入，并且使用 ColorMask 0 颜色遮罩 渲染命令，不输出颜色",-1)])]),_:1})])])]),l[2283]||(l[2283]=i("div",{class:"language-C#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"C#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson58"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"       //主要就是将单张纹理Shader和布林方光照模型逐片元Shader进行一个结合")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"       _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainTex"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"       //漫反射颜色、高光反射颜色、光泽度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"       _MainColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"       _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"       _SpecularNum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularNum"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"20"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 15")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"       //用于控制对象整体透明度的值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"       _AlphaScale"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"AlphaScale"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //设置透明度混合的渲染队列 为 透明的Transparent")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Queue"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Transparent"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "IgnoreProjector"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"True"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "RenderType"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Transparent"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //主要就是进行深度写入 但是不输出颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ZWrite On")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ColorMask "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"LightMode"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "ForwardBase"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //对于处理半透明效果 需要")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //关闭深度写入")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ZWrite Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //将混合因子 设置为半透明效果的 搭配")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Blend SrcAlpha OneMinusSrcAlpha")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "Lighting.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //纹理贴图对应的映射成员")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //漫反射颜色、高光反射颜色、光泽度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularNum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //用于控制对象整体透明度的值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _AlphaScale;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //裁剪空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //UV坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"wNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":NORMAL;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"wPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"               v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," data"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //把模型空间下的顶点转换到裁剪空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.pos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //uv坐标计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_ST.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_ST.zw;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //世界空间下的法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.wNormal "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //世界空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.wPos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(unity_ObjectToWorld, v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"               return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //取出纹理当中的颜色RGBA")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," texColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //新知识点：纹理颜色需要和漫反射材质颜色叠加（乘法） 共同决定最终的颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," albedo"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," texColor.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainColor.rgb;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //光的方向（指向光源方向）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lightDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_WorldSpaceLightPos0.xyz);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //兰伯特漫反射颜色 = 光的颜色 * 漫反射材质的颜色 * max(0, dot(世界坐标系下的法线, 光的方向))")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //新知识点：兰伯特光照模型计算时，漫反射材质颜色使用 1 中的叠加颜色计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lambertColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," albedo.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wNormal, lightDir));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                // 视角方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //float3 viewDir = normalize(_WorldSpaceCameraPos.xyz - i.wPos);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," viewDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"UnityWorldSpaceViewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wPos));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //半角向量 = 视角方向 + 光的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," halfA"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(viewDir "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lightDir);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //高光反射的颜色 = 光的颜色 * 高光反射材质的颜色 * pow(max(0, dot(世界坐标系下的法线, 半角向量)), 光泽度)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," specularColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularColor "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"( "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wNormal, halfA)), _SpecularNum);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //布林方光照颜色 = 环境光颜色 + 兰伯特漫反射颜色 + 高光反射的颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //新知识点：最终使用的环境光叠加时，环境光变量UNITY_LIGHTMODEL_AMBIENT需要和 1 中颜色进行乘法叠加")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //         为了避免最终的渲染效果偏灰")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," color"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," UNITY_LIGHTMODEL_AMBIENT.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," albedo "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lambertColor "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," specularColor;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //修改我们的 Alpha返回值 决定颜色的透明度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(color.rgb, texColor.a "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _AlphaScale);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2284]||(l[2284]=i("hr",null,null,-1)),l[2285]||(l[2285]=i("h3",{id:"七、双面渲染的透明效果",tabindex:"-1"},[s("七、双面渲染的透明效果 "),i("a",{class:"header-anchor",href:"#七、双面渲染的透明效果","aria-label":'Permalink to "七、双面渲染的透明效果"'},"​")],-1)),l[2286]||(l[2286]=i("blockquote",null,[i("p",null,"双面渲染的透明效果用来处理哪种需求的")],-1)),l[2287]||(l[2287]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"对于现实世界的半透明物体，我们不仅可以透过它看到其他物体的样子")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"也可以看到这个物体自己的内部结构")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"但是我们之前实现的 透明度测试 和 透明度混合 相关Shader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"都无法看到模型的内部结构")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"而双面渲染的透明效果Shader就是来解决该问题的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"让我们不仅可以透过半透明物体看到其他物体的样子还可以看到自己的内部结构")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2288]||(l[2288]=i("blockquote",null,[i("p",null,"基本原理：")],-1)),l[2289]||(l[2289]=i("p",null,[i("strong",null,"默认情况下，Unity会自动剔除物体的背面，而只渲染物体的正面"),s(" 双面渲染的基本原理就是利用我们之前学习过的 Cull 剔除指令来进行指定操作 "),i("strong",null,"Cull Back 背面剔除"),i("strong",null,"Cull Front 正面剔除"),i("strong",null,"Cull Off 不剔除"),s(" 不设置的话，默认为背面剔除")],-1)),l[2290]||(l[2290]=i("ul",null,[i("li",null,[i("p",null,[i("strong",null,"对于透明度测试Shader"),s(" 由于它无需混合，因此我们直接 关闭剔除即可")])]),i("li",null,[i("p",null,[i("strong",null,"对于透明度混合Shader"),s(" 由于它需要进行混合 需要使用两个Pass，一个用于渲染背面，一个用于渲染正面 两个Pass中除了剔除命令不同 其他代码和之前一致")])])],-1)),l[2291]||(l[2291]=i("h4",{id:"_1-双面渲染的透明度测试",tabindex:"-1"},[s("1.双面渲染的透明度测试 "),i("a",{class:"header-anchor",href:"#_1-双面渲染的透明度测试","aria-label":'Permalink to "1.双面渲染的透明度测试"'},"​")],-1)),i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[250]||(l[250]=[s("在Pass中关闭剔除 Cull Off",-1)])]),_:1})])]),l[2292]||(l[2292]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson59_AlphaTest_Both"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"     Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"       //主要就是将单张纹理Shader和布林方光照模型逐片元Shader进行一个结合")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"       _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainTex"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"       //漫反射颜色、高光反射颜色、光泽度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"       _MainColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"       _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"       _SpecularNum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularNum"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"20"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 15")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"       //透明度测试用的阈值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"       _Cutoff"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Cutoff"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //设置渲染队列 决定对象在何时渲染")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Tags{"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Queue"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"AlphaTest"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "IgnoreProjector"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"True"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "RenderType"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"TransparentCutout"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"LightMode"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "ForwardBase"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //关闭剔除 让正面和背面都去进行渲染")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Cull Off")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "Lighting.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //纹理贴图对应的映射成员")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //漫反射颜色、高光反射颜色、光泽度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularNum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //透明度测试用的阈值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Cutoff;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //裁剪空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //UV坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"wNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":NORMAL;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"wPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"               v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," data"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //把模型空间下的顶点转换到裁剪空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.pos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //uv坐标计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_ST.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_ST.zw;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //世界空间下的法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.wNormal "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //世界空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.wPos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(unity_ObjectToWorld, v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"               return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //颜色纹理的颜色信息")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," texColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //判断贴图的 颜色信息中的 透明通道 有没有小于阈值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //如果小于了 就直接丢弃")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                clip"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(texColor.a "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Cutoff);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //相当于")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //if(texColor.a - _Cutoff < 0)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //if(texColor.a < _Cutoff)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //    discard;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //新知识点：纹理颜色需要和漫反射材质颜色叠加（乘法） 共同决定最终的颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," albedo"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," texColor.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainColor.rgb;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //光的方向（指向光源方向）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lightDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_WorldSpaceLightPos0.xyz);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //兰伯特漫反射颜色 = 光的颜色 * 漫反射材质的颜色 * max(0, dot(世界坐标系下的法线, 光的方向))")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //新知识点：兰伯特光照模型计算时，漫反射材质颜色使用 1 中的叠加颜色计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lambertColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," albedo.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wNormal, lightDir));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                // 视角方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //float3 viewDir = normalize(_WorldSpaceCameraPos.xyz - i.wPos);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," viewDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"UnityWorldSpaceViewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wPos));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //半角向量 = 视角方向 + 光的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," halfA"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(viewDir "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lightDir);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //高光反射的颜色 = 光的颜色 * 高光反射材质的颜色 * pow(max(0, dot(世界坐标系下的法线, 半角向量)), 光泽度)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," specularColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularColor "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"( "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wNormal, halfA)), _SpecularNum);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //布林方光照颜色 = 环境光颜色 + 兰伯特漫反射颜色 + 高光反射的颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //新知识点：最终使用的环境光叠加时，环境光变量UNITY_LIGHTMODEL_AMBIENT需要和 1 中颜色进行乘法叠加")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //         为了避免最终的渲染效果偏灰")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," color"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," UNITY_LIGHTMODEL_AMBIENT.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," albedo "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lambertColor "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," specularColor;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(color.rgb, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2293]||(l[2293]=i("h4",{id:"_2-双面渲染的透明度混合",tabindex:"-1"},[s("2.双面渲染的透明度混合 "),i("a",{class:"header-anchor",href:"#_2-双面渲染的透明度混合","aria-label":'Permalink to "2.双面渲染的透明度混合"'},"​")],-1)),i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[251]||(l[251]=[s("在第一个Pass中剔除正面 Cull Front，在第二个Pass中剔除背面Cull Back",-1)])]),_:1})])]),i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[252]||(l[252]=[s("相当于一个片元先渲染背面再渲染正面",-1)])]),_:1})])]),l[2294]||(l[2294]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson59_Transparent_Both"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"       //主要就是将单张纹理Shader和布林方光照模型逐片元Shader进行一个结合")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"       _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainTex"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"       //漫反射颜色、高光反射颜色、光泽度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"       _MainColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"       _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"       _SpecularNum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularNum"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"20"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 15")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"       //用于控制对象整体透明度的值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"       _AlphaScale"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"AlphaScale"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //设置透明度混合的渲染队列 为 透明的Transparent")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Queue"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Transparent"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "IgnoreProjector"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"True"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "RenderType"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Transparent"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"LightMode"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "ForwardBase"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //剔除正面 先去渲染背面")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Cull Front")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //对于处理半透明效果 需要")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //关闭深度写入")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ZWrite Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //将混合因子 设置为半透明效果的 搭配")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Blend SrcAlpha OneMinusSrcAlpha")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "Lighting.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //纹理贴图对应的映射成员")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //漫反射颜色、高光反射颜色、光泽度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularNum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //用于控制对象整体透明度的值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _AlphaScale;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //裁剪空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //UV坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"wNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":NORMAL;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"wPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"               v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," data"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //把模型空间下的顶点转换到裁剪空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.pos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //uv坐标计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_ST.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_ST.zw;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //世界空间下的法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.wNormal "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //世界空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.wPos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(unity_ObjectToWorld, v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"               return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //取出纹理当中的颜色RGBA")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," texColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //新知识点：纹理颜色需要和漫反射材质颜色叠加（乘法） 共同决定最终的颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," albedo"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," texColor.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainColor.rgb;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //光的方向（指向光源方向）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lightDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_WorldSpaceLightPos0.xyz);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //兰伯特漫反射颜色 = 光的颜色 * 漫反射材质的颜色 * max(0, dot(世界坐标系下的法线, 光的方向))")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //新知识点：兰伯特光照模型计算时，漫反射材质颜色使用 1 中的叠加颜色计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lambertColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," albedo.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wNormal, lightDir));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                // 视角方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //float3 viewDir = normalize(_WorldSpaceCameraPos.xyz - i.wPos);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," viewDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"UnityWorldSpaceViewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wPos));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //半角向量 = 视角方向 + 光的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," halfA"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(viewDir "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lightDir);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //高光反射的颜色 = 光的颜色 * 高光反射材质的颜色 * pow(max(0, dot(世界坐标系下的法线, 半角向量)), 光泽度)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," specularColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularColor "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"( "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wNormal, halfA)), _SpecularNum);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //布林方光照颜色 = 环境光颜色 + 兰伯特漫反射颜色 + 高光反射的颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //新知识点：最终使用的环境光叠加时，环境光变量UNITY_LIGHTMODEL_AMBIENT需要和 1 中颜色进行乘法叠加")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //         为了避免最终的渲染效果偏灰")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," color"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," UNITY_LIGHTMODEL_AMBIENT.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," albedo "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lambertColor "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," specularColor;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //修改我们的 Alpha返回值 决定颜色的透明度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(color.rgb, texColor.a "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _AlphaScale);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"LightMode"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "ForwardBase"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //剔除背面 只渲染正面")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Cull Back")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //对于处理半透明效果 需要")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //关闭深度写入")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ZWrite Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //将混合因子 设置为半透明效果的 搭配")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Blend SrcAlpha OneMinusSrcAlpha")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "Lighting.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //纹理贴图对应的映射成员")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //漫反射颜色、高光反射颜色、光泽度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularNum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //用于控制对象整体透明度的值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _AlphaScale;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //裁剪空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //UV坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"wNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":NORMAL;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"wPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"               v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," data"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //把模型空间下的顶点转换到裁剪空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.pos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //uv坐标计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_ST.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_ST.zw;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //世界空间下的法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.wNormal "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //世界空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.wPos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(unity_ObjectToWorld, v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"               return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //取出纹理当中的颜色RGBA")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," texColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //新知识点：纹理颜色需要和漫反射材质颜色叠加（乘法） 共同决定最终的颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," albedo"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," texColor.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainColor.rgb;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //光的方向（指向光源方向）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lightDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_WorldSpaceLightPos0.xyz);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //兰伯特漫反射颜色 = 光的颜色 * 漫反射材质的颜色 * max(0, dot(世界坐标系下的法线, 光的方向))")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //新知识点：兰伯特光照模型计算时，漫反射材质颜色使用 1 中的叠加颜色计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lambertColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," albedo.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wNormal, lightDir));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                // 视角方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //float3 viewDir = normalize(_WorldSpaceCameraPos.xyz - i.wPos);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," viewDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"UnityWorldSpaceViewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wPos));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //半角向量 = 视角方向 + 光的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," halfA"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(viewDir "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lightDir);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //高光反射的颜色 = 光的颜色 * 高光反射材质的颜色 * pow(max(0, dot(世界坐标系下的法线, 半角向量)), 光泽度)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," specularColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularColor "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"( "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wNormal, halfA)), _SpecularNum);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //布林方光照颜色 = 环境光颜色 + 兰伯特漫反射颜色 + 高光反射的颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //新知识点：最终使用的环境光叠加时，环境光变量UNITY_LIGHTMODEL_AMBIENT需要和 1 中颜色进行乘法叠加")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //         为了避免最终的渲染效果偏灰")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," color"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," UNITY_LIGHTMODEL_AMBIENT.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," albedo "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lambertColor "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," specularColor;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //修改我们的 Alpha返回值 决定颜色的透明度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(color.rgb, texColor.a "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _AlphaScale);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2295]||(l[2295]=i("hr",null,null,-1)),l[2296]||(l[2296]=i("h2",{id:"渲染路径",tabindex:"-1"},[s("渲染路径 "),i("a",{class:"header-anchor",href:"#渲染路径","aria-label":'Permalink to "渲染路径"'},"​")],-1)),l[2297]||(l[2297]=i("h3",{id:"一、渲染路径概述",tabindex:"-1"},[s("一、渲染路径概述 "),i("a",{class:"header-anchor",href:"#一、渲染路径概述","aria-label":'Permalink to "一、渲染路径概述"'},"​")],-1)),l[2298]||(l[2298]=i("blockquote",null,[i("p",null,"渲染路径是什么")],-1)),l[2299]||(l[2299]=i("p",null,"渲染路径（Rendering Path）是指在图形渲染过程中，图形引擎按照特定的步骤和顺序来处理场 景中的几何、光照、材质等信息，最终生成屏幕上的图像的一种算法或策略。",-1)),l[2300]||(l[2300]=i("p",null,"它决定了图形引擎如何组织和执行渲染过程，以产生最终的视觉效果。",-1)),i("p",null,[l[255]||(l[255]=s("对于我们来说：在Unity中，",-1)),i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[253]||(l[253]=[s("渲染路径决定了光照如何应用到Unity Shader中",-1)])]),_:1})]),l[256]||(l[256]=s("，如果要在Unity Shader中和光源打交道，我们需要为每个Pass渲染通道匹配对应的渲染路径，这样**",-1)),a(n,{color:"red"},{default:k(()=>[...l[254]||(l[254]=[s("才能在Shader 当中获取到正确的光源数据进行处理",-1)])]),_:1}),l[257]||(l[257]=s("**。",-1))]),i("ul",null,[i("li",null,[i("p",null,[i("strong",null,[l[259]||(l[259]=s("总而言之：",-1)),a(n,{color:"red"},{default:k(()=>[...l[258]||(l[258]=[s("渲染路径会影响光照处理，从而影响最终的渲染效果（光照、阴影等）。",-1)])]),_:1})])]),i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[260]||(l[260]=[s("存在多种不同的渲染路径",-1)])]),_:1})])])])]),l[2301]||(l[2301]=i("p",null,[i("strong",null,"为什么会影响"),s("：我们可以简单理解，使用不同的渲染路径时，Unity在Shader中准备光源数据的流 程是不同的，那么我们在Shader开发时，获取光源数据的方式就会有所不同")],-1)),l[2302]||(l[2302]=i("blockquote",null,[i("p",null,"渲染路径的种类和设置")],-1)),l[2303]||(l[2303]=i("p",null,"我们可以在Camera组件中的Rendering Path（渲染路径）对其进行修改",-1)),i("p",null,[l[262]||(l[262]=s("在",-1)),a(n,{color:"red"},{default:k(()=>[...l[261]||(l[261]=[s("内置渲染管线",-1)])]),_:1}),l[263]||(l[263]=s("中主要有3种渲染路径，分别是：",-1))]),i("ol",null,[i("li",null,[i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[264]||(l[264]=[s("Forward（前向渲染路径）",-1)])]),_:1})])]),l[265]||(l[265]=i("p",null,[i("strong",null,"默认的标准的渲染方式，适用于相对简单的场景和较少的光源")],-1))]),i("li",null,[i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[266]||(l[266]=[s("Deferred（延迟渲染路径）",-1)])]),_:1})])]),l[267]||(l[267]=i("p",null,[i("strong",null,"可以处理较复杂的场景，有大量光源时可以提供更好的性能")],-1))]),l[268]||(l[268]=i("li",null,[i("p",null,"Legacy Vertex Lit（(遗产)顶点照明渲染路径）"),i("p",null,"较适用于为简单的渲染方式，适用于性能受限的场景。 基本已经不会使用"),i("p",null,[i("strong",null,"注意：当显卡不支持选定的渲染路径时会自动选择一个较低精度的渲染路径 比如不支持延迟渲染路径时，前向渲染路径会被采用")])],-1))]),l[2304]||(l[2304]=i("blockquote",null,[i("p",null,"LightMode标签的作用")],-1)),i("p",null,[l[270]||(l[270]=s("我们之前在编写Shader时都会使用**",-1)),a(n,{color:"red"},{default:k(()=>[...l[269]||(l[269]=[s("LightMode",-1)])]),_:1}),l[271]||(l[271]=s("**（光模式）标签。",-1))]),i("p",null,[l[273]||(l[273]=s("它的主要作用就是来**",-1)),a(n,{color:"red"},{default:k(()=>[...l[272]||(l[272]=[s("指明该Pass 匹配的渲染路径是哪种",-1)])]),_:1}),l[274]||(l[274]=s("**",-1))]),i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[275]||(l[275]=[s("只要匹配正确，我们便可以获取到正确的光源相关数据",-1)])]),_:1})])]),l[2305]||(l[2305]=i("p",null,[i("strong",null,"注意：")],-1)),l[2306]||(l[2306]=i("p",null,[i("strong",null,"LightMode标签通常应该与Camera中的Rendering Path匹配")],-1)),l[2307]||(l[2307]=i("p",null,"用于指定Pass在渲染过程中的哪个阶段",-1)),l[2308]||(l[2308]=i("p",null,[i("strong",null,"如果它们不匹配，可能导致渲染不正确")],-1)),a(h,{face:"shader/渲染路径:LightMode 标签"}),i("p",null,[l[277]||(l[277]=s("在Shader开发中如果我们**",-1)),a(n,{color:"red"},{default:k(()=>[...l[276]||(l[276]=[s("不进行LightMode渲染标签的设置",-1)])]),_:1}),l[278]||(l[278]=s("**。",-1))]),i("p",null,[l[281]||(l[281]=s("比如摄像机默认的是前向渲染路径，但是我们没有为Pass设置相关的标签，那么这个Pass会被当作一个顶点照明渲染路径的Pass。这时光源相关的数据就不会被正确的进行赋值，我们计算出来的 结果就会出现错误，从而",-1)),i("strong",null,[l[280]||(l[280]=s("可能呈现出",-1)),a(n,{color:"red"},{default:k(()=>[...l[279]||(l[279]=[s("错误的渲染效果",-1)])]),_:1})]),l[282]||(l[282]=s("。",-1))]),l[2309]||(l[2309]=i("p",null,[i("strong",null,"因此")],-1)),i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[283]||(l[283]=[s("在进行Unity Shader开发时，我们需要对Pass渲染通道",-1)])]),_:1})])]),i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[284]||(l[284]=[s("进行正确的LightMode标签设置，从而匹配当前使用的渲染路径",-1)])]),_:1})])]),l[2310]||(l[2310]=i("hr",null,null,-1)),l[2311]||(l[2311]=i("h3",{id:"二、前向渲染路径",tabindex:"-1"},[s("二、前向渲染路径 "),i("a",{class:"header-anchor",href:"#二、前向渲染路径","aria-label":'Permalink to "二、前向渲染路径"'},"​")],-1)),l[2312]||(l[2312]=i("h4",{id:"_1-前向渲染路径处理光照的方式",tabindex:"-1"},[s("1.前向渲染路径处理光照的方式 "),i("a",{class:"header-anchor",href:"#_1-前向渲染路径处理光照的方式","aria-label":'Permalink to "1.前向渲染路径处理光照的方式"'},"​")],-1)),l[2313]||(l[2313]=i("p",null,"前向渲染路径中会将光源分为以下3种处理方式：",-1)),i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[285]||(l[285]=[s("1.逐像素处理（需要高等质量处理的光）",-1)])]),_:1})])]),i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[286]||(l[286]=[s("2.逐顶点处理（需要中等质量处理的光）",-1)])]),_:1})])]),i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[287]||(l[287]=[s("3.球谐函数（SH）处理（需要低等质量处理的光）",-1)])]),_:1})])]),l[2314]||(l[2314]=i("p",null,"球谐函数处理光照的方式是将光照场景投影到球谐函数的空间中，通过一组球谐系数来表示光照。 内存换性能，细节表现效果差（不需要我们自己书写，Unity底层会帮助我们进行处理）",-1)),l[2315]||(l[2315]=i("blockquote",null,[i("p",null,"场景当中的各种光源将采用哪种方式处理？")],-1)),l[2316]||(l[2316]=i("p",null,[i("strong",null,"在前向渲染中，一部分最亮的灯光以逐像素处理，然后4个点光源")],-1)),l[2317]||(l[2317]=i("p",null,[i("strong",null,"以逐顶点方式处理，其余的灯光以SH处理")],-1)),l[2318]||(l[2318]=i("p",null,"一个光源是逐像素、逐顶点还是SH处理主要取决于以下几点：",-1)),i("ol",null,[i("li",null,[i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[288]||(l[288]=[s("渲染模式设置为Not Important(不重要)的灯光始终以 逐顶点或者SH的方式渲染",-1)])]),_:1})])])]),i("li",null,[i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[289]||(l[289]=[s("渲染模式设置为Important(重要)的灯光始终是逐像素渲染",-1)])]),_:1})])])]),i("li",null,[i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[290]||(l[290]=[s("最亮的平行光总是逐像素渲染",-1)])]),_:1})])])]),i("li",null,[i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[291]||(l[291]=[s("如果逐像素光照的灯光数量少于项目质量设置中的",-1)])]),_:1})])]),i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[292]||(l[292]=[s("Pixel Light Count(像素灯光计数)的数量，那么其余比较亮的",-1)])]),_:1})])]),i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[293]||(l[293]=[s("灯光将会被逐像素渲染",-1)])]),_:1})])])])]),l[2319]||(l[2319]=i("p",null,[i("strong",null,"注意：如果灯光渲染模式设置为Auto(自动)，Unity会根据灯光的亮度以及与物体的距离自动判断重要性")],-1)),l[2320]||(l[2320]=i("blockquote",null,[i("p",null,"前向渲染路径处理光照的方式")],-1)),a(n,{color:"red"},{default:k(()=>[...l[294]||(l[294]=[s("Unity当中有一套划分光源“三六九等”的规则",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[295]||(l[295]=[s("主要通过灯光渲染模式、项目质量设置中的像素灯光计数的数量、光照强度、距离物体距离来综合判定",-1)])]),_:1}),l[2321]||(l[2321]=i("hr",null,null,-1)),l[2322]||(l[2322]=i("h4",{id:"_2-前向渲染路径在哪里进行光照计算",tabindex:"-1"},[s("2.前向渲染路径在哪里进行光照计算 "),i("a",{class:"header-anchor",href:"#_2-前向渲染路径在哪里进行光照计算","aria-label":'Permalink to "2.前向渲染路径在哪里进行光照计算"'},"​")],-1)),i("p",null,[l[297]||(l[297]=s("要进行光照计算，那肯定是在Shader当中的",-1)),a(n,{color:"red"},{default:k(()=>[...l[296]||(l[296]=[s("Pass渲染通道中进行计算",-1)])]),_:1}),l[298]||(l[298]=s("。",-1))]),l[2323]||(l[2323]=i("p",null,"但是对于前向渲染来说，有两种Pass可以用来进行光照处理：",-1)),i("ol",null,[i("li",null,[i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[299]||(l[299]=[s("Base Pass（基础渲染通道",-1)])]),_:1}),l[300]||(l[300]=s("）",-1))])]),l[301]||(l[301]=i("p",null,"渲染物体的主要光照通道，用于处理主要的光照效果",-1)),l[302]||(l[302]=i("p",null,[i("strong",null,"主要用于计算逐像素的平行光以及所有逐顶点和SH光源")],-1)),l[303]||(l[303]=i("p",null,"可实现的效果：漫反射、高光反射、自发光、阴影、光照纹理等",-1))]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[304]||(l[304]=[s("Additional Pass（附加渲染通道）",-1)])]),_:1}),l[305]||(l[305]=i("p",null,"渲染物体额外的光照通道，用于处理一些附加的光照效果",-1)),l[306]||(l[306]=i("p",null,[i("strong",null,"主要用于计算其他影响物体的逐像素光源")],-1)),l[307]||(l[307]=i("p",null,"每个光源都会执行一次该Pass",-1)),l[308]||(l[308]=i("p",null,"可实现的效果：描边、轮廓、辉光等",-1))])]),l[2324]||(l[2324]=i("p",null,[s("对于一个"),i("strong",null,"前向渲染路径下的Unity Shader")],-1)),i("p",null,[l[311]||(l[311]=s("通常会",-1)),a(n,{color:"red"},{default:k(()=>[...l[309]||(l[309]=[s("定义一个Base Pass（基础渲染通道）",-1)])]),_:1}),l[312]||(l[312]=s("以及一个",-1)),a(n,{color:"red"},{default:k(()=>[...l[310]||(l[310]=[s("Additional Pass（附加渲染通道）",-1)])]),_:1})]),l[2325]||(l[2325]=i("p",null,[i("strong",null,"每次渲染时")],-1)),a(n,{color:"red"},{default:k(()=>[...l[313]||(l[313]=[s("一个Base Pass仅会执行一次",-1)])]),_:1}),l[2326]||(l[2326]=s("（多个Base Pass情况除外）",-1)),l[2327]||(l[2327]=i("strong",null,"主要用于渲染环境光或自发光等",-1)),i("p",null,[l[315]||(l[315]=s("而",-1)),a(n,{color:"red"},{default:k(()=>[...l[314]||(l[314]=[s("一个Additional Pass会根据影响该物体的其他逐像素光源的数量被多次调用",-1)])]),_:1})]),l[2328]||(l[2328]=i("p",null,[i("strong",null,"每个逐像素光源都会调用一次Additional Pass 由于开启了混合，渲染结果会和之前的光照颜色进行混合")],-1)),l[2329]||(l[2329]=i("p",null,[i("strong",null,"注意：")],-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[316]||(l[316]=[s("**Base Pass也可以有多个，比如需要双面渲染的情况** ",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[317]||(l[317]=[s("Base Pass默认支持阴影， Additional Pass默认不支持 可以通过添加#pragma",-1)])]),_:1}),l[319]||(l[319]=s()),a(n,{color:"red"},{default:k(()=>[...l[318]||(l[318]=[s("multi_compile_fwdadd_fullshadows编译指令开启阴影",-1)])]),_:1}),l[320]||(l[320]=i("p",null,[i("strong",null,"fwdadd(Forward Additional)")],-1))]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[321]||(l[321]=[s("这些Pass当中我们具体处理光照的方式是由我们自己决定的，使用逐顶点光照还是逐像素光照的计算方式 都根据我们的具体实现而定，前文提到的逐像素光源只是按照期望处理类型来分的而已",-1)])]),_:1})])]),a(h,{face:"shader/渲染路径:常用内置光照变量"}),a(h,{face:"shader/渲染路径:常用内置光照变量2"}),l[2330]||(l[2330]=i("p",null,[i("strong",null,"简而言之：")],-1)),a(n,{color:"red"},{default:k(()=>[...l[322]||(l[322]=[s("通过这些内置光照变量，我们便可以获取到前向渲染路径当中，",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[323]||(l[323]=[s("对渲染质量有不同要求的光源们的相关数据。",-1)])]),_:1}),l[2331]||(l[2331]=i("p",null,[i("strong",null,"我们只需要利用这些数据和函数在")],-1)),l[2332]||(l[2332]=i("p",null,[i("strong",null,"Base Pass（基础渲染通道）和Additional Pass（附加渲染通道）")],-1)),l[2333]||(l[2333]=i("p",null,[i("strong",null,"中按照需求进行相关的逻辑处理即可")],-1)),l[2334]||(l[2334]=i("hr",null,null,-1)),l[2335]||(l[2335]=i("h3",{id:"三、顶点照明渲染路径",tabindex:"-1"},[s("三、顶点照明渲染路径 "),i("a",{class:"header-anchor",href:"#三、顶点照明渲染路径","aria-label":'Permalink to "三、顶点照明渲染路径"'},"​")],-1)),l[2336]||(l[2336]=i("h4",{id:"_1-顶点照明渲染路径处理光照的方式",tabindex:"-1"},[s("1.顶点照明渲染路径处理光照的方式 "),i("a",{class:"header-anchor",href:"#_1-顶点照明渲染路径处理光照的方式","aria-label":'Permalink to "1.顶点照明渲染路径处理光照的方式"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[324]||(l[324]=[s("基本思想就是所有的光都按照逐顶点的方式进行计算的",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[325]||(l[325]=[s("在内置渲染管线中，它只会最多记录8个光源的数据",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[326]||(l[326]=[s("只会将光相关的数据填充到那些逐顶点相关的内置光源变量",-1)])]),_:1}),l[2337]||(l[2337]=i("h4",{id:"_2-顶点照明渲染路径在哪里进行光照计算",tabindex:"-1"},[s("2. 顶点照明渲染路径在哪里进行光照计算 "),i("a",{class:"header-anchor",href:"#_2-顶点照明渲染路径在哪里进行光照计算","aria-label":'Permalink to "2. 顶点照明渲染路径在哪里进行光照计算"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[327]||(l[327]=[s("在一个Pass当中按照逐顶点的方式一次性对所有光照去进行计算",-1)])]),_:1}),a(h,{face:"shader/渲染路径:顶点照明渲染路径在哪里进行光照计算"}),l[2338]||(l[2338]=i("h4",{id:"_3-顶点照明渲染路径的内置光照变量和函数",tabindex:"-1"},[s("3.顶点照明渲染路径的内置光照变量和函数 "),i("a",{class:"header-anchor",href:"#_3-顶点照明渲染路径的内置光照变量和函数","aria-label":'Permalink to "3.顶点照明渲染路径的内置光照变量和函数"'},"​")],-1)),a(h,{face:"shader/渲染路径:顶点照明渲染路径的内置光照变量和函数2"}),a(h,{face:"shader/渲染路径:顶点照明渲染路径的内置光照变量和函数"}),l[2339]||(l[2339]=i("h3",{id:"四、延迟渲染路径",tabindex:"-1"},[s("四、延迟渲染路径 "),i("a",{class:"header-anchor",href:"#四、延迟渲染路径","aria-label":'Permalink to "四、延迟渲染路径"'},"​")],-1)),l[2340]||(l[2340]=i("h4",{id:"_1-延迟渲染路径处理光照的方式",tabindex:"-1"},[s("1.延迟渲染路径处理光照的方式 "),i("a",{class:"header-anchor",href:"#_1-延迟渲染路径处理光照的方式","aria-label":'Permalink to "1.延迟渲染路径处理光照的方式"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[328]||(l[328]=[s("对光照的数量没有任何限制,并且所有灯光都可以采用逐像素渲染",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[329]||(l[329]=[s("它不能处理半透明物体，并且不支持真正的抗锯齿",-1)])]),_:1}),l[2341]||(l[2341]=i("p",null,"延迟渲染的效率不依赖于场景的复杂度，而是和我们使用的屏幕空间的大小有关。",-1)),l[2342]||(l[2342]=i("p",null,"这是因为延迟渲染路径中除了使用颜色缓冲和深度缓冲外，还会利用一个叫做G缓存的额外缓存区",-1)),l[2343]||(l[2343]=i("p",null,"它会存储我们关心的表面（通常是离摄像机最近的表面）的其他信息，比如表面的法线、位置、材 质属性等等。总之我们需要的信息都存储到缓冲区中，而这些缓冲区可以理解为一张张的2D图片， 我们实际上是在这些图像空间中进行处理的。",-1)),l[2344]||(l[2344]=i("h4",{id:"_2-延迟渲染路径在哪里进行光照计算",tabindex:"-1"},[s("2.延迟渲染路径在哪里进行光照计算 "),i("a",{class:"header-anchor",href:"#_2-延迟渲染路径在哪里进行光照计算","aria-label":'Permalink to "2.延迟渲染路径在哪里进行光照计算"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[330]||(l[330]=[s("第一个Pass（对于每个物体，该Pass只会执行一次，通常无需我们自己实现）",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[331]||(l[331]=[s("主要判断哪些片元可见，并且将可见片元的相关信息存储到G缓冲区中",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[332]||(l[332]=[s("第二个Pass",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[333]||(l[333]=[s("利用G缓冲区中各个片元的相关信息进行真正的相关计算，最终将颜色写入颜色缓冲区",-1)])]),_:1}),l[2345]||(l[2345]=i("p",null,[i("strong",null,"注意：")],-1)),l[2346]||(l[2346]=i("p",null,[i("strong",null,"在第二个Pass中计算光照时，默认情况下只能用Unity内置的标准(Standard)光照模型计算")],-1)),l[2347]||(l[2347]=i("h4",{id:"_3-顶点照明渲染路径的内置光照变量",tabindex:"-1"},[s("3.顶点照明渲染路径的内置光照变量 "),i("a",{class:"header-anchor",href:"#_3-顶点照明渲染路径的内置光照变量","aria-label":'Permalink to "3.顶点照明渲染路径的内置光照变量"'},"​")],-1)),a(h,{face:"shader/渲染路径:顶点照明渲染路径的内置光照变量"}),l[2348]||(l[2348]=i("h3",{id:"五、渲染路径对比",tabindex:"-1"},[s("五、渲染路径对比 "),i("a",{class:"header-anchor",href:"#五、渲染路径对比","aria-label":'Permalink to "五、渲染路径对比"'},"​")],-1)),l[2349]||(l[2349]=i("h4",{id:"_1-各渲染路径处理光照的区别",tabindex:"-1"},[s("1.各渲染路径处理光照的区别 "),i("a",{class:"header-anchor",href:"#_1-各渲染路径处理光照的区别","aria-label":'Permalink to "1.各渲染路径处理光照的区别"'},"​")],-1)),l[2350]||(l[2350]=i("p",null,[i("strong",null,"前向渲染路径：")],-1)),a(n,{color:"red"},{default:k(()=>[...l[334]||(l[334]=[s("**有一套划分光源“三六九等”的规则，将光源分成了高中低三种身份** ",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[335]||(l[335]=[s("主要通过灯光渲染模式、项目质量设置中的像素灯光计数的数量、光照强度、距离物体距离来综合判定",-1)])]),_:1}),l[2351]||(l[2351]=i("p",null,[i("strong",null,"顶点照明渲染路径：")],-1)),a(n,{color:"red"},{default:k(()=>[...l[336]||(l[336]=[s("基本思想就是所有的光都按照逐顶点的方式进行计算的",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[337]||(l[337]=[s("在内置渲染管线中，它只会最多记录8个光源的数据",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[338]||(l[338]=[s("只会将光相关的数据填充到那些逐顶点相关的内置光源变量",-1)])]),_:1}),l[2352]||(l[2352]=i("p",null,[i("strong",null,"延迟渲染路径：")],-1)),a(n,{color:"red"},{default:k(()=>[...l[339]||(l[339]=[s("对光照的数量没有任何限制,并且所有灯光都可以采用逐像素渲染",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[340]||(l[340]=[s("它不能处理半透明物体，并且不支持真正的抗锯齿",-1)])]),_:1}),l[2353]||(l[2353]=i("h4",{id:"_2-各渲染路径pass处理的区别",tabindex:"-1"},[s("2.各渲染路径Pass处理的区别 "),i("a",{class:"header-anchor",href:"#_2-各渲染路径pass处理的区别","aria-label":'Permalink to "2.各渲染路径Pass处理的区别"'},"​")],-1)),l[2354]||(l[2354]=i("p",null,[i("strong",null,"前向渲染路径：")],-1)),a(n,{color:"red"},{default:k(()=>[...l[341]||(l[341]=[s("Base Pass（基础渲染通道）：",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[342]||(l[342]=[s("主要用于处理影响该物体的一个高质量光源（平行光）、所有中（逐顶点处理）低质量（SH处理）光源等",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[343]||(l[343]=[s("Additional Pass（附加渲染通道）：",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[344]||(l[344]=[s("主要用于处理影响该物体的除平行光以外的其它高质量光源（每个高质量光源都会调用）",-1)])]),_:1}),l[2355]||(l[2355]=i("p",null,[i("strong",null,"顶点照明渲染路径：")],-1)),a(n,{color:"red"},{default:k(()=>[...l[345]||(l[345]=[s("在一个Pass当中按照逐顶点的方式一次性对所有光照去进行计算",-1)])]),_:1}),l[2356]||(l[2356]=i("p",null,"**延迟渲染路径： **",-1)),a(n,{color:"red"},{default:k(()=>[...l[346]||(l[346]=[s("第一个Pass（对于每个物体，该Pass只会执行一次，通常无需我们自己实现）",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[347]||(l[347]=[s("主要判断哪些片元可见，并且将可见片元的相关信息存储到G缓冲区中",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[348]||(l[348]=[s("第二个Pass 利用G缓冲区中各个片元的相关信息进行真正的相关计算，最终将颜色写入颜色缓冲区",-1)])]),_:1}),l[2357]||(l[2357]=i("h4",{id:"_3-各渲染路径的优缺点",tabindex:"-1"},[s("3.各渲染路径的优缺点 "),i("a",{class:"header-anchor",href:"#_3-各渲染路径的优缺点","aria-label":'Permalink to "3.各渲染路径的优缺点"'},"​")],-1)),l[2358]||(l[2358]=i("p",null,[i("strong",null,"前向渲染路径")],-1)),a(n,{color:"red"},{default:k(()=>[...l[349]||(l[349]=[s("优点：适用于相对简单的场景和较少数量的光源，基本可以实现任何渲染效果。设备支持率较高",-1)])]),_:1}),a(n,{color:"blue"},{default:k(()=>[...l[350]||(l[350]=[s("缺点：对于复杂场景和大量光源的情况性能消耗相对较大",-1)])]),_:1}),l[2359]||(l[2359]=i("p",null,[i("strong",null,"顶点照明渲染路径")],-1)),a(n,{color:"red"},{default:k(()=>[...l[351]||(l[351]=[s("优点：相对来说，性能开销较小，适用于资源受限设备极差时的轻量级渲染情景",-1)])]),_:1}),a(n,{color:"blue"},{default:k(()=>[...l[352]||(l[352]=[s("缺点：表现效果较差，光照计算精度较低",-1)])]),_:1}),l[2360]||(l[2360]=i("p",null,[i("strong",null,"延迟渲染路径")],-1)),a(n,{color:"red"},{default:k(()=>[...l[353]||(l[353]=[s("优点：适用于复杂场景和大量光源，能够有效减少光照计算的开销",-1)])]),_:1}),a(n,{color:"blue"},{default:k(()=>[...l[354]||(l[354]=[s("缺点：对于透明物体和一些特殊效果不能直接支持，需要复杂的处理。并且对硬件有一定要求，不 是所有设备都支持，在一些性能较差的移动设备上不受支持",-1)])]),_:1}),l[2361]||(l[2361]=i("hr",null,null,-1)),l[2362]||(l[2362]=i("h2",{id:"多种光源处理",tabindex:"-1"},[s("多种光源处理 "),i("a",{class:"header-anchor",href:"#多种光源处理","aria-label":'Permalink to "多种光源处理"'},"​")],-1)),l[2363]||(l[2363]=i("blockquote",null,[i("p",null,"Shader 开发中常用的光源属性")],-1)),a(n,{color:"red"},{default:k(()=>[...l[355]||(l[355]=[s("位置、方向、颜色、强度、衰减",-1)])]),_:1}),l[2364]||(l[2364]=i("h3",{id:"一、多种光源",tabindex:"-1"},[s("一、多种光源 "),i("a",{class:"header-anchor",href:"#一、多种光源","aria-label":'Permalink to "一、多种光源"'},"​")],-1)),l[2365]||(l[2365]=i("h4",{id:"_1-平行光",tabindex:"-1"},[s("1.平行光 "),i("a",{class:"header-anchor",href:"#_1-平行光","aria-label":'Permalink to "1.平行光"'},"​")],-1)),i("p",null,[i("strong",null,[l[357]||(l[357]=s("充当角色：",-1)),a(n,{color:"red"},{default:k(()=>[...l[356]||(l[356]=[s("太阳",-1)])]),_:1})])]),i("p",null,[i("strong",null,[l[359]||(l[359]=s("照射范围：",-1)),a(n,{color:"red"},{default:k(()=>[...l[358]||(l[358]=[s("无限制",-1)])]),_:1})])]),l[2366]||(l[2366]=i("p",null,[i("strong",null,"特点：")],-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[360]||(l[360]=[s("它不存在固定的位置 ",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[361]||(l[361]=[s("它的重要属性只有方向（可以通过Transform的Rotation属性来改变方向）",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[362]||(l[362]=[s("它到场景中所有点的方向都是一样的",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[363]||(l[363]=[s("由于它没有位置，因此它没有衰减的概念（光的强度不会随着距离而发生变化）",-1)])]),_:1})])]),l[2367]||(l[2367]=i("h4",{id:"_2-点光源",tabindex:"-1"},[s("2.点光源 "),i("a",{class:"header-anchor",href:"#_2-点光源","aria-label":'Permalink to "2.点光源"'},"​")],-1)),i("p",null,[i("strong",null,[l[365]||(l[365]=s("充当角色：",-1)),a(n,{color:"red"},{default:k(()=>[...l[364]||(l[364]=[s("灯泡、烛光等",-1)])]),_:1})])]),i("p",null,[i("strong",null,[l[367]||(l[367]=s("照射范围：",-1)),a(n,{color:"red"},{default:k(()=>[...l[366]||(l[366]=[s("有限",-1)])]),_:1})])]),l[2368]||(l[2368]=i("p",null,[i("strong",null,"特点：")],-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[368]||(l[368]=[s("它的光是由一个点发出的，向四面八方延伸的光",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[369]||(l[369]=[s("它的范围由参数Range来决定",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[370]||(l[370]=[s("它的位置由Transform中的Position来决定",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[371]||(l[371]=[s("它存在衰减，随着物体离点光源距离决定衰减强弱",-1)])]),_:1})])]),l[2369]||(l[2369]=i("h4",{id:"_3-聚光灯",tabindex:"-1"},[s("3.聚光灯 "),i("a",{class:"header-anchor",href:"#_3-聚光灯","aria-label":'Permalink to "3.聚光灯"'},"​")],-1)),i("p",null,[i("strong",null,[l[373]||(l[373]=s("充当角色：",-1)),a(n,{color:"red"},{default:k(()=>[...l[372]||(l[372]=[s("探照灯、手电筒等",-1)])]),_:1})])]),i("p",null,[i("strong",null,[l[375]||(l[375]=s("照射范围：",-1)),a(n,{color:"red"},{default:k(()=>[...l[374]||(l[374]=[s("有限",-1)])]),_:1})])]),l[2370]||(l[2370]=i("p",null,[i("strong",null,"特点：")],-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[376]||(l[376]=[s("它的光范围由空间中的一块锥形区域定义",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[377]||(l[377]=[s("它的范围由参数Range和Spot Angle 共同决定",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[378]||(l[378]=[s("它的位置由Transform中的Position来决定",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[379]||(l[379]=[s("它存在衰减，随着物体离聚光灯距离决定衰减强弱。 但是它相对点光源衰减计算公式更复杂，因为需要点是否在锥形范围内",-1)])]),_:1})])]),l[2371]||(l[2371]=i("hr",null,null,-1)),l[2372]||(l[2372]=i("h3",{id:"二、如何在shader中判断光源类型",tabindex:"-1"},[s("二、如何在Shader中判断光源类型 "),i("a",{class:"header-anchor",href:"#二、如何在shader中判断光源类型","aria-label":'Permalink to "二、如何在Shader中判断光源类型"'},"​")],-1)),l[2373]||(l[2373]=i("blockquote",null,[i("p",null,"前向渲染路径中我们主要关注处理什么内容？")],-1)),l[2374]||(l[2374]=i("p",null,[i("strong",null,"两个Pass")],-1)),i("ol",null,[l[383]||(l[383]=i("li",null,[i("p",null,[i("strong",null,"Base Pass（基础渲染通道，每个片元只会计算一次）："),s(" 只需要处理一个逐像素平行光源（一般场景中最亮会自动赋值对应变量） 其他的中（逐顶点）、低质量（SH）光源Unity会帮助我们处理")])],-1)),i("li",null,[l[381]||(l[381]=i("p",null,[i("strong",null,"Additional Pass（附加渲染通道）:")],-1)),l[382]||(l[382]=i("p",null,"除了最亮的平行光、其他高质量的光源(可能是平行光、点光源、聚光灯)都会调用一次该Pass进行计算",-1)),a(n,{color:"red"},{default:k(()=>[...l[380]||(l[380]=[s("因此我们一般需要在Additional Pass中判断光源类型来分别处理部分逻辑",-1)])]),_:1})])]),l[2375]||(l[2375]=i("blockquote",null,[i("p",null,"如何在Shader中判断光源类型")],-1)),l[2376]||(l[2376]=i("p",null,"Unity中提供了三个重要的宏 分别是：",-1)),i("ul",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[384]||(l[384]=[s("_DIRECTIONAL_LIGHT : 平行光",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[385]||(l[385]=[s("_POINT_LIGHT : 点光源",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[386]||(l[386]=[s("_SPOT_LIGHT : 聚光灯",-1)])]),_:1})])]),l[2377]||(l[2377]=i("p",null,"宏在这里的作用： 可以用于在编译时根据条件判断来包含或排除不同的代码块，实现条件编译",-1)),l[2378]||(l[2378]=i("p",null,"我们可以使用这些宏配合Unity Shader中的条件编译预处理指令 用于在编译时根据一定的条件选择性地包含或排除代码块",-1)),l[2379]||(l[2379]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	#"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"if"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," defined"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"_DIRECTIONAL_LIGHT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    平行光逻辑")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"elif"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," defined"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"_POINT_LIGHT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    点光源逻辑")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"elif"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," defined"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"_SPOT_LIGHT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    聚光灯逻辑")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"else")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    其他逻辑")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"endif")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2380]||(l[2380]=i("p",null,"Unity底层会根据该条件编译指令",-1)),i("p",null,[l[388]||(l[388]=s("生成成多个 ",-1)),a(n,{color:"red"},{default:k(()=>[...l[387]||(l[387]=[s("Shader Variants（着色器变体）",-1)])]),_:1})]),i("p",null,[l[391]||(l[391]=s("这些 Variants 变体",-1)),a(n,{color:"red"},{default:k(()=>[...l[389]||(l[389]=[s("共享相同的核心代码",-1)])]),_:1}),l[392]||(l[392]=s("，但",-1)),a(n,{color:"red"},{default:k(()=>[...l[390]||(l[390]=[s("根据条件编译的选择会包含不同的代码块",-1)])]),_:1})]),l[2381]||(l[2381]=i("blockquote",null,[i("p",null,[i("strong",null,"Shader variants 的基本概念")])],-1)),i("p",null,[l[395]||(l[395]=s("是在编写 shader 时， 通过条件编译指令（",-1)),a(n,{color:"red"},{default:k(()=>[...l[393]||(l[393]=[s("#if, #elif, #else, #endif）",-1)])]),_:1}),l[396]||(l[396]=s(" 根据不同的配置选项生成多个版本的 shader。 这些不同版本的 shader 称为 ",-1)),a(n,{color:"red"},{default:k(()=>[...l[394]||(l[394]=[s("shader variants",-1)])]),_:1}),l[397]||(l[397]=s("。",-1))]),l[2382]||(l[2382]=i("hr",null,null,-1)),l[2383]||(l[2383]=i("h3",{id:"三、光照衰减",tabindex:"-1"},[s("三、光照衰减 "),i("a",{class:"header-anchor",href:"#三、光照衰减","aria-label":'Permalink to "三、光照衰减"'},"​")],-1)),l[2384]||(l[2384]=i("blockquote",null,[i("p",null,"光照衰减的基本概念")],-1)),l[2385]||(l[2385]=i("p",null,[s("​ "),i("strong",null,"光照衰减通常指的是在渲染过程中考虑光线在空间中传播时的减弱效应")],-1)),l[2386]||(l[2386]=i("p",null,"​ 比如：",-1)),l[2387]||(l[2387]=i("p",null,[s("​ "),i("strong",null,"任何光源的光照亮度会随着物体离光源的距离增加而迅速衰减")],-1)),l[2388]||(l[2388]=i("p",null,[s("​ "),i("strong",null,"一般常见的光照衰减计算方式有")],-1)),i("p",null,[l[400]||(l[400]=s("​ ",-1)),i("strong",null,[l[399]||(l[399]=s("1. ",-1)),a(n,{color:"red"},{default:k(()=>[...l[398]||(l[398]=[s("线性衰减",-1)])]),_:1})])]),l[2389]||(l[2389]=i("p",null,[s("​ "),i("strong",null,"光强度与距离成线性关系。即光照衰减与光源到被照射表面的距离成正比"),s("。")],-1)),i("p",null,[l[403]||(l[403]=s("​ ",-1)),i("strong",null,[l[402]||(l[402]=s("2. ",-1)),a(n,{color:"red"},{default:k(()=>[...l[401]||(l[401]=[s("平方衰减",-1)])]),_:1})])]),l[2390]||(l[2390]=i("p",null,[s("​ "),i("strong",null,"光强度与距离的平方成反比。这种模型更符合现实世界中光照的特性，因为光在空间中的传播过程中通常会遵循平方衰减规律。")],-1)),l[2391]||(l[2391]=i("blockquote",null,[i("p",null,"Unity中的光照衰减")],-1)),l[2392]||(l[2392]=i("p",null,"​ Unity中为了提升性能，我们一般不会直接通过数学公式计算光照衰减",-1)),i("p",null,[l[405]||(l[405]=s("​ 而是使用一张纹理作为",-1)),a(n,{color:"red"},{default:k(()=>[...l[404]||(l[404]=[s("查找表（LUT, lookup table）",-1)])]),_:1}),l[406]||(l[406]=s(" 在片元着色器中计算逐像素光照的 衰减",-1))]),i("p",null,[l[408]||(l[408]=s("​ Unity Shader中有一个内置的纹理类型的变量 ",-1)),a(n,{color:"red"},{default:k(()=>[...l[407]||(l[407]=[s("_LightTexture0",-1)])]),_:1})]),i("p",null,[l[410]||(l[410]=s("​ ",-1)),a(n,{color:"red"},{default:k(()=>[...l[409]||(l[409]=[s("该纹理中存储了衰减值相关的数据",-1)])]),_:1})]),l[2393]||(l[2393]=i("p",null,"​ Unity 内部预先就计算好了相关数据 并存入到该纹理中，避免重复计算，提升性能表现",-1)),l[2394]||(l[2394]=i("p",null,"​ 其中",-1)),l[2395]||(l[2395]=i("p",null,"​ 它的对角线上的纹理颜色值，表明了光源空间中不同位置的点对应的衰减值",-1)),l[2396]||(l[2396]=i("p",null,[s("​ "),i("strong",null,"纹理中的对角线")],-1)),i("p",null,[l[412]||(l[412]=s("​ ",-1)),a(n,{color:"red"},{default:k(()=>[...l[411]||(l[411]=[s("起点 (0,0) 位置，表示和光源重合的点的衰减值",-1)])]),_:1})]),i("p",null,[l[414]||(l[414]=s("​ ",-1)),a(n,{color:"red"},{default:k(()=>[...l[413]||(l[413]=[s("终点（1,1) 位置，表示在光源空间中离光源距离最远的点的衰减值",-1)])]),_:1})]),l[2397]||(l[2397]=i("p",null,[s("​ 一般我们直接从**_LightTexture0中进行纹理采样后，利用其中的"),i("span",{style:{color:"red"}},"UNITY_ATTEN_CHANNEL宏"),s("来得到衰减值所在的分量**")],-1)),l[2398]||(l[2398]=i("div",{class:"language-C#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"C#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_LightTexture0, 对应纹理uv坐标).UNITY_ATTEN_CHANNEL")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2399]||(l[2399]=i("p",null,"​ 注意:",-1)),i("p",null,[l[416]||(l[416]=s("​ ",-1)),a(n,{color:"red"},{default:k(()=>[...l[415]||(l[415]=[s("如果光源存在cookie，也就是灯光遮罩",-1)])]),_:1})]),i("p",null,[l[418]||(l[418]=s("​ ",-1)),a(n,{color:"red"},{default:k(()=>[...l[417]||(l[417]=[i("strong",null,"那么衰减查找纹理便是 _LightTextureB0",-1)])]),_:1})]),l[2400]||(l[2400]=i("h4",{id:"_1-光源空间变换矩阵",tabindex:"-1"},[s("1.光源空间变换矩阵 "),i("a",{class:"header-anchor",href:"#_1-光源空间变换矩阵","aria-label":'Permalink to "1.光源空间变换矩阵"'},"​")],-1)),l[2401]||(l[2401]=i("p",null,"​ 是用于将世界空间下的位置转换到光源空间下（光源位置为原点）的",-1)),l[2402]||(l[2402]=i("p",null,[s("​ "),i("strong",null,[s("老版本："),i("span",{style:{color:"red"}},"_LightMatrix0")])],-1)),l[2403]||(l[2403]=i("p",null,[s("​ "),i("strong",null,[s("新版本："),i("span",{style:{color:"red"}},"unity_WorldToLight")])],-1)),l[2404]||(l[2404]=i("p",null,"​ 由于我们需要从 _LightTexture0 光照纹理中取出对应的衰减数据",-1)),l[2405]||(l[2405]=i("p",null,"​ 因此我们需要将顶点位置从世界空间中转换到光源空间中",-1)),l[2406]||(l[2406]=i("p",null,"​ 然后再来从其中取得衰减数据",-1)),l[2407]||(l[2407]=i("p",null,"​ 我们可以通过矩阵运算将世界空间下的点转换到光源空间下",-1)),l[2408]||(l[2408]=i("p",null,[s("​ "),i("span",{style:{color:"red"}},"mul(unity_WorldToLight, float4(worldPos, 1));")],-1)),l[2409]||(l[2409]=i("hr",null,null,-1)),l[2410]||(l[2410]=i("h3",{id:"四、点光源衰减计算",tabindex:"-1"},[s("四、点光源衰减计算 "),i("a",{class:"header-anchor",href:"#四、点光源衰减计算","aria-label":'Permalink to "四、点光源衰减计算"'},"​")],-1)),l[2411]||(l[2411]=i("blockquote",null,[i("p",null,"点光源衰减计算")],-1)),l[2412]||(l[2412]=i("p",null,[s("​ "),i("strong",null,"注意：一般点光源我们不会为其添加cookie光照遮罩")],-1)),l[2413]||(l[2413]=i("p",null,"​ 一般想要使用光照遮罩都会在聚光灯中使用",-1)),l[2414]||(l[2414]=i("p",null,"​ 因此我们不用考虑cookie纹理的问题",-1)),i("p",null,[l[420]||(l[420]=s("​ ",-1)),a(n,{color:"red"},{default:k(()=>[...l[419]||(l[419]=[s("1. 将顶点从世界空间转换到光源空间",-1)])]),_:1})]),l[2415]||(l[2415]=i("pre",null,[i("code",null," ```C#\n float3 lightCoord = mul(unity_WorldToLight, float4(worldPos, 1)).xyz;\n ```\n")],-1)),l[2416]||(l[2416]=i("p",null,"​ lightCoord 是光源坐标系下顶点根据光源的范围range规范化后的坐标",-1)),l[2417]||(l[2417]=i("p",null,[s("​ 相当于是一个模长为"),i("code",null,"0~1"),s("之间的向量")],-1)),i("p",null,[l[422]||(l[422]=s("​ ",-1)),a(n,{color:"red"},{default:k(()=>[...l[421]||(l[421]=[s("2. 利用该光源空间下的坐标来计算离光源的距离",-1)])]),_:1})]),l[2418]||(l[2418]=i("p",null,"​ 并利用距离参数，从光源纹理中采样",-1)),l[2419]||(l[2419]=i("pre",null,[i("code",null,`\`\`\`C#
fixed atten = tex2D(_LightTexture0, dot(lightCoord, lightCoord).xx).UNITY_ATTEN_CHANNEL;

dot(LightCoord, LightCoord).xx 中

dot(LightCoord, LightCoord) 是为了通过点乘得到 结果 x² + y² + z² = 离光源距离 distance²
\`\`\`
`)],-1)),l[2420]||(l[2420]=i("p",null,[s("​ "),i("strong",null,"xx是一种特殊写法，目的是构建一个 float2 代表uv坐标")],-1)),l[2421]||(l[2421]=i("p",null,[s("​ "),i("strong",null,"这里的 uv坐标 相当于是 (distance², distance²)")],-1)),l[2422]||(l[2422]=i("p",null,[s("​ "),i("strong",null,"用distance²做uv坐标，而不是distance")],-1)),i("p",null,[l[424]||(l[424]=s("​ ",-1)),a(n,{color:"red"},{default:k(()=>[...l[423]||(l[423]=[s("1. 为了避免开平方带来性能消耗",-1)])]),_:1})]),i("p",null,[l[426]||(l[426]=s("​ ",-1)),a(n,{color:"red"},{default:k(()=>[...l[425]||(l[425]=[s("2. 采用这种平方衰减更符合现实世界中光照的特性",-1)])]),_:1})]),l[2423]||(l[2423]=i("p",null,"​ 因为人眼对亮部不敏感，而对暗部敏感，这样我们就可以将 衰减值的精度 集中在比较远的地方",-1)),i("p",null,[l[428]||(l[428]=s("​ ",-1)),a(n,{color:"red"},{default:k(()=>[...l[427]||(l[427]=[s("distance是0.5时，distance2是0.25",-1)])]),_:1}),l[429]||(l[429]=s("，这样LUT查找表中大部分值都会留给比较远的部分",-1))]),l[2424]||(l[2424]=i("h3",{id:"五、聚光灯衰减计算",tabindex:"-1"},[s("五、聚光灯衰减计算 "),i("a",{class:"header-anchor",href:"#五、聚光灯衰减计算","aria-label":'Permalink to "五、聚光灯衰减计算"'},"​")],-1)),l[2425]||(l[2425]=i("blockquote",null,[i("p",null,"聚光灯默认Cookie")],-1)),l[2426]||(l[2426]=i("p",null,"​ 我们知道灯光组件中有一个Cookie参数，是用来关联光照遮罩图片的",-1)),l[2427]||(l[2427]=i("p",null,"​ 对于平行光和点光源，默认是不会提供任何光照遮罩信息的",-1)),l[2428]||(l[2428]=i("p",null,"​ 但是对于聚光灯来说",-1)),l[2429]||(l[2429]=i("p",null,"​ Unity会默认为它提供一个Cookie光照遮罩",-1)),l[2430]||(l[2430]=i("p",null,"​ 主要是用于模拟聚光灯的区域性",-1)),l[2431]||(l[2431]=i("p",null,"​ 而此时 光照纹理中",-1)),i("p",null,[l[431]||(l[431]=s("​ ",-1)),a(n,{color:"red"},{default:k(()=>[...l[430]||(l[430]=[s("_LightTexture0 存储的是Cookie纹理信息",-1)])]),_:1})]),i("p",null,[l[433]||(l[433]=s("​ ",-1)),a(n,{color:"red"},{default:k(()=>[...l[432]||(l[432]=[s("_LightTextureB0 存储的是光照纹理信息，里面包含衰减值",-1)])]),_:1})]),l[2432]||(l[2432]=i("p",null,"​ 因此",-1)),l[2433]||(l[2433]=i("p",null,[s("​ "),i("strong",null,"1.获取聚光灯衰减值时")],-1)),i("p",null,[l[435]||(l[435]=s("​ ",-1)),a(n,{color:"red"},{default:k(()=>[...l[434]||(l[434]=[s("需要从_LightTextureB0中进行采样",-1)])]),_:1})]),l[2434]||(l[2434]=i("p",null,[s("​ "),i("strong",null,"2.获取遮罩范围相关数据时")],-1)),i("p",null,[l[437]||(l[437]=s("​ ",-1)),a(n,{color:"red"},{default:k(()=>[...l[436]||(l[436]=[s("需要从_LightTexture0中进行采样",-1)])]),_:1})]),l[2435]||(l[2435]=i("h4",{id:"_1-聚光灯衰减计算",tabindex:"-1"},[s("1.聚光灯衰减计算 "),i("a",{class:"header-anchor",href:"#_1-聚光灯衰减计算","aria-label":'Permalink to "1.聚光灯衰减计算"'},"​")],-1)),l[2436]||(l[2436]=i("blockquote",null,[i("p",null,"将顶点从世界空间转换到光源空间")],-1)),l[2437]||(l[2437]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lightCoord"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(unity_WorldToLight, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"float4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.worldPos, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"));")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2438]||(l[2438]=i("p",null,[s("​ "),i("strong",null,"注意：")],-1)),l[2439]||(l[2439]=i("p",null,"​ 这里我们转换后和点光源不同的是",-1)),i("p",null,[l[440]||(l[440]=s("​ ",-1)),a(n,{color:"red"},{default:k(()=>[...l[438]||(l[438]=[s("点光源",-1)])]),_:1}),l[441]||(l[441]=s("只会获取其中的",-1)),a(n,{color:"red"},{default:k(()=>[...l[439]||(l[439]=[s("xyz",-1)])]),_:1})]),i("p",null,[l[446]||(l[446]=s("​ ",-1)),i("strong",null,[l[444]||(l[444]=s("而",-1)),a(n,{color:"red"},{default:k(()=>[...l[442]||(l[442]=[s("聚光灯",-1)])]),_:1}),l[445]||(l[445]=s("会获取其中的",-1)),a(n,{color:"red"},{default:k(()=>[...l[443]||(l[443]=[s("xyzw",-1)])]),_:1})])]),l[2440]||(l[2440]=i("p",null,[s("​ "),i("strong",null,"这是因为在聚光灯光源空间下的w值有特殊含义")],-1)),l[2441]||(l[2441]=i("p",null,[s("​ "),i("strong",null,"会参与后续的计算")],-1)),l[2442]||(l[2442]=i("blockquote",null,[i("p",null,"利用光源空间下的坐标信息")],-1)),l[2443]||(l[2443]=i("p",null,"​ 我们会通过3个步骤去获取聚光灯的衰减信息",-1)),l[2444]||(l[2444]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," atten = (lightCoord.z > 0) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," //第一步")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_LightTexture0, lightCoord.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lightCoord.w "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},").w "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," //第二步")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_LightTextureB0, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(lightCoord, lightCoord).rr).UNITY_ATTEN_CHANNEL; "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//第三步")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//我们首先分析和点光源相同的部分——第三步")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_LightTextureB0, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(lightCoord, lightCoord).rr).UNITY_ATTEN_CHANNEL;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//这一步的规则和点光源规则一致，直接根据距离光源原点距离的平方从光照纹理中获取衰减值")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2445]||(l[2445]=i("p",null,"需要注意的是",-1)),l[2446]||(l[2446]=i("ol",null,[i("li",null,[i("strong",null,"聚光灯的光照衰减纹理为_LightTextureB0")]),i("li",null,[i("strong",null,"dot函数只会计算xyz，w不会计算")])],-1)),l[2447]||(l[2447]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  接着我们来分析用于进行范围判断的部分——第一、二步")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"第一步：(lightCoord.z "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"CG语法中没有显示的bool类型，一般情况下 "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 表示false，"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"表示true")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"也就是说lightCoord.z "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"的返回值，条件满足时为1，条件不满足为0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"这里的z代表的其实是 目标点 相对于 聚光灯照射面 距离")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"如果 lightCoord.z "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 证明在聚光灯照射方向的背面，就不应该受到聚光灯的影响")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"也就是说这一步的主要作用，是用来决定顶点是否受到聚光灯光照的影响")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"第二步："),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_LightTexture0, lightCoord.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lightCoord.w "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},").w")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"我们以前在进行纹理采样时都会进行一个 先缩放 后 平移 的操作")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"比如：uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_ST.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_ST.zw;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"而第二步中的 lightCoord.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lightCoord.w "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 其实也是在做这样的一个操作")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"这样做的主要目的是因为：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"我们需要把uv坐标映射到0"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"~"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"的范围内再从纹理中采样")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"lightCoord.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lightCoord.w "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"进行缩放后"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," x"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"y的取值范围是"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"-0.5~0.5"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"之间")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"再加上0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".5"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"后"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"，"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"x"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"y的取值范围就是0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"~1"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"之间"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"，"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"便可以进行正确的纹理采样了")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"而lightCoord"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"xy"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," / "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"lightCoord"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"w"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," 是因为聚光灯有很多横截面")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"我们需要把各横截面映射到最大的面上进行采样")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2448]||(l[2448]=i("h4",{id:"_2-总结",tabindex:"-1"},[s("2.总结 "),i("a",{class:"header-anchor",href:"#_2-总结","aria-label":'Permalink to "2.总结"'},"​")],-1)),l[2449]||(l[2449]=i("p",null,"看似复杂的聚光灯光照衰减计算方式",-1)),i("p",null,[l[448]||(l[448]=s("其实就是由 ",-1)),l[449]||(l[449]=i("code",null,'“<ColorText color="red">遮罩衰减</ColorText>” ',-1)),l[450]||(l[450]=s("和 ",-1)),a(n,{color:"red"},{default:k(()=>[...l[447]||(l[447]=[s("距离衰减",-1)])]),_:1}),l[451]||(l[451]=s(" 共同决定的",-1))]),l[2450]||(l[2450]=i("p",null,[i("strong",null,"第一步：判断是否能有机会照到光 看得到为1，看不到为0")],-1)),l[2451]||(l[2451]=i("pre",null,[i("code",null,`fixed atten = (lightCoord.z > 0) *
`)],-1)),l[2452]||(l[2452]=i("p",null,[i("strong",null,"第二步：缩放平移，映射到遮罩纹理采样 根据遮罩纹理的信息决定衰减叠加")],-1)),l[2453]||(l[2453]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_LightTexture0, lightCoord.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lightCoord.w "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},").w "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2454]||(l[2454]=i("p",null,[i("strong",null,"第三步：从光照衰减纹理中取出按距离得到的衰减值")],-1)),l[2455]||(l[2455]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_LightTextureB0, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(lightCoord, lightCoord).rr).UNITY_ATTEN_CHANNEL;")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2456]||(l[2456]=i("p",null,[i("strong",null,"代码")],-1)),l[2457]||(l[2457]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson64_ForwardLighting"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //高光反射颜色  光泽度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _SpecularNum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularNum"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"20"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //Bass Pass 基础渲染通道")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Tags { "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"LightMode"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ForwardBase"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //用于帮助我们编译所有变体 并且保证衰减相关光照变量能够正确赋值到对应的内置变量中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma multi_compile_fwdbase")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "Lighting.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //材质漫反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularNum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //顶点着色器返回出去的内容")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //裁剪空间下的顶点位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的法线位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"wNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":NORMAL;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的 顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"wPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //得到兰伯特光照模型计算的颜色 （逐片元）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," getLambertFColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"in"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," wNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //得到光源单位向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lightDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_WorldSpaceLightPos0.xyz);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算除了兰伯特光照的漫反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," color"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainColor.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(wNormal, lightDir));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //得到Blinn Phong式高光反射模型计算的颜色（逐片元）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," getSpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"in"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," wPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"in"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," wNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //1.视角单位向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //float3 viewDir = normalize(_WorldSpaceCameraPos.xyz - wPos );")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," viewDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"UnityWorldSpaceViewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(wPos));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //2.光的反射单位向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //光的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lightDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_WorldSpaceLightPos0.xyz);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //半角方向向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," halfA"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(viewDir "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lightDir);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //color = 光源颜色 * 材质高光反射颜色 * pow( max(0, dot(视角单位向量, 光的反射单位向量)), 光泽度 )")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," color"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularColor.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"( "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(wNormal, halfA)), _SpecularNum );")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v2fData"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //转换模型空间下的顶点到裁剪空间中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2fData.pos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //转换模型空间下的法线到世界空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2fData.wNormal "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //顶点转到世界空间")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2fData.wPos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(unity_ObjectToWorld, v.vertex).xyz;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v2fData;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算兰伯特光照颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lambertColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," getLambertFColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wNormal));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算BlinnPhong式高光反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," specularColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," getSpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wPos, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wNormal));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //衰减值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," atten = 1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //物体表面光照颜色 = 环境光颜色 + 兰伯特光照模型所得颜色 + Phong式高光反射光照模型所得颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //衰减值 会和 漫反射颜色 + 高光反射颜色 后 再进行乘法运算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," blinnPhongColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," UNITY_LIGHTMODEL_AMBIENT.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (lambertColor "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," specularColor)"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"atten;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(blinnPhongColor.rgb, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //Additional Pass 附加渲染通道")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Tags { "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"LightMode"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ForwardAdd"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //线性减淡的效果 进行 光照颜色混合")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Blend One One")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //用于帮助我们编译所有变体 并且保证衰减相关光照变量能够正确赋值到对应的内置变量中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma multi_compile_fwdadd")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "Lighting.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "AutoLight.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //材质漫反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularNum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //顶点着色器返回出去的内容")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //裁剪空间下的顶点位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的法线位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"wNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":NORMAL;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的 顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"wPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v2fData"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //转换模型空间下的顶点到裁剪空间中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2fData.pos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //转换模型空间下的法线到世界空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2fData.wNormal "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //顶点转到世界空间")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2fData.wPos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(unity_ObjectToWorld, v.vertex).xyz;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v2fData;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //兰伯特漫反射")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldNormal"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wNormal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //平行光 光的方向 其实就是它的位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"if"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," defined"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"_DIRECTIONAL_LIGHT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                    fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldLightDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_WorldSpaceLightPos0.xyz);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"else"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," //点光源和聚光灯 光的方向 是 光的位置 - 顶点位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    fixed3 worldLightDir = normalize(_WorldSpaceLightPos0.xyz - i.wPos);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"endif")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                // 漫反射颜色 = 光颜色 * 属性中颜色 * max(0, dot(世界坐标系下的法线, 世界坐标系下的光方向));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," diffuse"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainColor.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(worldNormal, worldLightDir));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //BlinnPhong高光反射")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //视角方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," viewDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_WorldSpaceCameraPos.xyz "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," i.wPos.xyz);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //半角方向向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," halfDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(worldLightDir "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," viewDir);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                // 高光颜色 = 光颜色 * 属性中的高光颜色 * pow(max(0, dot(世界坐标系法线, 世界坐标系半角向量)), 光泽度);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," specular"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularColor.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(worldNormal, halfDir)), _SpecularNum);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //衰减值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #ifdef USING_DIRECTIONAL_LIGHT")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                    fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," atten = 1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"else")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"if"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," defined"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"POINT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                        //将世界坐标系下顶点转到光源空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                        float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lightCoord"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(unity_WorldToLight, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"float4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wPos, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")).xyz;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                        //利用这个坐标得到距离的平方 然后再再光源纹理中隐射得到衰减值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                        fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," atten = tex2D(_LightTexture0, dot(lightCoord,lightCoord).xx).UNITY_ATTEN_CHANNEL;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"elif"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," defined"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"SPOT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                        //将世界坐标系下顶点转到光源空间下 聚光灯需要用w参与后续计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                        float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lightCoord"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(unity_WorldToLight, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"float4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wPos, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                        fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," atten = (lightCoord.z > 0) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," //判断在聚光灯前面吗")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                                      tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_LightTexture0, lightCoord.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lightCoord.w "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},").w "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," //映射到大图中进行采样")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                                      tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_LightTextureB0, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(lightCoord,lightCoord).xx).UNITY_ATTEN_CHANNEL; "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//距离的平方采样")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"else")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                        fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," atten = 1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"endif")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"endif")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //在附加渲染通道中不需要在加上环境光颜色了 因为它只需要计算一次 在基础渲染通道中已经计算了")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"((diffuse "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," specular)"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"atten, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //该注释主要用于进行阴影投影 主要是用来计算阴影映射纹理的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //Pass{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},'        //    Tags{"LightMode" = "ShadowCaster"}')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //    CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //    #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //    #pragma fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //  该编译指令时告诉Unity编译器生成多个着色器变体")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //  用于支持不同类型的阴影（SM，SSSM等等）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //  可以确保着色器能够在所有可能的阴影投射模式下正确渲染")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //    #pragma multi_compile_shadowcaster")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //  其中包含了关键的阴影计算相关的宏")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},'        //    #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //    struct v2f{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //顶点到片元着色器阴影投射结构体数据宏")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //这个宏定义了一些标准的成员变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //这些变量用于在阴影投射路径中传递顶点数据到片元着色器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //我们主要在结构体中使用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //        V2F_SHADOW_CASTER;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //    };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //    v2f vert(appdata_base v)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //        v2f data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //转移阴影投射器法线偏移宏")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //用于在顶点着色器中计算和传递阴影投射所需的变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //主要做了")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //2-2-1.将对象空间的顶点位置转换为裁剪空间的位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //2-2-2.考虑法线偏移，以减轻阴影失真问题，尤其是在处理自阴影时")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //2-2-3.传递顶点的投影空间位置，用于后续的阴影计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //我们主要在顶点着色器中使用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //        TRANSFER_SHADOW_CASTER_NORMALOFFSET(data);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //        return data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //    }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //    float4 frag(v2f i):SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //阴影投射片元宏")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //将深度值写入到阴影映射纹理中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //我们主要在片元着色器中使用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //        SHADOW_CASTER_FRAGMENT(i);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //    }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //    ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    FallBack "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Specular"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2458]||(l[2458]=i("hr",null,null,-1)),l[2459]||(l[2459]=i("h2",{id:"阴影",tabindex:"-1"},[s("阴影 "),i("a",{class:"header-anchor",href:"#阴影","aria-label":'Permalink to "阴影"'},"​")],-1)),l[2460]||(l[2460]=i("h3",{id:"一、阴影的基本原理",tabindex:"-1"},[s("一、阴影的基本原理 "),i("a",{class:"header-anchor",href:"#一、阴影的基本原理","aria-label":'Permalink to "一、阴影的基本原理"'},"​")],-1)),l[2461]||(l[2461]=i("blockquote",null,[i("p",null,"现实中阴影的产生规则")],-1)),l[2462]||(l[2462]=i("p",null,[i("strong",null,"现实中的阴影产生规则是:")],-1)),l[2463]||(l[2463]=i("p",null,[i("strong",null,"在不考虑光线反射的前提下")],-1)),a(n,{color:"red"},{default:k(()=>[...l[452]||(l[452]=[s("当一个光源发射的一条光线遇到一个不透明物体A时",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[453]||(l[453]=[s("这条光线就不能够再继续照亮其他物体了（物体B的一部分）",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[454]||(l[454]=[s("相当于光线被更靠近光源的A物体挡住了一些",-1)])]),_:1}),l[2464]||(l[2464]=i("p",null,[i("strong",null,"这时物体A就会向旁边的物体B投射阴影")],-1)),l[2465]||(l[2465]=i("p",null,[i("strong",null,"也就是说")],-1)),a(n,{color:"red"},{default:k(()=>[...l[455]||(l[455]=[s("阴影区域的产生就是因为光线无法到达",-1)])]),_:1}),l[2466]||(l[2466]=i("h4",{id:"_1-shadow-mapping技术",tabindex:"-1"},[s("1.Shadow Mapping技术 "),i("a",{class:"header-anchor",href:"#_1-shadow-mapping技术","aria-label":'Permalink to "1.Shadow Mapping技术"'},"​")],-1)),l[2467]||(l[2467]=i("blockquote",null,[i("p",null,[i("strong",null,"原理：")])],-1)),a(n,{color:"red"},{default:k(()=>[...l[456]||(l[456]=[s("将摄像机的位置放在和光源重合的位置上",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[457]||(l[457]=[s("那么场景中关于这个光源的阴影区域就是摄像机看不到的位置",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[458]||(l[458]=[s("注意：一般情况下，点光源用透视投影，平行光用正交投影",-1)])]),_:1}),l[2468]||(l[2468]=i("blockquote",null,[i("p",null,[i("strong",null,"在Unity中的本质：")])],-1)),a(n,{color:"red"},{default:k(()=>[...l[459]||(l[459]=[s("生成一张深度图（阴影映射纹理），一般存于显存中",-1)])]),_:1}),i("p",null,[l[461]||(l[461]=s("这张深度图",-1)),a(n,{color:"red"},{default:k(()=>[...l[460]||(l[460]=[s("记录了从该光源位置出发，能看到的场景中距离它 ",-1)])]),_:1})]),a(n,{color:"red"},{default:k(()=>[...l[462]||(l[462]=[s("最近表面的位置",-1)])]),_:1}),l[2469]||(l[2469]=i("p",null,[i("strong",null,"（一般记录其深度信息，值转换为0~1之间，0最近，1最远）")],-1)),i("p",null,[i("strong",null,[l[464]||(l[464]=s("Shadow Mapping ",-1)),a(n,{color:"red"},{default:k(()=>[...l[463]||(l[463]=[s("阴影贴图技术就是将摄像机的位置放在和光 源重合的位置上，场景中关于这个光源的阴影区域就是摄像机看 不到的位置。它会生成一张深度图（阴影隐射纹理），一般存于 显存中。记录了从该光源位置出发，能看到的场景中距离它最近 表面的深度信息",-1)])]),_:1}),l[465]||(l[465]=s("（0~1之间，0最近，1最远）",-1))])]),l[2470]||(l[2470]=i("hr",null,null,-1)),l[2471]||(l[2471]=i("h4",{id:"_2-unity中如何应用shadow-mapping技术",tabindex:"-1"},[s("2.Unity中如何应用Shadow Mapping技术 "),i("a",{class:"header-anchor",href:"#_2-unity中如何应用shadow-mapping技术","aria-label":'Permalink to "2.Unity中如何应用Shadow Mapping技术"'},"​")],-1)),i("p",null,[l[467]||(l[467]=s("**",-1)),a(n,{color:"red"},{default:k(()=>[...l[466]||(l[466]=[s("阴影映射纹理的生成是由光源完成的",-1)])]),_:1}),l[468]||(l[468]=s(" **",-1))]),i("p",null,[l[470]||(l[470]=s("**",-1)),a(n,{color:"red"},{default:k(()=>[...l[469]||(l[469]=[s("我们只需要在Pass中计算出顶点深度和阴影映射纹理中采样出的结果进行比较",-1)])]),_:1}),l[471]||(l[471]=s(" **",-1))]),a(n,{color:"red"},{default:k(()=>[...l[472]||(l[472]=[s("判断该顶点是否在阴影中，进行对应的处理即可",-1)])]),_:1}),l[2472]||(l[2472]=i("hr",null,null,-1)),l[2473]||(l[2473]=i("h3",{id:"二、unity中阴影的实现原理",tabindex:"-1"},[s("二、Unity中阴影的实现原理 "),i("a",{class:"header-anchor",href:"#二、unity中阴影的实现原理","aria-label":'Permalink to "二、Unity中阴影的实现原理"'},"​")],-1)),l[2474]||(l[2474]=i("h4",{id:"_1-screen-space-shadow-mapping-技术",tabindex:"-1"},[s("1.Screen Space Shadow Mapping 技术 "),i("a",{class:"header-anchor",href:"#_1-screen-space-shadow-mapping-技术","aria-label":'Permalink to "1.Screen Space Shadow Mapping 技术"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[473]||(l[473]=[s("Screen Space Shadow Mapping（ SSSM ）：屏幕空间阴影映射技术",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[474]||(l[474]=[s("基于Shadow Mapping 技术的基础上 需要多生成一张深度图—— 屏幕空间深度图。",-1)])]),_:1}),l[2475]||(l[2475]=i("blockquote",null,[i("p",null,[i("strong",null,"原理：")])],-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[475]||(l[475]=[s("基于光源位置生成的阴影映射纹理",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[476]||(l[476]=[s("基于渲染游戏画面时得到的屏幕空间深度图",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[477]||(l[477]=[s("将屏幕像素位置变换到光源空间下",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[478]||(l[478]=[s("对屏幕空间深度图和阴影映射纹理进行采样比较深度值 决定最后的阴影处理效果",-1)])]),_:1})])]),l[2476]||(l[2476]=i("hr",null,null,-1)),l[2477]||(l[2477]=i("h4",{id:"_2-unity中如何实现阴影",tabindex:"-1"},[s("2.Unity中如何实现阴影 "),i("a",{class:"header-anchor",href:"#_2-unity中如何实现阴影","aria-label":'Permalink to "2.Unity中如何实现阴影"'},"​")],-1)),i("p",null,[l[480]||(l[480]=s("Unity会调用 ",-1)),a(n,{color:"red"},{default:k(()=>[...l[479]||(l[479]=[s("LightMode（灯光模式）",-1)])]),_:1})]),i("p",null,[l[482]||(l[482]=s("被设置为",-1)),a(n,{color:"red"},{default:k(()=>[...l[481]||(l[481]=[s("ShadowCaster（阴影投射器）的Pass （渲染通道）",-1)])]),_:1})]),a(n,{color:"red"},{default:k(()=>[...l[483]||(l[483]=[s("**来生成对应的阴影映射纹理（Shadow Mapping技术），以便在后续的阴影计算中使用** ",-1)])]),_:1}),l[2478]||(l[2478]=i("p",null,[i("strong",null,"阴影映射纹理的计算过程往往不需要我们手动处理")],-1)),l[2479]||(l[2479]=i("p",null,[i("strong",null,"Unity中提供了对应的阴影相关的宏帮助我们进行计算")],-1)),l[2480]||(l[2480]=i("p",null,[i("strong",null,"我们直接调用它们即可")],-1)),l[2481]||(l[2481]=i("p",null,[i("strong",null,"注意：如果Shader中没有LightMode为ShadowCaster的Pass，会在Shader中的Fallback指定的 Shader中继续寻找，直到找到对应Pass。如果没有找到，那么该物体就无法向其他物体投射阴影， 因为阴影映射纹理计算中就不会计算该物体的信息。（但是该物体仍可以接收其他物体的投影）")],-1)),l[2482]||(l[2482]=i("p",null,"而对于支持SSSM（屏幕空间阴影映射技术）的设备来说",-1)),l[2483]||(l[2483]=i("p",null,"除了阴影映射纹理外，还需要屏幕空间深度图。",-1)),i("p",null,[l[485]||(l[485]=s("而",-1)),a(n,{color:"red"},{default:k(()=>[...l[484]||(l[484]=[i("strong",null,"屏幕空间深度图通常由摄像机在渲染过程中自动生成，并存储在摄像机的深度纹理中",-1)])]),_:1})]),l[2484]||(l[2484]=i("p",null,"我们只需要在计算时",-1)),a(n,{color:"red"},{default:k(()=>[...l[486]||(l[486]=[s("从光源的阴影映射纹理以及屏幕空间深度图中进行采样比较深度即可",-1)])]),_:1}),l[2485]||(l[2485]=i("p",null,[i("strong",null,"同样这个过程往往不需要我们手动处理")],-1)),l[2486]||(l[2486]=i("p",null,[i("strong",null,"Unity中提供了对应的阴影相关的宏帮助我们进行计算 我们直接调用它们即可")],-1)),l[2487]||(l[2487]=i("p",null,[s("需要注意的是，"),i("strong",null,"物体接收来自其他物体的阴影和物体向其它物体投射阴影是两个过程：")],-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[487]||(l[487]=[s("物体接收来自其他物体的阴影 必须在Shader中对阴影映射纹理（SM或SSSM中的阴影图）进行采样 把采样结果和最后的光照结果相乘来产生阴影效果",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[488]||(l[488]=[s("物体向其它物体投射阴影 必须将该物体加入到光源的阴影映射纹理的计算中，必须要有LightMode（灯光模式）被设置为 B ShadowCaster（阴影投射器）的Pass （渲染通道），这样才能让其他物体在对阴影映射纹理采样 时，得到该物体的相关信息。",-1)])]),_:1})])]),l[2488]||(l[2488]=i("p",null,[s("想要让"),i("strong",null,"物体接收来自其他物体的阴影"),s("和"),i("strong",null,"物体向其它物体投射阴影")],-1)),l[2489]||(l[2489]=i("p",null,"我们需要在Unity中对光源和物体进行一些设置：",-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[489]||(l[489]=[s("保证光源能够生成阴影映射纹理—— 光源组件上设置Shadow Type（阴影类型）",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[490]||(l[490]=[s("保证物体能接收其他物体的阴影—— 网格渲染器组件上勾选Receive Shadows（接收阴影）",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[491]||(l[491]=[s("保证物体向其它物体投射阴影—— 网格渲染器组件上设置Cast Shadows（投射阴影）",-1)])]),_:1})])]),l[2490]||(l[2490]=i("p",null,[i("strong",null,"想要在Unity中实现阴影效果，必须注意以下三点：")],-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[492]||(l[492]=[s("对光源 以及物体进行相关设置",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[493]||(l[493]=[s("让光源开启阴影，让物体能够投射和接收阴影",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[494]||(l[494]=[s("想要向其它物体投射阴影的物体Shader 中",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[495]||(l[495]=[s("必须要有LightMode被设置为ShadowCaster的Pass，才能在阴影映射纹理中记录自己的信息",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[496]||(l[496]=[s("想要接收其他物体投射的阴影的物体Shader 中",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[497]||(l[497]=[s("必须对阴影映射纹理进行采样，用于最后的光照计算",-1)])]),_:1})])]),l[2491]||(l[2491]=i("hr",null,null,-1)),l[2492]||(l[2492]=i("h3",{id:"三-让物体投射阴影——不透明物体阴影",tabindex:"-1"},[s("三.让物体投射阴影——不透明物体阴影 "),i("a",{class:"header-anchor",href:"#三-让物体投射阴影——不透明物体阴影","aria-label":'Permalink to "三.让物体投射阴影——不透明物体阴影"'},"​")],-1)),l[2493]||(l[2493]=i("blockquote",null,[i("p",null,"不投射阴影的原因")],-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[498]||(l[498]=[s("该Shader中没有LightMode为ShaderCaster的Pass，无法参与光源的阴影映射纹理的计算",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[499]||(l[499]=[s("该Shader并没有对阴影映射相关纹理进行采样，没有进行阴影相关颜色运算",-1)])]),_:1})])]),l[2494]||(l[2494]=i("blockquote",null,[i("p",null,"让物体投射阴影的方法")],-1)),l[2495]||(l[2495]=i("p",null,[i("strong",null,"第一种方法：")],-1)),i("p",null,[l[501]||(l[501]=s("最后加上",-1)),a(n,{color:"red"},{default:k(()=>[...l[500]||(l[500]=[s("FallBack ",-1),i("code",null,'"Specular"',-1)])]),_:1})]),l[2496]||(l[2496]=i("p",null,[i("strong",null,"第二种方法：")],-1)),i("p",null,[l[503]||(l[503]=s("需要",-1)),a(n,{color:"red"},{default:k(()=>[...l[502]||(l[502]=[s("实现 LightMode(灯光模式) 为 ShadowCaster(阴影投射) 的 Pass(渲染通道)",-1)])]),_:1})]),l[2497]||(l[2497]=i("p",null,"一个编译指令，一个内置文件，三个关键宏",-1)),l[2498]||(l[2498]=i("p",null,[i("strong",null,"编译指令：")],-1)),l[2499]||(l[2499]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"#pragma multi_compile_shadowcaster")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2500]||(l[2500]=i("p",null,"该编译指令时告诉Unity编译器生成多个着色器变体",-1)),l[2501]||(l[2501]=i("p",null,"用于支持不同类型的阴影（SM，SSSM等等）",-1)),l[2502]||(l[2502]=i("p",null,"可以确保着色器能够在所有可能的阴影投射模式下正确渲染",-1)),l[2503]||(l[2503]=i("p",null,[i("strong",null,"内置文件：")],-1)),l[2504]||(l[2504]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'#include "UnityCG.cginc"')])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2505]||(l[2505]=i("p",null,"其中包含了关键的阴影计算相关的宏",-1)),l[2506]||(l[2506]=i("p",null,[i("strong",null,"三个关键宏:")],-1)),l[2507]||(l[2507]=i("ol",null,[i("li")],-1)),l[2508]||(l[2508]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"V2F_SHADOW_CASTER")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2509]||(l[2509]=i("p",null,"顶点到片元着色器阴影投射结构体数据宏",-1)),l[2510]||(l[2510]=i("p",null,"这个宏定义了一些标准的成员变量",-1)),l[2511]||(l[2511]=i("p",null,"这些变量用于在阴影投射路径中传递顶点数据到片元着色器",-1)),l[2512]||(l[2512]=i("p",null,"我们主要在结构体中使用",-1)),l[2513]||(l[2513]=i("ol",{start:"2"},[i("li")],-1)),l[2514]||(l[2514]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"TRANSFER_SHADOW_CASTER_NORMALOFFSET")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2515]||(l[2515]=i("p",null,"转移阴影投射器法线偏移宏",-1)),l[2516]||(l[2516]=i("p",null,"用于在顶点着色器中计算和传递阴影投射所需的变量",-1)),l[2517]||(l[2517]=i("p",null,[i("strong",null,"主要做了")],-1)),l[2518]||(l[2518]=i("p",null,[i("strong",null,"2-1.将对象空间的顶点位置转换为裁剪空间的位置")],-1)),l[2519]||(l[2519]=i("p",null,[i("strong",null,"2-2.考虑法线偏移，以减轻阴影失真问题，尤其是在处理自阴影时")],-1)),l[2520]||(l[2520]=i("p",null,[i("strong",null,"2-3.传递顶点的投影空间位置，用于后续的阴影计算")],-1)),l[2521]||(l[2521]=i("ol",{start:"3"},[i("li")],-1)),l[2522]||(l[2522]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"SHADOW_CASTER_FRAGMENT")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2523]||(l[2523]=i("p",null,"阴影投射片元宏",-1)),l[2524]||(l[2524]=i("p",null,"将深度值写入到阴影映射纹理中",-1)),l[2525]||(l[2525]=i("p",null,"我们主要在片元着色器中使用",-1)),l[2526]||(l[2526]=i("h4",{id:"实现",tabindex:"-1"},[s("实现 "),i("a",{class:"header-anchor",href:"#实现","aria-label":'Permalink to "实现"'},"​")],-1)),l[2527]||(l[2527]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Tags")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'        "LightMode"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "ShadowCaster"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        #pragma fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //  该编译指令时告诉Unity编译器生成多个着色器变体")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //  用于支持不同类型的阴影（SM，SSSM等等）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //  可以确保着色器能够在所有可能的阴影投射模式下正确渲染")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        #pragma multi_compile_shadowcaster")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //  其中包含了关键的阴影计算相关的宏")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //顶点到片元着色器阴影投射结构体数据宏")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //这个宏定义了一些标准的成员变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //这些变量用于在阴影投射路径中传递顶点数据到片元着色器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //我们主要在结构体中使用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            V2F_SHADOW_CASTER;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," data"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //转移阴影投射器法线偏移宏")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //用于在顶点着色器中计算和传递阴影投射所需的变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //主要做了")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //2-2-1.将对象空间的顶点位置转换为裁剪空间的位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //2-2-2.考虑法线偏移，以减轻阴影失真问题，尤其是在处理自阴影时")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //2-2-3.传递顶点的投影空间位置，用于后续的阴影计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //我们主要在顶点着色器中使用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        TRANSFER_SHADOW_CASTER_NORMALOFFSET"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(data);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"):SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //阴影投射片元宏")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //将深度值写入到阴影映射纹理中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //我们主要在片元着色器中使用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        SHADOW_CASTER_FRAGMENT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2528]||(l[2528]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//第二种方法直接最后写")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"FallBack "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Specular"')])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2529]||(l[2529]=i("hr",null,null,-1)),l[2530]||(l[2530]=i("h3",{id:"四-让物体接收阴影——不透明物体",tabindex:"-1"},[s("四.让物体接收阴影——不透明物体 "),i("a",{class:"header-anchor",href:"#四-让物体接收阴影——不透明物体","aria-label":'Permalink to "四.让物体接收阴影——不透明物体"'},"​")],-1)),l[2531]||(l[2531]=i("blockquote",null,[i("p",null,"流程")],-1)),l[2532]||(l[2532]=i("ol",null,[i("li",null,[i("p",null,[i("strong",null,"在顶点着色器中进行顶点坐标转换（将顶点坐标 转换为 阴影映射纹理坐标）")])]),i("li",null,[i("p",null,[i("strong",null,"在片元着色器中使用阴影映射纹理坐标在阴影映射纹理中进行采样")]),i("p",null,[i("strong",null,"通过得到的深度值判断片元（像素）是否在阴影中，以计算出阴影衰减值")])]),i("li",null,[i("p",null,[i("strong",null,"将采样结果参与到最终的颜色计算中")])])],-1)),l[2533]||(l[2533]=i("blockquote",null,[i("p",null,"实现物体接收阴影效果")],-1)),l[2534]||(l[2534]=i("p",null,[s("1.接受阴影的"),i("strong",null,"三剑客（三个宏）")],-1)),l[2535]||(l[2535]=i("p",null,"首先我们需要在Bass Pass当中引用包含内置文件",-1)),a(n,{color:"red"},{default:k(()=>[...l[504]||(l[504]=[s('`\\#include "AutoLight.cginc"`',-1)])]),_:1}),l[2536]||(l[2536]=i("p",null,"该内置文件中，有用于计算阴影时需要使用的三剑客",-1)),i("p",null,[l[506]||(l[506]=s("1-1.",-1)),a(n,{color:"red"},{default:k(()=>[...l[505]||(l[505]=[s("SHADOW_COORDS (阴影坐标宏)",-1)])]),_:1})]),l[2537]||(l[2537]=i("p",null,[s("​ 该宏"),i("strong",null,"在v2f结构体（顶点着色器返回值）中使用")],-1)),l[2538]||(l[2538]=i("p",null,"​ 本质上就是声明了一个用于对阴影纹理进行采样的坐标",-1)),l[2539]||(l[2539]=i("p",null,"​ 在内部实际上就是声明了一个名为_ShadowCoord的阴影纹理坐标变量",-1)),i("p",null,[l[508]||(l[508]=s("​ 需要",-1)),a(n,{color:"red"},{default:k(()=>[...l[507]||(l[507]=[s("注意",-1)])]),_:1}),l[509]||(l[509]=s("的是：",-1))]),i("p",null,[l[511]||(l[511]=s("​ 在使用时 ",-1)),a(n,{color:"red"},{default:k(()=>[...l[510]||(l[510]=[s("SHADOW_COORDS(2) 传入参数2",-1)])]),_:1})]),i("p",null,[l[513]||(l[513]=s("​ ",-1)),a(n,{color:"red"},{default:k(()=>[...l[512]||(l[512]=[s("表示需要时下一个可用的插值寄存器的索引值",-1)])]),_:1})]),i("p",null,[l[515]||(l[515]=s("1-2.",-1)),a(n,{color:"red"},{default:k(()=>[...l[514]||(l[514]=[s("TRANSFER_SHADOW (转移阴影宏)",-1)])]),_:1})]),i("p",null,[l[517]||(l[517]=s("​ 该宏",-1)),a(n,{color:"red"},{default:k(()=>[...l[516]||(l[516]=[s("在顶点着色器函数中调用，传入对应的v2f结构体对象",-1)])]),_:1})]),l[2540]||(l[2540]=i("p",null,"​ 该宏会在内部自己判断应该使用哪种阴影映射技术（SM、SSSM）",-1)),l[2541]||(l[2541]=i("p",null,[s("​ 最终的目的就是"),i("strong",null,"将顶点进行坐标转换并存储到_ShadowCoord阴影纹理坐标变量中")],-1)),i("p",null,[l[519]||(l[519]=s("需要",-1)),a(n,{color:"red"},{default:k(()=>[...l[518]||(l[518]=[s("注意",-1)])]),_:1}),l[520]||(l[520]=s("的是：",-1))]),i("ol",null,[i("li",null,[i("p",null,[l[524]||(l[524]=s("该宏会在",-1)),i("strong",null,[l[522]||(l[522]=s("内部使用顶点着色器中",-1)),a(n,{color:"red"},{default:k(()=>[...l[521]||(l[521]=[s("传入",-1)])]),_:1}),l[523]||(l[523]=s("的结构体",-1))])]),i("p",null,[l[526]||(l[526]=s("该结构体中",-1)),a(n,{color:"red"},{default:k(()=>[...l[525]||(l[525]=[s("顶点的命名必须是vertex",-1)])]),_:1})])]),i("li",null,[i("p",null,[l[530]||(l[530]=s("该宏会在",-1)),i("strong",null,[l[528]||(l[528]=s("内部使用顶点着色器的",-1)),a(n,{color:"red"},{default:k(()=>[...l[527]||(l[527]=[s("返回",-1)])]),_:1}),l[529]||(l[529]=s("结构体",-1))])]),i("p",null,[l[534]||(l[534]=s("其中的",-1)),a(n,{color:"red"},{default:k(()=>[...l[531]||(l[531]=[s("顶点位置",-1)])]),_:1}),l[535]||(l[535]=s()),i("strong",null,[l[533]||(l[533]=s("命名必须是",-1)),a(n,{color:"red"},{default:k(()=>[...l[532]||(l[532]=[s("pos",-1)])]),_:1})])])])]),i("p",null,[l[537]||(l[537]=s("2-3.",-1)),a(n,{color:"red"},{default:k(()=>[...l[536]||(l[536]=[s("SHADOW_ATTENUATION (阴影衰减宏)",-1)])]),_:1})]),l[2542]||(l[2542]=i("p",null,[s("​ 该宏在"),i("strong",null,"片元着色器中调用，传入对应的v2f结构体对象")],-1)),l[2543]||(l[2543]=i("p",null,"​ 该宏会在内部利用v2f中的 阴影纹理坐标变量(ShadowCoord)对相关纹理进行采样",-1)),l[2544]||(l[2544]=i("p",null,"​ 将采样得到的深度值进行比较，以计算出一个fixed3的阴影衰减值",-1)),i("p",null,[l[541]||(l[541]=s("​ 我们",-1)),i("strong",null,[l[539]||(l[539]=s("只需要使用它",-1)),a(n,{color:"red"},{default:k(()=>[...l[538]||(l[538]=[s("返回的结果和 (漫反射+高光反射) 的结果相乘",-1)])]),_:1}),l[540]||(l[540]=s("即可",-1))])]),l[2545]||(l[2545]=i("hr",null,null,-1)),l[2546]||(l[2546]=i("h4",{id:"实现-1",tabindex:"-1"},[s("实现 "),i("a",{class:"header-anchor",href:"#实现-1","aria-label":'Permalink to "实现"'},"​")],-1)),l[2547]||(l[2547]=i("div",{class:"language-C#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"C#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson67_Shadow"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //高光反射颜色  光泽度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            _SpecularNum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularNum"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"20"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //Bass Pass 基础渲染通道")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Tags { "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"LightMode"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ForwardBase"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #pragma fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //用于帮助我们编译所有变体 并且保证衰减相关光照变量能够正确赋值到对应的内置变量中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #pragma multi_compile_fwdbase")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'                #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'                #include "Lighting.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //引用包含该内置文件 其中有计算阴影会用到的三个宏（阴影三剑客）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'                #include "AutoLight.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //材质漫反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularNum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //顶点着色器返回出去的内容")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //裁剪空间下的顶点位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的法线位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"wNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":NORMAL;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的 顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"wPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      该宏在v2f结构体（顶点着色器返回值）中使用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      本质上就是声明了一个用于对阴影纹理进行采样的坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      在内部实际上就是声明了一个名为_ShadowCoord的阴影纹理坐标变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      需要注意的是：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      在使用时 SHADOW_COORDS(2) 传入参数2")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      表示需要时下一个可用的插值寄存器的索引值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //阴影坐标宏 主要用于存储阴影纹理坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                SHADOW_COORDS"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //得到兰伯特光照模型计算的颜色 （逐片元）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," getLambertFColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"in"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," wNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //得到光源单位向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lightDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_WorldSpaceLightPos0.xyz);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算除了兰伯特光照的漫反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," color"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainColor.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(wNormal, lightDir));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //得到Blinn Phong式高光反射模型计算的颜色（逐片元）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," getSpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"in"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," wPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"in"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," wNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //1.视角单位向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //float3 viewDir = normalize(_WorldSpaceCameraPos.xyz - wPos );")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," viewDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"UnityWorldSpaceViewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(wPos));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //2.光的反射单位向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //光的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lightDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_WorldSpaceLightPos0.xyz);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //半角方向向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," halfA"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(viewDir "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lightDir);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //color = 光源颜色 * 材质高光反射颜色 * pow( max(0, dot(视角单位向量, 光的反射单位向量)), 光泽度 )")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," color"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularColor.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"( "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(wNormal, halfA)), _SpecularNum );")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v2fData"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //转换模型空间下的顶点到裁剪空间中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2fData.pos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //转换模型空间下的法线到世界空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2fData.wNormal "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //顶点转到世界空间")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2fData.wPos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(unity_ObjectToWorld, v.vertex).xyz;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      该宏在顶点着色器函数中调用，传入对应的v2f结构体对象")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      该宏会在内部自己判断应该使用哪种阴影映射技术（SM、SSSM）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      最终的目的就是将顶点进行坐标转换并存储到_ShadowCoord阴影纹理坐标变量中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      需要注意的是：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      1.该宏会在内部使用顶点着色器中传入的结构体")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //        该结构体中顶点的命名必须是vertex")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      2.该宏会在内部使用顶点着色器的返回结构体")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //        其中的顶点位置命名必须是pos")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算阴影映射纹理坐标 它会在内部去进行计算 然后将其存入 v2f中的SHADOW_COORDS中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                TRANSFER_SHADOW"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v2fData);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v2fData;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算兰伯特光照颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lambertColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," getLambertFColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wNormal));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算BlinnPhong式高光反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," specularColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," getSpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wPos, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wNormal));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //得到阴影衰减值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      该宏在片元着色器中调用，传入对应的v2f结构体对象")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      该宏会在内部利用v2f中的 阴影纹理坐标变量(ShadowCoord)对相关纹理进行采样")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      将采样得到的深度值进行比较，以计算出一个fixed3的阴影衰减值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      我们只需要使用它返回的结果和 (漫反射+高光反射) 的结果相乘即可")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," shadow"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," SHADOW_ATTENUATION"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //衰减值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," atten = 1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //物体表面光照颜色 = 环境光颜色 + 兰伯特光照模型所得颜色 + Phong式高光反射光照模型所得颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //衰减值 会和 漫反射颜色 + 高光反射颜色 后 再进行乘法运算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," blinnPhongColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," UNITY_LIGHTMODEL_AMBIENT.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (lambertColor "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," specularColor)"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"atten"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"shadow;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(blinnPhongColor.rgb, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //Additional Pass 附加渲染通道")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Tags { "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"LightMode"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ForwardAdd"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //线性减淡的效果 进行 光照颜色混合")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Blend One One")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #pragma fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //用于帮助我们编译所有变体 并且保证衰减相关光照变量能够正确赋值到对应的内置变量中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #pragma multi_compile_fwdadd")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'                #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'                #include "Lighting.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //材质漫反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularNum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //顶点着色器返回出去的内容")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //裁剪空间下的顶点位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的法线位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"wNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":NORMAL;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的 顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"wPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v2fData"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //转换模型空间下的顶点到裁剪空间中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2fData.pos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //转换模型空间下的法线到世界空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2fData.wNormal "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //顶点转到世界空间")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2fData.wPos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(unity_ObjectToWorld, v.vertex).xyz;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v2fData;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //兰伯特漫反射")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldNormal"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wNormal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //平行光 光的方向 其实就是它的位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"if"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," defined"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"_DIRECTIONAL_LIGHT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                    fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldLightDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_WorldSpaceLightPos0.xyz);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"else"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," //点光源和聚光灯 光的方向 是 光的位置 - 顶点位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    fixed3 worldLightDir = normalize(_WorldSpaceLightPos0.xyz - i.wPos);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"endif")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                    // 漫反射颜色 = 光颜色 * 属性中颜色 * max(0, dot(世界坐标系下的法线, 世界坐标系下的光方向));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                    fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," diffuse"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainColor.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(worldNormal, worldLightDir));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //BlinnPhong高光反射")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //视角方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," viewDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_WorldSpaceCameraPos.xyz "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," i.wPos.xyz);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //半角方向向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," halfDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(worldLightDir "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," viewDir);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                // 高光颜色 = 光颜色 * 属性中的高光颜色 * pow(max(0, dot(世界坐标系法线, 世界坐标系半角向量)), 光泽度);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," specular"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularColor.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(worldNormal, halfDir)), _SpecularNum);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //衰减值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"if"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," defined"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"_DIRECTIONAL_LIGHT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                    fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," atten = 1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"elif"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," defined"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"_POINT_LIGHT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                    //将世界坐标系下顶点转到光源空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                    float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lightCoord"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(unity_WorldToLight, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"float4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wPos, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")).xyz;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //利用这个坐标得到距离的平方 然后再再光源纹理中隐射得到衰减值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," atten = tex2D(_LightTexture0, dot(lightCoord,lightCoord).xx).UNITY_ATTEN_CHANNEL;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"elif"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," defined"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"_SPOT_LIGHT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                    //将世界坐标系下顶点转到光源空间下 聚光灯需要用w参与后续计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                    float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lightCoord"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(unity_WorldToLight, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"float4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wPos, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," atten = (lightCoord.z > 0) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," //判断在聚光灯前面吗")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                    tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_LightTexture0, lightCoord.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lightCoord.w "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},").w "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," //映射到大图中进行采样")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                    tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_LightTextureB0, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(lightCoord,lightCoord).xx).UNITY_ATTEN_CHANNEL; "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//距离的平方采样")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"else")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                    fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," atten = 1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"endif")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                    //在附加渲染通道中不需要在加上环境光颜色了 因为它只需要计算一次 在基础渲染通道中已经计算了")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                    return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"((diffuse "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," specular)"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"atten, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    FallBack "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Specular"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2548]||(l[2548]=i("hr",null,null,-1)),l[2549]||(l[2549]=i("h3",{id:"五-光照衰减和阴影——不透明物体",tabindex:"-1"},[s("五.光照衰减和阴影——不透明物体 "),i("a",{class:"header-anchor",href:"#五-光照衰减和阴影——不透明物体","aria-label":'Permalink to "五.光照衰减和阴影——不透明物体"'},"​")],-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[542]||(l[542]=[s("将三剑客中的前两剑客，在Additional Pass 附加渲染通道中也添加上",-1)])]),_:1}),l[543]||(l[543]=i("p",null,[i("strong",null,"注意：需要在附加渲染通道中包含内置文件 AutoLight.cginc"),s(" （因为不仅三剑客来自于它，UNITY_LIGHT_ATTENUATION-Unity光照衰减宏也来自于它）")],-1))]),i("li",null,[l[556]||(l[556]=i("p",null,"修改两个Pass的片元着色器中衰减计算相关的代码",-1)),a(n,{color:"red"},{default:k(()=>[...l[544]||(l[544]=[s("使用 UNITY_LIGHT_ATTENUATION 宏替代原有逻辑",-1)])]),_:1}),i("p",null,[l[555]||(l[555]=i("strong",null,"该宏需要传入3个参数",-1)),i("strong",null,[l[546]||(l[546]=s("第一个参数是",-1)),a(n,{color:"red"},{default:k(()=>[...l[545]||(l[545]=[s("用来存储最终衰减值的变量名",-1)])]),_:1}),l[547]||(l[547]=s("（不用声明，内部会声明）",-1))]),i("strong",null,[l[549]||(l[549]=s("第二个参数是",-1)),a(n,{color:"red"},{default:k(()=>[...l[548]||(l[548]=[s("片元着色器中传入的v2f结构体对象",-1)])]),_:1})]),i("strong",null,[l[551]||(l[551]=s("第三个参数是",-1)),a(n,{color:"red"},{default:k(()=>[...l[550]||(l[550]=[s("顶点相对于世界坐标系的位置",-1)])]),_:1})]),i("strong",null,[l[553]||(l[553]=s("最终",-1)),a(n,{color:"red"},{default:k(()=>[...l[552]||(l[552]=[s("将得到的衰减结果和 (漫反射+高光反射) 的结果相乘",-1)])]),_:1}),l[554]||(l[554]=s("即可",-1))])])]),i("li",null,[l[559]||(l[559]=i("p",null,[i("strong",null,"为了让Additional Pass 附加渲染通道能够添加阴影效果"),s(" 需要将编译指令进行修改")],-1)),a(n,{color:"red"},{default:k(()=>[...l[557]||(l[557]=[s("将原本的 #pragma multi_compile_fwdadd",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[558]||(l[558]=[s("修改为 #pragma multi_compile_fwdadd_fullshadows",-1)])]),_:1}),l[560]||(l[560]=i("p",null,[i("strong",null,"这样Unity会生成多个包括支持和不支持阴影的Shader变体"),i("strong",null,"从而为额外的逐像素光源计算阴影，并传递给Shader了")],-1))])]),l[2550]||(l[2550]=i("hr",null,null,-1)),l[2551]||(l[2551]=i("h4",{id:"实现-2",tabindex:"-1"},[s("实现 "),i("a",{class:"header-anchor",href:"#实现-2","aria-label":'Permalink to "实现"'},"​")],-1)),l[2552]||(l[2552]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson68_Attenuation"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"   Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //高光反射颜色  光泽度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _SpecularNum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularNum"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"20"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //Bass Pass 基础渲染通道")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Tags { "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"LightMode"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ForwardBase"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //用于帮助我们编译所有变体 并且保证衰减相关光照变量能够正确赋值到对应的内置变量中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma multi_compile_fwdbase")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "Lighting.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //引用包含该内置文件 其中有计算阴影会用到的三个宏（阴影三剑客）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "AutoLight.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //材质漫反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularNum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //顶点着色器返回出去的内容")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //裁剪空间下的顶点位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的法线位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"wNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":NORMAL;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的 顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"wPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      该宏在v2f结构体（顶点着色器返回值）中使用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      本质上就是声明了一个用于对阴影纹理进行采样的坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      在内部实际上就是声明了一个名为_ShadowCoord的阴影纹理坐标变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      需要注意的是：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      在使用时 SHADOW_COORDS(2) 传入参数2")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      表示需要时下一个可用的插值寄存器的索引值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //阴影坐标宏 主要用于存储阴影纹理坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                SHADOW_COORDS"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //得到兰伯特光照模型计算的颜色 （逐片元）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," getLambertFColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"in"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," wNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //得到光源单位向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lightDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_WorldSpaceLightPos0.xyz);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算除了兰伯特光照的漫反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," color"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainColor.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(wNormal, lightDir));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //得到Blinn Phong式高光反射模型计算的颜色（逐片元）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," getSpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"in"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," wPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"in"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," wNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //1.视角单位向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //float3 viewDir = normalize(_WorldSpaceCameraPos.xyz - wPos );")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," viewDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"UnityWorldSpaceViewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(wPos));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //2.光的反射单位向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //光的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lightDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_WorldSpaceLightPos0.xyz);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //半角方向向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," halfA"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(viewDir "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lightDir);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //color = 光源颜色 * 材质高光反射颜色 * pow( max(0, dot(视角单位向量, 光的反射单位向量)), 光泽度 )")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," color"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularColor.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"( "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(wNormal, halfA)), _SpecularNum );")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v2fData"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //转换模型空间下的顶点到裁剪空间中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2fData.pos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //转换模型空间下的法线到世界空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2fData.wNormal "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //顶点转到世界空间")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2fData.wPos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(unity_ObjectToWorld, v.vertex).xyz;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      该宏在顶点着色器函数中调用，传入对应的v2f结构体对象")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      该宏会在内部自己判断应该使用哪种阴影映射技术（SM、SSSM）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      最终的目的就是将顶点进行坐标转换并存储到_ShadowCoord阴影纹理坐标变量中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      需要注意的是：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      1.该宏会在内部使用顶点着色器中传入的结构体")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //        该结构体中顶点的命名必须是vertex")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      2.该宏会在内部使用顶点着色器的返回结构体")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //        其中的顶点位置命名必须是pos")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算阴影映射纹理坐标 它会在内部去进行计算 然后将其存入 v2f中的SHADOW_COORDS中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                TRANSFER_SHADOW"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v2fData);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v2fData;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算兰伯特光照颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lambertColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," getLambertFColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wNormal));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算BlinnPhong式高光反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," specularColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," getSpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wPos, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wNormal));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //得到阴影衰减值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      该宏在片元着色器中调用，传入对应的v2f结构体对象")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      该宏会在内部利用v2f中的 阴影纹理坐标变量(ShadowCoord)对相关纹理进行采样")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      将采样得到的深度值进行比较，以计算出一个fixed3的阴影衰减值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      我们只需要使用它返回的结果和 (漫反射+高光反射) 的结果相乘即可")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //fixed3 shadow = SHADOW_ATTENUATION(i);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //衰减值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //fixed atten = 1;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //利用灯光衰减和阴影衰减计算宏统一进行衰减值的计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                UNITY_LIGHT_ATTENUATION"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(atten, i, i.wPos)")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //物体表面光照颜色 = 环境光颜色 + 兰伯特光照模型所得颜色 + Phong式高光反射光照模型所得颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //衰减值 会和 漫反射颜色 + 高光反射颜色 后 再进行乘法运算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," blinnPhongColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," UNITY_LIGHTMODEL_AMBIENT.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (lambertColor "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," specularColor)"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"atten;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(blinnPhongColor.rgb, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //Additional Pass 附加渲染通道")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Tags { "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"LightMode"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ForwardAdd"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //线性减淡的效果 进行 光照颜色混合")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Blend One One")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //用于帮助我们编译所有变体 并且保证衰减相关光照变量能够正确赋值到对应的内置变量中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //#pragma multi_compile_fwdadd")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma multi_compile_fwdadd_fullshadows")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "Lighting.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "AutoLight.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //材质漫反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularNum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //顶点着色器返回出去的内容")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //裁剪空间下的顶点位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的法线位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"wNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":NORMAL;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的 顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"wPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      该宏在v2f结构体（顶点着色器返回值）中使用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      本质上就是声明了一个用于对阴影纹理进行采样的坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      在内部实际上就是声明了一个名为_ShadowCoord的阴影纹理坐标变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      需要注意的是：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      在使用时 SHADOW_COORDS(2) 传入参数2")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      表示需要时下一个可用的插值寄存器的索引值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //阴影坐标宏 主要用于存储阴影纹理坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                SHADOW_COORDS"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v2fData"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //转换模型空间下的顶点到裁剪空间中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2fData.pos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //转换模型空间下的法线到世界空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2fData.wNormal "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //顶点转到世界空间")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2fData.wPos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(unity_ObjectToWorld, v.vertex).xyz;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      该宏在顶点着色器函数中调用，传入对应的v2f结构体对象")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      该宏会在内部自己判断应该使用哪种阴影映射技术（SM、SSSM）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      最终的目的就是将顶点进行坐标转换并存储到_ShadowCoord阴影纹理坐标变量中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      需要注意的是：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      1.该宏会在内部使用顶点着色器中传入的结构体")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //        该结构体中顶点的命名必须是vertex")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //      2.该宏会在内部使用顶点着色器的返回结构体")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //        其中的顶点位置命名必须是pos")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算阴影映射纹理坐标 它会在内部去进行计算 然后将其存入 v2f中的SHADOW_COORDS中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                TRANSFER_SHADOW"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v2fData);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v2fData;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //兰伯特漫反射")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldNormal"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wNormal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //平行光 光的方向 其实就是它的位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"if"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," defined"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"_DIRECTIONAL_LIGHT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                    fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldLightDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_WorldSpaceLightPos0.xyz);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"else"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," //点光源和聚光灯 光的方向 是 光的位置 - 顶点位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    fixed3 worldLightDir = normalize(_WorldSpaceLightPos0.xyz - i.wPos);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"endif")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                // 漫反射颜色 = 光颜色 * 属性中颜色 * max(0, dot(世界坐标系下的法线, 世界坐标系下的光方向));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," diffuse"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainColor.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(worldNormal, worldLightDir));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //BlinnPhong高光反射")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //视角方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," viewDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_WorldSpaceCameraPos.xyz "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," i.wPos.xyz);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //半角方向向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," halfDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(worldLightDir "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," viewDir);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                // 高光颜色 = 光颜色 * 属性中的高光颜色 * pow(max(0, dot(世界坐标系法线, 世界坐标系半角向量)), 光泽度);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," specular"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularColor.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(worldNormal, halfDir)), _SpecularNum);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //衰减值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //#if defined(_DIRECTIONAL_LIGHT)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //    fixed atten = 1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //#elif defined(_POINT_LIGHT)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //将世界坐标系下顶点转到光源空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //    float3 lightCoord = mul(unity_WorldToLight, float4(i.wPos, 1)).xyz;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //利用这个坐标得到距离的平方 然后再再光源纹理中隐射得到衰减值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //    fixed atten = tex2D(_LightTexture0, dot(lightCoord,lightCoord).xx).UNITY_ATTEN_CHANNEL;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //#elif defined(_SPOT_LIGHT)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //将世界坐标系下顶点转到光源空间下 聚光灯需要用w参与后续计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //    float4 lightCoord = mul(unity_WorldToLight, float4(i.wPos, 1));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //    fixed atten = (lightCoord.z > 0) *"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," //判断在聚光灯前面吗")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //                  tex2D(_LightTexture0, lightCoord.xy / lightCoord.w + 0.5).w *"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," //映射到大图中进行采样")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //                  tex2D(_LightTextureB0, dot(lightCoord,lightCoord).xx).UNITY_ATTEN_CHANNEL;"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," //距离的平方采样")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //#else")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //    fixed atten = 1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //#endif")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //利用灯光衰减和阴影衰减计算宏统一进行衰减值的计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                UNITY_LIGHT_ATTENUATION"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(atten, i, i.wPos)")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //在附加渲染通道中不需要在加上环境光颜色了 因为它只需要计算一次 在基础渲染通道中已经计算了")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"((diffuse "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," specular)"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"atten, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    FallBack "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Specular"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2553]||(l[2553]=i("hr",null,null,-1)),l[2554]||(l[2554]=i("h3",{id:"六-透明度测试物体阴影实现——透明物体",tabindex:"-1"},[s("六.透明度测试物体阴影实现——透明物体 "),i("a",{class:"header-anchor",href:"#六-透明度测试物体阴影实现——透明物体","aria-label":'Permalink to "六.透明度测试物体阴影实现——透明物体"'},"​")],-1)),l[2555]||(l[2555]=i("h4",{id:"_6-1-透明物体投射阴影",tabindex:"-1"},[s("6.1 透明物体投射阴影 "),i("a",{class:"header-anchor",href:"#_6-1-透明物体投射阴影","aria-label":'Permalink to "6.1 透明物体投射阴影"'},"​")],-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[561]||(l[561]=[s("同样我们使用FallBack的形式投射阴影",-1)])]),_:1}),l[566]||(l[566]=i("p",null,"但是需要注意的是",-1)),a(n,{color:"red"},{default:k(()=>[...l[562]||(l[562]=[s("FallBack的内容为：Transparent/Cutout/VertexLit",-1)])]),_:1}),l[567]||(l[567]=i("p",null,"该默认Shader中会把裁剪后的物体深度信息写入到 阴影映射纹理和摄像机深度图中 注意：",-1)),a(n,{color:"red"},{default:k(()=>[...l[563]||(l[563]=[s("使用该默认Shader计算投射阴影时，需要使用_Cutoff属性 和 _Color属性来进行相关计算",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[564]||(l[564]=[s("因此我们必须保证我们的Shader当中有名为_Cutoff的阈值属性 和 _Color的漫反射颜色属性",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[565]||(l[565]=[s("否则无法得到正确阴影结果",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[568]||(l[568]=[s("为了得到正确的阴影效果，我们需要将该物体的Cast Shadows（投射阴影）属性设置为Two Sided（双面）",-1)])]),_:1}),l[569]||(l[569]=i("p",null,"强制让Unity计算阴影隐射纹理时计算所有面的深度信息。 因为如果不设置，默认将物体渲染到阴影隐射纹理和摄像机深度图时只会考虑物体的正面 背对光源的面不会参与计算，设置为双面后即可参与计算，得到正确的结果",-1))])]),l[2556]||(l[2556]=i("h4",{id:"_6-2-透明物体接收阴影",tabindex:"-1"},[s("6.2 透明物体接收阴影 "),i("a",{class:"header-anchor",href:"#_6-2-透明物体接收阴影","aria-label":'Permalink to "6.2 透明物体接收阴影"'},"​")],-1)),i("ol",null,[i("li",null,[l[571]||(l[571]=i("p",null,[i("strong",null,"编译指令")],-1)),a(n,{color:"red"},{default:k(()=>[...l[570]||(l[570]=[s("#pragma multi_compile_fwdbase",-1)])]),_:1}),l[572]||(l[572]=i("p",null,"用于帮助我们编译所有变体 并且保证衰减相关光照变量能够正确赋值到对应的内置变量中",-1))]),i("li",null,[l[574]||(l[574]=i("p",null,[i("strong",null,"包含内置文件")],-1)),a(n,{color:"red"},{default:k(()=>[...l[573]||(l[573]=[s('#include "AutoLight.cginc"',-1)])]),_:1})]),i("li",null,[l[576]||(l[576]=i("p",null,[i("strong",null,"结构体中声明阴影坐标宏")],-1)),a(n,{color:"red"},{default:k(()=>[...l[575]||(l[575]=[s("SHADOW_COORDS(n)",-1)])]),_:1}),l[577]||(l[577]=i("p",null,"n为下一个可用的插值寄存器的索引值（结构体前面有几个TEXCOORD就填几）",-1))]),i("li",null,[l[579]||(l[579]=i("p",null,[i("strong",null,"坐标转换宏")],-1)),a(n,{color:"red"},{default:k(()=>[...l[578]||(l[578]=[s("TRANSFER_SHADOW(o);",-1)])]),_:1})]),i("li",null,[l[581]||(l[581]=i("p",null,[i("strong",null,"Unity光照衰减计算宏")],-1)),a(n,{color:"red"},{default:k(()=>[...l[580]||(l[580]=[s("UNITY_LIGHT_ATTENUATION(atten, v2f结构体, 顶点世界坐标位置);",-1)])]),_:1})])]),l[2557]||(l[2557]=i("h4",{id:"实现-3",tabindex:"-1"},[s("实现 "),i("a",{class:"header-anchor",href:"#实现-3","aria-label":'Permalink to "实现"'},"​")],-1)),l[2558]||(l[2558]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson69_AlphaTestShadow"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"       //主要就是将单张纹理Shader和布林方光照模型逐片元Shader进行一个结合")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"       _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainTex"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"       //漫反射颜色、高光反射颜色、光泽度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"       _Color"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"       _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"       _SpecularNum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularNum"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"20"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 15")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"       //透明度测试用的阈值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"       _Cutoff"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Cutoff"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //设置渲染队列 决定对象在何时渲染")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Tags{"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Queue"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"AlphaTest"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "IgnoreProjector"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"True"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "RenderType"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"TransparentCutout"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Tags{ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"LightMode"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "ForwardBase"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //关闭剔除 让正面和背面都去进行渲染")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Cull Off")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma multi_compile_fwdbase")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "Lighting.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "AutoLight.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //纹理贴图对应的映射成员")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //漫反射颜色、高光反射颜色、光泽度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Color"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularNum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //透明度测试用的阈值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Cutoff;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //裁剪空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //UV坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"wNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":NORMAL;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"wPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //阴影坐标宏")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                SHADOW_COORDS"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"               v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," data"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //把模型空间下的顶点转换到裁剪空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.pos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //uv坐标计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_ST.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_ST.zw;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //世界空间下的法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.wNormal "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //世界空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.wPos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(unity_ObjectToWorld, v.vertex);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //坐标转换宏")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"               TRANSFER_SHADOW"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(data)")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"               return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //颜色纹理的颜色信息")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," texColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //判断贴图的 颜色信息中的 透明通道 有没有小于阈值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //如果小于了 就直接丢弃")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                clip"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(texColor.a "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Cutoff);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //相当于")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //if(texColor.a - _Cutoff < 0)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //if(texColor.a < _Cutoff)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //    discard;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //新知识点：纹理颜色需要和漫反射材质颜色叠加（乘法） 共同决定最终的颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," albedo"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," texColor.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Color.rgb;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //光的方向（指向光源方向）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lightDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_WorldSpaceLightPos0.xyz);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //兰伯特漫反射颜色 = 光的颜色 * 漫反射材质的颜色 * max(0, dot(世界坐标系下的法线, 光的方向))")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //新知识点：兰伯特光照模型计算时，漫反射材质颜色使用 1 中的叠加颜色计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lambertColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," albedo.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wNormal, lightDir));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                // 视角方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //float3 viewDir = normalize(_WorldSpaceCameraPos.xyz - i.wPos);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," viewDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"UnityWorldSpaceViewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wPos));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //半角向量 = 视角方向 + 光的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," halfA"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(viewDir "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lightDir);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //高光反射的颜色 = 光的颜色 * 高光反射材质的颜色 * pow(max(0, dot(世界坐标系下的法线, 半角向量)), 光泽度)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," specularColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularColor "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"( "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.wNormal, halfA)), _SpecularNum);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算光照衰减和阴影衰减的宏")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                UNITY_LIGHT_ATTENUATION"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(atten, i, i.wPos)")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //布林方光照颜色 = 环境光颜色 + 兰伯特漫反射颜色 + 高光反射的颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //新知识点：最终使用的环境光叠加时，环境光变量UNITY_LIGHTMODEL_AMBIENT需要和 1 中颜色进行乘法叠加")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //         为了避免最终的渲染效果偏灰")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," color"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," UNITY_LIGHTMODEL_AMBIENT.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," albedo "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (lambertColor "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," specularColor)"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"atten;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(color.rgb, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Fallback "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Transparent/Cutout/VertexLit"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2559]||(l[2559]=i("hr",null,null,-1)),l[2560]||(l[2560]=i("h3",{id:"七-透明度混合物体阴影实现——透明物体",tabindex:"-1"},[s("七.透明度混合物体阴影实现——透明物体 "),i("a",{class:"header-anchor",href:"#七-透明度混合物体阴影实现——透明物体","aria-label":'Permalink to "七.透明度混合物体阴影实现——透明物体"'},"​")],-1)),l[2561]||(l[2561]=i("ol",null,[i("li",null,[i("strong",null,"投射阴影"),s(" 在FallBack中关联内置的对应Shader（"),i("code",null,'"Transparent/VertexLit"'),s("）")]),i("li",null,[i("strong",null,"接受阴影"),s(" 在Shader中书写计算阴影衰减值的相关代码 因此对于透明度混合的Shader也会使用同样的思路去制作")])],-1)),a(n,{color:"red"},{default:k(()=>[...l[582]||(l[582]=[s("但是！！！",-1)])]),_:1}),l[2562]||(l[2562]=i("p",null,[s("由于透明度混合需要关闭深度写入 而阴影相关的处理需要用到深度值参与计算 因此Unity中从性能方面考虑（要计算半透明物体的的阴影表现效果是相对复杂的） 所有的内置半透明Shader都不会产生阴影效果（比如 Transparent/VertexLit） 因此 2-1.透明混合Shader想要 投射阴影时 "),i("strong",null,"不管你在FallBack中写入哪种自带的半透明混合Shader"),i("strong",null,"都不会有投射阴影的效果，因为深度不会写入")],-1)),l[2563]||(l[2563]=i("p",null,[s("2-2.透明混合Shader想要 接受阴影时 "),i("strong",null,"Unity内置关于阴影接收计算的相关宏"),i("strong",null,"不会计算处理 透明混合Shader"),i("strong",null,[s("混合因子 设置为半透明效果"),i("code",null,"(Blend SrcAlpha OneMinusSrcAlpha)"),s("的Shader")]),i("strong",null,"因为透明混合物体的深度值和遮挡关系无法直接用传统的深度缓冲和阴影贴图来处理")],-1)),l[2564]||(l[2564]=i("p",null,"结论：",-1)),a(n,{color:"red"},{default:k(()=>[...l[583]||(l[583]=[s("Unity中不会直接为透明度混合Shader处理阴影",-1)])]),_:1}),l[2565]||(l[2565]=i("hr",null,null,-1)),l[2566]||(l[2566]=i("h2",{id:"标准光照着色器",tabindex:"-1"},[s("标准光照着色器 "),i("a",{class:"header-anchor",href:"#标准光照着色器","aria-label":'Permalink to "标准光照着色器"'},"​")],-1)),l[2567]||(l[2567]=i("h3",{id:"一、标准漫反射shader",tabindex:"-1"},[s("一、标准漫反射Shader "),i("a",{class:"header-anchor",href:"#一、标准漫反射shader","aria-label":'Permalink to "一、标准漫反射Shader"'},"​")],-1)),l[2568]||(l[2568]=i("ol",null,[i("li",null,[i("strong",null,[s("加入渲染标签Tags "),i("code",null,'{ "RenderType"="Opaque" "Queue"="Geometry"}')]),i("strong",null,"渲染类型设置为不透明的、渲染队列设置为几何队列（不透明的几何体通常使用该队列）")]),i("li",null,[i("strong",null,"删除高光反射相关代码")]),i("li",null,[i("strong",null,"加入阴影、衰减相关代码")]),i("li",null,[i("strong",null,"加入附加渲染通道")]),i("li",null,[i("strong",null,[s("加入"),i("code",null,'FallBac "Diffuse"')])])],-1)),l[2569]||(l[2569]=i("div",{class:"language-tex"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"tex"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'Shader "Unlit/BumpedDiffuse"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"   Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        _MainColor("MainColor", Color) = (1,1,1,1)')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        _MainTex("MainTex", 2D) = ""{}')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        _BumpMap("BumpMap", 2D) = ""{}')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        _BumpScale("BumpScale", Range(0,1)) = 1')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        Tags{ "RenderType"="Opaque" "Queue"="Geometry"}')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            Tags { "LightMode"="ForwardBase" }')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma multi_compile_fwdbase")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "Lighting.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "AutoLight.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float4 _MainColor;//漫反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            sampler2D _MainTex;//颜色纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float4 _MainTex_ST;//颜色纹理的缩放和平移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            sampler2D _BumpMap;//法线纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float4 _BumpMap_ST;//法线纹理的缩放和平移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float _BumpScale;//凹凸程度")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 pos:SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //float2 uvTex:TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //float2 uvBump:TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //我们可以单独的声明两个float2的成员用于记录 颜色和法线纹理的uv坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //也可以直接声明一个float4的成员 xy用于记录颜色纹理的uv，zw用于记录法线纹理的uv")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 uv:TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //顶点相对于世界坐标的位置 主要用于 之后的 视角方向的计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //float3 worldPos:TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //切线 到 世界空间的 变换矩阵")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //float3x3 rotation:TEXCOORD2;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //代表我们切线空间到世界空间的 变换矩阵的3行")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 TtoW0:TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 TtoW1:TEXCOORD2;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 TtoW2:TEXCOORD3;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                SHADOW_COORDS(4)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            v2f vert (appdata_full v)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2f data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //把模型空间下的顶点转到裁剪空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.pos = UnityObjectToClipPos(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //计算纹理的缩放偏移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.uv.xy = v.texcoord.xy * _MainTex_ST.xy + _MainTex_ST.zw;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.uv.zw = v.texcoord.xy * _BumpMap_ST.xy + _BumpMap_ST.zw;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //得到世界空间下的 顶点位置 用于之后在片元中计算视角方向（世界空间下的）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //data.worldPos = mul(unity_ObjectToWorld, v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 worldPos = mul(unity_ObjectToWorld, v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //把模型空间下的法线、切线转换到世界空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 worldNormal = UnityObjectToWorldNormal(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 worldTangent = UnityObjectToWorldDir(v.tangent);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //计算副切线 计算叉乘结果后 垂直与切线和法线的向量有两条 通过乘以 切线当中的w，就可以确定是哪一条")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 worldBinormal = cross(normalize(worldTangent), normalize(worldNormal)) * v.tangent.w;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //这个就是我们 切线空间到世界空间的 转换矩阵")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //data.rotation = float3x3( worldTangent.x, worldBinormal.x,  worldNormal.x,")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //                          worldTangent.y, worldBinormal.y,  worldNormal.y,")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //                          worldTangent.z, worldBinormal.z,  worldNormal.z);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.TtoW0 = float4(worldTangent.x, worldBinormal.x,  worldNormal.x, worldPos.x);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.TtoW1 = float4(worldTangent.y, worldBinormal.y,  worldNormal.y, worldPos.y);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.TtoW2 = float4(worldTangent.z, worldBinormal.z,  worldNormal.z, worldPos.z);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                TRANSFER_SHADOW(data);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                return data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            fixed4 frag (v2f i) : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //世界空间下光的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                fixed3 lightDir = normalize(_WorldSpaceLightPos0.xyz);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //世界空间下视角方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 worldPos = float3(i.TtoW0.w, i.TtoW1.w, i.TtoW2.w);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                fixed3 viewDir = normalize(UnityWorldSpaceViewDir(worldPos));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //通过纹理采样函数 取出法线纹理贴图当中的数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 packedNormal = tex2D(_BumpMap, i.uv.zw);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //将我们取出来的法线数据 进行逆运算并且可能会进行解压缩的运算，最终得到切线空间下的法线数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 tangentNormal = UnpackNormal(packedNormal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //乘以凹凸程度的系数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                tangentNormal.xy *= _BumpScale;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                tangentNormal.z = sqrt(1.0 - saturate(dot(tangentNormal.xy, tangentNormal.xy)));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //把计算完毕后的切线空间下的法线转换到世界空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //float3x3 rotation = float3x3(i.TtoW0.xyz, i.TtoW1.xyz, i.TtoW2.xyz );")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //float3 worldNormal = mul(rotation, tangentNormal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //本质 就是在进行矩阵运算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 worldNormal = float3(dot(i.TtoW0.xyz, tangentNormal), dot(i.TtoW1.xyz, tangentNormal), dot(i.TtoW2.xyz, tangentNormal));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //接下来就来处理 带颜色纹理的 布林方光照模型计算")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //颜色纹理和漫反射颜色的 叠加")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                fixed3 albedo = tex2D(_MainTex, i.uv.xy) * _MainColor.rgb;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //兰伯特")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                fixed3 lambertColor = _LightColor0.rgb * albedo.rgb * max(0, dot(worldNormal, normalize(lightDir)));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                UNITY_LIGHT_ATTENUATION(atten, i, worldPos);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               //布林方")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                fixed3 color = UNITY_LIGHTMODEL_AMBIENT.rgb * albedo + lambertColor * atten;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                return fixed4(color.rgb, 1);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            Tags { "LightMode"="ForwardAdd" }')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Blend One One")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma multi_compile_fwdadd")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "Lighting.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "AutoLight.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float4 _MainColor;//漫反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            sampler2D _MainTex;//颜色纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float4 _MainTex_ST;//颜色纹理的缩放和平移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            sampler2D _BumpMap;//法线纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float4 _BumpMap_ST;//法线纹理的缩放和平移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float _BumpScale;//凹凸程度")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 pos:SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //float2 uvTex:TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //float2 uvBump:TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //我们可以单独的声明两个float2的成员用于记录 颜色和法线纹理的uv坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //也可以直接声明一个float4的成员 xy用于记录颜色纹理的uv，zw用于记录法线纹理的uv")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 uv:TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //顶点相对于世界坐标的位置 主要用于 之后的 视角方向的计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //float3 worldPos:TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //切线 到 世界空间的 变换矩阵")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //float3x3 rotation:TEXCOORD2;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //代表我们切线空间到世界空间的 变换矩阵的3行")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 TtoW0:TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 TtoW1:TEXCOORD2;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 TtoW2:TEXCOORD3;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                SHADOW_COORDS(4)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            v2f vert (appdata_full v)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2f data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //把模型空间下的顶点转到裁剪空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.pos = UnityObjectToClipPos(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //计算纹理的缩放偏移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.uv.xy = v.texcoord.xy * _MainTex_ST.xy + _MainTex_ST.zw;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.uv.zw = v.texcoord.xy * _BumpMap_ST.xy + _BumpMap_ST.zw;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //得到世界空间下的 顶点位置 用于之后在片元中计算视角方向（世界空间下的）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //data.worldPos = mul(unity_ObjectToWorld, v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 worldPos = mul(unity_ObjectToWorld, v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //把模型空间下的法线、切线转换到世界空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 worldNormal = UnityObjectToWorldNormal(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 worldTangent = UnityObjectToWorldDir(v.tangent);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //计算副切线 计算叉乘结果后 垂直与切线和法线的向量有两条 通过乘以 切线当中的w，就可以确定是哪一条")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 worldBinormal = cross(normalize(worldTangent), normalize(worldNormal)) * v.tangent.w;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //这个就是我们 切线空间到世界空间的 转换矩阵")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //data.rotation = float3x3( worldTangent.x, worldBinormal.x,  worldNormal.x,")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //                          worldTangent.y, worldBinormal.y,  worldNormal.y,")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //                          worldTangent.z, worldBinormal.z,  worldNormal.z);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.TtoW0 = float4(worldTangent.x, worldBinormal.x,  worldNormal.x, worldPos.x);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.TtoW1 = float4(worldTangent.y, worldBinormal.y,  worldNormal.y, worldPos.y);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.TtoW2 = float4(worldTangent.z, worldBinormal.z,  worldNormal.z, worldPos.z);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                TRANSFER_SHADOW(data);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                return data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            fixed4 frag (v2f i) : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //世界空间下光的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                fixed3 lightDir = normalize(_WorldSpaceLightPos0.xyz);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //世界空间下视角方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 worldPos = float3(i.TtoW0.w, i.TtoW1.w, i.TtoW2.w);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                fixed3 viewDir = normalize(UnityWorldSpaceViewDir(worldPos));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //通过纹理采样函数 取出法线纹理贴图当中的数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 packedNormal = tex2D(_BumpMap, i.uv.zw);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //将我们取出来的法线数据 进行逆运算并且可能会进行解压缩的运算，最终得到切线空间下的法线数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 tangentNormal = UnpackNormal(packedNormal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //乘以凹凸程度的系数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                tangentNormal.xy *= _BumpScale;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                tangentNormal.z = sqrt(1.0 - saturate(dot(tangentNormal.xy, tangentNormal.xy)));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //把计算完毕后的切线空间下的法线转换到世界空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //float3x3 rotation = float3x3(i.TtoW0.xyz, i.TtoW1.xyz, i.TtoW2.xyz );")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //float3 worldNormal = mul(rotation, tangentNormal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //本质 就是在进行矩阵运算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 worldNormal = float3(dot(i.TtoW0.xyz, tangentNormal), dot(i.TtoW1.xyz, tangentNormal), dot(i.TtoW2.xyz, tangentNormal));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //接下来就来处理 带颜色纹理的 布林方光照模型计算")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //颜色纹理和漫反射颜色的 叠加")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                fixed3 albedo = tex2D(_MainTex, i.uv.xy) * _MainColor.rgb;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //兰伯特")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                fixed3 lambertColor = _LightColor0.rgb * albedo.rgb * max(0, dot(worldNormal, normalize(lightDir)));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                UNITY_LIGHT_ATTENUATION(atten, i, worldPos);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               //布林方")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                fixed3 color = UNITY_LIGHTMODEL_AMBIENT.rgb * albedo + lambertColor * atten;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                return fixed4(color.rgb, 1);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'    Fallback "Diffuse"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2570]||(l[2570]=i("hr",null,null,-1)),l[2571]||(l[2571]=i("h3",{id:"二、标准高光反射shader",tabindex:"-1"},[s("二、标准高光反射Shader "),i("a",{class:"header-anchor",href:"#二、标准高光反射shader","aria-label":'Permalink to "二、标准高光反射Shader"'},"​")],-1)),l[2572]||(l[2572]=i("ol",null,[i("li",null,[i("p",null,[s("加入渲染标签"),i("code",null,'Tags { "RenderType"="Opaque" "Queue"="Geometry"}'),s(" 渲染类型设置为不透明的、渲染队列设置为几何队列（不透明的几何体通常使用该队列）")])]),i("li",null,[i("p",null,"加入阴影、衰减相关代码")]),i("li",null,[i("p",null,"加入附加渲染通道")]),i("li",null,[i("p",null,[s("加入"),i("code",null,'FallBack "Specular"')])])],-1)),l[2573]||(l[2573]=i("div",{class:"language-tex"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"tex"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'Shader "Unlit/BumpedSpecular"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        _MainColor("MainColor", Color) = (1,1,1,1)')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        _MainTex("MainTex", 2D) = "white" {}')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        _BumpMap("BumpMap", 2D) = "bump" {}')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        _BumpScale("BumpScale", Range(0,1)) = 1')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        _SpecularColor("SpecularColor", Color) = (1,1,1,1)')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        _SpecularNum("SpecularNum", Range(0,20)) = 18')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        Tags{ "RenderType"="Opaque" "Queue"="Geometry" }')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            Tags { "LightMode"="ForwardBase" }')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma multi_compile_fwdbase")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "Lighting.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "AutoLight.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float4 _MainColor;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            sampler2D _MainTex;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float4 _MainTex_ST;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            sampler2D _BumpMap;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float4 _BumpMap_ST;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float _BumpScale;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float4 _SpecularColor;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            fixed _SpecularNum;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 pos:SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 uv:TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 TtoW0:TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 TtoW1:TEXCOORD2;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 TtoW2:TEXCOORD3;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                SHADOW_COORDS(4)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            v2f vert(appdata_full v)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2f data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.pos = UnityObjectToClipPos(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.uv.xy = v.texcoord.xy * _MainTex_ST.xy + _MainTex_ST.zw;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.uv.zw = v.texcoord.xy * _BumpMap_ST.xy + _BumpMap_ST.zw;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 worldPos = mul(unity_ObjectToWorld, v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 worldNormal = UnityObjectToWorldNormal(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 worldTangent = UnityObjectToWorldDir(v.tangent);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 worldBinormal = cross(normalize(worldTangent), normalize(worldNormal)) * v.tangent.w;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.TtoW0 = float4(worldTangent.x, worldBinormal.x, worldNormal.x, worldPos.x);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.TtoW1 = float4(worldTangent.y, worldBinormal.y, worldNormal.y, worldPos.y);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.TtoW2 = float4(worldTangent.z, worldBinormal.z, worldNormal.z, worldPos.z);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                TRANSFER_SHADOW(data);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                return data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            fixed4 frag(v2f i) : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                fixed3 lightDir = normalize(_WorldSpaceLightPos0.xyz);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 worldPos = float3(i.TtoW0.w, i.TtoW1.w, i.TtoW2.w);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                fixed3 viewDir = normalize(UnityWorldSpaceViewDir(worldPos));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 packedNormal = tex2D(_BumpMap, i.uv.zw);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 tangentNormal = UnpackNormal(packedNormal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                tangentNormal.xy *= _BumpScale;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                tangentNormal.z = sqrt(1.0 - saturate(dot(tangentNormal.xy, tangentNormal.xy)));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 worldNormal = float3(dot(i.TtoW0.xyz, tangentNormal), dot(i.TtoW1.xyz, tangentNormal), dot(i.TtoW2.xyz, tangentNormal));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                fixed3 albedo = tex2D(_MainTex, i.uv.xy) * _MainColor.rgb;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                fixed3 lambertColor = _LightColor0.rgb * albedo.rgb * max(0, dot(worldNormal, normalize(lightDir)));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 halfA = normalize(normalize(viewDir) + normalize(lightDir));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                fixed3 specularColor = _LightColor0.rgb * _SpecularColor.rgb * pow(max(0, dot(worldNormal, halfA)), _SpecularNum);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                UNITY_LIGHT_ATTENUATION(atten, i, worldPos);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                fixed3 color = UNITY_LIGHTMODEL_AMBIENT.rgb * albedo + (lambertColor + specularColor) * atten;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                return fixed4(color.rgb, 1);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            Tags { "LightMode"="ForwardAdd" }')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Blend One One")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma multi_compile_fwdadd")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "Lighting.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "AutoLight.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float4 _MainColor;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            sampler2D _MainTex;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float4 _MainTex_ST;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            sampler2D _BumpMap;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float4 _BumpMap_ST;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float _BumpScale;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float4 _SpecularColor;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            fixed _SpecularNum;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 pos:SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 uv:TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 TtoW0:TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 TtoW1:TEXCOORD2;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 TtoW2:TEXCOORD3;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                SHADOW_COORDS(4)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            v2f vert(appdata_full v)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2f data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.pos = UnityObjectToClipPos(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.uv.xy = v.texcoord.xy * _MainTex_ST.xy + _MainTex_ST.zw;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.uv.zw = v.texcoord.xy * _BumpMap_ST.xy + _BumpMap_ST.zw;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 worldPos = mul(unity_ObjectToWorld, v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 worldNormal = UnityObjectToWorldNormal(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 worldTangent = UnityObjectToWorldDir(v.tangent);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 worldBinormal = cross(normalize(worldTangent), normalize(worldNormal)) * v.tangent.w;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.TtoW0 = float4(worldTangent.x, worldBinormal.x, worldNormal.x, worldPos.x);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.TtoW1 = float4(worldTangent.y, worldBinormal.y, worldNormal.y, worldPos.y);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.TtoW2 = float4(worldTangent.z, worldBinormal.z, worldNormal.z, worldPos.z);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                TRANSFER_SHADOW(data);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                return data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            fixed4 frag(v2f i) : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                fixed3 lightDir = normalize(_WorldSpaceLightPos0.xyz);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 worldPos = float3(i.TtoW0.w, i.TtoW1.w, i.TtoW2.w);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                fixed3 viewDir = normalize(UnityWorldSpaceViewDir(worldPos));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 packedNormal = tex2D(_BumpMap, i.uv.zw);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 tangentNormal = UnpackNormal(packedNormal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                tangentNormal.xy *= _BumpScale;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                tangentNormal.z = sqrt(1.0 - saturate(dot(tangentNormal.xy, tangentNormal.xy)));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 worldNormal = float3(dot(i.TtoW0.xyz, tangentNormal), dot(i.TtoW1.xyz, tangentNormal), dot(i.TtoW2.xyz, tangentNormal));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                fixed3 albedo = tex2D(_MainTex, i.uv.xy) * _MainColor.rgb;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                fixed3 lambertColor = _LightColor0.rgb * albedo.rgb * max(0, dot(worldNormal, normalize(lightDir)));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 halfA = normalize(normalize(viewDir) + normalize(lightDir));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                fixed3 specularColor = _LightColor0.rgb * _SpecularColor.rgb * pow(max(0, dot(worldNormal, halfA)), _SpecularNum);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                UNITY_LIGHT_ATTENUATION(atten, i, worldPos);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                fixed3 color = UNITY_LIGHTMODEL_AMBIENT.rgb * albedo + (lambertColor + specularColor) * atten;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                return fixed4(color.rgb, 1);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'    Fallback "Specular"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2574]||(l[2574]=i("hr",null,null,-1)),l[2575]||(l[2575]=i("h2",{id:"高级纹理",tabindex:"-1"},[s("高级纹理 "),i("a",{class:"header-anchor",href:"#高级纹理","aria-label":'Permalink to "高级纹理"'},"​")],-1)),l[2576]||(l[2576]=i("h3",{id:"一、立方体纹理",tabindex:"-1"},[s("一、立方体纹理 "),i("a",{class:"header-anchor",href:"#一、立方体纹理","aria-label":'Permalink to "一、立方体纹理"'},"​")],-1)),l[2577]||(l[2577]=i("blockquote",null,[i("p",null,"立方体纹理是什么")],-1)),l[2578]||(l[2578]=i("p",null,"立方体纹理（CubeMap）是一种特殊的纹理类型",-1)),i("p",null,[l[585]||(l[585]=s("和之前我们讲过的",-1)),a(n,{color:"red"},{default:k(()=>[...l[584]||(l[584]=[i("strong",null,"单张纹理、法线纹理、渐变纹理、高光遮罩纹理",-1)])]),_:1}),l[586]||(l[586]=i("strong",null,"不同",-1)),l[587]||(l[587]=s("，",-1))]),l[2579]||(l[2579]=i("p",null,"立方体纹理包含6个独立的二维纹理，分别对应一个立方体的六个面",-1)),l[2580]||(l[2580]=i("p",null,"分别为：",-1)),l[2581]||(l[2581]=i("p",null,[i("strong",null,"正X面（右）：+X")],-1)),l[2582]||(l[2582]=i("p",null,[i("strong",null,"负X面（左）：-X")],-1)),l[2583]||(l[2583]=i("p",null,[i("strong",null,"正Y面（上）：+Y")],-1)),l[2584]||(l[2584]=i("p",null,[i("strong",null,"负Y面（下）：-Y")],-1)),l[2585]||(l[2585]=i("p",null,[i("strong",null,"正Z面（前）：+Z")],-1)),l[2586]||(l[2586]=i("p",null,[i("strong",null,"负Z面（后）：-Z")],-1)),l[2587]||(l[2587]=i("blockquote",null,[i("p",null,"立方体纹理的用途")],-1)),l[2588]||(l[2588]=i("p",null,"立方体纹理（CubeMap）在图形编程中常见的用途有：",-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[588]||(l[588]=[s("环境映射：",-1)])]),_:1}),l[589]||(l[589]=i("p",null,"用于模拟反射环境的效果，用立方体纹理存储周围环境的图像 当应用到反射表面时，可以让物体看起来像是在反射其周围的环境。",-1))]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[590]||(l[590]=[s("天空盒",-1)])]),_:1}),l[591]||(l[591]=i("p",null,"用于渲染天空盒，将立方体纹理的六个面映射到一个立方体内表面 从而模拟天空、云朵、远处的山脉等环境",-1))]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[592]||(l[592]=[s("全景图",-1)])]),_:1}),l[593]||(l[593]=i("p",null,"用于展示全景图像、视频，通过立方体纹理来存储全景照片、视频的六个部分 等等",-1))])]),l[2589]||(l[2589]=i("blockquote",null,[i("p",null,"立方体纹理如何采样")],-1)),l[2590]||(l[2590]=i("p",null,"作为有6张2D纹理的立方体纹理，它的采访方式和我们之前学习的内容不同。",-1)),i("p",null,[i("strong",null,[l[595]||(l[595]=s("对立方体纹理进行采样，我们需要提供一个",-1)),a(n,{color:"red"},{default:k(()=>[...l[594]||(l[594]=[s("三维的纹理坐标",-1)])]),_:1})]),l[596]||(l[596]=s("，",-1))]),i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[597]||(l[597]=[s("该坐标表示",-1)])]),_:1}),l[599]||(l[599]=s("了",-1)),a(n,{color:"red"},{default:k(()=>[...l[598]||(l[598]=[s("我们在世界空间下的一个三维方向",-1)])]),_:1}),l[600]||(l[600]=s("。",-1))])]),l[2591]||(l[2591]=i("p",null,[i("strong",null,"这个方向向量从立方体的中心出发,")],-1)),l[2592]||(l[2592]=i("p",null,[i("strong",null,"当它向外延伸时就会和6个纹理之一相交,")],-1)),l[2593]||(l[2593]=i("p",null,[i("strong",null,"采样结果就是由该交点计算而来！")],-1)),l[2594]||(l[2594]=i("blockquote",null,[i("p",null,"立方体纹理的优缺点")],-1)),a(n,{color:"green"},{default:k(()=>[...l[601]||(l[601]=[s("优点：",-1)])]),_:1}),a(n,{color:"green"},{default:k(()=>[...l[602]||(l[602]=[s("1.多用途：可以有效的模拟环境映射和全景效果，如反射、折射、天空盒、环境光照等",-1)])]),_:1}),a(n,{color:"green"},{default:k(()=>[...l[603]||(l[603]=[s("2.无缝连接：立方体纹理设计为无缝连接着六个面，减少了可见的接缝和瑕疵",-1)])]),_:1}),a(n,{color:"green"},{default:k(()=>[...l[604]||(l[604]=[s("3.兼容性较好：大多数现代图形硬件对立方体纹理都有专门的支持",-1)])]),_:1}),a(n,{color:"green"},{default:k(()=>[...l[605]||(l[605]=[s("等等",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[606]||(l[606]=[s("缺点：",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[607]||(l[607]=[s("1.内存开销：立方体纹理由6个2D纹理组成，内存占用较高，特别是在高分辨率情况下",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[608]||(l[608]=[s("2.采样复杂性：采样方式比起传统的2D纹理更加耗性能，计算更多",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[609]||(l[609]=[s("3.透视变形：6个平面来近似球形环境，有时会出现透视变形的问题",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[610]||(l[610]=[s("等等",-1)])]),_:1}),l[2595]||(l[2595]=i("hr",null,null,-1)),l[2596]||(l[2596]=i("h3",{id:"二、天空盒",tabindex:"-1"},[s("二、天空盒 "),i("a",{class:"header-anchor",href:"#二、天空盒","aria-label":'Permalink to "二、天空盒"'},"​")],-1)),l[2597]||(l[2597]=i("blockquote",null,[i("p",null,"天空盒是什么")],-1)),l[2598]||(l[2598]=i("p",null,"天空盒（Skybox）是计算机图形学和三维游戏开发中常用于模拟背景的一种方式,它通常由一个立方体构成 字面上理解就是一个用于模拟天空的盒子（但是它不仅可以模拟天空，模拟室内等环境也是可以的） 在游戏场景中使用天空盒时，整个场景就被包围在了一个立方体中。 这个立方体的每个面使用的技术就是立方体纹理技术。",-1)),l[2599]||(l[2599]=i("blockquote",null,[i("p",null,"好处")],-1)),l[2600]||(l[2600]=i("p",null,"它给我们带来的主要好处是：",-1)),l[2601]||(l[2601]=i("ol",null,[i("li",null,[i("strong",null,"可以创建逼真的背景"),s(" 天空盒使场景看起来更加逼真，因为它可以展示复杂和详细的背景")]),i("li",null,[i("strong",null,"可以提高性能"),s(" 可以减少渲染远景所需的消耗，只需要要纹理贴图就可以模拟远景的效果，而无需实际的在远处创建这些物体")]),i("li",null,[i("strong",null,"全景视图"),s(" 天空盒的六个面（前、后、左、右、上、下）共同构成一个完整的环境，无论玩家向哪个方向看，都能看到连贯的背景图像")]),i("li",null,[i("strong",null,"易于实现"),s(" 对于开发者来说，制作和应用天空盒相对简单，只需要准备好六个方向的纹理图像，并将它们应用到立方体纹理中即可 等等")])],-1)),l[2602]||(l[2602]=i("hr",null,null,-1)),l[2603]||(l[2603]=i("h3",{id:"三、反射原理",tabindex:"-1"},[s("三、反射原理 "),i("a",{class:"header-anchor",href:"#三、反射原理","aria-label":'Permalink to "三、反射原理"'},"​")],-1)),l[2604]||(l[2604]=i("blockquote",null,[i("p",null,"反射效果是什么")],-1)),a(n,{color:"red"},{default:k(()=>[...l[611]||(l[611]=[s("反射效果指光的反射，是一种光学现象。",-1)])]),_:1}),l[2605]||(l[2605]=i("p",null,"指光在两种物质分界面上改变传播方向又返回原来物质中的现象，就叫做光的反射。",-1)),l[2606]||(l[2606]=i("p",null,"比如：光遇到水面、玻璃、金属等许多物体的表面都会发生反射。",-1)),a(h,{face:"shader/高级纹理:反射原理"}),l[2607]||(l[2607]=i("p",null,"在Unity Shader中，反射效果模拟了物体表面反射环境光的特性",-1)),a(n,{color:"red"},{default:k(()=>[...l[612]||(l[612]=[s("使得物体看起来像镜子或金属表面，能够反射周围环境的图像。",-1)])]),_:1}),l[2608]||(l[2608]=i("blockquote",null,[i("p",null,"反射效果的原理")],-1)),a(n,{color:"red"},{default:k(()=>[...l[613]||(l[613]=[s("反射效果的原理就是利用立方体纹理（CubeMap）进行环境映射",-1)])]),_:1}),i("p",null,[l[616]||(l[616]=s("我们利用",-1)),a(n,{color:"red"},{default:k(()=>[...l[614]||(l[614]=[s("摄像机看向物体表面顶点的方向向量作为入射光，结合顶点法线",-1)])]),_:1}),l[617]||(l[617]=s("向量可以",-1)),a(n,{color:"red"},{default:k(()=>[...l[615]||(l[615]=[s("算出反射向量",-1)])]),_:1})]),i("p",null,[l[619]||(l[619]=s("然后",-1)),a(n,{color:"red"},{default:k(()=>[...l[618]||(l[618]=[s("利用反射方向向量在立方体纹理中进行采样",-1)])]),_:1}),l[620]||(l[620]=s("，得到最终反射的颜色。",-1))]),a(h,{face:"shader/高级纹理:反射效果的原理"}),l[2609]||(l[2609]=i("p",null,[i("strong",null,"光路可逆原则：")],-1)),a(n,{color:"red"},{default:k(()=>[...l[621]||(l[621]=[s("如果光在某一路径上从点A传播到点B,那么光在同一路径上可以从点B传播回点A.换句话说,光的传播路径在没有任何变化的情况下可以被反向利用",-1)])]),_:1}),l[2610]||(l[2610]=i("hr",null,null,-1)),l[2611]||(l[2611]=i("h4",{id:"_1-反射原理的基础实现",tabindex:"-1"},[s("1. 反射原理的基础实现 "),i("a",{class:"header-anchor",href:"#_1-反射原理的基础实现","aria-label":'Permalink to "1. 反射原理的基础实现"'},"​")],-1)),l[2612]||(l[2612]=i("p",null,[i("strong",null,"立方体纹理采样函数"),s(" CG中提供了内置函数 texCUBE 用于进行立方体纹理采样")],-1)),a(n,{color:"red"},{default:k(()=>[...l[622]||(l[622]=[s("texCUBE(立方体纹理,反射方向向量) 便可以得到在立方体纹理中的采样结果",-1)])]),_:1}),l[2613]||(l[2613]=i("blockquote",null,[i("p",null,"步骤")],-1)),l[2614]||(l[2614]=i("ol",null,[i("li",null,[i("p",null,[i("strong",null,"属性声明"),s(" 我们将声明2个关键属性 1-1:立方体纹理 1-2:反射率（0~1）之间")])]),i("li",null,[i("p",null,[i("strong",null,"顶点着色器"),s(" 关键步骤： 2-1:顶点坐标转裁剪坐标 2-2:顶点法线转世界坐标 2-3:顶点坐标转世界坐标 2-4:世界空间下 视角方向计算 2-5:视角反向逆向得到反射方向")])]),i("li",null,[i("p",null,[i("strong",null,"片元着色器"),s(" 关键步骤： 3-1:立方体纹理采样(利用texCUBE函数) 3-2:结合反射程度返回最终颜色")])])],-1)),l[2615]||(l[2615]=i("h5",{id:"实现-4",tabindex:"-1"},[s("实现 "),i("a",{class:"header-anchor",href:"#实现-4","aria-label":'Permalink to "实现"'},"​")],-1)),l[2616]||(l[2616]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson75"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"		//立方体纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"		_Cube"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Cubemap"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Cube) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"		//反射率")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"		_Reflectivity"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Reflectivity"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		Tags")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'			"RenderType"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Opaque"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'      "Queue"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Geometry"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		LOD "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"100")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			Tags")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'				"LightMode"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "ForwardBase"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			#pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			#pragma fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"			// make fog work")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			#pragma multi_compile_fog")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'			#include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'			#include "Lighting.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"			samplerCUBE"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Cube"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"			float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Reflectivity"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"				float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":SV_POSITION; "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//裁剪空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"				//世界空间下的反射向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"				//我们将把反射向量的计算放在顶点着色器函数中 节约性能 表现效果也不会太差 肉眼几乎分辨不出来")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"				float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"worldRefl"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			};")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"			v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"				v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," o"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"				//顶点坐标转换")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"				o.pos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"				//计算反射光向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"				//1.计算世界空间下法线向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"				float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldNormal"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"				//2.世界空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"				fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldPos"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(unity_ObjectToWorld, v.vertex).xyz;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"				//3.计算视角方向 内部是用摄像机位置 - 世界坐标位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"				fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldViewDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityWorldSpaceViewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(worldPos);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"				//4.计算反射向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"				o.worldRefl "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," reflect"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"worldViewDir, worldNormal);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"				return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"			fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"				//对立方体纹理利用对应的反射向量进行采样")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"				fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," cubemapColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," texCUBE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_Cube, i.worldRefl);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"				//用采样颜色 * 反射率 决定最终的颜色效果")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"				return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," cubemapColor "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Reflectivity;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2617]||(l[2617]=i("hr",null,null,-1)),l[2618]||(l[2618]=i("h4",{id:"_2-反射结合漫反射",tabindex:"-1"},[s("2. 反射结合漫反射 "),i("a",{class:"header-anchor",href:"#_2-反射结合漫反射","aria-label":'Permalink to "2. 反射结合漫反射"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[623]||(l[623]=[s("插值函数",-1)])]),_:1}),l[2619]||(l[2619]=i("p",null,[s("CG中提供了内置函数 "),i("strong",null,"lerp"),s(" 用于进行插值计算")],-1)),a(n,{color:"red"},{default:k(()=>[...l[624]||(l[624]=[s("lerp(a, b, t)",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[625]||(l[625]=[s("a:插值起点值",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[626]||(l[626]=[s("b:插值终点值",-1)])]),_:1}),l[2620]||(l[2620]=i("p",null,[i("strong",null,"t:插值因子，0~1之间")],-1)),a(n,{color:"red"},{default:k(()=>[...l[627]||(l[627]=[s("内部计算公式：`a + t * (b - a)`",-1)])]),_:1}),l[2621]||(l[2621]=i("p",null,[i("strong",null,"当 t = 0 时，插值结果为a"),i("strong",null,"当 t = 1 时，插值结果为b"),i("strong",null,"当 t 在 0~1 之间变化时，返回一个a到b之间的一个线性插值结果"),s(" 我们将利用该函数来决定反射效果的程度 用它在漫反射颜色和反射颜色之间进行插值控制反射程度")],-1)),l[2622]||(l[2622]=i("blockquote",null,[i("p",null,"步骤")],-1)),l[2623]||(l[2623]=i("ol",null,[i("li",null,[i("p",null,[i("strong",null,"属性声明"),s(" 我们将加入2个关键属性 1-1:漫反射颜色 1-2:反射颜色")])]),i("li",null,[i("p",null,[i("strong",null,"v2f结构体"),s(" 因为要在片元着色器中处理光和阴影 需要加入 2-1：世界空间法线: 2-2：世界空间顶点位置 2-3: 阴影宏")])]),i("li",null,[i("p",null,[i("strong",null,"顶点着色器"),s(" 关键步骤： 3-1:顶点坐标转裁剪坐标 3-2:顶点法线转世界坐标 3-3:顶点坐标转世界坐标 3-4:世界空间下 视角方向计算 3-5:视角反向逆向得到反射方向 3-6:阴影相关计算")])]),i("li",null,[i("p",null,[i("strong",null,"片元着色器"),s(" 关键步骤： 4-1:得到光的方向 4-2:兰伯特漫反射颜色计算 4-3:立方体纹理采样(利用texCUBE函数) 4-4:衰减计算 4-5:最终颜色计算(利用lerp函数)")])]),i("li",null,[i("p",null,[i("code",null,'FallBack "Reflective/VertexLit"')])])],-1)),l[2624]||(l[2624]=i("hr",null,null,-1)),l[2625]||(l[2625]=i("h5",{id:"实现-5",tabindex:"-1"},[s("实现 "),i("a",{class:"header-anchor",href:"#实现-5","aria-label":'Permalink to "实现"'},"​")],-1)),l[2626]||(l[2626]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson76"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"		 //漫反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Color"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Color"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _ReflectColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ReflectColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //立方体纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Cube"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Cubemap"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Cube) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //反射率")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Reflectivity"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Reflectivity"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		Tags")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'			"RenderType"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Opaque"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Queue"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Geometry"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		LOD "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"100")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			Tags")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'				"LightMode"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "ForwardBase"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			#pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			#pragma fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"			// make fog work")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			#pragma multi_compile_fwdbase")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'			#include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'			#include "Lighting.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'			#include "AutoLight.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"			 fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Color"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _ReflectColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            samplerCUBE"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Cube"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Reflectivity"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"				float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":SV_POSITION;"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//裁剪空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                fixed3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"worldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":NORMAL;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的顶点位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"worldPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的反射向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //我们将把反射向量的计算放在顶点着色器函数中 节约性能 表现效果也不会太差 肉眼几乎分辨不出来")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"worldRefl"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //阴影相关")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                SHADOW_COORDS"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			};")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"			v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"				v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," o"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //顶点坐标转换")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.pos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算反射光向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //1.计算世界空间下法线向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.worldNormal "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //2.世界空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.worldPos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(unity_ObjectToWorld, v.vertex).xyz;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //3.计算视角方向 内部是用摄像机位置 - 世界坐标位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldViewDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityWorldSpaceViewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(o.worldPos);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //4.计算反射向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.worldRefl "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," reflect"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"worldViewDir, o.worldNormal);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //阴影相关处理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                TRANSFER_SHADOW"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(o);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"				return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"			fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"				//漫反射光照相关计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //得到光的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldLightDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"UnityWorldSpaceLightDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.worldPos));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //漫反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," diffuse"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Color.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.worldNormal), worldLightDir));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //对立方体纹理利用对应的反射向量进行采样")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," cubemapColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," texCUBE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_Cube, i.worldRefl).rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _ReflectColor.rgb;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //得到光照衰减以及阴影相关的衰减值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                UNITY_LIGHT_ATTENUATION"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(atten, i, i.worldPos);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //我们利用lerp 在漫反射颜色和反射颜色之间 进行插值 0和1就是极限状态 0 没有反射效果 1只有反射效果 0~1之间就是两者叠加")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," color"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," UNITY_LIGHTMODEL_AMBIENT.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lerp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(diffuse, cubemapColor, _Reflectivity) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," atten;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //用采样颜色 * 反射率 决定最终的颜色效果")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(color, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1.0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	Fallback "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Reflective/VertexLit"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2627]||(l[2627]=i("hr",null,null,-1)),l[2628]||(l[2628]=i("h3",{id:"四、折射原理",tabindex:"-1"},[s("四、折射原理 "),i("a",{class:"header-anchor",href:"#四、折射原理","aria-label":'Permalink to "四、折射原理"'},"​")],-1)),l[2629]||(l[2629]=i("blockquote",null,[i("p",null,"折射效果是什么")],-1)),a(n,{color:"red"},{default:k(()=>[...l[628]||(l[628]=[s("折射效果指光的折射，是一种光学现象。",-1)])]),_:1}),l[2630]||(l[2630]=i("p",null,[i("strong",null,"指光从一种透明介质斜射入另一种透明介质时，传播方向一般会发生变化，这种现象叫光的折射。"),s(" 光的折射与光的反射一样 都是发生在两种介质的交界处 进入到另一种介质中 ，只是反射光返回原介质中 ，由于光在两种不同的物质里传播速度不同 ，而 折射光则 ，故在两种介质的交界处传播方 向发生变化，这就是光的折射。")],-1)),a(h,{face:"shader/高级纹理:折射"}),l[2631]||(l[2631]=i("blockquote",null,[i("p",null,"折射效果是什么")],-1)),l[2632]||(l[2632]=i("p",null,"在Unity Shader中，折射效果模拟了光线通过透明或半透明材质时的弯曲行为。",-1)),a(n,{color:"red"},{default:k(()=>[...l[629]||(l[629]=[s("一般用来模拟水面、透明玻璃球、眼镜、钻石、水晶球、空气扰动等等效果 它一般会配合其他表现效果一起使用",-1)])]),_:1}),l[2633]||(l[2633]=i("blockquote",null,[i("p",null,"原理")],-1)),l[2634]||(l[2634]=i("p",null,[i("strong",null,"斯涅耳定律（Snell’s Law）：")],-1)),a(n,{color:"red"},{default:k(()=>[...l[630]||(l[630]=[s("当光从介质1沿着表面法线夹角为θ1的方向斜射入介质2时",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[631]||(l[631]=[s("我们可以利用数学公式n1sinθ1=n2sinθ2 计算出折射光线和法线的夹角θ2",-1)])]),_:1}),l[2635]||(l[2635]=i("p",null,[i("strong",null,"其中n1和n2为两种介质的折射率")],-1)),a(h,{face:"shader/高级纹理:折射2"}),l[2636]||(l[2636]=i("blockquote",null,[i("p",null,"折射效果注意点")],-1)),i("p",null,[l[634]||(l[634]=s("我们在Unity中处理",-1)),a(n,{color:"red"},{default:k(()=>[...l[632]||(l[632]=[s("折射效果",-1)])]),_:1}),l[635]||(l[635]=s("的做法是",-1)),a(n,{color:"red"},{default:k(()=>[...l[633]||(l[633]=[s("直接用得到的折射方向对立方体纹理进行采样 ",-1)])]),_:1})]),i("p",null,[l[637]||(l[637]=s("这样做其实不符合物理规律，因为对于一个透明物体来说，更准确的模拟方式应该是进行两侧折 射，一次是光线进入内部，一次是光线从物体内部射出。但是，在实时渲染中模拟第二次折射方 向较为复杂，而我们",-1)),a(n,{color:"red"},{default:k(()=>[...l[636]||(l[636]=[s("仅模拟一次折射得到的效果在视觉上看起来也是可以接受的！",-1)])]),_:1})]),a(n,{color:"red"},{default:k(()=>[...l[638]||(l[638]=[s("因此，在实时渲染中，我们通常仅模拟第一次折射来得到最终的结果！",-1)])]),_:1}),l[2637]||(l[2637]=i("hr",null,null,-1)),l[2638]||(l[2638]=i("h4",{id:"_1-折射的基础实现",tabindex:"-1"},[s("1. 折射的基础实现 "),i("a",{class:"header-anchor",href:"#_1-折射的基础实现","aria-label":'Permalink to "1. 折射的基础实现"'},"​")],-1)),l[2639]||(l[2639]=i("p",null,[i("strong",null,"折射向量计算函数"),i("strong",null,"CG中提供了内置函数 refract 用于进行折射向量的计算")],-1)),a(n,{color:"red"},{default:k(()=>[...l[639]||(l[639]=[s("refract(入射方向单位向量, 顶点法线单位向量, 入射介质折射率/射入介质折射率)",-1)])]),_:1}),l[2640]||(l[2640]=i("p",null,"便可以得到在目标介质中的折射向量",-1)),l[2641]||(l[2641]=i("p",null,"该函数内部就是利用了斯涅耳定律进行的计算 我们无需再自己写逻辑计算了",-1)),l[2642]||(l[2642]=i("blockquote",null,[i("p",null,"步骤")],-1)),l[2643]||(l[2643]=i("ol",null,[i("li",null,[i("p",null,[i("strong",null,"属性声明"),s(" 我们将声明4个关键属性 1-1:介质A折射率 1-2:介质B折射率 1-3:立方体纹理贴图 1-4:折射程度")])]),i("li",null,[i("p",null,[i("strong",null,"编译指令、内置文件、属性映射、结构体相关")])]),i("li",null,[i("p",null,[i("strong",null,"顶点着色器"),s(" 关键步骤： 3-1:顶点坐标转裁剪坐标 3-2:顶点法线转世界坐标 3-3:顶点坐标转世界坐标 3-4:世界空间下 视角方向计算 3-5:利用折射函数计算折射向量")])]),i("li",null,[i("p",null,[i("strong",null,"片元着色器"),s(" 关键步骤： 4-1:立方体纹理采样(利用texCUBE函数) 4-2:结合折射程度返回最终颜色")])])],-1)),l[2644]||(l[2644]=i("h5",{id:"实现-6",tabindex:"-1"},[s("实现 "),i("a",{class:"header-anchor",href:"#实现-6","aria-label":'Permalink to "实现"'},"​")],-1)),l[2645]||(l[2645]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson77"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"		_RefractiveIndexA"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"RefractiveIndexA"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"		_RefractiveIndexB"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"RefractiveIndexB"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1.3")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"		_Cube"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Cubemap"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",Cube) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"		_RefracAmount"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"RefracAmount"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		Tags")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'			"RenderType"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Opaque"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Queue"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Geometry"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		LOD "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"100")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			Tags")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'				"LightMode"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "ForwardBase"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			#pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			#pragma fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"			// make fog work")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			#pragma multi_compile_fwdbase")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'			#include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'			#include "Lighting.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'			#include "AutoLight.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"			samplerCUBE"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Cube"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"			fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _RefractiveIndexA;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"			fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _RefractiveIndexB;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"			fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _RefracAmount;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"				float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":SV_POSITION; "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//裁剪空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"				float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"worldRefr"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			};")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"			v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"				v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," o"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"				//顶点坐标转换")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"				o.pos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"				fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldNormal"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"				fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldPos"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(unity_ObjectToWorld, v.vertex).xyz;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"				fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldViewDic"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityWorldSpaceViewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(worldPos);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"				o.worldRefr "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," refract"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(worldViewDic), "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(worldNormal),")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"				                                              _RefractiveIndexA "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _RefractiveIndexB);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"				return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"			fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"				fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," cubemapColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," texCUBE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_Cube, i.worldRefr);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"				return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," cubemapColor "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _RefracAmount;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	Fallback "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Reflective/VertexLit"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2646]||(l[2646]=i("hr",null,null,-1)),l[2647]||(l[2647]=i("h4",{id:"_2-带漫反射和阴影的折射效果",tabindex:"-1"},[s("2. 带漫反射和阴影的折射效果 "),i("a",{class:"header-anchor",href:"#_2-带漫反射和阴影的折射效果","aria-label":'Permalink to "2. 带漫反射和阴影的折射效果"'},"​")],-1)),l[2648]||(l[2648]=i("ol",null,[i("li",null,[i("p",null,"将折射率A和折射率B 合并为一个 折射率比值变量 以后在外部算好了传入，避免内部计算浪费性能")]),i("li",null,[i("p",null,[i("strong",null,"折射效果结合漫反射和阴影的做法"),s(" 和之前反射几乎一模一样 我们可以直接复制之前的代码 避免书写重复内容")]),i("p",null,"2-1:属性相关代码复制 漫反射颜色和折射颜色 2-2:渲染路径、编译指令、内置文件复制 属性映射复制修改 2-3:结构体相关内容复制 2-4:顶点着色器相关内容修改 2-5:片元着色器相关内容复制修改")])],-1)),l[2649]||(l[2649]=i("h5",{id:"实现-7",tabindex:"-1"},[s("实现 "),i("a",{class:"header-anchor",href:"#实现-7","aria-label":'Permalink to "实现"'},"​")],-1)),l[2650]||(l[2650]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson78_Refraction"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //漫反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Color"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Color"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //折射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _RefractColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"RefractColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //折射率比值 介质A折射率/介质B折射率")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _RefractRatio"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"RefractRatio"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0.1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //立方体纹理贴图")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Cube"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Cubemap"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Cube) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //折射程度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _RefracAmount"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"RefracAmount"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Tags { "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"RenderType"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Opaque"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Queue"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Geometry"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Tags{"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"LightMode"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ForwardBase"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma multi_compile_fwdbase")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "Lighting.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "AutoLight.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Color"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _RefractColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            samplerCUBE"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Cube"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _RefractRatio;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _RefracAmount;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //裁剪空间下顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                 //世界空间下法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                fixed3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"worldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":NORMAL;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的顶点位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"worldPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //折射向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"worldRefr"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //阴影相关")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                SHADOW_COORDS"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," o"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //顶点坐标转换")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.pos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //法线转世界")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.worldNormal "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //顶点转世界")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.worldPos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(unity_ObjectToWorld, v.vertex).xyz;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //视角方向获取 摄像机 - 顶点位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldViewDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityWorldSpaceViewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(o.worldPos);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算折射向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //第三个参数一定是 介质A/介质B的结果 我们可以声明一个变量在外部算好传进来 这里我们用两个变量只是为了讲解知识")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.worldRefr "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," refract"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(worldViewDir), "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(o.worldNormal), _RefractRatio);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //阴影相关处理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                TRANSFER_SHADOW"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(o);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"):SV_TARGET")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //漫反射光照相关计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //得到光的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldLightDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"UnityWorldSpaceLightDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.worldPos));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //漫反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," diffuse"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Color.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.worldNormal), worldLightDir));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //立方体纹理采样")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," cubemapColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," texCUBE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_Cube, i.worldRefr).rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _RefractColor.rgb;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //得到光照衰减以及阴影相关的衰减值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                UNITY_LIGHT_ATTENUATION"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(atten, i, i.worldPos);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //我们利用lerp 在漫反射颜色和反射颜色之间 进行插值 0和1就是极限状态 0 没有折射效果 1只有折射效果 0~1之间就是两者叠加")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," color"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," UNITY_LIGHTMODEL_AMBIENT.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lerp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(diffuse, cubemapColor, _RefracAmount) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," atten;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //结合折射程度进行计算返回")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(color, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1.0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    FallBack "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Reflective/VertexLit"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2651]||(l[2651]=i("hr",null,null,-1)),l[2652]||(l[2652]=i("h3",{id:"五、菲涅尔反射原理",tabindex:"-1"},[s("五、菲涅尔反射原理 "),i("a",{class:"header-anchor",href:"#五、菲涅尔反射原理","aria-label":'Permalink to "五、菲涅尔反射原理"'},"​")],-1)),l[2653]||(l[2653]=i("blockquote",null,[i("p",null,"菲涅耳反射效果是什么")],-1)),a(n,{color:"red"},{default:k(()=>[...l[640]||(l[640]=[s("菲涅耳反射是一种光学现象。",-1)])]),_:1}),l[2654]||(l[2654]=i("p",null,[i("strong",null,"简单的讲，就是视线垂直于观察表面时，反射较弱，（更多的光会透射到进入新介质） 而当视线非垂直观察表面时，夹角越小，反射越明显"),s("。")],-1)),l[2655]||(l[2655]=i("p",null,"真实世界中的例子：",-1)),l[2656]||(l[2656]=i("p",null,"如果你站在湖边，低头看脚下的水，你会发现水是透明的，反射不是特别强烈；如果你看远处的 湖面，你会发现水并不是透明的，但反射非常强烈，这就是“菲涅耳效应”。",-1)),l[2657]||(l[2657]=i("p",null,[i("strong",null,"菲涅耳反射原理是描述光在两种介质的界面上反射和折射的行为。")],-1)),l[2658]||(l[2658]=i("p",null,[i("strong",null,"反射和折射的强度取决于光的入射角和两种介质的折射率差异。")],-1)),a(n,{color:"red"},{default:k(()=>[...l[641]||(l[641]=[s("从物理角度来看，世界上所有物体在光线照射下都会遵循菲涅耳反射原理！",-1)])]),_:1}),l[2659]||(l[2659]=i("p",null,"这意味着光在任何两种介质的界面上都会发生反射和折射，只不过具体反射效果会因为介质的性 质和光的入射角度不同而有所变化。",-1)),l[2660]||(l[2660]=i("p",null,[i("strong",null,"无论是透明的、半透明的还是不透明的物体，只要有光线入射到其表面，菲涅耳反射都会发生。")],-1)),l[2661]||(l[2661]=i("p",null,"在Unity Shader中，菲涅耳反射一般用来",-1)),a(n,{color:"red"},{default:k(()=>[...l[642]||(l[642]=[s("增强真实感，使物体表面在不同角度和光照条件下呈现出更加真实和自然的外观，增强视觉效果。",-1)])]),_:1}),l[2662]||(l[2662]=i("p",null,[i("strong",null,"因为刚才我们提到真实世界中，万物皆遵循菲涅耳反射原理")],-1)),l[2663]||(l[2663]=i("p",null,[i("strong",null,"那么我们在游戏中使用菲涅耳反射比直接使用反射能更加接近真实世界的效果，")],-1)),i("p",null,[i("strong",null,[l[644]||(l[644]=s("在实现一些",-1)),a(n,{color:"red"},{default:k(()=>[...l[643]||(l[643]=[s("金属感、陶瓷感、玻璃感",-1)])]),_:1}),l[645]||(l[645]=s("时效果更好！",-1))])]),a(n,{color:"red"},{default:k(()=>[...l[646]||(l[646]=[s("也就是说菲涅耳反射在Unity Shader当中实现出来的效果基于反射，",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[647]||(l[647]=[s("但是会比反射更加接近真实的效果",-1)])]),_:1}),l[2664]||(l[2664]=i("blockquote",null,[i("p",null,"菲涅耳反射效果的原理")],-1)),a(n,{color:"red"},{default:k(()=>[...l[648]||(l[648]=[s("菲涅耳反射的原理还是利用立方体纹理（CubeMap）进行环境映射",-1)])]),_:1}),a(h,{face:"shader/高级纹理:菲涅耳反射"}),a(n,{color:"red"},{default:k(()=>[...l[649]||(l[649]=[s("我们将使用菲涅耳等式来计算反射率",-1)])]),_:1}),l[2665]||(l[2665]=i("p",null,"但是物理学中的菲涅耳等式是非常复杂的，如果在实时渲染中使用，计算非常复杂。",-1)),l[2666]||(l[2666]=i("p",null,"因此我们通常会使用近似公式来计算，在Unity Shader当中我们会使用",-1)),i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[650]||(l[650]=[s("Schlick 菲涅耳",-1)])]),_:1}),l[651]||(l[651]=s("近似等式来计算反射率",-1))])]),l[2667]||(l[2667]=i("p",null,[i("strong",null,"该等式是由Christophe Schlick（克里斯托夫·施利克）于1994年提出的")],-1)),l[2668]||(l[2668]=i("p",null,[i("strong",null,"它提出的菲涅耳近似等式极大的简化了菲涅耳反射率的计算，非常适用于实时渲染， 同时它还保留了足够的物理真实性！")],-1)),a(n,{color:"red"},{default:k(()=>[...l[652]||(l[652]=[s("Schlick 菲涅耳近似等式",-1)])]),_:1}),a(h,{face:"shader/高级纹理:菲涅耳反射2"}),l[2669]||(l[2669]=i("p",null,[i("strong",null,"其中：")],-1)),l[2670]||(l[2670]=i("p",null,[i("strong",null,"R(θ) 表示入射角为θ时时的反射率")],-1)),l[2671]||(l[2671]=i("p",null,[i("strong",null,"R0 是垂直入射某介质时的反射率 顶点法线 反射光 物体")],-1)),l[2672]||(l[2672]=i("p",null,[i("strong",null,"V 是视角方向单位向量（入射角）")],-1)),l[2673]||(l[2673]=i("p",null,[i("strong",null,"N 是顶点法线单位向量")],-1)),l[2674]||(l[2674]=i("p",null,[s("该公式中"),i("strong",null,"视角方向"),s("和"),i("strong",null,"顶点法线"),s("都是已知的")],-1)),i("p",null,[l[654]||(l[654]=s("我们只需要",-1)),a(n,{color:"red"},{default:k(()=>[...l[653]||(l[653]=[s("查阅对应物体在真实世界中的反射 率",-1)])]),_:1}),l[655]||(l[655]=s("，将该反射率",-1)),l[656]||(l[656]=i("strong",null,"带入公式进行计算",-1))]),l[2675]||(l[2675]=i("p",null,[s("则可以"),i("strong",null,"得到菲涅耳反射率"),s("，让其"),i("strong",null,"参与最终的颜 色计算"),s("即可！")],-1)),a(n,{color:"red"},{default:k(()=>[...l[657]||(l[657]=[s("注意：",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[658]||(l[658]=[s("通常情况下，我们所说的物体的反射率（或反 射系数）通常是指垂直入射光线时的反射率",-1)])]),_:1}),l[2676]||(l[2676]=i("hr",null,null,-1)),l[2677]||(l[2677]=i("h4",{id:"_1-菲涅尔反射基础实现",tabindex:"-1"},[s("1.菲涅尔反射基础实现 "),i("a",{class:"header-anchor",href:"#_1-菲涅尔反射基础实现","aria-label":'Permalink to "1.菲涅尔反射基础实现"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[659]||(l[659]=[s("Schlick 菲涅耳近似等式",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[660]||(l[660]=[s("**R(θ) = R0 + ( 1− R0 )( 1 − V·𝑵)^𝟓** ",-1)])]),_:1}),l[2678]||(l[2678]=i("p",null,[i("strong",null,"R(θ)：对应角度的菲涅耳反射率"),i("strong",null,"R0：介质反射率"),i("strong",null,"V：视角单位向量"),i("strong",null,"N：法线单位向量")],-1)),l[2679]||(l[2679]=i("ol",null,[i("li",null,[i("p",null,[i("strong",null,"属性声明"),s(" 将反射率变量修改为 _FresnelScale 菲涅耳中介质的反射率")])]),i("li",null,[i("p",null,[i("strong",null,"结构体"),s(" 由于使用Schlick菲涅耳近似等式 需要用到世界空间下视角方向、和法线向量 因此在结构体中加入这两个变量")])]),i("li",null,[i("p",null,[i("strong",null,"顶点着色器"),s(" 关键步骤： 结构体中变量赋值")])]),i("li",null,[i("p",null,[i("strong",null,"片元着色器"),s(" 关键步骤： 利用Schlick菲涅耳近似等式计算出菲涅耳反射率 参与最终颜色计算")])])],-1)),l[2680]||(l[2680]=i("h5",{id:"实现-8",tabindex:"-1"},[s("实现 "),i("a",{class:"header-anchor",href:"#实现-8","aria-label":'Permalink to "实现"'},"​")],-1)),l[2681]||(l[2681]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson79_FresnelBase"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //立方体纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Cube"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Cubemap"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Cube) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //菲涅耳反射中 对应介质的反射率")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _FresnelScale"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"FresnelScale"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Tags{"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"RenderType"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Opaque"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Queue"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Geometry"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Tags{"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"LightMode"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ForwardBase"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "Lighting.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            samplerCUBE"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Cube"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _FresnelScale"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":SV_POSITION;"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//裁剪空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"worldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":NORMAL;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下视角的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"worldViewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的反射向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //我们将把反射向量的计算放在顶点着色器函数中 节约性能 表现效果也不会太差 肉眼几乎分辨不出来")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"worldRefl"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," o"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //顶点坐标转换")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.pos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算反射光向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //1.计算世界空间下法线向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.worldNormal "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //2.世界空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldPos"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(unity_ObjectToWorld, v.vertex).xyz;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //3.计算视角方向 内部是用摄像机位置 - 世界坐标位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.worldViewDir "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityWorldSpaceViewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(worldPos);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //4.计算反射向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.worldRefl "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," reflect"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"o.worldViewDir, o.worldNormal);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"):SV_TARGET")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //对立方体纹理利用对应的反射向量进行采样")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," cubemapColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," texCUBE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_Cube, i.worldRefl);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //利用schlick菲涅耳近似等式 计算菲涅耳反射率")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," fresnel = _FresnelScale + (1-_FresnelScale) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.worldViewDir), "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.worldNormal)), "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //用采样颜色 * 反射率 决定最终的颜色效果")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," cubemapColor "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," fresnel;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2682]||(l[2682]=i("hr",null,null,-1)),l[2683]||(l[2683]=i("h4",{id:"_2-菲涅尔反射结合漫反射及-阴影",tabindex:"-1"},[s("2.菲涅尔反射结合漫反射及 阴影 "),i("a",{class:"header-anchor",href:"#_2-菲涅尔反射结合漫反射及-阴影","aria-label":'Permalink to "2.菲涅尔反射结合漫反射及 阴影"'},"​")],-1)),l[2684]||(l[2684]=i("p",null,[i("strong",null,"1.修改属性"),s(" 1-1:去掉反射颜色 1-2:修改反射率为菲涅耳相关的R0反射率")],-1)),l[2685]||(l[2685]=i("p",null,[i("strong",null,"2.修改v2f结构体"),s(" 加入视角方向（需要再片元着色器中用菲涅耳近似公式参与计算）")],-1)),l[2686]||(l[2686]=i("p",null,[i("strong",null,"3.顶点着色器"),s(" 修改视角方向临时变量")],-1)),l[2687]||(l[2687]=i("p",null,[i("strong",null,"4.片元着色器"),s(" 4-1:计算菲涅耳反射率 4-2:用菲涅耳反射率参与lerp计算")],-1)),l[2688]||(l[2688]=i("h5",{id:"实现-9",tabindex:"-1"},[s("实现 "),i("a",{class:"header-anchor",href:"#实现-9","aria-label":'Permalink to "实现"'},"​")],-1)),l[2689]||(l[2689]=i("div",{class:"language-C#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"C#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson80_Fresnel"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //漫反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Color"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Color"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //立方体纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Cube"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Cubemap"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Cube) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //反射率")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _FresnelScale"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"FresnelScale"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Tags{"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"RenderType"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Opaque"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Queue"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Geometry"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Tags{"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"LightMode"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ForwardBase"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma multi_compile_fwdbase")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "Lighting.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "AutoLight.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Color"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            samplerCUBE"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Cube"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _FresnelScale"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":SV_POSITION;"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//裁剪空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                fixed3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"worldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":NORMAL;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的顶点位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"worldPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下视角的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"worldViewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的反射向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //我们将把反射向量的计算放在顶点着色器函数中 节约性能 表现效果也不会太差 肉眼几乎分辨不出来")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"worldRefl"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD2;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //阴影相关")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                SHADOW_COORDS"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," o"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //顶点坐标转换")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.pos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算反射光向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //1.计算世界空间下法线向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.worldNormal "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //2.世界空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.worldPos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(unity_ObjectToWorld, v.vertex).xyz;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //3.计算视角方向 内部是用摄像机位置 - 世界坐标位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.worldViewDir "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityWorldSpaceViewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(o.worldPos);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //4.计算反射向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.worldRefl "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," reflect"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"o.worldViewDir, o.worldNormal);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //阴影相关处理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                TRANSFER_SHADOW"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(o);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"):SV_TARGET")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //漫反射光照相关计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //得到光的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldLightDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"UnityWorldSpaceLightDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.worldPos));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //漫反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," diffuse"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Color.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.worldNormal), worldLightDir));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //对立方体纹理利用对应的反射向量进行采样")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," cubemapColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," texCUBE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_Cube, i.worldRefl).rgb;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //得到光照衰减以及阴影相关的衰减值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                UNITY_LIGHT_ATTENUATION"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(atten, i, i.worldPos);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //菲涅耳反射率计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," fresnel = _FresnelScale + (1-_FresnelScale)"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.worldViewDir), "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.worldNormal)), "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //我们利用lerp 在漫反射颜色和反射颜色之间 进行插值 0和1就是极限状态 0 没有反射效果 1只有反射效果 0~1之间就是两者叠加")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," color"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," UNITY_LIGHTMODEL_AMBIENT.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lerp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(diffuse, cubemapColor, fresnel) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," atten;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //用采样颜色 * 反射率 决定最终的颜色效果")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(color, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1.0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    FallBack "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Reflective/VertexLit"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2690]||(l[2690]=i("hr",null,null,-1)),l[2691]||(l[2691]=i("h3",{id:"六、渲染目标纹理",tabindex:"-1"},[s("六、渲染目标纹理 "),i("a",{class:"header-anchor",href:"#六、渲染目标纹理","aria-label":'Permalink to "六、渲染目标纹理"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[661]||(l[661]=[s("渲染目标纹理（Render Target Texture）是一种特殊类型的纹理",-1)])]),_:1}),l[2692]||(l[2692]=i("p",null,[i("strong",null,"一般摄像机的渲染结果会输出到颜色缓冲区中"),i("strong",null,"最终渲染到设备屏幕上，让玩家通过屏幕看见游戏画面")],-1)),l[2693]||(l[2693]=i("p",null,[i("strong",null,"而渲染目标纹理允许我们将渲染结果直接写入到某一张纹理中"),i("strong",null,"我们可以利用这个纹理来处理各种特殊效果"),i("strong",null,"比如：镜子、玻璃、屏幕后处理、阴影映射等等")],-1)),l[2694]||(l[2694]=i("p",null,[s("在Unity中 "),i("strong",null,"渲染目标纹理（Render Target Texture）通常和渲染纹理（Render Texture）"),i("strong",null,"可以互换使用，指的相同的概念。"),s(' 在实际使用中，我们更常听到的是"渲染纹理"这个术语')],-1)),l[2695]||(l[2695]=i("p",null,"说人话： 渲染纹理就是",-1)),a(n,{color:"red"},{default:k(()=>[...l[662]||(l[662]=[s("将渲染结果存储到一个纹理对象中，以便在后续的渲染步骤中使用",-1)])]),_:1}),l[2696]||(l[2696]=i("p",null,[s("它的作用体现在： 我们在进行Shader开发时 "),i("strong",null,"我们经常会希望某摄像机不要直接将结果渲染到屏幕上"),i("strong",null,"而是可以让我们得到它的渲染结果进行二次处理或利用")],-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[663]||(l[663]=[s("渲染纹理（Render Texture）",-1)])]),_:1}),l[664]||(l[664]=s("Unity引擎中提供的一种专门的纹理类型 我们可以在Project窗口中右键",-1)),l[665]||(l[665]=i("strong",null,"Create——>Custom Render Texturn",-1)),l[666]||(l[666]=s("创建 我们只需要把该纹理进行相关的设置，然后关联到摄像机组件的Target Texture中即可 这样对应摄像机渲染的内容就会直接写入到该纹理中 我们便可以使用它来进行相关操作 注意：除了手动创建，我们也可以通过代码创建并关联",-1))]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[667]||(l[667]=[s("GrabPass",-1)])]),_:1}),l[668]||(l[668]=s("在Unity Shader当中 ",-1)),l[669]||(l[669]=i("strong",null,"我们可以在Pass渲染通道中使用 GrabPass 抓取指令",-1)),l[670]||(l[670]=i("strong",null,"捕获当前屏幕内容并将其保存为纹理，以便在后续的渲染过程中使用",-1))]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[671]||(l[671]=[s("OnRenderImage",-1)])]),_:1}),l[672]||(l[672]=i("strong",null,"在继承了MonoBehaviour的脚本中",-1)),l[673]||(l[673]=i("strong",null,"我们可以使用OnRenderImage来获取摄像机渲染完成的图像",-1)),l[674]||(l[674]=i("strong",null,"该函数一般用于实现自定义的图像后处理效果",-1)),l[675]||(l[675]=i("strong",null,"相当于将摄像机渲染完成的图像进行二次处理",-1))])]),l[2697]||(l[2697]=i("hr",null,null,-1)),l[2698]||(l[2698]=i("h3",{id:"七、镜面效果",tabindex:"-1"},[s("七、镜面效果 "),i("a",{class:"header-anchor",href:"#七、镜面效果","aria-label":'Permalink to "七、镜面效果"'},"​")],-1)),l[2699]||(l[2699]=i("blockquote",null,[i("p",null,"原理")],-1)),a(n,{color:"red"},{default:k(()=>[...l[676]||(l[676]=[s("就是将摄像机看到的画面渲染到渲染纹理当中",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[677]||(l[677]=[s("再在Shader中利用该渲染纹理进行翻转渲染即可",-1)])]),_:1}),l[2700]||(l[2700]=i("blockquote",null,[i("p",null,"效果实现")],-1)),l[2701]||(l[2701]=i("ol",null,[i("li",null,[i("strong",null,"在顶点着色器中，让UV坐标的X轴反向（坐标范围0~1，想要反向直接用 1 - uv.x 即可")]),i("li",null,[i("strong",null,"将渲染纹理应用到该Shader的纹理中")])],-1)),l[2702]||(l[2702]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson83_Mirror"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //主纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainTex"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "white"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //映射对应纹理属性的图片颜色相关数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //映射对应纹理属性的 缩放 平(偏)移数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"; "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//xy代表缩放 zw代表平移")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f_img"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"               v2f_img"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," data"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.pos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //v.texcoord.xy"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," //代表uv坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //v.texcoord.zw"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," //代表一些额外信息")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //先缩放 后平移 这个是一个固定的算法 规则如此")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //如果没有进行缩放和平移 那么 这个计算后 值是不会产生变化的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //因为缩放默认值是1和1 ，平移默认值是0和0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_ST.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_ST.zw;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //由于是镜面效果，所以需要让纹理在x轴方向进行反向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"               data.uv.x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," data.uv.x;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //这是另一种写法")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"               //TRANSFORM_TEX(v.texcoord.xy, _MainTex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"               return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f_img"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //这传入的uv 是经过插值运算后的 就是每一个片元都有自己的一个uv坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //这样才能精准的在贴图当中取出颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," color"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Fallback "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Diffuse"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2703]||(l[2703]=i("hr",null,null,-1)),l[2704]||(l[2704]=i("h3",{id:"八、玻璃效果",tabindex:"-1"},[s("八、玻璃效果 "),i("a",{class:"header-anchor",href:"#八、玻璃效果","aria-label":'Permalink to "八、玻璃效果"'},"​")],-1)),l[2705]||(l[2705]=i("blockquote",null,[i("p",null,"玻璃效果基本原理")],-1)),l[2706]||(l[2706]=i("p",null,"透明为什么不能制作透明效果:",-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[678]||(l[678]=[s("透明无法表现出复杂的光学效果",-1)])]),_:1}),l[679]||(l[679]=i("p",null,[i("strong",null,"玻璃不仅仅是透明的，它还具有反射、折射等光学效果，使用透明无法简单的实现这些效果")],-1))]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[680]||(l[680]=[s("透明物体往往会遇到深度排序问题",-1)])]),_:1}),l[681]||(l[681]=i("p",null,[i("strong",null,"渲染顺序不正确时，会导致视觉错误")],-1)),l[682]||(l[682]=i("p",null,"等等",-1)),l[683]||(l[683]=i("p",null,"因此我们想要实现效果更好的玻璃效果时，往往不会选择使用透明来制作",-1))])]),i("p",null,[l[685]||(l[685]=s("我们将使用",-1)),a(n,{color:"red"},{default:k(()=>[...l[684]||(l[684]=[s("渲染纹理",-1)])]),_:1}),l[686]||(l[686]=s("来制作玻璃效果",-1))]),l[2707]||(l[2707]=i("p",null,[i("strong",null,"基本原理是")],-1)),i("p",null,[i("strong",null,[l[689]||(l[689]=s("在",-1)),a(n,{color:"red"},{default:k(()=>[...l[687]||(l[687]=[s("渲染玻璃效果物体之前，先获取到当前屏幕图像",-1)])]),_:1}),l[690]||(l[690]=s("，将当前屏幕图像",-1)),a(n,{color:"red"},{default:k(()=>[...l[688]||(l[688]=[s("存储在渲染纹理之中",-1)])]),_:1}),l[691]||(l[691]=s("，",-1))])]),i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[692]||(l[692]=[s("之后在真正处理玻璃效果物体时",-1)])]),_:1}),l[695]||(l[695]=s("，再",-1)),a(n,{color:"red"},{default:k(()=>[...l[693]||(l[693]=[s("利用该渲染纹理",-1)])]),_:1}),l[696]||(l[696]=s("来实现",-1)),a(n,{color:"red"},{default:k(()=>[...l[694]||(l[694]=[s("透明、折射",-1)])]),_:1}),l[697]||(l[697]=s("等等效果",-1))])]),l[2708]||(l[2708]=i("p",null,"该过程中并不会使用混合相关知识，而是直接进行颜色相乘或相加来进行颜色叠加",-1)),l[2709]||(l[2709]=i("p",null,[i("strong",null,"一句话总结：")],-1)),a(n,{color:"red"},{default:k(()=>[...l[698]||(l[698]=[s("在渲染玻璃效果之前，先捕获当前屏幕内容并保存到一张渲染纹理当中，",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[699]||(l[699]=[s("**在之后的Shader处理中利用该渲染纹理进行采样，参与最终的颜色计算，实现各种玻璃效果**。",-1)])]),_:1}),l[2710]||(l[2710]=i("blockquote",null,[i("p",null,"玻璃效果实现使用的新知识点")],-1)),l[2711]||(l[2711]=i("h4",{id:"_1-特殊渲染通道grabpass",tabindex:"-1"},[s("1.特殊渲染通道GrabPass "),i("a",{class:"header-anchor",href:"#_1-特殊渲染通道grabpass","aria-label":'Permalink to "1.特殊渲染通道GrabPass"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[700]||(l[700]=[s("GrabPass 的作用是捕获当前屏幕上已经渲染的内容，并将其存储到一张纹理中",-1)])]),_:1}),l[2712]||(l[2712]=i("p",null,[i("strong",null,"它需要包含在SubShader语句块中")],-1)),l[2713]||(l[2713]=i("p",null,[i("strong",null,"它的用法有两种：")],-1)),i("ol",null,[i("li",null,[i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[701]||(l[701]=[s("大括号中什么都不写",-1)])]),_:1}),l[702]||(l[702]=s("，默认会把屏幕内容写入一个叫做_GrabTexture 的纹理变量中 _",-1))])]),i("p",null,[i("strong",null,[l[704]||(l[704]=s("直接",-1)),a(n,{color:"red"},{default:k(()=>[...l[703]||(l[703]=[s("在CG语句中声明_GrabTexture ",-1)])]),_:1}),l[705]||(l[705]=s("纹理变量即可直接使用抓取的渲染纹理",-1))])])]),i("li",null,[i("p",null,[l[707]||(l[707]=s("**",-1)),a(n,{color:"red"},{default:k(()=>[...l[706]||(l[706]=[s("大括号中写入自定义变量名",-1)])]),_:1}),l[708]||(l[708]=s("，会把对应屏幕内容写入该自定义纹理变量中 **",-1))]),i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[709]||(l[709]=[s("在CG语句中声明对应纹理变量",-1)])]),_:1}),l[710]||(l[710]=s("即可使用抓取的渲染纹理",-1))])])])]),l[2714]||(l[2714]=i("h4",{id:"_2-内置函数computegrabscreenpos",tabindex:"-1"},[s("2.内置函数ComputeGrabScreenPos "),i("a",{class:"header-anchor",href:"#_2-内置函数computegrabscreenpos","aria-label":'Permalink to "2.内置函数ComputeGrabScreenPos"'},"​")],-1)),i("p",null,[l[713]||(l[713]=s("该内置函数可以用于",-1)),a(n,{color:"red"},{default:k(()=>[...l[711]||(l[711]=[s("计算屏幕空间位置",-1)])]),_:1}),l[714]||(l[714]=s("，传入",-1)),a(n,{color:"red"},{default:k(()=>[...l[712]||(l[712]=[s("顶点的裁剪空间位置",-1)])]),_:1})]),a(n,{color:"red"},{default:k(()=>[...l[715]||(l[715]=[s("返回一个float4 结果",-1)])]),_:1}),l[2715]||(l[2715]=s("，该float4中的内容分别代表：",-1)),i("p",null,[i("strong",null,[l[717]||(l[717]=s("X：",-1)),a(n,{color:"red"},{default:k(()=>[...l[716]||(l[716]=[s("屏幕空间X坐标",-1)])]),_:1})])]),i("p",null,[i("strong",null,[l[719]||(l[719]=s("Y：",-1)),a(n,{color:"red"},{default:k(()=>[...l[718]||(l[718]=[s("屏幕空间Y坐标",-1)])]),_:1})])]),i("p",null,[i("strong",null,[l[721]||(l[721]=s("Z：",-1)),a(n,{color:"red"},{default:k(()=>[...l[720]||(l[720]=[s("裁剪空间深度值，一般表示顶点距离摄像机的相对深度",-1)])]),_:1})])]),i("p",null,[i("strong",null,[l[723]||(l[723]=s("W：",-1)),a(n,{color:"red"},{default:k(()=>[...l[722]||(l[722]=[s("裁剪空间的W分量，通常用于透视除法",-1)])]),_:1})])]),a(n,{color:"red"},{default:k(()=>[...l[724]||(l[724]=[s("**即X或Y/W 后X或Y的范围将在0~1之间** ",-1)])]),_:1}),l[2716]||(l[2716]=i("p",null,[i("strong",null,"我们可以利用该函数得到顶点相对屏幕的坐标，从而从捕获的渲染纹理中进行采样")],-1)),l[2717]||(l[2717]=i("h4",{id:"_3-模拟折射的自定义计算规则",tabindex:"-1"},[s("3.模拟折射的自定义计算规则 "),i("a",{class:"header-anchor",href:"#_3-模拟折射的自定义计算规则","aria-label":'Permalink to "3.模拟折射的自定义计算规则"'},"​")],-1)),l[2718]||(l[2718]=i("p",null,"为了模拟出玻璃折射的效果，我们一般不会使用之前学习的折射相关知识点在立方体纹理中采样，",-1)),l[2719]||(l[2719]=i("p",null,[i("strong",null,"我们往往会自定义一些计算规则，来模拟计算出折射的效果。")],-1)),a(n,{color:"red"},{default:k(()=>[...l[725]||(l[725]=[s("总体的设计思路，就是在对捕获纹理进行采样时，进行一些偏移计算。",-1)])]),_:1}),l[2720]||(l[2720]=i("p",null,"具体的计算规则，我们在之后编写Shader时再来详细讲解。",-1)),l[2721]||(l[2721]=i("h4",{id:"_4-玻璃效果实现",tabindex:"-1"},[s("4.玻璃效果实现 "),i("a",{class:"header-anchor",href:"#_4-玻璃效果实现","aria-label":'Permalink to "4.玻璃效果实现"'},"​")],-1)),i("ol",null,[l[745]||(l[745]=i("li",null,[i("p",null,[i("strong",null,"玻璃效果基本原理"),s(" 在渲染玻璃效果之前，先捕获当前屏幕内容并保存到一张渲染纹理当中， 在之后的Shader处理中利用该渲染纹理进行采样，参与最终的颜色计算，实现 各种玻璃效果。")])],-1)),i("li",null,[l[729]||(l[729]=i("p",null,[i("strong",null,"玻璃效果实现使用的新知识点")],-1)),a(n,{color:"red"},{default:k(()=>[...l[726]||(l[726]=[s("捕获屏幕内容的GrabPass；",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[727]||(l[727]=[s("裁剪坐标转屏幕坐标的ComputeGrabScreenPos方法",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[728]||(l[728]=[s("捕获纹理进行采样时，进行一些偏移计算，模拟折射效果渲染标签中的",-1)])]),_:1})]),i("li",null,[l[737]||(l[737]=i("p",null,[i("strong",null,"渲染队列"),s(" Tags"),i("code",null,'{ "Queue" = "标签值" }'),s(" 常用Unity预先定义好的渲染队列标签值：")],-1)),l[738]||(l[738]=i("p",null,[i("strong",null,"3-1.Background(背景)(队列号:1000)"),s(" 最早被渲染的物体的队列，一般用来渲染天空盒或者背景")],-1)),a(n,{color:"red"},{default:k(()=>[...l[730]||(l[730]=[s('Tags`{ "Queue" = "Background" }`',-1)])]),_:1}),l[739]||(l[739]=i("p",null,[i("strong",null,"3-2.Geometry(几何)(队列号:2000)"),s(" 不透明的几何体通常使用该队列，当没有声明渲染队列时，Unity会默认使用这个队列")],-1)),a(n,{color:"red"},{default:k(()=>[...l[731]||(l[731]=[s('Tags`{ "Queue" = "Geometry" }`',-1)])]),_:1}),l[740]||(l[740]=i("p",null,[i("strong",null,"3-3.AlphaTest(透明测试)(队列号:2450)"),s(" 有透明通道的，需要进行Alpha测试的几何体会使用该队列 当所有Geometry队列实体绘制完后再绘制AlphaTest队列，效率更高")],-1)),a(n,{color:"red"},{default:k(()=>[...l[732]||(l[732]=[s('Tags`{ "Queue" = "AlphaTest" }`',-1)])]),_:1}),l[741]||(l[741]=i("p",null,[i("strong",null,"3-4.Transparent(透明的)(队列号:3000)"),s(" 该队列中几何体按照由远到近的顺序进行绘制，半透明物体的渲染队列，所有进行透明混合的几何体都应该使用该队列 比如：玻璃材质，粒子特效等")],-1)),a(n,{color:"red"},{default:k(()=>[...l[733]||(l[733]=[s('Tags`{ "Queue" = "Transparent" }`',-1)])]),_:1}),l[742]||(l[742]=i("p",null,[i("strong",null,"3-5.Overlay(覆盖)(队列号:4000)"),s(" 用是放在最后渲染的队列，于叠加渲染的效果，比如镜头光晕等")],-1)),a(n,{color:"red"},{default:k(()=>[...l[734]||(l[734]=[s('Tags`{ "Queue" = "Overlay" }`',-1)])]),_:1}),l[743]||(l[743]=i("p",null,[i("strong",null,"3-6.自定义队列"),s(" 基于Unity预先定义好的这些渲染队列标签来进行加减运算来定义自己的渲染队列 比如：")],-1)),a(n,{color:"red"},{default:k(()=>[...l[735]||(l[735]=[s('Tags`{ "Queue" = "Geometry+1" } ` 代表的队列号就是 2001',-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[736]||(l[736]=[s('Tags`{ "Queue" = "Transparent-1" }` 代表的队列号就是 2999',-1)])]),_:1}),l[744]||(l[744]=i("p",null,"自定义队列在一些特殊情况下，特别有用 比如 一些水的渲染 想要在不透明物体之后，半透明物体之前进行渲染，就可以自定义",-1))])]),l[2722]||(l[2722]=i("div",{class:"language-C#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"C#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//2.修改相关代码")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  2-1:修改属性代码（同时修改CG中的属性映射）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      加入主纹理属性（用于处理物体本身颜色）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      加入立方体纹理属性（用于处理反射）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      将反射率改为折射程度（用于控制折射程度 0表示完全不折射-相当于完全反射，1表示完全折射-相当于完全透明）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  2-2:修改渲染队列为Transparent，")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      但是RenderType渲染类型不修改，因为它本质上还是一个不透明物体")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      以后使用着色器替换功能时，可以在被正常渲染")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  2-3:加入GrabPass，抓取屏幕图像存储渲染纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  2-4:修改v2f结构体")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      加入相对屏幕坐标float4类型成员")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      加入uv，用于采样物体颜色纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  2-5:修改顶点着色器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      使用ComputeGrabScreenPos方法，计算结构体中相对屏幕坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      计算纹理的缩放偏移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  2-6:修改片元着色器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      用uv采样主纹理颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      将屏幕坐标转为裁剪坐标0~1范围内，对捕获纹理进行采样")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      用反射在立方体纹理中进行采样，用结果乘以主纹理颜色，进行颜色叠加")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      用折射程度参与最终的颜色计算，折射程度值的变化决定了最终表现效果在 完全反射~完全折射 之间变化")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2723]||(l[2723]=i("blockquote",null,[i("p",null,"自定义折射效果")],-1)),l[2724]||(l[2724]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//目前我们利用屏幕坐标在抓取纹理中采样并没有处理偏移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//因此呈现出来的效果像是在透明和半透明之前切换")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//我们可以自定义一些简单的偏移计算规则")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//让最终的采样位置发生偏移，模拟折射效果")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2725]||(l[2725]=i("h4",{id:"_5-带法线纹理的玻璃效果实现",tabindex:"-1"},[s("5.带法线纹理的玻璃效果实现 "),i("a",{class:"header-anchor",href:"#_5-带法线纹理的玻璃效果实现","aria-label":'Permalink to "5.带法线纹理的玻璃效果实现"'},"​")],-1)),l[2726]||(l[2726]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//1.创建Shader 复制上节课的相关代码")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//2.将 BumpedDiffuse 标准法线漫反射Shader中关于法线相关的计算整合进来")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  注意：不再需要_BumpScale来控制凹凸程度，我们默认法线凹凸程度最大化")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//3.修改反射向量计算规则")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  由于法线需要从法线纹理中获取")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  因此需要将反射向量的计算放入到片元着色器中")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2727]||(l[2727]=i("blockquote",null,[i("p",null,"利用切线空间法线来计算折射偏移")],-1)),l[2728]||(l[2728]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//1.加入一个控制折射扭曲程度的新属性_Distortion 取值范围可以大一些")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//2.利用切线空间下法线来计算偏移值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  加入两行关键代码")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  第一行")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  float2 offset = tangentNormal.xy * _Distortion ;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  使用切线空间下法线的xy * 扭曲值得到一个偏移量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  代表光线经过法线方向扰动后的偏移程度，确定光线折射的方向和强度")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  第二行")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  屏幕坐标.xy = offset * 屏幕坐标.z + 屏幕坐标.xy;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  用偏移量和屏幕空间深度值相乘，模拟出真实的折射效果")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  深度值越大（即距离相机越远），折射效果越明显。")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  这样可以实现近大远小的效果，使得物体在不同深度上的折射效果有所差异。")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2729]||(l[2729]=i("hr",null,null,-1)),l[2730]||(l[2730]=i("h3",{id:"九、程序纹理",tabindex:"-1"},[s("九、程序纹理 "),i("a",{class:"header-anchor",href:"#九、程序纹理","aria-label":'Permalink to "九、程序纹理"'},"​")],-1)),l[2731]||(l[2731]=i("p",null,[i("strong",null,"程序纹理（Procedural Textures）：就是通过程序代码生成的纹理")],-1)),l[2732]||(l[2732]=i("blockquote",null,[i("p",null,"程序纹理如何生成")],-1)),l[2733]||(l[2733]=i("ol",null,[i("li",null,[i("p",null,"通过C#脚本生成纹理后传递给Shader")]),i("li",null,[i("p",null,"直接在Shader代码中自定义逻辑生成纹理")])],-1)),l[2734]||(l[2734]=i("blockquote",null,[i("p",null,"优点")],-1)),l[2735]||(l[2735]=i("ol",null,[i("li",null,[i("p",null,"由于是动态生成，不需要存储大文件，可以在运行时生成任意分辨率的纹理")]),i("li",null,[i("p",null,"可以根据需求调整自定义参数，实时的更改纹理外观")]),i("li",null,[i("p",null,"通过适当的函数设计，可以生成无缝平铺的纹理")])],-1)),l[2736]||(l[2736]=i("blockquote",null,[i("p",null,"补充")],-1)),a(n,{color:"red"},{default:k(()=>[...l[746]||(l[746]=[s("Shader中的内置函数floor",-1)])]),_:1}),l[2737]||(l[2737]=s("（属于UnityCG.cginc）",-1)),i("p",null,[l[748]||(l[748]=s("该函数 传入一个数值 floor(数值) 会对传入数值",-1)),a(n,{color:"red"},{default:k(()=>[...l[747]||(l[747]=[s("向下取整",-1)])]),_:1}),l[749]||(l[749]=s(" 比如： floor(2.6) 返回 2 floor(0.4) 返回 0 floor(-2.3) 返回 -3",-1))]),l[2738]||(l[2738]=i("blockquote",null,[i("p",null,"程序材质是什么")],-1)),a(n,{color:"red"},{default:k(()=>[...l[750]||(l[750]=[s("程序材质是通过算法和数学函数生成的材质",-1)])]),_:1}),l[2739]||(l[2739]=s("（主要在Shader代码中实现）",-1)),l[2740]||(l[2740]=i("p",null,"它通常包括多个纹理属性和各种其他属性，用于计算模拟现实世界中的各种表面特性",-1)),l[2741]||(l[2741]=i("p",null,"总的来说 程序材质是由多个程序纹理和材质属性组合而成的 他们共同定义了材质的外观和物理属性，模拟出复杂的表现效果",-1)),l[2742]||(l[2742]=i("blockquote",null,[i("p",null,"制作程序材质的工具")],-1)),l[2743]||(l[2743]=i("ol",null,[i("li",null,[i("strong",null,"Substance Designer"),s("（物质设计师）")]),i("li",null,"Blender"),i("li",null,"Houdini")],-1)),l[2744]||(l[2744]=i("blockquote",null,[i("p",null,"获取程序材质")],-1)),l[2745]||(l[2745]=i("p",null,[s("1.Unity资源商店 2.Substance Share: "),i("a",{href:"https://substance3d.adobe.com/community-assets",target:"_blank",rel:"noreferrer"},"https://substance3d.adobe.com/community-assets"),s(" 3.GameTextures："),i("a",{href:"https://gametextures.com/",target:"_blank",rel:"noreferrer"},"https://gametextures.com/")],-1)),l[2746]||(l[2746]=i("hr",null,null,-1)),l[2747]||(l[2747]=i("h2",{id:"动态效果",tabindex:"-1"},[s("动态效果 "),i("a",{class:"header-anchor",href:"#动态效果","aria-label":'Permalink to "动态效果"'},"​")],-1)),l[2748]||(l[2748]=i("blockquote",null,[i("p",null,"如何制作动态效果")],-1)),a(n,{color:"red"},{default:k(()=>[...l[751]||(l[751]=[s("利用Shader制作动态效果的关键就是 `——` 利用时间变化来改变数据，从而导致渲染结果改变，带来画面变化",-1)])]),_:1}),l[2749]||(l[2749]=i("blockquote",null,[i("p",null,"内置时间变量")],-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[752]||(l[752]=[s("float4 _Time",-1)])]),_:1}),l[753]||(l[753]=i("p",null,[i("strong",null,[s("4个分量的值分别是(t"),i("code",null,"/"),s("20, t, 2t, 3t)")]),s(" 其中t代表该"),i("strong",null,"游戏场景从加载开始缩经过的时间")],-1))]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[754]||(l[754]=[s("float4 _SinTime",-1)])]),_:1}),l[755]||(l[755]=i("p",null,[i("strong",null,[s("4个分量的值分别是(t"),i("code",null,"/"),s("8, t"),i("code",null,"/"),s("4, t"),i("code",null,"/"),s("2, t)")]),s(" 其中t代表 游戏运行的时间的"),i("strong",null,"正弦值")],-1))]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[756]||(l[756]=[s("float4 _CosTime",-1)])]),_:1}),l[757]||(l[757]=i("p",null,[i("strong",null,[s("4个分量的值分别是(t"),i("code",null,"/"),s("8, t"),i("code",null,"/"),s("4, t"),i("code",null,"/"),s("2, t)")]),s(" 其中t代表 游戏运行的时间的"),i("strong",null,"余弦值")],-1))]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[758]||(l[758]=[s("float4 unity_DeltaTime",-1)])]),_:1}),l[759]||(l[759]=i("p",null,[i("strong",null,"4个分量的值分别是(dt, 1/dt, smoothDt, 1/smoothDt)"),s(" dt代表帧间隔时间（上一帧到当前帧间隔时间） smoothDt是平滑处理过的时间间隔，对帧间隔时间进行某种平滑算法处理后的结果")],-1))])]),l[2750]||(l[2750]=i("blockquote",null,[i("p",null,"Shader中经常会改变的数据")],-1)),l[2751]||(l[2751]=i("ol",null,[i("li",null,"颜色 通过时间控制颜色的变化，比如 渐变、闪烁 等效果"),i("li",null,"位置 利用时间使顶点在某个方向上移动，比如 波动 等效果"),i("li",null,"纹理坐标 利用时间变化来动态改变纹理坐标，比如 水流、云彩、序列帧动画 等效果"),i("li",null,"法线 利用时间动态修改法线方向，比如 风吹草动 等效果"),i("li",null,"缩放 利用时间改变物体缩放比例，比如 脉动、跳动等效果"),i("li",null,"透明度 利用时间控制物体透明度，比如 淡入淡出、闪烁等效果")],-1)),l[2752]||(l[2752]=i("hr",null,null,-1)),l[2753]||(l[2753]=i("h3",{id:"一、-序列帧动画",tabindex:"-1"},[s("一、 序列帧动画 "),i("a",{class:"header-anchor",href:"#一、-序列帧动画","aria-label":'Permalink to "一、 序列帧动画"'},"​")],-1)),l[2754]||(l[2754]=i("blockquote",null,[i("p",null,"关键点")],-1)),l[2755]||(l[2755]=i("pre",null,[i("code",null,`**1.UV坐标范围0~1，原点为图片左下角**

**2.图集序列帧动画播放顺序为从左到右，从上到下**
`)],-1)),l[2756]||(l[2756]=i("blockquote",null,[i("p",null,"问题解决思路")],-1)),l[2757]||(l[2757]=i("pre",null,[i("code",null,`**1.用内置时间参数 _Time.y 参与计算得到具体哪一帧**

 时间是不停增长的数值，用它对总帧数取余，便可以循环获取到当前帧数

**2.利用时间得到当前应该绘制哪一帧后**

 我们只需要确认从当前小图片中，采样开始位置，采样范围即可

 采样开始位置，可以利用当前帧和行列一起计算

 采样范围可以将0~1范围 缩放转换到 小图范围内
`)],-1)),l[2758]||(l[2758]=i("blockquote",null,[i("p",null,"用Shader实现序列帧动画")],-1)),l[2759]||(l[2759]=i("ol",null,[i("li",null,"新建Shader 删除无用代码"),i("li",null,"声明属性，进行属性映射 主纹理、图集行列、序列帧切换速度"),i("li",null,[s("透明Shader 设置渲染标签 Tags"),i("code",null,' { "RenderType"="Opaque" "IgnoreProjector"="True" "Queue"="Transparent" }'),s(" 关闭深度写入，开启混合 ZWrite Off Blend SrcAlpha OneMinusSrcAlpha")]),i("li",null,"结构体 只需要顶点坐标和纹理坐标"),i("li",null,"顶点着色器 只需要进行坐标转换和纹理坐标赋值"),i("li",null,"片元着色器 6-1:利用时间计算帧数 6-2:利用帧数计算当前 uv采样起始位置（得到小图片uv起始位置） 6-3:计算uv缩放比例（将0~1 转换到 0~1/n） 6-4:进行uv偏移计算（在小图片格子中采样） 6-5:采样")],-1)),l[2760]||(l[2760]=i("h4",{id:"实现-10",tabindex:"-1"},[s("实现 "),i("a",{class:"header-anchor",href:"#实现-10","aria-label":'Permalink to "实现"'},"​")],-1)),l[2761]||(l[2761]=i("div",{class:"language-tex"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"tex"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'Shader "Unlit/Lesson92_SequentialFrameAnimation"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        _MainTex ("Texture", 2D) = "white" {}')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        //图集行列")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        _Rows("Rows", int) = 8')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        _Columns("Columns", int) = 8')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        //切换动画速度变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        _Speed("Speed", float) = 1')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        Tags { "RenderType"="Transparent" "Queue"="Transparent" "IgnoreProjector"="True" }')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ZWrite Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Blend SrcAlpha OneMinusSrcAlpha")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 uv : TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 vertex : SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            sampler2D _MainTex;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float _Rows;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float _Columns;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float _Speed;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            v2f vert (appdata_base v)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2f o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.vertex = UnityObjectToClipPos(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv = v.texcoord;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                return o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            fixed4 frag (v2f i) : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //得到当前帧 利用时间变量计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float frameIndex = floor(_Time.y * _Speed) "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"% (_Rows * _Columns);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //小格子（小图片）采样时的起始位置计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //除以对应的行和列 目的是将行列值 转换到 0~1的坐标范围内")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //1 - (floor(frameIndex / _Columns) + 1)/_Rows")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //  +1 是因为把格子左上角转换为格子左下角")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //  1- 因为UV坐标采样时从左下角进行采样的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 frameUV = float2(frameIndex "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"% _Columns / _Columns, 1 - (floor(frameIndex / _Columns) + 1)/_Rows);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //得到uv缩放比例 相当于从0~1大图 隐射到一个 0~1/n的一个小图中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 size = float2(1/_Columns, 1/_Rows);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //计算最终的uv采样坐标信息")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //*size 相当于把0~1范围 缩放到了 0~1/8范围")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //+frameUV 相当于把起始的采样位置 移动到了 对应帧小格子的起始位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 uv = i.uv * size + frameUV;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //最终采样颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                return tex2D(_MainTex, uv);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2762]||(l[2762]=i("hr",null,null,-1)),l[2763]||(l[2763]=i("h3",{id:"二、滚动的背景",tabindex:"-1"},[s("二、滚动的背景 "),i("a",{class:"header-anchor",href:"#二、滚动的背景","aria-label":'Permalink to "二、滚动的背景"'},"​")],-1)),l[2764]||(l[2764]=i("blockquote",null,[i("p",null,"知识补充")],-1)),l[2765]||(l[2765]=i("pre",null,[i("code",null,`**内置函数 \`frac(参数)\`**

该函数的内部计算规则为：

**\`frac(x) = x - floor(x)\`**

一般用于保留数值的小数部分，但是负数时要注意

比如：

\`frac(2.5) = 2.5 - 2 = 0.5\`

\`frac(3.75) = 3.75 - 3 = 0.75\`

\`frac(-0.25) = -0.25 - (-1) = 0.75\`

\`frac(-3.75) = -3.75 - (-4) = 0.25\`

<ColorText color="red">它的主要作用是可以帮助我们保证 uv坐标 范围在0~1之间</ColorText>

相当于

**大于1的uv值重新从0开始向1方向取值**

**小于0的uv值重新从1开始向0方向取值**
`)],-1)),l[2766]||(l[2766]=i("blockquote",null,[i("p",null,"用Shader实现滚动的背景")],-1)),l[2767]||(l[2767]=i("ol",null,[i("li",null,"新建Shader，删除无用代码"),i("li",null,"声明属性，属性映射 主纹理、U轴速度、V轴速度（两个速度的原因是因为图片可能竖直或水平滚动）"),i("li",null,"透明Shader 往往这种滚动背景图片都会有透明区域 渲染标签修改、关闭深度写入、进行透明混合"),i("li",null,"结构体 顶点和纹理坐标"),i("li",null,"顶点着色器 顶点坐标转换，纹理坐标直接赋值"),i("li",null,"片元着色器 利用时间和速度对uv坐标进行偏移计算 利用偏移后的uv坐标进行采样")],-1)),l[2768]||(l[2768]=i("h4",{id:"实现-11",tabindex:"-1"},[s("实现 "),i("a",{class:"header-anchor",href:"#实现-11","aria-label":'Permalink to "实现"'},"​")],-1)),l[2769]||(l[2769]=i("div",{class:"language-tex"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"tex"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'Shader "Unlit/Lesson93_ScrollingBackground"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        _MainTex ("Texture", 2D) = "white" {}')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        //水平和竖直的滚动速度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        _ScrollSpeedU("ScrollSpeedU", float) = 0.5')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        _ScrollSpeedV("ScrollSpeedV", float) = 0.5')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        Tags { "RenderType"="Transparent" "Queue"="Transparent" "IgnoreProjector"="True" }')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ZWrite Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Blend SrcAlpha OneMinusSrcAlpha")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 uv : TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 vertex : SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            sampler2D _MainTex;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float _ScrollSpeedU;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float _ScrollSpeedV;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            v2f vert (appdata_base v)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2f o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.vertex = UnityObjectToClipPos(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv = v.texcoord;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                return o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            fixed4 frag (v2f i) : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //利用时间 来计算UV的偏移 因为时间一直在变化 所以最终的uv坐标也不停地在变")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 scrollUV = frac(i.uv + float2(_Time.y * _ScrollSpeedU, _Time.y * _ScrollSpeedV));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                return tex2D(_MainTex, scrollUV);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2770]||(l[2770]=i("hr",null,null,-1)),l[2771]||(l[2771]=i("h3",{id:"三、流动的河流",tabindex:"-1"},[s("三、流动的河流 "),i("a",{class:"header-anchor",href:"#三、流动的河流","aria-label":'Permalink to "三、流动的河流"'},"​")],-1)),l[2772]||(l[2772]=i("h4",{id:"_1-基本原理",tabindex:"-1"},[s("1. 基本原理 "),i("a",{class:"header-anchor",href:"#_1-基本原理","aria-label":'Permalink to "1. 基本原理"'},"​")],-1)),l[2773]||(l[2773]=i("blockquote",null,[i("p",null,"波浪感的关键因素")],-1)),l[2774]||(l[2774]=i("p",null,[i("strong",null,"波长"),s(":")],-1)),a(n,{color:"red"},{default:k(()=>[...l[760]||(l[760]=[s("指两个相邻波峰或波谷之间的距离。波长越大，波动越缓慢，波形周期越长.",-1)])]),_:1}),l[2775]||(l[2775]=i("p",null,[i("strong",null,"波长的倒数"),s(":")],-1)),a(n,{color:"red"},{default:k(()=>[...l[761]||(l[761]=[s("1`/`波长，倒数越大，表示波动越频繁，波形周期越短",-1)])]),_:1}),l[2776]||(l[2776]=i("p",null,[i("strong",null,"波动频率"),s(":")],-1)),a(n,{color:"red"},{default:k(()=>[...l[762]||(l[762]=[s("指波动在单位时间内发生的次数(相当于波浪变化的频率).",-1)])]),_:1}),l[2777]||(l[2777]=i("p",null,[i("strong",null,"波动幅度:")],-1)),i("p",null,[a(n,{color:"red"},{default:k(()=>[...l[763]||(l[763]=[s("指波峰或波谷相对于中线(静止位置)的最大偏移位置",-1)])]),_:1})]),l[2778]||(l[2778]=i("p",null,"我们需要在我们的Shader代码中,声明这三个关键因素变量,用于控制顶点的偏移从而实现流动的2D河流效果",-1)),a(h,{face:"shader/动态效果:流动的河流"}),l[2779]||(l[2779]=i("blockquote",null,[i("p",null,"基本原理")],-1)),a(n,{color:"red"},{default:k(()=>[...l[764]||(l[764]=[i("strong",null,"让我们的顶点在对应的轴向产生偏移",-1)])]),_:1}),i("p",null,[l[767]||(l[767]=s("主要运用的就是Shader中的",-1)),a(n,{color:"red"},{default:k(()=>[...l[765]||(l[765]=[s("内置函数sin",-1)])]),_:1}),l[768]||(l[768]=s("，以及",-1)),a(n,{color:"red"},{default:k(()=>[...l[766]||(l[766]=[s("内置时间变量",-1),i("code",null,"_Time.y",-1)])]),_:1})]),l[2780]||(l[2780]=i("p",null,[s("sin 是正弦函数，正弦函数是一个周期性函数，常用与表示波动和震荡效果，它的返回值是"),i("code",null,"-1~1 _Time.y"),s(" 是切换到当前场景后所经过的时间，参与到计算中，可以让我们的波浪周期性变化 再结合波长的倒数、波动评率、波动幅度等可变参数，参与到计算中，便可以实现效果")],-1)),a(n,{color:"red"},{default:k(()=>[...l[769]||(l[769]=[s("关键步骤一：让顶点上下动起来",-1)])]),_:1}),l[2781]||(l[2781]=i("p",null,[s("我们可以利用sin函数让顶点在希望移动的轴向上产生偏移，并且为了能够周期性变化，可以让时间 参与到计算中:"),i("code",null,"sin( _Time.y )")],-1)),l[2782]||(l[2782]=i("p",null,"该函数随着时间的变化，会不停地返回-1~1 之间的数",-1)),i("p",null,[l[771]||(l[771]=s("为了控制波动评率，我们可以声明波动评率变量参与计算：",-1)),a(n,{color:"red"},{default:k(()=>[...l[770]||(l[770]=[i("code",null,"sin( _Time.y * 波动频率)",-1)])]),_:1})]),a(n,{color:"red"},{default:k(()=>[...l[772]||(l[772]=[s("用得到的返回值，作为顶点在某一轴向的偏移值，便可以让顶点动起来",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[773]||(l[773]=[s("关键步骤二：让顶点有差异性的动起来",-1)])]),_:1}),l[2783]||(l[2783]=i("p",null,"为了让顶点之间偏移位置有差异，我们可以在计算sin 时利用每个顶点的不同点制造差异性 对于顶点来说，不同点主要来自坐标，我们可以利用他们变化某个轴的坐标制造差异性",-1)),a(n,{color:"red"},{default:k(()=>[...l[774]||(l[774]=[s("sin( _Time.y * 波动频率 + 顶点某轴坐标)",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[775]||(l[775]=[s("用得到的返回值，作为顶点在某一轴向的偏移值，便可以让顶点有差异性的动起来",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[776]||(l[776]=[s("关键步骤三：体现波长和波动幅度",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[777]||(l[777]=[s("`sin( _Time.y * 波动频率 + 顶点某轴坐标)`",-1)])]),_:1}),l[2784]||(l[2784]=s(" 已经可以帮助我们实现波动变化了",-1)),l[2785]||(l[2785]=i("p",null,"想要体现出波长和波动幅度，我们只需要将这两个变量参与计算即可",-1)),i("p",null,[l[779]||(l[779]=i("strong",null,"波长的体现：",-1)),l[780]||(l[780]=s()),a(n,{color:"red"},{default:k(()=>[...l[778]||(l[778]=[i("em",null,[i("em",null,"sin( _Time.y * 波动频率 + 顶点某轴坐标"),s(" 波长的倒数)")],-1),s("*",-1)])]),_:1})]),a(n,{color:"red"},{default:k(()=>[...l[781]||(l[781]=[s("倒数越大，波形周期越短",-1)])]),_:1}),i("p",null,[i("strong",null,[l[783]||(l[783]=s("波动幅度体现： ",-1)),a(n,{color:"red"},{default:k(()=>[...l[782]||(l[782]=[i("code",null,"sin( _Time.y * 波动频率 + 顶点某轴坐标* 波长的倒数) * 波动幅度",-1)])]),_:1})])]),a(n,{color:"red"},{default:k(()=>[...l[784]||(l[784]=[s("相当于将 -1~1 范围扩大了",-1)])]),_:1}),l[2786]||(l[2786]=i("p",null,"**流动的2D河流基本原理，就是利用下面这个公式，对顶点位置进行偏移计算 **",-1)),a(n,{color:"red"},{default:k(()=>[...l[785]||(l[785]=[s("某轴位置偏移量= `sin( _Time.y * 波动频率 + 顶点某轴坐标* 波长的倒数) * 波动幅度`",-1)])]),_:1}),l[2787]||(l[2787]=i("p",null,[i("strong",null,"其中")],-1)),a(n,{color:"red"},{default:k(()=>[...l[786]||(l[786]=[s("具体轴向根据模型空间决定",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[787]||(l[787]=[s("波动频率、波长倒数、波动幅度为自定义变量，可以外部调节",-1)])]),_:1}),l[2788]||(l[2788]=i("h4",{id:"_2-实现",tabindex:"-1"},[s("2. 实现 "),i("a",{class:"header-anchor",href:"#_2-实现","aria-label":'Permalink to "2. 实现"'},"​")],-1)),l[2789]||(l[2789]=i("div",{class:"language-tex"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"tex"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'Shader "Unlit/Lesson94_2DWater"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        _MainTex ("Texture", 2D) = "white" {}')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        _Color("Color", Color) = (1,1,1,1)')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        //波动幅度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        _WaveAmplitude("WaveAmplitude", Float) = 1')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        //波动频率")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        _WaveFrequency("WaveFrequency", Float) = 1')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        //波长的倒数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        _InvWaveLength("InvWaveLength", Float) = 1')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        //纹理变化速度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        _Speed("Speed", Float) = 1')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        //透明Shader相关渲染标签 + 关闭批处理标签")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        Tags { "RenderType"="Transparent" "Queue"="Transparent" "IgnoreProjector"="True" "DisableBatching"="True" }')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ZWrite Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Blend SrcAlpha OneMinusSrcAlpha")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 uv : TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 vertex : SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            sampler2D _MainTex;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float4 _MainTex_ST;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float4 _Color;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float _WaveAmplitude;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float _WaveFrequency;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float _InvWaveLength;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float _Speed;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            v2f vert (appdata_base v)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2f o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //模型空间下的偏移位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 offset;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //让它在模型空间的x轴方向进行偏移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                offset.x = sin(_Time.y * _WaveFrequency + v.vertex.z * _InvWaveLength) * _WaveAmplitude;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                offset.yzw = float3(0,0,0);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.vertex = UnityObjectToClipPos(v.vertex + offset);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv = v.texcoord * _MainTex_ST.xy + _MainTex_ST.zw;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv += float2(0, _Time.y *_Speed );")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                return o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            fixed4 frag (v2f i) : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                fixed4 color = tex2D(_MainTex,i.uv);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                color.rgb *= _Color.rgb;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                return color;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2790]||(l[2790]=i("hr",null,null,-1)),l[2791]||(l[2791]=i("h3",{id:"四、广告牌效果",tabindex:"-1"},[s("四、广告牌效果 "),i("a",{class:"header-anchor",href:"#四、广告牌效果","aria-label":'Permalink to "四、广告牌效果"'},"​")],-1)),l[2792]||(l[2792]=i("blockquote",null,[i("p",null,"广告牌效果是什么")],-1)),l[2793]||(l[2793]=i("p",null,"广告牌效果",-1)),l[2794]||(l[2794]=i("p",null,"它是一种图形技术",-1)),i("p",null,[l[790]||(l[790]=s("用于",-1)),a(n,{color:"red"},{default:k(()=>[...l[788]||(l[788]=[s("确保对象",-1)])]),_:1}),l[791]||(l[791]=s("（通常是二维纹理面片或精灵(Sprite)图片）",-1)),a(n,{color:"red"},{default:k(()=>[...l[789]||(l[789]=[s("始终面向摄像机",-1)])]),_:1})]),a(n,{color:"red"},{default:k(()=>[...l[792]||(l[792]=[s("同时在某些轴上保持固定的方向（一般分为全向广告牌和轴对齐广告牌）",-1)])]),_:1}),l[2795]||(l[2795]=i("p",null,"在3D游戏中非常有用",-1)),l[2796]||(l[2796]=i("p",null,"它可以确保无论从哪个角度看、对象始终面向玩家，创造出一种始终可见的效果。",-1)),l[2797]||(l[2797]=i("blockquote",null,[i("p",null,"广告牌效果是什么")],-1)),a(n,{color:"red"},{default:k(()=>[...l[793]||(l[793]=[s("全向广告牌效果是",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[794]||(l[794]=[s("无论摄像机位置如何变化，对象在所有轴上始终面向摄像机",-1)])]),_:1}),l[2798]||(l[2798]=i("p",null,[i("strong",null,"适用于烟雾、火焰"),s("等需要从任何角度看都要正对摄像机的效果")],-1)),a(n,{color:"red"},{default:k(()=>[...l[795]||(l[795]=[s("轴对齐广告牌",-1)])]),_:1}),l[2799]||(l[2799]=s("是",-1)),a(n,{color:"red"},{default:k(()=>[...l[796]||(l[796]=[s("对象在一个特定轴上保持固定方向，而在其他轴上面向摄像机",-1)])]),_:1}),l[2800]||(l[2800]=i("p",null,[i("strong",null,"适用于树木、花草、人物"),s("等需要在特定轴上保持正确方向的效果")],-1)),i("p",null,[l[799]||(l[799]=s("其中",-1)),a(n,{color:"red"},{default:k(()=>[...l[797]||(l[797]=[s("垂直广告牌",-1)])]),_:1}),l[800]||(l[800]=s("就是一种特殊的轴对齐广告牌，",-1)),a(n,{color:"red"},{default:k(()=>[...l[798]||(l[798]=[s("对象在水平面（XZ平面）上旋转 但在垂直方向上始终保持不变",-1)])]),_:1})]),l[2801]||(l[2801]=i("h4",{id:"_1-广告牌基本原理",tabindex:"-1"},[s("1. 广告牌基本原理 "),i("a",{class:"header-anchor",href:"#_1-广告牌基本原理","aria-label":'Permalink to "1. 广告牌基本原理"'},"​")],-1)),i("p",null,[i("strong",null,[l[802]||(l[802]=s("核心原理是",-1)),a(n,{color:"red"},{default:k(()=>[...l[801]||(l[801]=[s("旋转模型空间坐标系让其始终面向摄像机",-1)])]),_:1})])]),l[2802]||(l[2802]=i("p",null,"想要达到这个目的",-1)),l[2803]||(l[2803]=i("p",null,"我们需要构建一个基于模型空间的新坐标系",-1)),l[2804]||(l[2804]=i("p",null,[i("strong",null,"坐标系由两个关键因素决定")],-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[803]||(l[803]=[s("原点（新坐标系中心点）",-1)])]),_:1}),l[804]||(l[804]=i("p",null,[i("strong",null,"基于模型空间的，可以自定义，但一般还是用（0,0,0）")],-1))]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[805]||(l[805]=[s("三个轴向（X轴、Y轴、Z轴）",-1)])]),_:1}),l[806]||(l[806]=i("p",null,[i("strong",null,"通常情况下三个轴向由视角方向、垂直向上方向、右方向构成")],-1))])]),a(h,{face:"shader/动态效果:广告牌"}),a(n,{color:"red"},{default:k(()=>[...l[807]||(l[807]=[s("关键点就是求出",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[808]||(l[808]=[s("三个轴向（X轴、Y轴、Z轴）",-1)])]),_:1}),a(h,{face:"shader/动态效果:广告牌 (2)"}),i("p",null,[i("strong",null,[l[810]||(l[810]=s("Z轴= ",-1)),a(n,{color:"red"},{default:k(()=>[...l[809]||(l[809]=[s("normal = 将摄像机位置转到模型空间– 模型空间下新轴向空间中心点（一般还是0,0,0）",-1)])]),_:1})])]),i("p",null,[i("strong",null,[l[812]||(l[812]=s("old Up = ",-1)),a(n,{color:"red"},{default:k(()=>[...l[811]||(l[811]=[s("模型空间中Y轴（0,1,0）",-1)])]),_:1})])]),i("p",null,[i("strong",null,[l[814]||(l[814]=s("X轴= ",-1)),a(n,{color:"red"},{default:k(()=>[...l[813]||(l[813]=[s("right = Normal X OldUp",-1)])]),_:1}),l[815]||(l[815]=s(" （知识回顾：两个向量叉乘可以得到垂直于两向量所在平面的向量）",-1))])]),i("p",null,[i("strong",null,[l[817]||(l[817]=s("Y轴= ",-1)),a(n,{color:"red"},{default:k(()=>[...l[816]||(l[816]=[s("new Up = Normal X Right",-1)])]),_:1})])]),l[2805]||(l[2805]=i("p",null,"我们已经知道了应该如何获取到",-1)),l[2806]||(l[2806]=i("p",null,"新坐标空间的X、Y、Z轴，有了轴向",-1)),l[2807]||(l[2807]=i("p",null,"我们再定义一个新坐标系的中心点（相对于模型空间的）",-1)),a(n,{color:"red"},{default:k(()=>[...l[818]||(l[818]=[s("一般我们会将中心点Center定为（0,0,0）即原模型空间原点",-1)])]),_:1}),l[2808]||(l[2808]=i("p",null,"那么此时我们只需要计算以下两步即可：",-1)),a(n,{color:"red"},{default:k(()=>[...l[819]||(l[819]=[s("偏移位置 = 顶点坐标– Center",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[820]||(l[820]=[s("新顶点位置= Center + X轴 * 偏移位置.x + Y轴 * 偏移位置.y + Z轴 * 偏移位置.z",-1)])]),_:1}),l[2809]||(l[2809]=i("p",null,[i("strong",null,"通过以上的计算，我们便可以让顶点更新位置，让对象一直面朝我们了")],-1)),l[2810]||(l[2810]=i("p",null,[i("strong",null,"实现出一个全向广告牌效果")],-1)),l[2811]||(l[2811]=i("p",null,"如果想要实现出垂直广告牌效果",-1)),l[2812]||(l[2812]=i("p",null,[i("strong",null,"那只需要在计算轴向向量时进行修改即可")],-1)),i("p",null,[i("strong",null,[l[823]||(l[823]=s("只需要在计算",-1)),a(n,{color:"red"},{default:k(()=>[...l[821]||(l[821]=[s("normal",-1)])]),_:1}),l[824]||(l[824]=s("向量时，让其的",-1)),a(n,{color:"red"},{default:k(()=>[...l[822]||(l[822]=[s("y值变为0",-1)])]),_:1}),l[825]||(l[825]=s("即可",-1))])]),i("p",null,[i("strong",null,[l[827]||(l[827]=s("相当于",-1)),a(n,{color:"red"},{default:k(()=>[...l[826]||(l[826]=[s("normal向量只在xz 平面变化",-1)])]),_:1})])]),l[2813]||(l[2813]=i("hr",null,null,-1)),l[2814]||(l[2814]=i("h4",{id:"_2-广告牌效果实现",tabindex:"-1"},[s("2.广告牌效果实现 "),i("a",{class:"header-anchor",href:"#_2-广告牌效果实现","aria-label":'Permalink to "2.广告牌效果实现"'},"​")],-1)),l[2815]||(l[2815]=i("ol",null,[i("li",null,"新建Shader，删除无用代码"),i("li",null,"声明属性，属性映射 主纹理、颜色叠加、垂直广告牌程度（0为垂直广告牌，1为全向广告牌）"),i("li",null,"透明Shader相关 注意：关闭批处理，并让其两面渲染"),i("li",null,"结构体相关 顶点和纹理坐标"),i("li",null,"顶点着色器 5-1:确定新坐标中心点 5-2:计算Z轴（normal），将摄像机坐标转到模型空间 5-3:用垂直广告牌程度改变Z轴y值后，单位化 5-4:声明Y轴（old up） 5-5:利用Z轴（normal）和Y轴（old up）叉乘计算出X轴（right） 5-6:利用Z轴（normal）和X轴（right）叉乘计算出Y轴（up） 5-7:得到顶点相对于新坐标系中心点的偏移位置 5-8:利用新中心点和3轴计算出顶点新位置 5-9:新顶点转到裁剪空间 5-10:UV缩放偏移"),i("li",null,"片元着色器 直接采样 叠加颜色即可")],-1)),l[2816]||(l[2816]=i("div",{class:"language-tex"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"tex"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'Shader "Unlit/Lesson95_Billboarding"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        _MainTex ("Texture", 2D) = "white" {}')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        _Color("Color", Color) = (1,1,1,1)')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        //用于控制垂直广告牌和全向广告牌的变化")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        _VerticalBillboarding("VerticalBillboarding", Range(0,1)) = 1')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        Tags { "RenderType"="Transparent" "Queue"="Transparent" "IgnoreProjector"="True" "DisableBatching"="True" }')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ZWrite Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Blend SrcAlpha OneMinusSrcAlpha")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Cull Off")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 uv : TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 vertex : SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            sampler2D _MainTex;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float4 _MainTex_ST;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            fixed4 _Color;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float _VerticalBillboarding;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            v2f vert (appdata_base v)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2f o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //新坐标系的中心点（默认我们还是使用的模型空间原定）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 center = float3(0,0,0);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //计算Z轴（normal）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 cameraInObjectPos = mul(unity_WorldToObject, float4(_WorldSpaceCameraPos, 1));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //得到Z轴对应的向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 normalDir = cameraInObjectPos - center;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //相当于把y往下压，如果_VerticalBillboarding是0 就代表把我们Z轴压到了xz平面 如果是1 那么就是正常的视角方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                normalDir.y *= _VerticalBillboarding;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //单位化Z轴")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                normalDir = normalize(normalDir);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //模型空间下的Y轴正方向 作为它的 old up")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //为了避免z轴和010重合 ，因为重合后再计算叉乘 可能会得到0向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 upDir = normalDir.y > 0.999 ? float3(0,0,1) : float3(0,1,0);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //利用叉乘计算X轴（right）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 rightDir = normalize(cross(upDir, normalDir));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //去计算我们的Y轴 也就是newup")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                upDir = normalize(cross(normalDir, rightDir));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //得到顶点相对于新坐标系中心点的偏移位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 centerOffset = v.vertex.xyz - center;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //利用3个轴向进行最终的顶点位置的计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 newVertexPos = center + rightDir * centerOffset.x + upDir * centerOffset.y + normalDir * centerOffset.z;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //把新顶点转换到裁剪空间")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.vertex = UnityObjectToClipPos(float4(newVertexPos, 1));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //uv坐标偏移缩放")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv = v.texcoord.xy * _MainTex_ST.xy + _MainTex_ST.zw;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                return o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            fixed4 frag (v2f i) : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 color = tex2D(_MainTex, i.uv);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                color.rgb *= _Color.rgb;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                return color;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2817]||(l[2817]=i("hr",null,null,-1)),l[2818]||(l[2818]=i("h3",{id:"五、顶点坐标的注意事件",tabindex:"-1"},[s("五、顶点坐标的注意事件 "),i("a",{class:"header-anchor",href:"#五、顶点坐标的注意事件","aria-label":'Permalink to "五、顶点坐标的注意事件"'},"​")],-1)),l[2819]||(l[2819]=i("h4",{id:"_1-批处理",tabindex:"-1"},[s("1.批处理 "),i("a",{class:"header-anchor",href:"#_1-批处理","aria-label":'Permalink to "1.批处理"'},"​")],-1)),l[2820]||(l[2820]=i("blockquote",null,[i("p",null,"为什么批处理会影响顶点动画")],-1)),l[2821]||(l[2821]=i("p",null,[s("Unity中默认有静态批处理和动态批处理 "),i("strong",null,"批处理的主要作用是")],-1)),a(n,{color:"red"},{default:k(()=>[...l[828]||(l[828]=[s("合并多个对象，将他们作为一个DrawCall进行处理",-1)])]),_:1}),l[2822]||(l[2822]=i("p",null,"之所以批处理会对顶点动画带来影响 是因为 不同的对象会拥有不同的变换矩阵（位置、旋转、缩放） 而批处理后 他们的变换矩阵会进行统一处理",-1)),l[2823]||(l[2823]=i("p",null,[i("strong",null,"举例："),i("strong",null,"物体A:位于世界空间位置 (0, 0, 0)，无旋转。"),i("strong",null,"物体B:位于世界空间位置 (5, 0, 0)，无旋转。"),i("strong",null,"他们是两个独立的对象，拥有不同的变换矩阵")],-1)),l[2824]||(l[2824]=i("p",null,[i("strong",null,"不进行批处理时："),s(" 每个对象的变换矩阵会单独传递给Shader，顶点的模型空间位置会根据各自的变换进行正确计算")],-1)),l[2825]||(l[2825]=i("p",null,[i("strong",null,"进行批处理时："),s(" 启用批处理后，Unity会将对象A和对象B合并为一个Draw Call，并使用一个统一的变换矩阵 比如在静态批处理中，Unity会将对象A和对象B的顶点合并为一个网格，并使用统一的变换进行渲染 批处理后顶点位置是混合的，Shader中无法区分不同对象的模型空间位置 可能带来的问题有:")],-1)),a(n,{color:"red"},{default:k(()=>[...l[829]||(l[829]=[s("顶点动画失效：",-1)])]),_:1}),l[2826]||(l[2826]=i("p",null,"假设你希望顶点在模型空间的x方向上进行sin波动动画。 如果对象A和对象B的模型空间位置被混合，波动动画会变得不可预测",-1)),a(n,{color:"red"},{default:k(()=>[...l[830]||(l[830]=[s("变换混淆：",-1)])]),_:1}),l[2827]||(l[2827]=i("p",null,"对象A和对象B有不同的变换矩阵。 如果批处理后使用统一的变换矩阵，Shader无法区分每个顶点属于哪个对象，导致所有顶点的动画效果混淆。",-1)),l[2828]||(l[2828]=i("p",null,[i("strong",null,"总结："),s(" 批处理会让对象失去独立性 相当于将多个对象之间独立的模型空间坐标系合并为一个坐标系 从而影响顶点的相对位置和变换矩阵等信息 导致顶点动画结果异常 因此我们通过渲染标签来关闭批处理")],-1)),l[2829]||(l[2829]=i("blockquote",null,[i("p",null,"关闭批处理带来的问题")],-1)),l[2830]||(l[2830]=i("p",null,[s("关闭批处理带来的最直接问题就是导致 "),i("strong",null,"DrawCall的提升"),i("strong",null,"DrawCall的提升可能会带来性能问题")],-1)),l[2831]||(l[2831]=i("p",null,[i("strong",null,"如果DrawCall的增加并没有带来性能问题"),i("strong",null,"那我们可以通过关闭批处理来解决顶点动画问题"),s(" 如果带来了性能问题，并且必须优化带有顶点动画的Shader，我们应该如何解决呢？")],-1)),l[2832]||(l[2832]=i("blockquote",null,[i("p",null,"如何解决问题")],-1)),i("ol",null,[i("li",null,[l[832]||(l[832]=i("strong",null,"顶点颜色",-1)),a(n,{color:"red"},{default:k(()=>[...l[831]||(l[831]=[s("利用顶点颜色来存储每个顶点的位置信息或相对位置信息",-1)])]),_:1}),l[833]||(l[833]=i("strong",null,"我们在tex代码中获取模型网格顶点数据，将数据存储到网格的颜色属性中",-1)),l[834]||(l[834]=s(" 在Shader中通过颜色属性获取顶点信息",-1))])]),l[2833]||(l[2833]=i("div",{class:"language-tex"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"tex"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"MeshFilter meshFilter = GetComponent<MeshFilter>();")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"if (meshFilter != null)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Mesh mesh = meshFilter.mesh;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Vector3[] vertices = mesh.vertices;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Color[] colors = new Color[vertices.Length];")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    for (int i = 0; i < vertices.Length; i++)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        // 将模型空间位置存储在顶点颜色中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        colors[i] = new Color(vertices[i].x, vertices[i].y, vertices[i].z, 1);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    mesh.colors = colors;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2834]||(l[2834]=i("ol",{start:"2"},[i("li",null,[i("p",null,[i("strong",null,"uv通道")]),i("p",null,"和上面的顶点颜色方案类似，只是把相关信息存储到uv通道中而已，但是一般在存储两个值时使用")])],-1)),l[2835]||(l[2835]=i("hr",null,null,-1)),l[2836]||(l[2836]=i("h4",{id:"_2-阴影",tabindex:"-1"},[s("2. 阴影 "),i("a",{class:"header-anchor",href:"#_2-阴影","aria-label":'Permalink to "2. 阴影"'},"​")],-1)),l[2837]||(l[2837]=i("blockquote",null,[i("p",null,"顶点动画物体投射阴影")],-1)),l[2838]||(l[2838]=i("p",null,"我们可以为有顶点动画的物体 使用 LightMode(灯光模式) 为 ShadowCaster(阴影投射) 的 Pass(渲染通道) 这样它便能投射阴影 但是如果我们直接使用内置的这种Pass（默认Shader中的，通过FallBack寻找到的） 投射的阴影会是不正确的，因为默认Pass当中并不会使用新的顶点位置来投射 而是按照模型原来的顶点位置来计算阴影的 举例：",-1)),l[2839]||(l[2839]=i("ol",null,[i("li",null,"新建一个Shader,复制 Lesson94_2DWater 流动的2D河流的Shader代码"),i("li",null,"为其加上一个不透明的FallBackShader 比如VertexLit"),i("li",null,"在Mesh Renderer中开启双面投射阴影")],-1)),l[2840]||(l[2840]=i("p",null,"这时我们使用该Shader投射出来的阴影是没有经过顶点动画变化的模型阴影",-1)),l[2841]||(l[2841]=i("blockquote",null,[i("p",null,"让顶点动画物体投射正确的阴影")],-1)),l[2842]||(l[2842]=i("pre",null,[i("code",null,`我们需要自定义一个LightMode(灯光模式) 为 ShadowCaster(阴影投射) 的 Pass(渲染通道)

在顶点着色器函数中进行顶点相关的计算
`)],-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[835]||(l[835]=[s("为知识点一种创建的Shader复制基础阴影投射渲染通道代码 Lesson64_ForwardLighting 中注释掉的Pass",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[836]||(l[836]=[s("在该Pass中加入 波形频率、波长的倒数、波形幅度 属性的映射",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[837]||(l[837]=[s("在该Pass中的顶点着色器函数中 加入顶点的偏移计算（直接复制前面的代码）",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[838]||(l[838]=[s("直接对模型空间中顶点进行偏移，不用进行裁剪坐标空间变换以及UV相关计算",-1)])]),_:1})])]),l[2843]||(l[2843]=i("blockquote",null,[i("p",null,"总结")],-1)),l[2844]||(l[2844]=i("p",null,[i("strong",null,"想要让带有顶点动画的对象产生正确的阴影")],-1)),a(n,{color:"red"},{default:k(()=>[...l[839]||(l[839]=[s("我们需要自定义 投射阴影的Pass（渲染通道）",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[840]||(l[840]=[s("在其中加入对顶点的变换计算即可",-1)])]),_:1}),l[2845]||(l[2845]=i("h5",{id:"实现-12",tabindex:"-1"},[s("实现 "),i("a",{class:"header-anchor",href:"#实现-12","aria-label":'Permalink to "实现"'},"​")],-1)),l[2846]||(l[2846]=i("div",{class:"language-tex"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"tex"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'Shader "Unlit/Lesson97"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"     Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        _MainTex ("Texture", 2D) = "white" {}')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        _Color("Color", Color) = (1,1,1,1)')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        //波动幅度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        _WaveAmplitude("WaveAmplitude", Float) = 1')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        //波动频率")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        _WaveFrequency("WaveFrequency", Float) = 1')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        //波长的倒数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        _InvWaveLength("InvWaveLength", Float) = 1')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        //纹理变化速度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        _Speed("Speed", Float) = 1')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        //透明Shader相关渲染标签 + 关闭批处理标签")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        Tags { "RenderType"="Transparent" "Queue"="Transparent" "IgnoreProjector"="True" "DisableBatching"="True" }')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ZWrite Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Blend SrcAlpha OneMinusSrcAlpha")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 uv : TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 vertex : SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            sampler2D _MainTex;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float4 _MainTex_ST;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float4 _Color;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float _WaveAmplitude;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float _WaveFrequency;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float _InvWaveLength;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float _Speed;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            v2f vert (appdata_base v)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2f o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //模型空间下的偏移位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 offset;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //让它在模型空间的x轴方向进行偏移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                offset.x = sin(_Time.y * _WaveFrequency + v.vertex.z * _InvWaveLength) * _WaveAmplitude;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                offset.yzw = float3(0,0,0);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.vertex = UnityObjectToClipPos(v.vertex + offset);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv = v.texcoord * _MainTex_ST.xy + _MainTex_ST.zw;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv += float2(0, _Time.y *_Speed );")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                return o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            fixed4 frag (v2f i) : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                fixed4 color = tex2D(_MainTex,i.uv);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                color.rgb *= _Color.rgb;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                return color;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        //该注释主要用于进行阴影投影 主要是用来计算阴影映射纹理的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            Tags{"LightMode" = "ShadowCaster"}')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            //  该编译指令时告诉Unity编译器生成多个着色器变体")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            //  用于支持不同类型的阴影（SM，SSSM等等）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            //  可以确保着色器能够在所有可能的阴影投射模式下正确渲染")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma multi_compile_shadowcaster")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            //  其中包含了关键的阴影计算相关的宏")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //顶点到片元着色器阴影投射结构体数据宏")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //这个宏定义了一些标准的成员变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //这些变量用于在阴影投射路径中传递顶点数据到片元着色器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //我们主要在结构体中使用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                V2F_SHADOW_CASTER;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float _WaveAmplitude;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float _WaveFrequency;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float _InvWaveLength;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            v2f vert(appdata_base v)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2f data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //模型空间下的偏移位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 offset;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //让它在模型空间的x轴方向进行偏移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                offset.x = sin(_Time.y * _WaveFrequency + v.vertex.z * _InvWaveLength) * _WaveAmplitude;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                offset.yzw = float3(0,0,0);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //需要进行顶点偏移位置的修改")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //直接在模型空间下顶点坐标进行计算即可")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v.vertex = v.vertex + offset;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //o.vertex = UnityObjectToClipPos(v.vertex + offset);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //转移阴影投射器法线偏移宏")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //用于在顶点着色器中计算和传递阴影投射所需的变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //主要做了")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //2-2-1.将对象空间的顶点位置转换为裁剪空间的位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //2-2-2.考虑法线偏移，以减轻阴影失真问题，尤其是在处理自阴影时")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //2-2-3.传递顶点的投影空间位置，用于后续的阴影计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //我们主要在顶点着色器中使用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                TRANSFER_SHADOW_CASTER_NORMALOFFSET(data);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                return data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float4 frag(v2f i):SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //阴影投射片元宏")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //将深度值写入到阴影映射纹理中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                //我们主要在片元着色器中使用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                SHADOW_CASTER_FRAGMENT(i);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'    Fallback "VertexLit"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2847]||(l[2847]=i("hr",null,null,-1)),l[2848]||(l[2848]=i("h2",{id:"屏幕后期处理效果",tabindex:"-1"},[s("屏幕后期处理效果 "),i("a",{class:"header-anchor",href:"#屏幕后期处理效果","aria-label":'Permalink to "屏幕后期处理效果"'},"​")],-1)),l[2849]||(l[2849]=i("h3",{id:"一、网格、网格渲染器、材质、着色器",tabindex:"-1"},[s("一、网格、网格渲染器、材质、着色器 "),i("a",{class:"header-anchor",href:"#一、网格、网格渲染器、材质、着色器","aria-label":'Permalink to "一、网格、网格渲染器、材质、着色器"'},"​")],-1)),l[2850]||(l[2850]=i("h4",{id:"_1-网格-mesh",tabindex:"-1"},[s("1. 网格（Mesh） "),i("a",{class:"header-anchor",href:"#_1-网格-mesh","aria-label":'Permalink to "1. 网格（Mesh）"'},"​")],-1)),l[2851]||(l[2851]=i("p",null,[i("strong",null,"网格是一个3D对象的几何数据。")],-1)),a(n,{color:"red"},{default:k(()=>[...l[841]||(l[841]=[s("它由顶点、边和面组成。网格描述了对象的形状和结构，定义了3D模型的轮廓。",-1)])]),_:1}),l[2852]||(l[2852]=i("p",null,[s("网格中"),i("strong",null,"包含了模型的关键数据"),s(" 比如： 顶点、法线、切线、纹理坐标、顶点颜色、骨骼权重、骨骼索引、网格边界等等信息 我们在Shader中使用的模型的数据就来自于Mesh")],-1)),l[2853]||(l[2853]=i("p",null,[i("strong",null,"Unity中不带骨骼动画的模型网格数据一般在MeshFilter（网格过滤器）组件中进行关联"),i("strong",null,"而带骨骼动画的模型网格数据一般在Skinned Mesh Renderer（蒙皮网格渲染器）中进行关联")],-1)),l[2854]||(l[2854]=i("h4",{id:"_2-网格渲染器-mesh-renderer",tabindex:"-1"},[s("2. 网格渲染器（Mesh Renderer） "),i("a",{class:"header-anchor",href:"#_2-网格渲染器-mesh-renderer","aria-label":'Permalink to "2. 网格渲染器（Mesh Renderer）"'},"​")],-1)),i("p",null,[l[843]||(l[843]=s("网格渲染器是Unity中的一个组件，",-1)),a(n,{color:"red"},{default:k(()=>[...l[842]||(l[842]=[s("用于将网格绘制到屏幕上",-1)])]),_:1}),l[844]||(l[844]=s(" 它主要用来",-1))]),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[845]||(l[845]=[s("引用一个网格对象来获取几何数据，Mesh Renderer组件会自动寻找同一GameObject上",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[846]||(l[846]=[s("Mesh Filter组件中的网格（Mesh）并将其渲染出来",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[847]||(l[847]=[s("引用一个或多个材质，用于定义对象的外观",-1)])]),_:1})])]),i("p",null,[l[849]||(l[849]=s("一般",-1)),a(n,{color:"red"},{default:k(()=>[...l[848]||(l[848]=[s("不带骨骼动画的模型都使用网格渲染器来进行渲染",-1)])]),_:1}),l[850]||(l[850]=s(" 比如： 游戏中的建筑物，箱子，地面等等不需要骨骼动画的模型",-1))]),l[2855]||(l[2855]=i("h4",{id:"_3-蒙皮网格渲染器-skinned-mesh-renderer",tabindex:"-1"},[s("3. 蒙皮网格渲染器（Skinned Mesh Renderer） "),i("a",{class:"header-anchor",href:"#_3-蒙皮网格渲染器-skinned-mesh-renderer","aria-label":'Permalink to "3. 蒙皮网格渲染器（Skinned Mesh Renderer）"'},"​")],-1)),i("p",null,[l[852]||(l[852]=s("蒙皮网格渲染器是一种特殊的网格渲染器，",-1)),a(n,{color:"red"},{default:k(()=>[...l[851]||(l[851]=[s("用于处理带有骨骼动画的网格",-1)])]),_:1}),l[853]||(l[853]=s("。 它不仅",-1)),l[854]||(l[854]=i("strong",null,"处理网格的几何数据，还处理骨骼和权重，允许网格根据骨骼动画进行变形",-1)),l[855]||(l[855]=s("。 使用蒙皮网格渲染器的对象不需要再使用Mesh Filter组件 它可以直接关联对应的网格信息",-1))]),l[2856]||(l[2856]=i("p",null,"一般带有动画的模型都使用蒙皮网格渲染器来进行渲染 比如： 游戏中的角色、怪物、机关等等",-1)),l[2857]||(l[2857]=i("h4",{id:"_4-材质-material",tabindex:"-1"},[s("4. 材质（Material） "),i("a",{class:"header-anchor",href:"#_4-材质-material","aria-label":'Permalink to "4. 材质（Material）"'},"​")],-1)),l[2858]||(l[2858]=i("p",null,"材质我们也可以称为材质球 它定义了模型网格的外观",-1)),a(n,{color:"red"},{default:k(()=>[...l[856]||(l[856]=[s("材质包含对一个着色器的引用，并通过一组属性（例如颜色、纹理等等信息）来配置着色器",-1)])]),_:1}),l[2859]||(l[2859]=i("p",null,"一个模型可以有多个材质，每个材质应用于模型的不同部分",-1)),l[2860]||(l[2860]=i("h4",{id:"_5-着色器",tabindex:"-1"},[s("5. 着色器 "),i("a",{class:"header-anchor",href:"#_5-着色器","aria-label":'Permalink to "5. 着色器"'},"​")],-1)),l[2861]||(l[2861]=i("p",null,[s("是一种用于"),i("strong",null,"描述如何渲染图形和计算图形外观的程序"),s(" 主要用于"),i("strong",null,"控制图形的颜色、光照、纹理和其他视觉效果"),s(" 它是运行在"),i("strong",null,"GPU上的程序，用于计算每个像素的颜色")],-1)),l[2862]||(l[2862]=i("h4",{id:"_6-它们之间的关系",tabindex:"-1"},[s("6. 它们之间的关系 "),i("a",{class:"header-anchor",href:"#_6-它们之间的关系","aria-label":'Permalink to "6. 它们之间的关系"'},"​")],-1)),l[2863]||(l[2863]=i("div",{class:"language-tex"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"tex"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Mesh Renderer(网格渲染器)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," └── Mesh(网格) —— MeshFilter(网格过滤器组件进行关联)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"       └── Geometry Data(几何数据)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," └── Material(材质)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"       └── Shader(着色器)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"       └── Properties(属性：颜色、纹理等 —— 在Shader中决定哪些属性暴露在材质上)")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Skinned Mesh Renderer(蒙皮网格渲染器)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," └── Mesh(网格)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"       └── Geometry Data(几何数据)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," └── Bones & Weights(骨骼与权重)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," └── Material(材质)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"       └── Shader(着色器)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"       └── Properties(属性：颜色、纹理等 —— 在Shader中决定哪些属性暴露在材质上)")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2864]||(l[2864]=i("hr",null,null,-1)),l[2865]||(l[2865]=i("h3",{id:"二、屏幕后期处理效果",tabindex:"-1"},[s("二、屏幕后期处理效果 "),i("a",{class:"header-anchor",href:"#二、屏幕后期处理效果","aria-label":'Permalink to "二、屏幕后期处理效果"'},"​")],-1)),i("p",null,[l[858]||(l[858]=s("**屏幕后期处理效果（ Screen Post-Processing Effects）**是一种在",-1)),a(n,{color:"red"},{default:k(()=>[...l[857]||(l[857]=[s("渲染管线的最后阶段应用的视觉效果",-1)])]),_:1}),l[859]||(l[859]=s(" 允许你在场景渲染完成后对最终图像进行各种调整和效果处理，从而增强视觉体验 常见的屏幕后期处理效果有： ",-1)),l[860]||(l[860]=i("strong",null,"景深、模糊、色彩调整 等等",-1))]),l[2866]||(l[2866]=i("p",null,[s("说人话： "),i("strong",null,"屏幕后期处理效果就是当游戏画面渲染完毕后")],-1)),a(n,{color:"red"},{default:k(()=>[...l[861]||(l[861]=[s("通过获取到该画面信息进行额外的效果处理",-1)])]),_:1}),l[2867]||(l[2867]=i("h4",{id:"_1-基本实现原理",tabindex:"-1"},[s("1. 基本实现原理 "),i("a",{class:"header-anchor",href:"#_1-基本实现原理","aria-label":'Permalink to "1. 基本实现原理"'},"​")],-1)),l[2868]||(l[2868]=i("blockquote",null,[i("p",null,[i("strong",null,"如何获取 游戏画面渲染完毕后的画面信息")])],-1)),l[2869]||(l[2869]=i("p",null,"在Unity中获取渲染纹理的常用方法有三种",-1)),a(n,{color:"red"},{default:k(()=>[...l[862]||(l[862]=[s("RenderTexture、GrabPass、OnRenderImage",-1)])]),_:1}),l[2870]||(l[2870]=i("p",null,[s("我们在处理屏幕后期处理效果时会使用 "),i("strong",null,"OnRenderImage函数来获取"),s(" 游戏画面渲染完毕后的画面信息")],-1)),l[2871]||(l[2871]=i("blockquote",null,[i("p",null,[i("strong",null,"如何为 获取到的画面信息添加自定义效果")])],-1)),l[2872]||(l[2872]=i("p",null,"主要思路是将获取到的游戏画面作为 自定义Shader的主纹理 通过自定义Shader利用捕获的画面来实现自定义效果",-1)),l[2873]||(l[2873]=i("h4",{id:"_2-捕获画面的关键——onrenderimage函数",tabindex:"-1"},[s("2. 捕获画面的关键——OnRenderImage函数 "),i("a",{class:"header-anchor",href:"#_2-捕获画面的关键——onrenderimage函数","aria-label":'Permalink to "2. 捕获画面的关键——OnRenderImage函数"'},"​")],-1)),l[2874]||(l[2874]=i("div",{class:"language-C#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"C#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"OnRenderImage函数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"它是在继承了MonoBehaviour的脚本中能够被自动调用的函数（类似生命周期函数）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"它会在图像的渲染操作完成后调用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"它的固定写法是：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"void"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," OnRenderImage"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"RenderTexture"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," source"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"RenderTexture"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," destination"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"第一个参数：源渲染纹理，当前渲染得到的屏幕图像存储在该参数当中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"第二个参数：目标渲染纹理，将经过处理后的图像写入到目标纹理中用于最终的显示")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"通过该函数我们便可以得到当前渲染的游戏画面")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"并在该函数中对画面对应的渲染纹理进行处理后用于最终显示")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"注意：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"该函数得到的源纹理默认是在所有的不透明和透明的Pass执行完毕后调用的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"基于该源纹理进行修改会对游戏场景中所有游戏对象产生影响")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"如果你想要在不透明的Pass执行完毕后就调用该函数，只需要在该函数前加上特性")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[ImageEffectOpaque]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"这样就不会对透明物体产生影响")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2875]||(l[2875]=i("h4",{id:"_3-实现效果的关键——graphics-blit函数",tabindex:"-1"},[s("3.实现效果的关键——Graphics.Blit函数 "),i("a",{class:"header-anchor",href:"#_3-实现效果的关键——graphics-blit函数","aria-label":'Permalink to "3.实现效果的关键——Graphics.Blit函数"'},"​")],-1)),l[2876]||(l[2876]=i("div",{class:"language-C#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"C#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Graphics.Blit函数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"用于将一个图像从一个纹理复制到另一个纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"同时可以在这个过程中用着色器对图像进行处理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"它有很多重载，我们主要讲解几个常用的：")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".将源纹理直接复制到目标纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Graphics."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Blit"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (Texture source, RenderTexture dest)")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".将源纹理复制到目标纹理并应用一个材质")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Graphics."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Blit"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (Texture source, RenderTexture dest, Material mat, "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"int"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pass"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"source源纹理会被传递给mat材质中Shader中名为_MainTex的纹理属性用于进行处理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"pass参数默认值为"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"，表示会依次调用Shader内的所有Pass进行处理，否则，只会调用给定索引的Pass")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2877]||(l[2877]=i("h4",{id:"_4-补充函数",tabindex:"-1"},[s("4.补充函数 "),i("a",{class:"header-anchor",href:"#_4-补充函数","aria-label":'Permalink to "4.补充函数"'},"​")],-1)),l[2878]||(l[2878]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".Shader.isSupported")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"如何判断Shader在目标平台和硬件上是否能正确运行")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"我们可以通过获取Shader对象中的isSupported属性判断")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"如果返回false,不支持")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"如果返回true,支持")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".[ExecuteInEditMode]特性")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"用于使脚本在编辑器模式下也能执行")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".["),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"RequireComponent"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"typeof"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"组件名"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"))]特性")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"指定某个脚本所依赖的组件，它确保当你将脚本附加到游戏对象时，")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"所需的组件也会自动添加到该游戏对象中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"如果这些组件已经存在，它们不会被重复添加")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"因为后处理脚本一般添加到摄像机上，因此我们用于依赖摄像机")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".材质球中的 HideFlags 枚举")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"从材质球对象中可以点出 HideFlags 枚举")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"HideFlags.None"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 对象是完全可见和可编辑的。这是默认值。")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"HideFlags.HideInHierarchy"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 对象在层级视图中被隐藏，但仍然存在于场景中。")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"HideFlags.HideInInspector"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 对象在检查器中被隐藏，但仍然存在于层级视图中。")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"HideFlags.DontSaveInEditor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 对象不会被保存到场景中。适用于编辑器模式，不会影响播放模式。")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"HideFlags.NotEditable"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 对象在检查器中是只读的，不能被修改。")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"HideFlags.DontSaveInBuild"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 对象不会被包含在构建中。")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"HideFlags.DontUnloadUnusedAsset"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 对象在资源清理时不会被卸载，即使它没有被引用。")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"HideFlags.DontSave"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 对象不会被保存到场景中，不会在构建中保存，也不会在编辑器中保存。")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"这是 DontSaveInEditor "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"|"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," DontSaveInBuild "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"|"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," DontUnloadUnusedAsset 的组合。")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"如果想要设置枚举满足多个条件 直接多个枚举 进行位或运算即可 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"|")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2879]||(l[2879]=i("p",null,[i("strong",null,"注意："),s(" 在一些老版本中，你可能还会在基类中判断目标平台是否支持屏幕后处理和渲染纹理 一般通过Unity中的SystemInfo类判断 该类可以用于确定底层平台和硬件相关的功能是否被支持 官方说明："),i("a",{href:"https://docs.unity.cn/cn/2022.3/ScriptReference/SystemInfo.html",target:"_blank",rel:"noreferrer"},"https://docs.unity.cn/cn/2022.3/ScriptReference/SystemInfo.html")],-1)),l[2880]||(l[2880]=i("hr",null,null,-1)),l[2881]||(l[2881]=i("h3",{id:"三、亮度、饱和度、对比",tabindex:"-1"},[s("三、亮度、饱和度、对比 "),i("a",{class:"header-anchor",href:"#三、亮度、饱和度、对比","aria-label":'Permalink to "三、亮度、饱和度、对比"'},"​")],-1)),l[2882]||(l[2882]=i("h4",{id:"_1-亮度",tabindex:"-1"},[s("1. 亮度 "),i("a",{class:"header-anchor",href:"#_1-亮度","aria-label":'Permalink to "1. 亮度"'},"​")],-1)),l[2883]||(l[2883]=i("blockquote",null,[i("p",null,"基本原理")],-1)),i("p",null,[l[864]||(l[864]=s("想要改变图像颜色的亮度 只需要对图像的每个像素",-1)),a(n,{color:"red"},{default:k(()=>[...l[863]||(l[863]=[s("进行加法(减法-加负数)或乘法(除法-乘小数)运算",-1)])]),_:1}),l[865]||(l[865]=s("即可实现",-1))]),a(n,{color:"red"},{default:k(()=>[...l[866]||(l[866]=[s("增加亮度就是 增加像素的RGB值",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[867]||(l[867]=[s("减小亮度则是 减少像素的RGB值",-1)])]),_:1}),l[2884]||(l[2884]=i("p",null,[s("也就是说我们只需要在Shader当中加入一个控制亮度的float类型的变量 然后用颜色的RGB乘以该变量或者加上该变量即可 一般我们会采用乘法的形式 即： "),i("strong",null,"最终颜色 = 原始颜色 * 亮度变量"),i("strong",null,"亮度变量 >1 时，图像变亮"),i("strong",null,"亮度变量 <1 时，图像变暗"),i("strong",null,"亮度变量 =1 时，图像不变")],-1)),l[2885]||(l[2885]=i("h4",{id:"_2-饱和度",tabindex:"-1"},[s("2. 饱和度 "),i("a",{class:"header-anchor",href:"#_2-饱和度","aria-label":'Permalink to "2. 饱和度"'},"​")],-1)),l[2886]||(l[2886]=i("blockquote",null,[i("p",null,"基本原理")],-1)),i("p",null,[l[869]||(l[869]=s("想要改变图像颜色的饱和度 只需要",-1)),a(n,{color:"red"},{default:k(()=>[...l[868]||(l[868]=[s("对图像的每个像素的颜色值 相对于灰度颜色进行插值",-1)])]),_:1}),l[870]||(l[870]=s("来实现 基本原理为以下三步：",-1))]),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[871]||(l[871]=[s("计算灰度值（亮度）",-1)])]),_:1}),l[878]||(l[878]=s("利用图像颜色RGB计算一个平均值，得到一个灰度值 但是由于人眼对不同颜色的敏感度不同，所以在计算平均值时不会直接使用算数平均（R+G+B)/3 在图形学中我们一般使用加权平均法来计算灰度值 所谓加权平均法就是通过对不同数据分配不同权重，计算出更符合实际情况的平均值 常用的权重基于",-1)),a(n,{color:"red"},{default:k(()=>[...l[872]||(l[872]=[s("Rec. 709标准",-1)])]),_:1}),l[879]||(l[879]=s("（高清电视和许多数字图像格式中常用的标准）",-1)),a(n,{color:"red"},{default:k(()=>[...l[873]||(l[873]=[s("R 红色通道的权重：0.2126",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[874]||(l[874]=[s("G 绿色通道的权重：0.7152",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[875]||(l[875]=[s("B 蓝色通道的权重：0.0722",-1)])]),_:1}),l[880]||(l[880]=s("这些权重反映了人眼对绿色最敏感，对蓝色最不敏感",-1)),a(n,{color:"red"},{default:k(()=>[...l[876]||(l[876]=[s("加权平均法公式：",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[877]||(l[877]=[s("灰度值（亮度）0.2126 * R + 0.7152 * G + 0.0722 * B",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[881]||(l[881]=[s("生成灰度颜色",-1)])]),_:1}),l[883]||(l[883]=s("利用第一步中计算出来的灰度值，生成一个灰度颜色",-1)),a(n,{color:"red"},{default:k(()=>[...l[882]||(l[882]=[s("灰度颜色 = (L, L, L)",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[884]||(l[884]=[s("插值计算",-1)])]),_:1}),l[896]||(l[896]=s("使用",-1)),a(n,{color:"red"},{default:k(()=>[...l[885]||(l[885]=[s("插值函数lerp",-1)])]),_:1}),l[897]||(l[897]=s("，在灰度颜色和原始颜色之间进行插值运算 插值系数就是用于控制饱和度的float类型的变量 公式如下：",-1)),a(n,{color:"red"},{default:k(()=>[...l[886]||(l[886]=[s("最终颜色 = lerp( 灰度颜色, 原始颜色, 饱和度变量 )",-1)])]),_:1}),l[898]||(l[898]=i("strong",null,"lerp计算原理",-1)),l[899]||(l[899]=s("：",-1)),a(n,{color:"red"},{default:k(()=>[...l[887]||(l[887]=[s("最终颜色 = 灰度颜色 + (原始颜色 − 灰度颜色)*饱和度变量",-1)])]),_:1}),i("strong",null,[l[889]||(l[889]=s("饱和度变量 = 0时，结果为",-1)),a(n,{color:"red"},{default:k(()=>[...l[888]||(l[888]=[s("灰度颜色",-1)])]),_:1})]),i("strong",null,[l[891]||(l[891]=s("饱和度变量 = 1时，",-1)),a(n,{color:"red"},{default:k(()=>[...l[890]||(l[890]=[s("保持原始颜色不变",-1)])]),_:1})]),i("strong",null,[l[893]||(l[893]=s("饱和度变量 = 0~1之间时，",-1)),a(n,{color:"red"},{default:k(()=>[...l[892]||(l[892]=[s("灰度颜色和原始颜色的混合",-1)])]),_:1})]),i("strong",null,[l[895]||(l[895]=s("饱和度变量 > 1时，",-1)),a(n,{color:"red"},{default:k(()=>[...l[894]||(l[894]=[s("颜色的RGB值超出原始范围，从而使颜色看起来更饱和",-1)])]),_:1})])])]),l[2887]||(l[2887]=i("h4",{id:"_3-颜色对比度",tabindex:"-1"},[s("3. 颜色对比度 "),i("a",{class:"header-anchor",href:"#_3-颜色对比度","aria-label":'Permalink to "3. 颜色对比度"'},"​")],-1)),i("p",null,[l[901]||(l[901]=s("想要改变图像颜色的对比度 只需要",-1)),a(n,{color:"red"},{default:k(()=>[...l[900]||(l[900]=[s("对图像的每个像素的颜色值 相对于中性灰色进行插值",-1)])]),_:1}),l[902]||(l[902]=s("来实现 基本原理为以下两步：",-1))]),i("ol",null,[i("li",null,[l[904]||(l[904]=s("声明中性灰色变量，即RGB都为0.5的颜色变量",-1)),a(n,{color:"red"},{default:k(()=>[...l[903]||(l[903]=[s("中性灰颜色 = (0.5,0.5,0.5)",-1)])]),_:1})]),i("li",null,[l[906]||(l[906]=s("在中性灰色和原始颜色之间进行插值运算",-1)),a(n,{color:"red"},{default:k(()=>[...l[905]||(l[905]=[s("最终颜色 = lerp( 中性灰色, 原始颜色, 对比度变量 )",-1)])]),_:1}),l[907]||(l[907]=i("strong",null,"对比度变量 = 0时，此时对比度降到最低，变为中性灰色",-1)),l[908]||(l[908]=i("strong",null,"对比度变量 = 1时，保持原始颜色不变",-1)),l[909]||(l[909]=i("strong",null,"对比度变量 = 0~1之间时，降低对比度效果，图像的亮度差异减少，使图像颜色看起来更平淡",-1)),l[910]||(l[910]=i("strong",null,"对比度变量 > 1时，颜色的RGB值超出原始范围，从而使颜色亮部更亮，暗部更暗，从而增加对比度",-1))])]),l[2888]||(l[2888]=i("div",{class:"language-shaderLab"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"shaderLab"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Shader"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Unlit/Lesson103_BrightnessSaturationContrast"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        _MainTex ("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Texture"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") = "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"white"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //亮度变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        _Brightness("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Brightness"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"Float"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //饱和度变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        _Saturation("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Saturation"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"Float"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //对比度变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        _Contrast("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Contrast"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"Float"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        Tags"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," { "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"RenderType"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Opaque"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"            ZTest"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," Always")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"            Cull"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"            ZWrite"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," Off")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            #pragma"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            #pragma"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," fragment frag")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            #include"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            struct"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," uv : "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"TEXCOORD0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," vertex : "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"SV_POSITION"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_ST;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            half"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Brightness;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            half"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Saturation;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            half"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Contrast;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            v2f "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"appdata_base"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v2f o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.vertex = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"TRANSFORM_TEX"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.texcoord, _MainTex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed4"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (v2f i) : "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //从捕获的主纹理中采样")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," renderTexColor = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //亮度计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," finalColor = renderTexColor.rgb * _Brightness;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //饱和度计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," L = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0.2126"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"*finalColor.r + "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0.7152"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"*finalColor.g + "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0.722"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"*finalColor.b;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," LColor = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"fixed3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(L,L,L);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                finalColor = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"lerp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(LColor, finalColor, _Saturation);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //对比度计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," avgColor = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"fixed3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0.5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0.5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0.5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                finalColor = "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"lerp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(avgColor, finalColor, _Contrast);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(finalColor.rgb, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"    Fallback"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2889]||(l[2889]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," System"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Collections"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," System"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Collections"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Generic"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityEngine"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," class"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Lesson103_BrightnessSaturationContrast"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"PostEffectBase")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ["),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Brightness"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ["),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Saturation"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ["),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Contrast"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    /// <"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"summary"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    /// 更新相关属性")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    /// </"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"summary"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    protected"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," override"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," void"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UpdateProperty"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (material "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"!="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," null"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            material."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"SetFloat"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"_Brightness"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Brightness);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            material."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"SetFloat"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"_Saturation"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Saturation);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            material."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"SetFloat"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"_Contrast"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Contrast);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2890]||(l[2890]=i("hr",null,null,-1)),l[2891]||(l[2891]=i("h3",{id:"四、边缘检测",tabindex:"-1"},[s("四、边缘检测 "),i("a",{class:"header-anchor",href:"#四、边缘检测","aria-label":'Permalink to "四、边缘检测"'},"​")],-1)),l[2892]||(l[2892]=i("h4",{id:"_1-边缘检测效果是什么",tabindex:"-1"},[s("1. 边缘检测效果是什么 "),i("a",{class:"header-anchor",href:"#_1-边缘检测效果是什么","aria-label":'Permalink to "1. 边缘检测效果是什么"'},"​")],-1)),l[2893]||(l[2893]=i("p",null,"边缘检测效果，是一种",-1)),i("p",null,[l[912]||(l[912]=s("用于",-1)),a(n,{color:"red"},{default:k(()=>[...l[911]||(l[911]=[s("突出图像中的边缘，使物体的轮廓更加明显",-1)])]),_:1}),l[913]||(l[913]=s("的图像处理技术",-1))]),l[2894]||(l[2894]=i("p",null,[i("strong",null,"边缘检测"),s("的主要目的是"),i("strong",null,"找到图像中亮度变化显著的区域，这些区域通常对应于物体的边界")],-1)),a(n,{color:"red"},{default:k(()=>[...l[914]||(l[914]=[s("边缘检测相当于利用Shader 代码自动给屏幕图像进行描边处理",-1)])]),_:1}),l[2895]||(l[2895]=i("h4",{id:"_2-边缘检测效果的基本原理",tabindex:"-1"},[s("2. 边缘检测效果的基本原理 "),i("a",{class:"header-anchor",href:"#_2-边缘检测效果的基本原理","aria-label":'Permalink to "2. 边缘检测效果的基本原理"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[915]||(l[915]=[s("计算每个像素的灰度值，用灰度值结合卷积核进行卷积运算，得到该像素的梯度值",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[916]||(l[916]=[s("梯度值越大越靠近边界，越趋近于描边颜色",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[917]||(l[917]=[s("梯度值越小表明不是边界位置，越趋近于原始颜色",-1)])]),_:1}),l[2896]||(l[2896]=i("h4",{id:"_3-灰度值",tabindex:"-1"},[s("3. 灰度值 "),i("a",{class:"header-anchor",href:"#_3-灰度值","aria-label":'Permalink to "3. 灰度值"'},"​")],-1)),l[2897]||(l[2897]=i("p",null,"由于人眼对不同颜色的敏感度不同，所以在计算平均值时不会直接使用算数平均（R+G+B)/3 在图形学中我们一般使用加权平均法来计算灰度值 所谓加权平均法就是通过对不同数据分配不同权重，计算出更符合实际情况的平均值",-1)),l[2898]||(l[2898]=i("p",null,[s("下面是基于"),i("strong",null,"Rec. 709"),s("标准计算的灰度值（高清电视和许多数字图像格式中常用的标准）")],-1)),a(n,{color:"red"},{default:k(()=>[...l[918]||(l[918]=[s("灰度值L = 0.2126*R + 0.7152*G + 0.0722*B",-1)])]),_:1}),l[2899]||(l[2899]=i("h4",{id:"_4-卷积、卷积核、梯度值",tabindex:"-1"},[s("4. 卷积、卷积核、梯度值 "),i("a",{class:"header-anchor",href:"#_4-卷积、卷积核、梯度值","aria-label":'Permalink to "4.  卷积、卷积核、梯度值"'},"​")],-1)),l[2900]||(l[2900]=i("p",null,[i("strong",null,"卷积"),s("是一种数学计算方式")],-1)),l[2901]||(l[2901]=i("p",null,"我们首先通过一个比喻来理解卷积在边缘检测中的作用",-1)),i("p",null,[l[924]||(l[924]=s("它就像是要用一个**放大镜（",-1)),a(n,{color:"red"},{default:k(()=>[...l[919]||(l[919]=[s("卷积核",-1)])]),_:1}),l[925]||(l[925]=s("）**在图片上移动，**放大镜",-1)),a(n,{color:"red"},{default:k(()=>[...l[920]||(l[920]=[s("（卷积核）",-1)])]),_:1}),l[926]||(l[926]=i("strong",null,"的作用是帮助我们看到图 片上的细微变化。当我们用这个",-1)),l[927]||(l[927]=s("放大镜（",-1)),a(n,{color:"red"},{default:k(()=>[...l[921]||(l[921]=[s("卷积核",-1)])]),_:1}),l[928]||(l[928]=s("）**扫描整张图片时，它能帮助我们",-1)),a(n,{color:"red"},{default:k(()=>[...l[922]||(l[922]=[s("发现",-1)])]),_:1}),l[929]||(l[929]=s("图片上",-1)),a(n,{color:"red"},{default:k(()=>[...l[923]||(l[923]=[s("哪些地方颜色变化突然，这些突然变化的地方往往就是物体的边缘了",-1)])]),_:1})]),a(h,{face:"shader/屏幕后期:卷积"}),i("p",null,[l[931]||(l[931]=s("从卷积的计算方式我们可以得知，其中",-1)),a(n,{color:"red"},{default:k(()=>[...l[930]||(l[930]=[s("卷积核（也被称为边缘检测因子）",-1)])]),_:1})]),l[2902]||(l[2902]=i("p",null,"是非常重要的一个元素，在图形学中，有三种常用的卷积核（边缘检测因子）",-1)),l[2903]||(l[2903]=i("p",null,"他们分别是：",-1)),i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[932]||(l[932]=[s("Roberts 算子：",-1)])]),_:1}),l[933]||(l[933]=s("由拉里·罗伯茨(Larry Roberts)于1965年提出",-1))])]),i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[934]||(l[934]=[s("Prewitt 算子：",-1)])]),_:1}),l[935]||(l[935]=s("由约翰·普雷维特(John Prewitt)于1970年提出",-1))])]),i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[936]||(l[936]=[s("Sobel 算子：",-1)])]),_:1}),l[937]||(l[937]=s("由欧文·索贝尔(Irwin Sobel)于1968年提出",-1))])]),i("p",null,[l[939]||(l[939]=s("他们各有千秋，但是在图形学中",-1)),a(n,{color:"red"},{default:k(()=>[...l[938]||(l[938]=[s("最常用的还是Sobel算子 ",-1)])]),_:1})]),l[2904]||(l[2904]=i("p",null,"因为它更适合高精度的边缘检测",-1)),a(h,{face:"shader/屏幕后期:卷积2"}),l[2905]||(l[2905]=i("p",null,[s("我们可以看到三种算子都包含了"),i("strong",null,"两个方向的卷积核")],-1)),i("p",null,[l[941]||(l[941]=s("他们",-1)),a(n,{color:"red"},{default:k(()=>[...l[940]||(l[940]=[s("分别用来检测水平和竖直方向上的边缘信息",-1)])]),_:1})]),i("p",null,[l[943]||(l[943]=s("在",-1)),a(n,{color:"red"},{default:k(()=>[...l[942]||(l[942]=[s("边缘检测的卷积计算",-1)])]),_:1}),l[944]||(l[944]=s("时，只需要",-1)),l[945]||(l[945]=i("strong",null,"对每个像素进行两次卷积计算",-1)),l[946]||(l[946]=s("即可",-1))]),i("p",null,[l[951]||(l[951]=s("这样就可以",-1)),i("strong",null,[l[949]||(l[949]=s("得到两个方向的梯度值",-1)),a(n,{color:"red"},{default:k(()=>[...l[947]||(l[947]=[s("Gx",-1)])]),_:1}),l[950]||(l[950]=s(" 和",-1)),a(n,{color:"red"},{default:k(()=>[...l[948]||(l[948]=[s("Gy",-1)])]),_:1})])]),i("p",null,[l[954]||(l[954]=s("而",-1)),a(n,{color:"red"},{default:k(()=>[...l[952]||(l[952]=[s("该像素",-1)])]),_:1}),l[955]||(l[955]=s("的整体",-1)),a(n,{color:"red"},{default:k(()=>[...l[953]||(l[953]=[s("梯度值G = abs(Gx) + abs(Gy)",-1)])]),_:1})]),l[2906]||(l[2906]=i("p",null,"现在我们已经知道了通过卷积获取梯度值的基本原理",-1)),l[2907]||(l[2907]=i("p",null,"那么我们只需要定义一个描边颜色，利用Shader中的内置函数lerp",-1)),l[2908]||(l[2908]=i("p",null,"在原始颜色和描边颜色之间利用梯度值进行插值即可",-1)),a(n,{color:"red"},{default:k(()=>[...l[956]||(l[956]=[s("最终颜色= lerp（原始颜色，描边颜色，梯度值）",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[957]||(l[957]=[s("梯度值越大表明越接近边缘，则颜色越接近描边颜色；反之越接近原始颜色",-1)])]),_:1}),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[958]||(l[958]=[s("得到当前像素以及其上下左右、左上左下、右上右下共9个像素的灰度值",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[959]||(l[959]=[s("用这9个灰度值和Sobel算子进行卷积计算得到梯度值G = abs(Gx) + abs(Gy)",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[960]||(l[960]=[s("最终颜色= lerp（原始颜色，描边颜色，梯度值）",-1)])]),_:1})])]),a(h,{face:"shader/屏幕后期:卷积3"}),l[2909]||(l[2909]=i("h5",{id:"_4-1-如何得到当前像素周围8个像素位置",tabindex:"-1"},[s("4.1 如何得到当前像素周围8个像素位置 "),i("a",{class:"header-anchor",href:"#_4-1-如何得到当前像素周围8个像素位置","aria-label":'Permalink to "4.1 如何得到当前像素周围8个像素位置"'},"​")],-1)),i("p",null,[i("strong",null,[l[962]||(l[962]=s("Unity 提供给我们用于",-1)),a(n,{color:"red"},{default:k(()=>[...l[961]||(l[961]=[s("访问纹理对应的每个纹素（像素）的大小的变量 float4 纹理名_TexelSize",-1)])]),_:1})])]),l[2910]||(l[2910]=i("p",null,[i("strong",null,"类似纹理名_ST（用于获取纹理缩放偏移的变量）")],-1)),i("p",null,[i("strong",null,[l[964]||(l[964]=s("其中的xyzw分别代表",-1)),a(n,{color:"red"},{default:k(()=>[...l[963]||(l[963]=[s("（假设纹理宽高为1024 * 768）",-1)])]),_:1})])]),i("p",null,[i("strong",null,[l[966]||(l[966]=s("x：",-1)),a(n,{color:"red"},{default:k(()=>[...l[965]||(l[965]=[s("1/纹理宽度= 1/1024",-1)])]),_:1})])]),i("p",null,[i("strong",null,[l[968]||(l[968]=s("y：",-1)),a(n,{color:"red"},{default:k(()=>[...l[967]||(l[967]=[s("1/纹理高度= 1/768",-1)])]),_:1})])]),i("p",null,[i("strong",null,[l[970]||(l[970]=s("z：",-1)),a(n,{color:"red"},{default:k(()=>[...l[969]||(l[969]=[s("纹理宽度= 1024",-1)])]),_:1})])]),i("p",null,[i("strong",null,[l[972]||(l[972]=s("w：",-1)),a(n,{color:"red"},{default:k(()=>[...l[971]||(l[971]=[s("纹理高度= 768",-1)])]),_:1})])]),l[2911]||(l[2911]=i("p",null,"我们可以利用float4 纹理名_TexelSize 纹素 信息得到当前像素周围8个像素位置",-1)),i("p",null,[l[974]||(l[974]=s("可以",-1)),a(n,{color:"red"},{default:k(()=>[...l[973]||(l[973]=[s("进行uv坐标偏移计算",-1)])]),_:1}),l[975]||(l[975]=s("，在顶点着色器函数或者片元着色器函数中计算都行",-1))]),i("p",null,[l[977]||(l[977]=s("但是",-1)),a(n,{color:"red"},{default:k(()=>[...l[976]||(l[976]=[s("建议在顶点着色器函数中计算，可以节约计算量",-1)])]),_:1})]),l[2912]||(l[2912]=i("p",null,"片元着色器中直接使用插值的结果也不会影响纹理坐标的计算结果",-1)),l[2913]||(l[2913]=i("h5",{id:"_4-2-实现",tabindex:"-1"},[s("4.2 实现 "),i("a",{class:"header-anchor",href:"#_4-2-实现","aria-label":'Permalink to "4.2 实现"'},"​")],-1)),l[2914]||(l[2914]=i("div",{class:"language-tex"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"tex"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"1.新建Shader，取名边缘检测EdgeDetection，删除无用代码")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"2.声明属性，进行属性映射")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"主纹理 _MainTex")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"边缘描边用的颜色 _EdgeColor")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"注意属性映射时 使用内置纹素变量 _MainTex_TexelSize")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"3.屏幕后处理效果标配")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"ZTest Always")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Cull Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"ZWrite Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"4.结构体相关")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"顶点")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"uv数组，用于存储9个像素点的uv坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"5.顶点着色器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"顶点坐标转换")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"用uv数组装载9个像素uv坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"6.片元着色器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"利用卷积获取梯度值（可以声明一个Sobel算子计算函数和一个灰度值计算函数）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"利用梯度值在原始颜色和边缘颜色之间进行插值得到最终颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"7.FallBack Off")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2915]||(l[2915]=i("div",{class:"language-C#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"C#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson104_EdgeDetection"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Texture"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "white"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //边缘线的颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _EdgeColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"EdgeColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Tags { "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"RenderType"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Opaque"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ZTest Always")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Cull Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ZWrite Off")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //用于存储9个像素uv坐标的变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                half2 uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"9"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vertex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //Unity内置纹素变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            half4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex_TexelSize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _EdgeColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," o"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.vertex "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //当前顶点的纹理坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                half2"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," uv"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //去对9个像素的uv坐标进行计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_TexelSize.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," half2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_TexelSize.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," half2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_TexelSize.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," half2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_TexelSize.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," half2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_TexelSize.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," half2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_TexelSize.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," half2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"6"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_TexelSize.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," half2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"7"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_TexelSize.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," half2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"8"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_TexelSize.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," half2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //计算颜色的灰度值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," calcLuminance("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," color"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.2126"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"color.r "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.7152"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"color.g "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.722"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"color.b;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //Sobel算子相关的卷积计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            half"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Sobel"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," o"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //Sobel算子对应的两个卷积核")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                half Gx["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"9"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"                               0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",  "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",  "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"                               1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",  "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",  "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"};")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                half Gy["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"9"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                              -"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                              -"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"};")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                half"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," L"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//灰度值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                half"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," edgeX"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//水平方向梯度值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                half"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," edgeY"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//数值方向梯度值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                for"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"int"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"; i "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 9"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"; i"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"++"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                    //采样颜色后 计算灰度值 并记录下来")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    L "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," calcLuminance"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, o.uv[i]));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    edgeX "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," L "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Gx[i];")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    edgeY "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," L "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Gy[i];")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //最终的一个该像素的梯度值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //half G = abs(edgeX) + abs(edgeY);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," abs"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(edgeX) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," abs"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(edgeY);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //利用索贝尔算子计算梯度值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                half"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," edge"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Sobel"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //利用计算出来的梯度值在原始颜色 和边缘线颜色之间进行插值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," color"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lerp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]), _EdgeColor, edge);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Fallback Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2916]||(l[2916]=i("hr",null,null,-1)),l[2917]||(l[2917]=i("h3",{id:"五、纯色背景功能",tabindex:"-1"},[s("五、纯色背景功能 "),i("a",{class:"header-anchor",href:"#五、纯色背景功能","aria-label":'Permalink to "五、纯色背景功能"'},"​")],-1)),l[2918]||(l[2918]=i("blockquote",null,[i("p",null,"什么是纯色背景功能")],-1)),l[2919]||(l[2919]=i("p",null,"我们在边缘描边时，有时只想保留描边的边缘线 不想要显示原图的背景颜色 比如把整个背景变为白色、黑色、等等自定义颜色 而抛弃掉原本图片的颜色信息 效果就像是一张描边图片",-1)),l[2920]||(l[2920]=i("blockquote",null,[i("p",null,"加入纯色背景功能")],-1)),l[2921]||(l[2921]=i("ol",null,[i("li",null,[i("p",null,[i("strong",null,"新属性声明 属性映射"),s(" 添加 背景颜色程度变量 _BackgroundExtent 0表示保留图片原始颜色，1表示完全抛弃图片原始颜色，0~1之间可以自己控制保留程度 添加自定义背景颜色 _BackgroundColor，定义用于替换图片原始颜色的颜色")])]),i("li",null,[i("p",null,[i("strong",null,"修改片元着色器"),s(" 利用插值运算，记录纯色背景中像素描边颜色 利用插值运算，在 原始图片描边 和 纯色图片描边 之间用程度变量进行控制")])])],-1)),l[2922]||(l[2922]=i("div",{class:"language-C#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"C#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //利用索贝尔算子计算梯度值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    half"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," edge"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Sobel"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //利用计算出来的梯度值在原始颜色 和边缘线颜色之间进行插值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," withEdgeColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lerp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]), _EdgeColor, edge);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //纯色上描边")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"    fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," onlyEdgeColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lerp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_BackgroundColor, _EdgeColor, edge);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //通过程度变量 去控制 是纯色描边 还是 原始颜色描边 在两者之间 进行过渡")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lerp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(withEdgeColor, onlyEdgeColor, _BackgroundExtent);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2923]||(l[2923]=i("hr",null,null,-1)),l[2924]||(l[2924]=i("h3",{id:"六、高斯模糊",tabindex:"-1"},[s("六、高斯模糊 "),i("a",{class:"header-anchor",href:"#六、高斯模糊","aria-label":'Permalink to "六、高斯模糊"'},"​")],-1)),l[2925]||(l[2925]=i("h4",{id:"_1-高斯模糊效果是什么",tabindex:"-1"},[s("1. 高斯模糊效果是什么 "),i("a",{class:"header-anchor",href:"#_1-高斯模糊效果是什么","aria-label":'Permalink to "1. 高斯模糊效果是什么"'},"​")],-1)),l[2926]||(l[2926]=i("p",null,"高斯模糊效果，是一种",-1)),i("p",null,[l[979]||(l[979]=s("用于",-1)),a(n,{color:"red"},{default:k(()=>[...l[978]||(l[978]=[s("平滑图像并减少图像噪声和细节",-1)])]),_:1}),l[980]||(l[980]=s("的图像处理技术",-1))]),l[2927]||(l[2927]=i("p",null,[i("strong",null,"高斯模糊"),s("的主要目的是"),i("strong",null,"使图像的边缘和细节变得模糊和平滑")],-1)),a(n,{color:"red"},{default:k(()=>[...l[981]||(l[981]=[s("高斯模糊相当于利用Shader 代码自动给屏幕图像进行模糊处理",-1)])]),_:1}),l[2928]||(l[2928]=i("h4",{id:"_2-基本原理",tabindex:"-1"},[s("2. 基本原理 "),i("a",{class:"header-anchor",href:"#_2-基本原理","aria-label":'Permalink to "2. 基本原理"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[982]||(l[982]=[s("高斯模糊是利用高斯函数计算出高斯滤波核中每个元素并进行归一化处理后，",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[983]||(l[983]=[s("再和目标像素通过卷积计算后得到最终的效果",-1)])]),_:1}),l[2929]||(l[2929]=i("h4",{id:"_3-高斯滤波核",tabindex:"-1"},[s("3. 高斯滤波核 "),i("a",{class:"header-anchor",href:"#_3-高斯滤波核","aria-label":'Permalink to "3. 高斯滤波核"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[984]||(l[984]=[s("高斯滤波核也称为高斯核",-1)])]),_:1}),l[2930]||(l[2930]=s("，它其实就是",-1)),a(n,{color:"red"},{default:k(()=>[...l[985]||(l[985]=[s("一个N x N 的卷积核",-1)])]),_:1}),l[2931]||(l[2931]=i("p",null,[s("它的"),i("strong",null,"大小可以自定义"),s("，但是一般"),i("strong",null,"会是一个奇数x 奇数"),s("的大小")],-1)),l[2932]||(l[2932]=i("p",null,"通常会是一个3x3 、5x5、7x7、9x9 的大小",-1)),a(n,{color:"red"},{default:k(()=>[...l[986]||(l[986]=[s("滤波核越大，模糊效果越明显",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[987]||(l[987]=[s("从效果和效率综合考虑，我们通常会使用",-1)])]),_:1}),l[2933]||(l[2933]=s("5x5 ",-1)),a(n,{color:"red"},{default:k(()=>[...l[988]||(l[988]=[s("的大小",-1)])]),_:1}),l[2934]||(l[2934]=i("p",null,[s("高斯滤波核中各元素的具体值，我们通过"),i("strong",null,"高斯函数"),s("来确定")],-1)),l[2935]||(l[2935]=i("h4",{id:"_4-高斯函数",tabindex:"-1"},[s("4. 高斯函数 "),i("a",{class:"header-anchor",href:"#_4-高斯函数","aria-label":'Permalink to "4. 高斯函数"'},"​")],-1)),l[2936]||(l[2936]=i("p",null,"高斯函数是由德国数学家和物理学家",-1)),l[2937]||(l[2937]=i("p",null,"卡尔·弗里德里希·高斯（Carl Friedrich Gauss）提出的。",-1)),i("p",null,[l[990]||(l[990]=s("我们将使用",-1)),a(n,{color:"red"},{default:k(()=>[...l[989]||(l[989]=[s("二维高斯函数",-1)])]),_:1}),l[991]||(l[991]=s("来计算高斯模糊效果中的卷积核",-1))]),a(h,{face:"shader/屏幕后期:高斯模糊"}),a(n,{color:"red"},{default:k(()=>[...l[992]||(l[992]=[s("σ 是标准方差，一般取值为1即可",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[993]||(l[993]=[s("x 和 y 是相对于高斯核中心的整数距离",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[994]||(l[994]=[s("**e 是自然对数的底≈ 2.71828** ",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[995]||(l[995]=[s("π 是圆周率≈ 3.14159",-1)])]),_:1}),l[2938]||(l[2938]=i("h4",{id:"_5-归一化处理",tabindex:"-1"},[s("5. 归一化处理 "),i("a",{class:"header-anchor",href:"#_5-归一化处理","aria-label":'Permalink to "5. 归一化处理"'},"​")],-1)),i("p",null,[l[997]||(l[997]=s("所谓",-1)),a(n,{color:"red"},{default:k(()=>[...l[996]||(l[996]=[s("归一化处理就是",-1)])]),_:1}),l[998]||(l[998]=s("让该卷积核中",-1))]),a(n,{color:"red"},{default:k(()=>[...l[999]||(l[999]=[s("各元素值/ 所有元素总和",-1)])]),_:1}),l[2939]||(l[2939]=i("p",null,[i("strong",null,"使其所有元素的和为1")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1e3]||(l[1e3]=[s("这样是为了避免在卷积计算过程中引入额外的亮度变化或偏差",-1)])]),_:1}),l[2940]||(l[2940]=i("p",null,"举例：假设一个3x3的卷积核，如果不进行归一化，卷积会将 图像的亮度放大9倍，归一化后卷积核为1，图像亮度将保持不变",-1)),a(h,{face:"shader/屏幕后期:高斯模糊2"}),a(h,{face:"shader/屏幕后期:高斯模糊3"}),l[2941]||(l[2941]=i("h4",{id:"_6-高斯模糊效果的基本原理",tabindex:"-1"},[s("6. 高斯模糊效果的基本原理 "),i("a",{class:"header-anchor",href:"#_6-高斯模糊效果的基本原理","aria-label":'Permalink to "6. 高斯模糊效果的基本原理"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1001]||(l[1001]=[s("高斯模糊是利用高斯函数计算出高斯滤波核中每个元素并进行归一化处理后， 再和目标像素通过卷积计算后得到最终的效果",-1)])]),_:1}),a(h,{face:"shader/屏幕后期:高斯模糊4"}),l[2942]||(l[2942]=i("p",null,[i("strong",null,"注意：高斯滤波核中的数值是定死的规则，可以直接写死参与计算， 不用在代码中用高斯函数计算，会浪费性能")],-1)),i("p",null,[l[1007]||(l[1007]=s("也就是说，我们",-1)),a(n,{color:"red"},{default:k(()=>[...l[1002]||(l[1002]=[s("利用",-1)])]),_:1}),l[1008]||(l[1008]=s("计算出来的这个",-1)),a(n,{color:"red"},{default:k(()=>[...l[1003]||(l[1003]=[s("高斯滤波核",-1)])]),_:1}),l[1009]||(l[1009]=s("（高斯核或卷积核或滤波核） ",-1)),a(n,{color:"red"},{default:k(()=>[...l[1004]||(l[1004]=[s("和对应的像素点进行卷积计算",-1)])]),_:1}),l[1010]||(l[1010]=s("，便可以",-1)),a(n,{color:"red"},{default:k(()=>[...l[1005]||(l[1005]=[s("得到",-1)])]),_:1}),l[1011]||(l[1011]=s("最终该像素",-1)),a(n,{color:"red"},{default:k(()=>[...l[1006]||(l[1006]=[s("高斯模糊",-1)])]),_:1}),l[1012]||(l[1012]=s("后的结果",-1))]),l[2943]||(l[2943]=i("h4",{id:"_7-高斯模糊效果的计算公式优化",tabindex:"-1"},[s("7.高斯模糊效果的计算公式优化 "),i("a",{class:"header-anchor",href:"#_7-高斯模糊效果的计算公式优化","aria-label":'Permalink to "7.高斯模糊效果的计算公式优化"'},"​")],-1)),l[2944]||(l[2944]=i("p",null,[i("strong",null,"为了降低计算次数"),s("，我们可以"),i("strong",null,"利用二维高斯函数的数学特性—— 可分离性")],-1)),i("p",null,[l[1014]||(l[1014]=s("即",-1)),a(n,{color:"red"},{default:k(()=>[...l[1013]||(l[1013]=[s("二维高斯函数可以表示为两个一维高斯函数的乘积",-1)])]),_:1})]),l[2945]||(l[2945]=i("p",null,[i("strong",null,"从而大幅减少计算量")],-1)),a(h,{face:"shader/屏幕后期:高斯模糊5"}),l[2946]||(l[2946]=i("p",null,[i("strong",null,"Gx 和 Gy 可以分别代表沿x轴和y轴的一维高斯函数")],-1)),i("p",null,[l[1016]||(l[1016]=s("**我们只需要",-1)),a(n,{color:"red"},{default:k(()=>[...l[1015]||(l[1015]=[s("让每个像素分别",-1)])]),_:1}),l[1017]||(l[1017]=s(" **",-1))]),a(n,{color:"red"},{default:k(()=>[...l[1018]||(l[1018]=[s("**Gx 进行水平卷积计算，与Gy进性垂直卷积计算** ",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1019]||(l[1019]=[s("再将最终的计算结果相乘即可得出和之前一样的结果",-1)])]),_:1}),i("p",null,[l[1025]||(l[1025]=s("也就是说，我们可以",-1)),a(n,{color:"red"},{default:k(()=>[...l[1020]||(l[1020]=[s("利用",-1)])]),_:1}),l[1026]||(l[1026]=s("计算出来的这两个",-1)),a(n,{color:"red"},{default:k(()=>[...l[1021]||(l[1021]=[s("一维高斯滤波核",-1)])]),_:1}),l[1027]||(l[1027]=s("（高斯核或卷积核或滤波核） ",-1)),a(n,{color:"red"},{default:k(()=>[...l[1022]||(l[1022]=[s("和对应的像素点进行卷积计算",-1)])]),_:1}),l[1028]||(l[1028]=s("，再将两个结果相乘，便可以",-1)),a(n,{color:"red"},{default:k(()=>[...l[1023]||(l[1023]=[s("得到",-1)])]),_:1}),l[1029]||(l[1029]=s("最终该像素",-1)),a(n,{color:"red"},{default:k(()=>[...l[1024]||(l[1024]=[s("高斯模糊",-1)])]),_:1}),l[1030]||(l[1030]=s("后的结果",-1))]),i("p",null,[l[1035]||(l[1035]=s("通过对计算公式的优化，我们将原本需要",-1)),a(n,{color:"red"},{default:k(()=>[...l[1031]||(l[1031]=[s("N * N * W * H",-1)])]),_:1}),l[1036]||(l[1036]=s(" 的计算次数（N为高斯核大小） ",-1)),i("strong",null,[l[1033]||(l[1033]=s("优化为了 ",-1)),a(n,{color:"red"},{default:k(()=>[...l[1032]||(l[1032]=[s("2 * N * W * H",-1)])]),_:1}),l[1034]||(l[1034]=s("，相当于将时间复杂度从O(n²) 降低到了O(n)",-1))])]),l[2947]||(l[2947]=i("h4",{id:"_8-高斯模糊效果的计算方式优化",tabindex:"-1"},[s("8. 高斯模糊效果的计算方式优化 "),i("a",{class:"header-anchor",href:"#_8-高斯模糊效果的计算方式优化","aria-label":'Permalink to "8. 高斯模糊效果的计算方式优化"'},"​")],-1)),l[2948]||(l[2948]=i("p",null,[s("我们刚才的知识点中提到，如果"),i("strong",null,"想要图片越模糊"),s("，那么"),i("strong",null,"需要扩大高斯滤波核的大小，越大越模糊"),s(" 但是同样通过刚才的基础原理和计算公式优化的讲解大家能够感受到，如果通过扩大高斯滤波核 的大小来达到更模糊的目的，付出的代价就是会更加消耗性能。")],-1)),i("p",null,[l[1040]||(l[1040]=s("因此在",-1)),a(n,{color:"red"},{default:k(()=>[...l[1037]||(l[1037]=[s("Shader",-1)])]),_:1}),l[1041]||(l[1041]=s("中我们",-1)),a(n,{color:"red"},{default:k(()=>[...l[1038]||(l[1038]=[s("不会提供控制高斯滤波核大小的参数",-1)])]),_:1}),l[1042]||(l[1042]=s("，我们的滤波核",-1)),a(n,{color:"red"},{default:k(()=>[...l[1039]||(l[1039]=[s("始终会使用5x5大小的",-1)])]),_:1}),l[1043]||(l[1043]=s("。",-1))]),l[2949]||(l[2949]=i("p",null,"因此，我们就只能使用其他方式来控制模糊程度了，我们一般会使用以下三种方式：",-1)),i("ol",null,[i("li",null,[l[1045]||(l[1045]=i("p",null,[i("strong",null,"控制缩放纹理大小")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1044]||(l[1044]=[s("高斯模糊的目的是让源纹理看起来模糊，那么我们完全可以缩放源纹理 Shader从更小的主纹理中进行采样，尺寸小了，自然计算的也少，也能更模糊",-1)])]),_:1})]),i("li",null,[l[1047]||(l[1047]=i("p",null,[i("strong",null,"控制模糊代码执行次数")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1046]||(l[1046]=[s("我们可以在OnRenderImage中多次执行Shader代码在模糊的基础上更加模糊， 对源纹理，进行多次迭代模糊处理",-1)])]),_:1})]),i("li",null,[l[1049]||(l[1049]=i("p",null,[i("strong",null,"控制纹理采样间隔距离")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1048]||(l[1048]=[s("我们在Shader中进行uv采样时，可以自己控制采样像素的间隔位置， 而不是只以一个单位来计算间隔，具体间隔几个单位，我们可以自定义 通过这种方式也能增加模糊程度",-1)])]),_:1})])]),l[2950]||(l[2950]=i("h4",{id:"_9-补充-预处理指令-cginclude-endcg",tabindex:"-1"},[s("9. 补充（预处理指令 CGINCLUDE/ENDCG） "),i("a",{class:"header-anchor",href:"#_9-补充-预处理指令-cginclude-endcg","aria-label":'Permalink to "9. 补充（预处理指令 CGINCLUDE/ENDCG）"'},"​")],-1)),l[2951]||(l[2951]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"CGINCLUDE")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"....")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"中间包裹CG代码")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"....")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"它写在SubShader语句块中，Pass外")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),i("p",null,[l[1052]||(l[1052]=s("它的作用是",-1)),a(n,{color:"red"},{default:k(()=>[...l[1050]||(l[1050]=[s("用于封装共享代码",-1)])]),_:1}),l[1053]||(l[1053]=s(" 可以在其中定义常量、函数、结构体、宏等等内容 这些封装起来的代码",-1)),a(n,{color:"red"},{default:k(()=>[...l[1051]||(l[1051]=[s("可以在同一个Shader文件中的多个Pass中使用",-1)])]),_:1}),l[1054]||(l[1054]=i("strong",null,"也可以在其他Shader文件中引用",-1)),l[1055]||(l[1055]=s(" 使用它可以避免我们重复编写一些相同的代码 从而",-1)),l[1056]||(l[1056]=i("strong",null,"提高代码复用性和可维护性",-1))]),l[2952]||(l[2952]=i("h4",{id:"_10-实现思路",tabindex:"-1"},[s("10. 实现思路 "),i("a",{class:"header-anchor",href:"#_10-实现思路","aria-label":'Permalink to "10. 实现思路"'},"​")],-1)),l[2953]||(l[2953]=i("blockquote",null,[i("p",null,"实现高斯模糊基础效果的制作思路")],-1)),i("p",null,[l[1058]||(l[1058]=s("在Shader中写两个Pass ",-1)),l[1059]||(l[1059]=i("strong",null,"一个Pass用来计算 水平方向卷积",-1)),l[1060]||(l[1060]=i("strong",null,"一个Pass用来计算 竖直方向卷积",-1)),l[1061]||(l[1061]=s(" 两个Pass的区别： 顶点着色器中",-1)),a(n,{color:"red"},{default:k(()=>[...l[1057]||(l[1057]=[s("计算的uv偏移位置不同，一个水平偏移，一个竖直偏移",-1)])]),_:1})]),l[2954]||(l[2954]=i("p",null,"两个Pass的共同点：",-1)),l[2955]||(l[2955]=i("ol",null,[i("li",null,"使用的内置文件相同"),i("li",null,"使用的属性相同"),i("li",null,"片元着色器的计算规则可以相同 我们可以用uv数组存储5个像素的UV坐标偏移 数组中存储的像素UV偏移分别为 index 0 1 2 3 4 x或y偏移 0 1 -1 2 -2 其中 第0个元素 对应的高斯核元素为 0.4026 第1,2个元素 对应的高斯核元素为 0.2442 第3,4个元素 对应的高斯核元素为 0.0545 那么不管竖直还是水平可以统一一套计算规则进行计算")],-1)),l[2956]||(l[2956]=i("blockquote",null,[i("p",null,"实现 高斯模糊基础屏幕后期处理效果 对应 Shader")],-1)),l[2957]||(l[2957]=i("div",{class:"language-C#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"C#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//1.新建Shader,取名为高斯模糊GaussianBlur,删除无用代码")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//2.声明变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  主纹理 _MainTex")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//3.利用补充知识 CGINCLUDE ... ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  实现两个Pass共享的代码")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  2-1.内置文件引用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  2-2.属性映射,注意映射纹素，需要用于uv偏移计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  2-3.结构体")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      顶点和uv数组（用于存储5个像素的uv偏移）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  2-4.两个顶点着色器函数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      一个水平偏移采样")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      一个竖直偏移采样")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  2-5.片元着色器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      共同的卷积计算方式，对位相乘后相加")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//4.屏幕后处理效果标配")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  ZTest Always")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  Cull Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  ZWrite Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//5.实现两个Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  主要用编译指令指明顶点和片元着色器调用的函数即可")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2958]||(l[2958]=i("blockquote",null,[i("p",null,"实现 高斯模糊基础屏幕后期处理效果 对应 C#")],-1)),l[2959]||(l[2959]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//补充知识")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//由于我们需要用两个Pass对图像进行处理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//相当于先让捕获的图像进行水平卷积计算得到一个结果")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//再用这个结果进行竖直卷积计算得到最终结果")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//因此我们需要利用Graphics.Blit进行两次Pass代码的执行")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//所以我们需要一个中间纹理缓存区，用于记录中间的处理结果")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//我们需要用到")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//RenderTexture.GetTemporary方法")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//它的作用是获取一个临时的RenderTexture对象，我们可以利用它来存储中间结果")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//我们使用它传入3个参数的重载")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//RenderTexture.GetTemporary(纹理宽、纹理高、深度缓冲-一般填0即可）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//需要注意的是")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//使用该方法返回的 RenderTexture对象")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//需要配合使用 RenderTexture.ReleaseTemporary(对象) 方法来释放该对象缓存")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//1.创建C#脚本，名为高斯模糊GaussianBlur")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//2.继承屏幕后处理基类PostEffectBase")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//3.重写OnRenderImage函数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//4.在其中利用Graphics.Blit、RenderTexture.GetTemporary、 RenderTexture.ReleaseTemporary")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  函数对纹理进行两次Pass处理")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2960]||(l[2960]=i("h4",{id:"_11-优化",tabindex:"-1"},[s("11. 优化 "),i("a",{class:"header-anchor",href:"#_11-优化","aria-label":'Permalink to "11. 优化"'},"​")],-1)),l[2961]||(l[2961]=i("blockquote",null,[i("p",null,"高斯模糊效果的计算方式优化")],-1)),l[2962]||(l[2962]=i("p",null,"想要图片变模糊，那么需要扩大高斯滤波核的大小，越大越模糊 如果通过扩大高斯滤波核的大小来达到更模糊的目的，付出的代价就是会更加消耗性能 因此在Shader中我们不会提供控制高斯滤波核大小的参数，我们的滤波核始终会使用5x5大小的 因此，我们就只能使用其他方式来控制模糊程度了，我们一般会使用以下三种方式：",-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1062]||(l[1062]=[s("控制缩放纹理大小",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1063]||(l[1063]=[s("控制模糊代码执行次数",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1064]||(l[1064]=[s("控制纹理采样间隔距离",-1)])]),_:1})])]),l[2963]||(l[2963]=i("h5",{id:"_11-1-添加控制纹理大小参数",tabindex:"-1"},[s("11.1 添加控制纹理大小参数 "),i("a",{class:"header-anchor",href:"#_11-1-添加控制纹理大小参数","aria-label":'Permalink to "11.1 添加控制纹理大小参数"'},"​")],-1)),l[2964]||(l[2964]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"在高斯模糊效果的C#代码中加入一个控制缩放的参数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"它主要是用来降低采样质量的，因此取名叫 downSample（降低采样）")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"如何使用该参数：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"在OnRenderImage函数中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"我们使用RenderT.GetTemporary获取渲染纹理缓存区时")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"用源纹理尺寸除以 downSample")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"这样在调用Graphics.Blit进行图像复制处理时")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"相当于就将源纹理缩小了，同时在缩小的过程过程中还会用材质球进行效果处理")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),a(n,{color:"red"},{default:k(()=>[...l[1065]||(l[1065]=[s("注意：",-1)])]),_:1}),l[2965]||(l[2965]=i("p",null,[s("在进行复制处理之前，我们可以"),i("strong",null,"设置渲染纹理缓存对象的 缩放过滤模式")],-1)),l[2966]||(l[2966]=i("p",null,[i("strong",null,"buffer.filterMode = FilterMode.Bilinear;")],-1)),i("p",null,[i("strong",null,[l[1067]||(l[1067]=s("FilterMode.Point：",-1)),a(n,{color:"red"},{default:k(()=>[...l[1066]||(l[1066]=[s("点过滤。不进行插值。每个像素都直接从最近的纹理像素获取颜色",-1)])]),_:1})])]),i("p",null,[i("strong",null,[l[1069]||(l[1069]=s("FilterMode.Bilinear：",-1)),a(n,{color:"red"},{default:k(()=>[...l[1068]||(l[1068]=[s("双线性过滤。它在纹理采样时使用相邻四个纹理像素的加权平均值进行插值，以生成更平滑的图像",-1)])]),_:1})])]),i("p",null,[i("strong",null,[l[1071]||(l[1071]=s("FilterMode.Trilinear：",-1)),a(n,{color:"red"},{default:k(()=>[...l[1070]||(l[1070]=[s("三线性过滤。它在双线性过滤的基础上增加了在不同 MIP 贴图级别之间的插值。",-1)])]),_:1})])]),l[2967]||(l[2967]=i("h5",{id:"_11-2-添加控制模糊代码执行次数参数",tabindex:"-1"},[s("11.2 添加控制模糊代码执行次数参数 "),i("a",{class:"header-anchor",href:"#_11-2-添加控制模糊代码执行次数参数","aria-label":'Permalink to "11.2 添加控制模糊代码执行次数参数"'},"​")],-1)),l[2968]||(l[2968]=i("div",{class:"language-tex"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"tex"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"在高斯模糊效果的C#代码中加入一个控制模糊代码执行次数的参数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"它主要是用来多次执行材质球中的两个Pass，因此取名叫 iteration(迭代)")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"如何使用该参数：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"在OnRenderImage函数中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"我们使用一个for循环，来对原图像进行多次高斯模糊效果处理")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),a(n,{color:"red"},{default:k(()=>[...l[1072]||(l[1072]=[s("注意：",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1073]||(l[1073]=[s("要保证每次使用完 RenderT.GetTemporary 分配的缓存区",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1074]||(l[1074]=[s("都要使用 RenderTexture.ReleaseTemporary 函数将其释放",-1)])]),_:1}),l[2969]||(l[2969]=i("h5",{id:"_11-3-添加控制纹理采样间隔距离",tabindex:"-1"},[s("11.3 添加控制纹理采样间隔距离 "),i("a",{class:"header-anchor",href:"#_11-3-添加控制纹理采样间隔距离","aria-label":'Permalink to "11.3 添加控制纹理采样间隔距离"'},"​")],-1)),l[2970]||(l[2970]=i("div",{class:"language-tex"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"tex"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"在高斯模糊效果的Shader代码中加入一个控制纹理采样间隔距离的属性")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"它主要是用来控制间隔多少单位偏移uv坐标，因此取名叫 _BlurSpread（模糊半径）")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"如何使用该参数：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"在顶点着色器进行uv坐标偏移时，乘以该属性，可以通过它控制偏移的多少")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),a(n,{color:"red"},{default:k(()=>[...l[1075]||(l[1075]=[s("注意：",-1)])]),_:1}),l[2971]||(l[2971]=i("p",null,[s("理论上来说像素是1个单位1个单位偏移的 _BlurSpread应该为整数变化 但是"),i("strong",null,"为了更精细的控制模糊程度，我们可以让其为小数"),i("strong",null,"小数变化可以更细微的调整模糊程序")],-1)),l[2972]||(l[2972]=i("h4",{id:"_12-实现代码",tabindex:"-1"},[s("12. 实现代码 "),i("a",{class:"header-anchor",href:"#_12-实现代码","aria-label":'Permalink to "12. 实现代码"'},"​")],-1)),l[2973]||(l[2973]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson106_GaussianBlur"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Texture"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "white"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _BlurSpread"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"BlurSpread"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Float) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //用于包裹共用代码 在之后的多个Pass当中都可以使用的代码")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        CGINCLUDE")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //纹素 x=1/宽  y=1/高")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        half4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex_TexelSize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //纹理偏移间隔单位")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _BlurSpread"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //5个像素的uv坐标偏移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            half2 uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //顶点在裁剪空间下坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vertex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //片元着色器函数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //两个Pass可以使用同一个 我们把里面的逻辑写的通用即可")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fragBlur"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"):SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //卷积运算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //卷积核 其中的三个数 因为只有这三个数 没有必要声明为5个单位的卷积核")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," weight["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0.4026"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0.2442"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0.0545"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"};")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //先计算当前像素点")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," sum"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]).rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," weight["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"];")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //去计算左右偏移1个单位的 和 左右偏移两个单位的 对位相乘 累加")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            for"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"int"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," it"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"; it "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"; it"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"++"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //要和右元素相乘")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                sum "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv[it"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]).rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," weight[it];")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //和左元素相乘")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                sum "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv[it"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]).rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," weight[it];")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(sum, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ENDCG")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Tags { "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"RenderType"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Opaque"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ZTest Always")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Cull Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ZWrite Off")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vertBlurHorizontal")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment fragBlur")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //水平方向的 顶点着色器函数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vertBlurHorizontal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," o"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.vertex "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //5个像素的uv偏移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                half2"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," uv"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //去进行5个像素 水平位置的偏移获取")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," uv;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," half2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex_TexelSize.x"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"_BlurSpread;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," half2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex_TexelSize.x"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"_BlurSpread;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," half2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex_TexelSize.x"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"_BlurSpread;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," half2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex_TexelSize.x"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"_BlurSpread;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vertBlurVertical")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment fragBlur")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //竖直方向的 顶点着色器函数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vertBlurVertical"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," o"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.vertex "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //5个像素的uv偏移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                half2"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," uv"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //去进行5个像素 水平位置的偏移获取")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," uv;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," half2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", _MainTex_TexelSize.x"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"_BlurSpread;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," half2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", _MainTex_TexelSize.x"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"_BlurSpread;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," half2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", _MainTex_TexelSize.x"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"_BlurSpread;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," half2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", _MainTex_TexelSize.x"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"_BlurSpread;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Fallback Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2974]||(l[2974]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," System"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Collections"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," System"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Collections"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Generic"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityEngine"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," class"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Lesson106_GaussianBlur"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"PostEffectBase")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ["),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"8"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," int"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," downSample"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ["),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"16"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," int"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," iterations"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ["),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," blurSpread"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.6f"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    protected"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," override"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," void"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," OnRenderImage"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"RenderTexture"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," source"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"RenderTexture"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," destination"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //base.OnRenderImage(source, destination);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (material "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"!="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," null"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            int"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," rtW"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," source.width "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," downSample;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            int"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," rtH"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," source.height "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," downSample;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //准备一个缓存区")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            RenderTexture"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," buffer"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," RenderTexture."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"GetTemporary"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(rtW, rtH, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //采用双线性过滤模式来缩放 可以让缩放效果更平滑")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            buffer.filterMode "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," FilterMode.Bilinear;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //直接缩放写入到缓存纹理中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Graphics."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Blit"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(source, buffer);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //在使用材质球之前设置 模糊半径属性")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},'            //material.SetFloat("_BlurSpread", blurSpread);')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //多次去执行 高斯模糊逻辑")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            for"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"int"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"; i "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," iterations; i"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"++"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //如果想要模糊半径影响模糊想过更强烈 更平滑")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //一般可以在我们的迭代中进行设置 相当于每次迭代处理高斯模糊时 都在增加我们的间隔距离")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                material."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"SetFloat"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"_BlurSpread"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," +"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," i "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," blurSpread);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //又声明一个新的缓冲区")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                RenderTexture"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," buffer1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," RenderTexture."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"GetTemporary"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(rtW, rtH, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //因为我们需要用两个Pass 处理图像两次")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //进行第一次 水平卷积计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                Graphics."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Blit"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(buffer, buffer1, material, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"); "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//Color1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //这时 关键内容都在buffer1中 buffer没用了 释放掉")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                RenderTexture."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ReleaseTemporary"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(buffer);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                buffer "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," buffer1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                buffer1 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," RenderTexture."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"GetTemporary"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(rtW, rtH, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //进行第二次 垂直卷积计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                Graphics."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Blit"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(buffer, buffer1, material, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//在Color1的基础上乘上Color2 得到最终的高斯模糊计算结果")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                                                                //释放缓存区")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                RenderTexture."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ReleaseTemporary"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(buffer);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //buffer和buffer1指向的都是这一次高斯模糊处理的结果")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                buffer "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," buffer1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //在for循环中得到最终的模糊结果 然后写入到目标纹理中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Graphics."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Blit"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(buffer, destination);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //释放掉缓存区")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            RenderTexture."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ReleaseTemporary"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(buffer);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        else")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Graphics."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Blit"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(source, destination);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[2975]||(l[2975]=i("hr",null,null,-1)),l[2976]||(l[2976]=i("h3",{id:"七、bloom效果",tabindex:"-1"},[s("七、Bloom效果 "),i("a",{class:"header-anchor",href:"#七、bloom效果","aria-label":'Permalink to "七、Bloom效果"'},"​")],-1)),l[2977]||(l[2977]=i("h4",{id:"_1-基本原理-1",tabindex:"-1"},[s("1. 基本原理 "),i("a",{class:"header-anchor",href:"#_1-基本原理-1","aria-label":'Permalink to "1. 基本原理"'},"​")],-1)),l[2978]||(l[2978]=i("blockquote",null,[i("p",null,"是什么")],-1)),l[2979]||(l[2979]=i("p",null,"Bloom效果（中文也可以叫做高光溢出效果），是一种",-1)),i("p",null,[l[1077]||(l[1077]=s("使",-1)),a(n,{color:"red"},{default:k(()=>[...l[1076]||(l[1076]=[s("画面中亮度较高的区域产生一种光晕或发光效果",-1)])]),_:1}),l[1078]||(l[1078]=s("的图像处理技术",-1))]),l[2980]||(l[2980]=i("p",null,[i("strong",null,"Bloom效果"),s("的主要目的是"),i("strong",null,"模拟现实世界中强光源在相机镜头或人眼中造成的散射和反射现象")],-1)),l[2981]||(l[2981]=i("p",null,"使得画面中较亮的区域“扩散”到周围的区域，造成一种朦胧的效果",-1)),l[2982]||(l[2982]=i("blockquote",null,[i("p",null,"基本原理")],-1)),l[2983]||(l[2983]=i("p",null,"三步骤概括Unity Shader中实现Bloom效果的基本原理：",-1)),i("ol",null,[i("li",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[1079]||(l[1079]=[s("提取",-1)])]),_:1}),l[1080]||(l[1080]=s("：提取原图像中的亮度区域存储到一张新纹理中",-1))])]),i("li",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[1081]||(l[1081]=[s("模糊",-1)])]),_:1}),l[1082]||(l[1082]=s("：将提取出来的纹理进行模糊处理（一般采用高斯模糊）",-1))])]),i("li",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[1083]||(l[1083]=[s("合成",-1)])]),_:1}),l[1084]||(l[1084]=s("：将模糊处理后的亮度纹理和源纹理进行颜色叠加",-1))])])]),l[2984]||(l[2984]=i("blockquote",null,[i("p",null,"多个Pass的运用")],-1)),l[2985]||(l[2985]=i("p",null,"处理高斯模糊效果时，我们使用了2个Pass，分别用来计算水平卷积核竖直卷积",-1)),l[2986]||(l[2986]=i("p",null,[i("strong",null,"而我们在处理Bloom效果时将使用4个Pass，他们分别是：")],-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1085]||(l[1085]=[s("用于 提取亮度区域 存储到新纹理中的1 个Pass",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1086]||(l[1086]=[s("用于 模糊处理提取出来的纹理 的高斯模糊的2 个Pass（可以复用高斯模糊Shader中写好的Pass）",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1087]||(l[1087]=[s("用于 与原图像进行合成 的1 个Pass",-1)])]),_:1})])]),l[2987]||(l[2987]=i("blockquote",null,[i("p",null,"如何提取")],-1)),i("p",null,[l[1089]||(l[1089]=s("我们需要在Shader中声明一个",-1)),a(n,{color:"red"},{default:k(()=>[...l[1088]||(l[1088]=[s("亮度阈值变量",-1)])]),_:1}),l[1090]||(l[1090]=s("，亮度低于该值的区域不会被提取",-1))]),i("p",null,[l[1092]||(l[1092]=s("主要用于“",-1)),a(n,{color:"red"},{default:k(()=>[...l[1091]||(l[1091]=[s("提取",-1)])]),_:1}),l[1093]||(l[1093]=s(" ”Pass的片元着色器函数当中，",-1))]),i("p",null,[l[1096]||(l[1096]=s("用当前像素的灰度",-1)),a(n,{color:"red"},{default:k(()=>[...l[1094]||(l[1094]=[s("值L = 0.2125 * R + 0.7154 * G + 0.0721*B",-1)])]),_:1}),l[1097]||(l[1097]=s(" 与 ",-1)),a(n,{color:"red"},{default:k(()=>[...l[1095]||(l[1095]=[s("亮度阈值变量",-1)])]),_:1}),l[1098]||(l[1098]=s(" 进行计算",-1))]),a(n,{color:"red"},{default:k(()=>[...l[1099]||(l[1099]=[s("灰度值– 亮度阈值变量",-1)])]),_:1}),l[2988]||(l[2988]=s("：是为了仅保留超过阈值的部分，可以提取出图像中亮度较高的地方。",-1)),a(n,{color:"red"},{default:k(()=>[...l[1100]||(l[1100]=[s("Clamp函数",-1)])]),_:1}),l[2989]||(l[2989]=s("：如果结果小于0则为0，大于1则为1。得到的val表示像素的亮度贡献",-1)),a(n,{color:"red"},{default:k(()=>[...l[1101]||(l[1101]=[s("颜色*亮度贡献",-1)])]),_:1}),l[2990]||(l[2990]=s("：基于亮度阈值调节颜色的亮度，若val为0则为黑色，越接近1越接近原始颜色",-1)),l[2991]||(l[2991]=i("p",null,"这样做的目的是保留高亮区域的颜色信息，同时衰减低亮区域的颜色。",-1)),a(h,{face:"shader/屏幕后期:Bloom"}),l[2992]||(l[2992]=i("blockquote",null,[i("p",null,"如何模糊")],-1)),l[2993]||(l[2993]=i("p",null,"由于我们目前已经在高斯模糊的课程中写好了两个用于进行水平和竖直卷积运算的Pass",-1)),i("p",null,[l[1103]||(l[1103]=s("因此我们可以使用以前学习SubShader语句时学习的",-1)),a(n,{color:"red"},{default:k(()=>[...l[1102]||(l[1102]=[s("UsePass",-1)])]),_:1}),l[1104]||(l[1104]=s("指令",-1))]),i("p",null,[l[1108]||(l[1108]=s("只需要在之前的",-1)),i("strong",null,[l[1106]||(l[1106]=s("高斯模糊Shader中为两个Pass取名，然后",-1)),a(n,{color:"red"},{default:k(()=>[...l[1105]||(l[1105]=[s("在Bloom的Shader中复用",-1)])]),_:1}),l[1107]||(l[1107]=s("即可",-1))])]),i("p",null,[l[1110]||(l[1110]=s("复用了两个Pass后，我们只需要在Bloom效果对应的C#代码中对“",-1)),a(n,{color:"red"},{default:k(()=>[...l[1109]||(l[1109]=[s("提取",-1)])]),_:1}),l[1111]||(l[1111]=s(" ”出来的纹理 进行高斯模糊Pass的调用即可（逻辑和高斯模糊一致）",-1))]),i("p",null,[l[1113]||(l[1113]=s("接着，我们需要在Bloom效果的Shader中声明一个",-1)),a(n,{color:"red"},{default:k(()=>[...l[1112]||(l[1112]=[s("纹理属性 _Bloom",-1)])]),_:1})]),l[2994]||(l[2994]=i("p",null,"用于存储模糊处理完毕后的纹理",-1)),l[2995]||(l[2995]=i("p",null,[i("strong",null,"在C#代码中完成高斯模糊处理后，只需要将缓存区内容，写入材质球中的纹理属性即可")],-1)),i("p",null,[i("strong",null,[l[1115]||(l[1115]=s("完成这一步后，在Shader中就能够得到",-1)),a(n,{color:"red"},{default:k(()=>[...l[1114]||(l[1114]=[s("模糊处理后的亮度纹理信息",-1)])]),_:1}),l[1116]||(l[1116]=s("了",-1))])]),i("p",null,[i("strong",null,[l[1118]||(l[1118]=s("我们便可以进行第三步“",-1)),a(n,{color:"red"},{default:k(()=>[...l[1117]||(l[1117]=[s("合成",-1)])]),_:1}),l[1119]||(l[1119]=s("”",-1))])]),l[2996]||(l[2996]=i("blockquote",null,[i("p",null,"如何合成")],-1)),l[2997]||(l[2997]=i("p",null,"我们只需要用",-1)),a(n,{color:"red"},{default:k(()=>[...l[1120]||(l[1120]=[s("主纹理_MainTex",-1)])]),_:1}),l[2998]||(l[2998]=s(" （其中使用的纹理是屏幕原图像）和",-1)),a(n,{color:"red"},{default:k(()=>[...l[1121]||(l[1121]=[s("纹理属性_Bloom",-1)])]),_:1}),l[2999]||(l[2999]=s(" （其中使用的纹理是模糊处理后的亮度纹理信息）",-1)),i("p",null,[l[1124]||(l[1124]=s("进行颜色叠加即可，我们对两张纹理进行采样，将获取到的",-1)),a(n,{color:"red"},{default:k(()=>[...l[1122]||(l[1122]=[s("颜色信息",-1)])]),_:1}),l[1125]||(l[1125]=s("进行",-1)),a(n,{color:"red"},{default:k(()=>[...l[1123]||(l[1123]=[s("加法",-1)])]),_:1}),l[1126]||(l[1126]=s("运算",-1))]),l[3e3]||(l[3e3]=i("p",null,"因为颜色相加带来的效果就是增加亮度，使得原本高亮的部分变得更加显眼",-1)),l[3001]||(l[3001]=i("p",null,"从而达到Bloom效果（高光溢出效果）",-1)),l[3002]||(l[3002]=i("hr",null,null,-1)),l[3003]||(l[3003]=i("h3",{id:"八、运动模糊",tabindex:"-1"},[s("八、运动模糊 "),i("a",{class:"header-anchor",href:"#八、运动模糊","aria-label":'Permalink to "八、运动模糊"'},"​")],-1)),l[3004]||(l[3004]=i("h4",{id:"_1-是什么",tabindex:"-1"},[s("1. 是什么 "),i("a",{class:"header-anchor",href:"#_1-是什么","aria-label":'Permalink to "1. 是什么"'},"​")],-1)),l[3005]||(l[3005]=i("p",null,"运动模糊效果，是一种",-1)),i("p",null,[l[1128]||(l[1128]=s("用于",-1)),a(n,{color:"red"},{default:k(()=>[...l[1127]||(l[1127]=[s("模拟真实世界中快速移动物体产生的模糊现象",-1)])]),_:1}),l[1129]||(l[1129]=s("的图像处理技术",-1))]),l[3006]||(l[3006]=i("p",null,"**当一个物体以较高速度移动时，由于人眼或摄像机的曝光时间过长，该物体会在图像中留下模糊 的运动轨迹。**这种效果游戏、动画、电影中被广泛应用，以增加视觉真实性和动感。",-1)),a(h,{face:"shader/屏幕后期:运动模糊"}),l[3007]||(l[3007]=i("h4",{id:"_2-基本原理-1",tabindex:"-1"},[s("2. 基本原理 "),i("a",{class:"header-anchor",href:"#_2-基本原理-1","aria-label":'Permalink to "2. 基本原理"'},"​")],-1)),l[3008]||(l[3008]=i("p",null,"想要在屏幕后期处理中实现运动模糊，一般有两种常用方式：",-1)),i("ol",null,[i("li",null,[i("p",null,[i("strong",null,[l[1131]||(l[1131]=s("累积缓存：",-1)),a(n,{color:"red"},{default:k(()=>[...l[1130]||(l[1130]=[s("物体快速移动时存储多帧图像信息，取它们之间的加权平均值作为最后的运动模糊图像",-1)])]),_:1})])]),a(n,{color:"green"},{default:k(()=>[...l[1132]||(l[1132]=[s("优点：质量高、效果好；",-1)])]),_:1}),a(n,{color:"blue"},{default:k(()=>[...l[1133]||(l[1133]=[s("缺点：计算量大，存储开销大",-1)])]),_:1})]),i("li",null,[i("p",null,[i("strong",null,[l[1135]||(l[1135]=s("速度缓存：",-1)),a(n,{color:"red"},{default:k(()=>[...l[1134]||(l[1134]=[s("物体快速移动时存储多帧运动速度信息，利用速度来决定模糊的方向和大小",-1)])]),_:1})])]),a(n,{color:"green"},{default:k(()=>[...l[1136]||(l[1136]=[s("优点：性能较累积缓存好；",-1)])]),_:1}),a(n,{color:"blue"},{default:k(()=>[...l[1137]||(l[1137]=[s("缺点：效果较差，可能产生重影和伪影",-1)])]),_:1})])]),l[3009]||(l[3009]=i("h4",{id:"_3-累积缓存实现运动模糊",tabindex:"-1"},[s("3.累积缓存实现运动模糊 "),i("a",{class:"header-anchor",href:"#_3-累积缓存实现运动模糊","aria-label":'Permalink to "3.累积缓存实现运动模糊"'},"​")],-1)),i("p",null,[l[1139]||(l[1139]=i("strong",null,"不需要像累积缓存中那样存储多张场景信息",-1)),l[1140]||(l[1140]=s("，但是",-1)),a(n,{color:"red"},{default:k(()=>[...l[1138]||(l[1138]=[s("需要保存之前的渲染结果，不断把当前的渲 染图像叠加到之前的渲染图像中，从而产生一种运动轨迹的视觉效果。",-1)])]),_:1}),l[1141]||(l[1141]=s("相当于是基于累积缓存的优化， 性能会更好，但是模糊效果可能略有欠缺，但是效果也是可以接受的。",-1))]),l[3010]||(l[3010]=i("h5",{id:"_3-1-基本原理",tabindex:"-1"},[s("3.1 基本原理 "),i("a",{class:"header-anchor",href:"#_3-1-基本原理","aria-label":'Permalink to "3.1 基本原理"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1142]||(l[1142]=[s("用一个RenderTexture记录上一次渲染的信息，然后每一次用新的屏幕图像信息和上一次的图像信息进 行混合渲染，从而产生模糊效果（相当于用一张图保留了之前n次的叠加渲染结果）",-1)])]),_:1}),a(h,{face:"shader/屏幕后期:运动模糊2"}),l[3011]||(l[3011]=i("p",null,[i("strong",null,"在使用Graphics.Blit(源纹理，目标纹理，材质)方法时")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1143]||(l[1143]=[s("如果目标纹理中包含内容，会直接认为目标纹理中的颜色为颜色缓冲区中的颜色",-1)])]),_:1}),l[3012]||(l[3012]=i("p",null,"因此我们完全可以利用该方法，配合Shader代码将两张图片信息进行混合处理，从而实现运动模糊效果。 它的主要混合思路是：",-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1144]||(l[1144]=[s("RGB通道由两张图片根据模糊程度决定最终效果",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1145]||(l[1145]=[s("A通道根据当前屏幕图像决定",-1)])]),_:1})])]),a(n,{color:"red"},{default:k(()=>[...l[1146]||(l[1146]=[s("利用一个模糊程度变量来控制运动模糊程度，值越大模糊程度越强；",-1)])]),_:1}),l[3013]||(l[3013]=i("p",null,[i("strong",null,"越小模糊程度越弱 利用两个Pass进行混合处理的方式：")],-1)),i("p",null,[l[1150]||(l[1150]=s("*",-1)),i("em",null,[l[1148]||(l[1148]=s("第一个Pass：",-1)),a(n,{color:"red"},{default:k(()=>[...l[1147]||(l[1147]=[s("让当前屏幕图像 和上一次的屏幕图像 进行指定RGB通道的颜色混合",-1)])]),_:1}),l[1149]||(l[1149]=i("em",null,"目的是利用模糊程度参数控制两张图片的混合效果，值越大上一次屏幕内容保留的越多",-1))])]),i("p",null,[i("strong",null,[l[1152]||(l[1152]=s("第二个Pass：",-1)),a(n,{color:"red"},{default:k(()=>[...l[1151]||(l[1151]=[s("利用第一个Pass处理后得到的颜色在和源纹理进行A通道的颜色混合",-1)])]),_:1}),l[1153]||(l[1153]=s(" 目的是保留源纹理透明度信息",-1))])]),l[3014]||(l[3014]=i("blockquote",null,[i("p",null,"混合方式如何设置：")],-1)),l[3015]||(l[3015]=i("p",null,[i("strong",null,"第一个Pass：")],-1)),i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[1154]||(l[1154]=[s("Blend SrcAlpha OneMinusSrcAlpha",-1)])]),_:1}),l[1155]||(l[1155]=s("（(源颜色 * SrcAlpha) + (目标颜色 * (1 - SrcAlpha))）",-1))])]),i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[1156]||(l[1156]=[s("ColorMask RGB ",-1)])]),_:1}),l[1157]||(l[1157]=s("（只改变颜色缓冲区中的RGB通道）",-1))])]),l[3016]||(l[3016]=i("p",null,[i("strong",null,"第二个Pass：")],-1)),i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[1158]||(l[1158]=[s("Blend One Zero",-1)])]),_:1}),l[1159]||(l[1159]=s("（最终颜色 = (源颜色 * 1) + (目标颜色 * 0)）",-1))])]),i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[1160]||(l[1160]=[s("ColorMask A",-1)])]),_:1}),l[1161]||(l[1161]=s("（只改变颜色缓冲区中的A通道）",-1))])]),l[3017]||(l[3017]=i("h4",{id:"_4-实现",tabindex:"-1"},[s("4. 实现 "),i("a",{class:"header-anchor",href:"#_4-实现","aria-label":'Permalink to "4. 实现"'},"​")],-1)),l[3018]||(l[3018]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//1.新建Shader 名为运动模糊(MotionBlur) 删除其中无用代码")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//2.属性声明")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  主纹理 _MainTex")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  模糊程度 _BlurAmount")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//3.共享CG代码 CGINCLUDE...ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  内置文件UnityCG.cginc引用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  属性映射")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  结构体（顶点和UV)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  顶点着色器（裁剪空间转换 uv坐标赋值）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//4.屏幕后处理效果标配")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  ZTest Always")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  Cull Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  ZWrite Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//5.第一个Pass（用于混合RGB通道）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  混合因子 和 颜色蒙版设置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      Blend SrcAlpha OneMinusSrcAlpha（(源颜色 * SrcAlpha) + (目标颜色 * (1 - SrcAlpha))）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      ColorMask RGB （只改变颜色缓冲区中的RGB通道）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  片元着色器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      对主纹理采样后利用模糊程度作为A通道与颜色缓冲区颜色进行混合")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//6.第二个Pass（用户混合A通道）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  混合因子 和 颜色蒙版设置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      Blend One Zero（最终颜色 = (源颜色 * 1) + (目标颜色 * 0)）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      ColorMask A（只改变颜色缓冲区中的A通道）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  片元着色器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      对主纹理采样")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//7.FallBack Off")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3019]||(l[3019]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," System"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Collections"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," System"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Collections"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Generic"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityEngine"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," class"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Lesson109_MotionBlur"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"PostEffectBase")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ["),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0.9f"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," blurAmount"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5f"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //堆积纹理 用于存储之前渲染的结果的 渲染纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," RenderTexture"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," accumulationTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    protected"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," override"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," void"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," OnRenderImage"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"RenderTexture"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," source"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"RenderTexture"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," destination"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (material "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"!="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," null"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //初始化堆积纹理 如果为空 或者 屏幕宽高变化了 都需要重新初始化")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"( accumulationTex "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"=="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," null"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ||")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                accumulationTex.width "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"!="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," source.width "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"||")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                accumulationTex.height "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"!="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," source.height)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                DestroyImmediate"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(accumulationTex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //初始化")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                accumulationTex "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," new"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," RenderTexture"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(source.width, source.height, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                accumulationTex.hideFlags "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," HideFlags.HideAndDontSave;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //保证第一次 累积纹理中也是有内容 因为之后 它的颜色 会作为颜色缓冲区中的颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                Graphics."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Blit"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(source, accumulationTex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //1 - 模糊程度的目的 是因为 希望大到的效果是 模糊程度值越大 越模糊")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //因为Shader中的混合因子的计算方式决定的 因此 我们需要1 - 它")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            material."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"SetFloat"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"_BlurAmount"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1.0f"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," blurAmount);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //利用我们的材质 进行混合处理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //第二个参数 有内容时  它会作为颜色缓冲区的颜色来进行处理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //没有直接写入目标中的目的 也是可以通过accumulationTex记录当前渲染结果")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //那么在下一次时 它就相当于是上一次的结果了")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Graphics."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Blit"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(source, accumulationTex, material);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Graphics."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Blit"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(accumulationTex, destination);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        else")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Graphics."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Blit"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(source, destination);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    /// <"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"summary"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    /// 如果脚本失活 那么把累积纹理删除掉")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    /// </"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"summary"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},">")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," void"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," OnDisable"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        DestroyImmediate"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(accumulationTex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3020]||(l[3020]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson109_MotionBlur"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Texture"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "white"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //模糊程度变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _BlurAmount"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"BlurAmount"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Float) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        CGINCLUDE")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'        #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _BlurAmount;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float2 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vertex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," o"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            o.vertex "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            o.uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ENDCG")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //屏幕后处理效果标配")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ZTest Always")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Cull Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ZWrite Off")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //第一个Pass 用于混合RGB通道")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //（(源颜色 * _BlurAmount) + (目标颜色 * (1 - _BlurAmount))）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Blend SrcAlpha OneMinusSrcAlpha")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //（只改变颜色缓冲区中的RGB通道）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ColorMask RGB")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment fragRGB")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fragRGB"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv).rgb, _BlurAmount);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //（最终颜色 = (源颜色 * 1) + (目标颜色 * 0)）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Blend One Zero")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //（只改变颜色缓冲区中的A通道）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ColorMask A")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment fragA")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fragA"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Fallback Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3021]||(l[3021]=i("hr",null,null,-1)),l[3022]||(l[3022]=i("h2",{id:"深度和法线纹理",tabindex:"-1"},[s("深度和法线纹理 "),i("a",{class:"header-anchor",href:"#深度和法线纹理","aria-label":'Permalink to "深度和法线纹理"'},"​")],-1)),l[3023]||(l[3023]=i("h3",{id:"一、作用和使用",tabindex:"-1"},[s("一、作用和使用 "),i("a",{class:"header-anchor",href:"#一、作用和使用","aria-label":'Permalink to "一、作用和使用"'},"​")],-1)),l[3024]||(l[3024]=i("h4",{id:"_1-深度和法线纹理分别指什么",tabindex:"-1"},[s("1. 深度和法线纹理分别指什么 "),i("a",{class:"header-anchor",href:"#_1-深度和法线纹理分别指什么","aria-label":'Permalink to "1. 深度和法线纹理分别指什么"'},"​")],-1)),l[3025]||(l[3025]=i("p",null,"确切的说",-1)),i("p",null,[l[1163]||(l[1163]=s("应该指的是",-1)),a(n,{color:"red"},{default:k(()=>[...l[1162]||(l[1162]=[s("屏幕空间的深度纹理和法线纹理",-1)])]),_:1})]),i("p",null,[i("strong",null,[l[1165]||(l[1165]=s("屏幕空间深度纹理： ",-1)),a(n,{color:"red"},{default:k(()=>[...l[1164]||(l[1164]=[s("用于存储屏幕图像中每个像素深度信息的纹理",-1)])]),_:1})])]),i("p",null,[i("strong",null,[l[1167]||(l[1167]=s("屏幕空间法线纹理： ",-1)),a(n,{color:"red"},{default:k(()=>[...l[1166]||(l[1166]=[s("用于存储屏幕图像中每个像素法线信息的纹理",-1)])]),_:1})])]),l[3026]||(l[3026]=i("h4",{id:"_2-深度和法线纹理的作用",tabindex:"-1"},[s("2. 深度和法线纹理的作用 "),i("a",{class:"header-anchor",href:"#_2-深度和法线纹理的作用","aria-label":'Permalink to "2. 深度和法线纹理的作用"'},"​")],-1)),l[3027]||(l[3027]=i("p",null,[i("strong",null,"深度纹理作用：")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1168]||(l[1168]=[s("可以利用其中存储的每个像素的深度信息",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1169]||(l[1169]=[s("制作出边缘检测、运动模糊、景深、环境遮挡等等效果",-1)])]),_:1}),l[3028]||(l[3028]=i("p",null,[i("strong",null,"法线纹理作用：")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1170]||(l[1170]=[s("可以利用其中存储的每个像素的法线信息",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1171]||(l[1171]=[s("**制作出屏幕空间环境遮挡(SSAO)、基于屏幕空间的反射(SSR)、基于法线的边缘检测等等效果** ",-1)])]),_:1}),l[3029]||(l[3029]=i("p",null,[i("strong",null,"它们的主要作用：")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1172]||(l[1172]=[s("**就是来实现各种视觉效果的，这些效果会利用它们存储的深度和法线信息来增强真实感和细节** ",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1173]||(l[1173]=[s("效果都是算出来的，有了更多的数据，就能进行更多不同的计算，就能出更好更多的效果",-1)])]),_:1}),l[3030]||(l[3030]=i("h4",{id:"_3-深度和法线纹理的使用",tabindex:"-1"},[s("3. 深度和法线纹理的使用 "),i("a",{class:"header-anchor",href:"#_3-深度和法线纹理的使用","aria-label":'Permalink to "3. 深度和法线纹理的使用"'},"​")],-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1174]||(l[1174]=[s("让Unity知道我们需要使用深度和法线纹理",-1)])]),_:1}),l[1175]||(l[1175]=i("p",null,"**深度纹理：**DepthTextureMode = DepthTextureMode.Depth;",-1)),l[1176]||(l[1176]=i("p",null,"**深度纹理+法线纹理（一张纹理）：**DepthTextureMode = DepthTextureMode.DepthNormals;",-1)),l[1177]||(l[1177]=i("p",null,"**深度纹理和深度纹理+法线纹理（俩张纹理）**DepthTextureMode = DepthTextureMode.Depth|DepthTextureMode.DepthNormals;",-1))]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1178]||(l[1178]=[s("在Shader当中直接声明对应变量",-1)])]),_:1}),l[1182]||(l[1182]=i("p",null,[i("strong",null,"深度纹理：")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1179]||(l[1179]=[s("sampler2D _CameraDepthTexture;",-1)])]),_:1}),l[1183]||(l[1183]=i("p",null,[i("strong",null,"深度+法线纹理：")],-1)),i("p",null,[i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[1180]||(l[1180]=[s("sampler2D _CameraDepthNormalsTexture;",-1)])]),_:1}),l[1181]||(l[1181]=s("（一般RG通道存储法线，BA通道存深度）",-1))])]),l[1184]||(l[1184]=i("p",null,[i("strong",null,"之后直接在Shader中使用这两个变量便可以获取到相关信息")],-1))])]),a(h,{face:"shader/法线和深度纹理:法线和深度"}),l[3031]||(l[3031]=i("h3",{id:"二、背后的原理",tabindex:"-1"},[s("二、背后的原理 "),i("a",{class:"header-anchor",href:"#二、背后的原理","aria-label":'Permalink to "二、背后的原理"'},"​")],-1)),l[3032]||(l[3032]=i("h4",{id:"_1-深度和法线纹理存储的是什么信息",tabindex:"-1"},[s("1. 深度和法线纹理存储的是什么信息 "),i("a",{class:"header-anchor",href:"#_1-深度和法线纹理存储的是什么信息","aria-label":'Permalink to "1. 深度和法线纹理存储的是什么信息"'},"​")],-1)),l[3033]||(l[3033]=i("blockquote",null,[i("p",null,"Unity中的深度纹理中存储的信息")],-1)),l[3034]||(l[3034]=i("p",null,"也就是Shader中使用_CameraDepthTexture 或 _CameraDepthNormalsTexture 采样的信息",-1)),a(n,{color:"red"},{default:k(()=>[...l[1185]||(l[1185]=[s("是进行裁剪空间变换后的z 分量再转换到0~1之后的结果",-1)])]),_:1}),l[3035]||(l[3035]=i("p",null,"因为齐次裁剪空间坐标范围为-1 ~ 1，而纹理中存储的信息范围是0 ~ 1",-1)),l[3036]||(l[3036]=i("p",null,"因此Unity会将其利用以下公式进行转换",-1)),a(n,{color:"red"},{default:k(()=>[...l[1186]||(l[1186]=[s("深度纹理值 = 0.5*z + 0.5",-1)])]),_:1}),l[3037]||(l[3037]=i("p",null,[i("strong",null,"也就是说我们通过深度纹理直接采样得到的深度纹理值是")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1187]||(l[1187]=[s("是进行裁剪空间变换后的z 分量再转换到0~1之后的结果",-1)])]),_:1}),l[3038]||(l[3038]=i("blockquote",null,[i("p",null,"Unity中的法线纹理中存储的信息")],-1)),l[3039]||(l[3039]=i("p",null,"也就是Shader中使用_CameraDepthNormalsTexture采样得到的float4中的部分信息",-1)),a(n,{color:"red"},{default:k(()=>[...l[1188]||(l[1188]=[s("它是观察空间下的法线再转换到0~1之后的结果",-1)])]),_:1}),l[3040]||(l[3040]=i("p",null,"因为观察空间下的单位向量的分量取值范围是-1~1，而纹理中存储的信息范围是0 ~ 1",-1)),l[3041]||(l[3041]=i("p",null,"因此Unity会将其利用以下公式进行转换",-1)),a(n,{color:"red"},{default:k(()=>[...l[1189]||(l[1189]=[s("法线纹理值=（观察空间下法线 + 1）* 0.5",-1)])]),_:1}),l[3042]||(l[3042]=i("p",null,[i("strong",null,"也就是说我们通过法线纹理直接采样得到的法线纹理值是")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1190]||(l[1190]=[s("是观察空间下的法线再转换到0~1之后的结果",-1)])]),_:1}),l[3043]||(l[3043]=i("h4",{id:"_2-unity是如何得到深度和法线纹理的",tabindex:"-1"},[s("2. Unity是如何得到深度和法线纹理的 "),i("a",{class:"header-anchor",href:"#_2-unity是如何得到深度和法线纹理的","aria-label":'Permalink to "2. Unity是如何得到深度和法线纹理的"'},"​")],-1)),l[3044]||(l[3044]=i("p",null,"深度和法线纹理的获取：",-1)),l[3045]||(l[3045]=i("p",null,"Unity中深度和法线纹理一般通过两种途径获取",-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1191]||(l[1191]=[s("从G-buffer几何缓冲区中获取",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1192]||(l[1192]=[s("由一个专门的Pass渲染而来",-1)])]),_:1})])]),l[3046]||(l[3046]=i("p",null,"具体Unity是通过哪种方式获取，取决于使用的渲染路径和设备的硬件限制。",-1)),i("p",null,[l[1194]||(l[1194]=s("当",-1)),a(n,{color:"red"},{default:k(()=>[...l[1193]||(l[1193]=[s("使用延迟渲染路径",-1)])]),_:1}),l[1195]||(l[1195]=s("时，深度和法线纹理可以直接访问到，因为延迟渲染路径会把信息存储到",-1))]),a(n,{color:"red"},{default:k(()=>[...l[1196]||(l[1196]=[s("G-buffer几何缓冲区",-1)])]),_:1}),l[3047]||(l[3047]=s("中（深度和法线等信息都存储在其中）。",-1)),l[3048]||(l[3048]=i("p",null,[s("而"),i("strong",null,"当无法直接获取"),s("到深度和法线纹理时（比如硬件不支持延迟渲染路径或使用的是前向渲染路 径时），")],-1)),l[3049]||(l[3049]=i("p",null,[s("Unity"),i("strong",null,"会通过一个单独的Pass来进行渲染"),s("，获取深度和法线信息。")],-1)),l[3050]||(l[3050]=i("p",null,"需要注意的是，当使用单独的Pass渲染获得深度和法线纹理时，两者是有区别的",-1)),l[3051]||(l[3051]=i("p",null,[s("对于"),i("strong",null,"深度纹理"),s("来说：")],-1)),i("p",null,[l[1205]||(l[1205]=s("Unity内部会使用",-1)),l[1206]||(l[1206]=i("strong",null,"着色器替换技术",-1)),l[1207]||(l[1207]=s("选择",-1)),a(n,{color:"red"},{default:k(()=>[...l[1197]||(l[1197]=[s("渲染类型",-1)])]),_:1}),l[1208]||(l[1208]=s("RenderType =“Opaque”(不透明物体)** 然后判断它们的**",-1)),a(n,{color:"red"},{default:k(()=>[...l[1198]||(l[1198]=[s("渲染队列",-1)])]),_:1}),l[1209]||(l[1209]=s("Queue是否小于等于2500（Background-1000、Geometry-2000、AlphaTest-2450） 如果",-1)),l[1210]||(l[1210]=i("strong",null,"满足这个条件",-1)),l[1211]||(l[1211]=s("，就会",-1)),i("strong",null,[l[1200]||(l[1200]=s("使用物体投射阴影时的Pass",-1)),a(n,{color:"red"},{default:k(()=>[...l[1199]||(l[1199]=[s("（LightMode 为ShadowCaster 的Pass）",-1)])]),_:1}),l[1201]||(l[1201]=s()),l[1202]||(l[1202]=i("strong",null,"来得到深度纹理",-1)),l[1203]||(l[1203]=s("，",-1))]),a(n,{color:"red"},{default:k(()=>[...l[1204]||(l[1204]=[s("如果没有这个Pass，那么该物体不会出现在深度纹理中",-1)])]),_:1}),l[1212]||(l[1212]=s("！",-1))]),l[3052]||(l[3052]=i("p",null,[s("因此这里的"),i("strong",null,"重点"),s("是：")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1213]||(l[1213]=[s("如果我们希望物体能够正确的出现在深度纹理中",-1)])]),_:1}),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1214]||(l[1214]=[s("必须在 Shader中正确的设置RenderType标签",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1215]||(l[1215]=[s("必须有投射阴影用的 Pass（LightMode为ShadowCaster的Pass）",-1)])]),_:1})])]),l[3053]||(l[3053]=i("p",null,[s("对于"),i("strong",null,"法线纹理"),s("来说：")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1216]||(l[1216]=[s("Unity底层会使用一个单独的Pass把整个场景再次渲染一次",-1)])]),_:1}),l[3054]||(l[3054]=s("，从而得到深度和法线信息",-1)),l[3055]||(l[3055]=i("p",null,"这里为什么是深度和法线信息呢，因为当需要得到法线纹理时，Unity中是和深度一起获取的 上节课的使用知识点中有讲解（ _CameraDepthNormalsTexture ）",-1)),l[3056]||(l[3056]=i("p",null,"这个Pass包含在Unity内置的Shader中，我们可以在官方下载源文件解压后进行查看",-1)),l[3057]||(l[3057]=i("p",null,"总体而言，在获取深度和法线纹理时",-1)),l[3058]||(l[3058]=i("p",null,"Unity内部帮助我们做了很多事情，我们不需要操心太多",-1)),l[3059]||(l[3059]=i("p",null,"我们只需要按照上节课的规则就能够获取到对应的信息了",-1)),l[3060]||(l[3060]=i("p",null,"需要注意的就是，在获取深度纹理时，一定要注意",-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1217]||(l[1217]=[s("必须在 Shader中正确的设置RenderType标签",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1218]||(l[1218]=[s("必须有投射阴影用的 Pass（LightMode为ShadowCaster的Pass）",-1)])]),_:1})])]),l[3061]||(l[3061]=i("h4",{id:"_3-深度和法线纹理使用时调用的函数原理",tabindex:"-1"},[s("3. 深度和法线纹理使用时调用的函数原理 "),i("a",{class:"header-anchor",href:"#_3-深度和法线纹理使用时调用的函数原理","aria-label":'Permalink to "3. 深度和法线纹理使用时调用的函数原理"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1219]||(l[1219]=[s("SAMPLE_DEPTH_TEXTURE 宏：",-1)])]),_:1}),i("p",null,[l[1221]||(l[1221]=s("它是用于从深度纹理中进行采样的宏，相比直接用tex2D进行采样，",-1)),a(n,{color:"red"},{default:k(()=>[...l[1220]||(l[1220]=[s("它在内部会帮助我们适配各 种不同的平台",-1)])]),_:1}),l[1222]||(l[1222]=s("，因为不同平台对深度纹理的采样规则会有所不同，因此我们使用它。",-1))]),a(n,{color:"red"},{default:k(()=>[...l[1223]||(l[1223]=[s("它采样得到的深度值是裁剪空间下的z分量转换到0~1之间的结果",-1)])]),_:1}),i("p",null,[l[1225]||(l[1225]=s("通过SAMPLE_DEPTH_TEXTURE得到的深度值是",-1)),a(n,{color:"red"},{default:k(()=>[...l[1224]||(l[1224]=[s("非线性",-1)])]),_:1}),l[1226]||(l[1226]=s("的",-1))]),i("p",null,[i("strong",null,[l[1228]||(l[1228]=s("所谓的非线性值的是指在透视摄像机的裁剪空间中",-1)),a(n,{color:"red"},{default:k(()=>[...l[1227]||(l[1227]=[s(" 深度值分部不均匀",-1)])]),_:1})])]),a(n,{color:"red"},{default:k(()=>[...l[1229]||(l[1229]=[s("当深度值接近裁剪面近时，深度值变化迅速，精度高",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1230]||(l[1230]=[s("当深度值接远裁剪面近时，深度值变化缓慢，精度低",-1)])]),_:1}),l[3062]||(l[3062]=i("p",null,"更直观的解释：一个相机在观察一个3D场景时，近处的物体移动一点，视觉上变化很大，所以需 要更高的精度来记录这种变化。而远处的物体移动同样的距离，视觉上的变化很小，因此可以使 用较低的精度来记录",-1)),l[3063]||(l[3063]=i("p",null,"因此为了让我们在Shader中利用深度值进行的计算更加准确，我们需要获得线性的深度值",-1)),a(n,{color:"red"},{default:k(()=>[...l[1231]||(l[1231]=[s("只需要把裁剪空间下的深度值转换到观察空间下，便可以得到线性的深度值",-1)])]),_:1}),l[3064]||(l[3064]=i("p",null,"Unity Shader中提供了内置函数",-1)),i("p",null,[i("strong",null,[l[1233]||(l[1233]=s("LinearEyeDepth 和 Linear01Depth 都可以得到",-1)),a(n,{color:"red"},{default:k(()=>[...l[1232]||(l[1232]=[s("观察空间下的线性深度值",-1)])]),_:1})])]),i("p",null,[i("strong",null,[l[1235]||(l[1235]=s("LinearEyeDepth：",-1)),a(n,{color:"red"},{default:k(()=>[...l[1234]||(l[1234]=[s("得到的是像素到摄像机的实际距离",-1)])]),_:1})])]),i("p",null,[i("strong",null,[l[1237]||(l[1237]=s("Linear01Depth：",-1)),a(n,{color:"red"},{default:k(()=>[...l[1236]||(l[1236]=[s("得到的是实际距离被压缩到0~1之间的值",-1)])]),_:1})])]),i("p",null,[l[1243]||(l[1243]=i("strong",null,"DecodeDepthNormal函数",-1)),l[1244]||(l[1244]=s("内部其实",-1)),i("strong",null,[l[1240]||(l[1240]=s("也是执行的",-1)),a(n,{color:"red"},{default:k(()=>[...l[1238]||(l[1238]=[s("DecodeFloatRG",-1)])]),_:1}),l[1241]||(l[1241]=s("和",-1)),a(n,{color:"red"},{default:k(()=>[...l[1239]||(l[1239]=[s("DecodeViewNormalStereo",-1)])]),_:1}),l[1242]||(l[1242]=s("函数",-1))])]),i("p",null,[l[1247]||(l[1247]=s("它的作用就是得到",-1)),a(n,{color:"red"},{default:k(()=>[...l[1245]||(l[1245]=[s("观察空间下",-1)])]),_:1}),l[1248]||(l[1248]=s("的对应像素的",-1)),a(n,{color:"red"},{default:k(()=>[...l[1246]||(l[1246]=[s("法线和线性深度值(0~1)",-1)])]),_:1})]),i("p",null,[l[1251]||(l[1251]=s("你可以一次性的获得两个信息，也可以选择分别调用",-1)),a(n,{color:"red"},{default:k(()=>[...l[1249]||(l[1249]=[s("DecodeFloatRG",-1)])]),_:1}),l[1252]||(l[1252]=s("和",-1)),a(n,{color:"red"},{default:k(()=>[...l[1250]||(l[1250]=[s("DecodeViewNormalStereo",-1)])]),_:1})]),l[3065]||(l[3065]=i("p",null,"单独获取深度和法线信息",-1)),l[3066]||(l[3066]=i("p",null,[i("strong",null,"函数中具体做的事情，就是利用法线的xy算出z，得到最终的法线信息；")],-1)),l[3067]||(l[3067]=i("p",null,[i("strong",null,"将裁剪空间下的非线性深度值 转换为观察空间下线性的范围为0~1的深度值")],-1)),l[3068]||(l[3068]=i("p",null,[s("通过对这些宏和函数的介绍，大家只要记住，"),i("strong",null,"直接采样出来的深度和法线信息是不会直接使用的")],-1)),i("p",null,[l[1254]||(l[1254]=s("我们需要将他们",-1)),a(n,{color:"red"},{default:k(()=>[...l[1253]||(l[1253]=[s("通过内置函数进行转换",-1)])]),_:1})]),i("p",null,[i("strong",null,[l[1256]||(l[1256]=s("得到最终我们会使用的",-1)),a(n,{color:"red"},{default:k(()=>[...l[1255]||(l[1255]=[s("观察空间下的深度和法线信息",-1)])]),_:1})])]),l[3069]||(l[3069]=i("hr",null,null,-1)),l[3070]||(l[3070]=i("h3",{id:"三、-如何查看深度纹理信息",tabindex:"-1"},[s("三、 如何查看深度纹理信息 "),i("a",{class:"header-anchor",href:"#三、-如何查看深度纹理信息","aria-label":'Permalink to "三、 如何查看深度纹理信息"'},"​")],-1)),i("p",null,[l[1263]||(l[1263]=s("我们可以在屏幕后期处理中用我们学习过的获取深度信息的知识点 将深度值作为颜色的RGB值显示在屏幕上 感受深度纹理中存储的内容 ",-1)),l[1264]||(l[1264]=i("strong",null,"理论上来说，如果深度值使用0~1范围的线性值",-1)),i("strong",null,[l[1258]||(l[1258]=s("越接近",-1)),a(n,{color:"red"},{default:k(()=>[...l[1257]||(l[1257]=[s("近裁剪",-1)])]),_:1}),l[1259]||(l[1259]=s("面越靠近黑色",-1))]),i("strong",null,[l[1261]||(l[1261]=s("越接近",-1)),a(n,{color:"red"},{default:k(()=>[...l[1260]||(l[1260]=[s("远裁剪",-1)])]),_:1}),l[1262]||(l[1262]=s("面越靠近白色",-1))])]),l[3071]||(l[3071]=i("blockquote",null,[i("p",null,"实现")],-1)),l[3072]||(l[3072]=i("div",{class:"language-tex"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"tex"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"//1.新建Shader，删除无用代码")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"//2.声明变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"//  在Shader中通过声明_CameraDepthTexture获取深度纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"//3.顶点着色器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"//  只需要修改传入结构体类型")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"//4.片元着色器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"//  使用深度纹理采样宏 得到的结果是非线性的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"//  float depth = SAMPLE_DEPTH_TEXTURE(_CameraDepthTexture, i.uv);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"//  将非线性的深度值 转换到观察空间下 并将像素点到摄像机的距离转换到[0,1]区间内 （线性深度值）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"//  float linearDepth = Linear01Depth(depth);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"//  将深度值作为返回颜色的RGB值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"//5.Fallback Off")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3073]||(l[3073]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson110_DepthTexture"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Texture"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "white"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vertex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //按规则命名的 深度纹理变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _CameraDepthTexture"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," o"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.vertex "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," TRANSFORM_TEX"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.texcoord, _MainTex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //非线性的 裁剪空间下的深度值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," depth"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," SAMPLE_DEPTH_TEXTURE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_CameraDepthTexture, i.uv);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //得到一个线性的 0~1 区间的深度值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," linearDepth = Linear01Depth(depth);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //把深度值作为RGB颜色输入 越接近摄像 就呈现出黑色 越远离摄像机 就呈现出白色 中间就是灰色 具体就会呈现出深浅灰")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(linearDepth,linearDepth,linearDepth,"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Fallback Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3074]||(l[3074]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," System"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Collections"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," System"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Collections"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Generic"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityEngine"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," class"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Lesson110_DepthTexture"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"PostEffectBase")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    // Start is called before the first frame update")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    void"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Start"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //可以在Shader中得到对应的深度纹理信息了")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Camera.main.depthTextureMode "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," DepthTextureMode.Depth;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3075]||(l[3075]=i("hr",null,null,-1)),l[3076]||(l[3076]=i("h3",{id:"四、如何查看法线纹理信息",tabindex:"-1"},[s("四、如何查看法线纹理信息 "),i("a",{class:"header-anchor",href:"#四、如何查看法线纹理信息","aria-label":'Permalink to "四、如何查看法线纹理信息"'},"​")],-1)),l[3077]||(l[3077]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//1.新建Shader，删除无用代码")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//2.声明变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  在Shader中通过声明_CameraDepthNormalsTexture获取深度+法线纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//3.顶点着色器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  只需要修改传入结构体类型")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//4.片元着色器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  对深度+法线纹理进行采样（其中xy是法线信息，zw是深度信息）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  float4 depthNormal = tex2D(_CameraDepthNormalsTexture, i.uv);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  UnityCG.cginc 内置文件中的方法 用于得到深度值(0~1)和法线信息(观察空间下)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  相当于一次性处理深度和法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  用于存储深度值的变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  float depth;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  用于存储法线的变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  float3 normals;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  DecodeDepthNormal(depthNormal, depth, normals);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  单独得到深度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      depth = DecodeFloatRG(depthNormal.zw);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  单独得到法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      normals = DecodeViewNormalStereo(depthNormal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//5.Fallback Off")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3078]||(l[3078]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," System"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Collections"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," System"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Collections"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Generic"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityEngine"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," class"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Lesson111_DepthNormalTexture"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"PostEffectBase")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    // Start is called before the first frame update")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    void"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Start"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Camera.main.depthTextureMode "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," DepthTextureMode.DepthNormals;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3079]||(l[3079]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson111_DepthNormalTexture"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Texture"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "white"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vertex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //深度+法线纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _CameraDepthNormalsTexture"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," o"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.vertex "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," TRANSFORM_TEX"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.texcoord, _MainTex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //直接采样 获取到的是裁剪空间下的法线和深度信息")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," depthNormal"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_CameraDepthNormalsTexture, i.uv);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," depth;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normals"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                DecodeDepthNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(depthNormal, depth, normals);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //法线的-1到1之间的区间 变换到 0~1之间")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(normals"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0.5"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," +"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Fallback Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3080]||(l[3080]=i("hr",null,null,-1)),l[3081]||(l[3081]=i("h3",{id:"五、-深度纹理实现运动模糊",tabindex:"-1"},[s("五、 深度纹理实现运动模糊 "),i("a",{class:"header-anchor",href:"#五、-深度纹理实现运动模糊","aria-label":'Permalink to "五、 深度纹理实现运动模糊"'},"​")],-1)),l[3082]||(l[3082]=i("h4",{id:"_1-关键注意点说明",tabindex:"-1"},[s("1.关键注意点说明 "),i("a",{class:"header-anchor",href:"#_1-关键注意点说明","aria-label":'Permalink to "1.关键注意点说明"'},"​")],-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1265]||(l[1265]=[s("这种实现方式只适合场景静止，即摄像机快速移动的情况， 它不太适用于物体快速移动产生的运动模糊效果，只有摄像机移动时才能看到运动模糊效果",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1266]||(l[1266]=[s("这种实现方式并不是基于真实的物理运动规律来计算的，只是一种近似计算！ 它符合图形学基本规则：看起来对那么就是对的",-1)])]),_:1})])]),i("p",null,[l[1268]||(l[1268]=s("但是由于它实现出来的",-1)),a(n,{color:"red"},{default:k(()=>[...l[1267]||(l[1267]=[s("效果和性能消耗都还不错",-1)])]),_:1}),l[1269]||(l[1269]=s("，因此它也是一种",-1)),l[1270]||(l[1270]=i("strong",null,"常用的运动模糊处理方案",-1)),l[1271]||(l[1271]=s("。",-1))]),l[3083]||(l[3083]=i("h4",{id:"_2-利用深度纹理实现运动模糊基本原理",tabindex:"-1"},[s("2. 利用深度纹理实现运动模糊基本原理 "),i("a",{class:"header-anchor",href:"#_2-利用深度纹理实现运动模糊基本原理","aria-label":'Permalink to "2. 利用深度纹理实现运动模糊基本原理"'},"​")],-1)),l[3084]||(l[3084]=i("blockquote",null,[i("p",null,"基本原理")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1272]||(l[1272]=[s("得到像素当前帧和上一帧中在裁剪空间下的位置，",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1273]||(l[1273]=[s("利用两个位置计算出物体的运动方向，从而模拟出运动模糊的效果。",-1)])]),_:1}),l[3085]||(l[3085]=i("p",null,"其中的关键点：",-1)),l[3086]||(l[3086]=i("ol",null,[i("li",null,[i("strong",null,"如何得到像素当前帧和上一帧在裁剪空间下的位置")]),i("li",null,[i("strong",null,"如何得到运动方向")]),i("li",null,[i("strong",null,"如何模拟运动模糊效果")])],-1)),l[3087]||(l[3087]=i("h4",{id:"_3-如何得到像素当前帧和上一帧在裁剪空间下的位置",tabindex:"-1"},[s("3. 如何得到像素当前帧和上一帧在裁剪空间下的位置 "),i("a",{class:"header-anchor",href:"#_3-如何得到像素当前帧和上一帧在裁剪空间下的位置","aria-label":'Permalink to "3. 如何得到像素当前帧和上一帧在裁剪空间下的位置"'},"​")],-1)),l[3088]||(l[3088]=i("p",null,"关键步骤一：",-1)),a(n,{color:"red"},{default:k(()=>[...l[1274]||(l[1274]=[s("利用UV坐标和深度值组合成一个裁剪空间下的组合坐标nowClipPos",-1)])]),_:1}),l[3089]||(l[3089]=i("p",null,[i("strong",null,"float4 clipPos = float4(uv.x, uv.y, depth, 1);")],-1)),l[3090]||(l[3090]=i("p",null,"我们知道uv坐标空间下的值是0~1，通过宏取出来的深度值也是0~1，而裁剪空间下的坐标范围是-1~1",-1)),l[3091]||(l[3091]=i("p",null,"因此，我们需要将它利用简单的公式转换到裁剪空间坐标系下",-1)),a(n,{color:"red"},{default:k(()=>[...l[1275]||(l[1275]=[s("float4 clipPos = float4(uv.x * 2 - 1, uv.y * 2 - 1, depth * 2 - 1, 1);",-1)])]),_:1}),l[3092]||(l[3092]=i("p",null,[i("strong",null,"你可以认为这一步是把")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1276]||(l[1276]=[s("带有深度值的uv坐标转换到了裁剪空间下 之所以加入深度值是为了让之后的裁剪空间转到世界空间或其他坐标空间更合理 相当于是把UV的2D坐标系转换到了3D坐标系中",-1)])]),_:1}),l[3093]||(l[3093]=i("p",null,"关键步骤二：",-1)),a(n,{color:"red"},{default:k(()=>[...l[1277]||(l[1277]=[s("利用世界空间—>裁剪空间的变换矩阵的逆矩阵，将刚才裁剪空间下的nowClipPos转换到世界坐标中",-1)])]),_:1}),l[3094]||(l[3094]=i("p",null,"我们只需要利用上面的这个裁剪空间到世界空间的变换矩阵，就可以将刚才得到的裁剪空间下的组合坐标 变换到世界空间下了。",-1)),l[3095]||(l[3095]=i("p",null,"关键步骤三：",-1)),a(n,{color:"red"},{default:k(()=>[...l[1278]||(l[1278]=[s("利用上一帧的世界坐标—>裁剪空间的变换矩阵得到上一帧该世界空间下的组合坐标在裁剪空间下位置",-1)])]),_:1}),l[3096]||(l[3096]=i("h4",{id:"_4-如何得到运动方向",tabindex:"-1"},[s("4. 如何得到运动方向 "),i("a",{class:"header-anchor",href:"#_4-如何得到运动方向","aria-label":'Permalink to "4. 如何得到运动方向"'},"​")],-1)),l[3097]||(l[3097]=i("p",null,"我们已经知道如何得到像素当前帧和上一帧在裁剪空间下的位置",-1)),a(n,{color:"red"},{default:k(()=>[...l[1279]||(l[1279]=[s("直接用当前位置`.xy`– 上一帧位置`.xy` 便可以得到移动方向",-1)])]),_:1}),l[3098]||(l[3098]=i("h4",{id:"_5-如何模拟运动模糊效果",tabindex:"-1"},[s("5. 如何模拟运动模糊效果 "),i("a",{class:"header-anchor",href:"#_5-如何模拟运动模糊效果","aria-label":'Permalink to "5. 如何模拟运动模糊效果"'},"​")],-1)),l[3099]||(l[3099]=i("p",null,[s("有了像素在裁剪空间的移动方向，相当于知道了像素在"),i("code",null,"“uv纹理空间的移动方向”")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1280]||(l[1280]=[s("那么我们只需要利用这个方向在纹理中进行多次uv坐标偏移采样后，将得到的颜色累加起来， 最后进行算数平均值计算即可",-1)])]),_:1}),i("p",null,[i("strong",null,[l[1282]||(l[1282]=s("我们会加入一个",-1)),a(n,{color:"red"},{default:k(()=>[...l[1281]||(l[1281]=[s("模糊偏移量",-1)])]),_:1}),l[1283]||(l[1283]=s("来控制模糊程度",-1))])]),i("p",null,[i("strong",null,[l[1285]||(l[1285]=s("只需要在每次采样时进行",-1)),a(n,{color:"red"},{default:k(()=>[...l[1284]||(l[1284]=[s("方向",-1),i("code",null,"*",-1),s(" 模糊偏移量",-1)])]),_:1}),l[1286]||(l[1286]=s("的偏移采样即可",-1))])]),l[3100]||(l[3100]=i("h4",{id:"_6-补充知识",tabindex:"-1"},[s("6. 补充知识 "),i("a",{class:"header-anchor",href:"#_6-补充知识","aria-label":'Permalink to "6. 补充知识"'},"​")],-1)),l[3101]||(l[3101]=i("p",null,[s("我们需要通过"),i("code",null,"C#"),s("代码为Shader设置矩阵变量 但是ShaderLab语法中的属性中并没有矩阵类型的变量 因此我们只需要在CG语句中声明矩阵属性即可 这样C#中通过矩阵的属性名同样可以进行设置 举例：")],-1)),l[3102]||(l[3102]=i("div",{class:"language-C#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"C#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//CG代码中声明4x4矩阵 ——")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"float4x4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _ClipToWorldMatrix"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//C#代码中声明4x4矩阵 ——")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Matrix4x4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frontClipToWorldMatrix"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//通过材质球指明变量进行设置即可")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"material."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"SetMatrix"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"_ClipToWorldMatrix"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", frontClipToWorldMatrix);")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3103]||(l[3103]=i("h4",{id:"_6-运动模糊效果-具体实现",tabindex:"-1"},[s("6. 运动模糊效果 具体实现 "),i("a",{class:"header-anchor",href:"#_6-运动模糊效果-具体实现","aria-label":'Permalink to "6. 运动模糊效果 具体实现"'},"​")],-1)),l[3104]||(l[3104]=i("blockquote",null,[i("p",null,"步骤")],-1)),l[3105]||(l[3105]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//2.声明属性，进行属性映射")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  主纹理 _MainTex")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  模糊偏移量 _BlurSize")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  深度纹理 _CameraDepthTexture")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  当前帧裁剪到世界空间变换矩阵 float4x4 _ClipToWorldMatrix")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  上一帧世界到裁剪空间变换矩阵 float4x4 _FrontWorldToClipMatrix")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//3.屏幕后处理标配")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  ZTest Always")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  Cull Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  ZWrite Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//4.结构体")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  顶点和uv坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//5.顶点着色器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  坐标转换 uv坐标赋值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//6.片元着色器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  6-1:得到裁剪空间下的两个点")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      得到点一")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      深度值获取")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      构建裁剪空间下组合坐标 uv 和 深度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      得到点二")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      裁剪空间坐标转世界空间(注意进行齐次除法）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      利用上一帧变换矩阵将世界空间坐标转裁剪空间（注意进行齐次除法）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  6-2:得到运动方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      用当前帧点-上一帧点 得到运动方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  6-3:进行模糊处理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      利用模糊偏移量变量进行3次偏移采样颜色后进行平均值计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//7.FallBack Off")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3106]||(l[3106]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//2.继承屏幕后处理基类PostEffectBase")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//3.声明模糊偏移量变量和用于记录上一次变换矩阵的变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//4.重写OnRenderImage函数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  在其中进行属性设置，变换矩阵计算，屏幕后处理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//5.在生命周期函数中启用深度纹理，初始化上一帧变换矩阵")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3107]||(l[3107]=i("p",null,"注意：",-1)),l[3108]||(l[3108]=i("div",{class:"language-C#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"C#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//1.考虑不同平台可能存在的垂直翻转问题、")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"if"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UNITY_UV_STARTS_AT_TOP")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (_MainTex_TexelSize.y "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    o.uv_depth.y "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o.uv_depth.y;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"endif")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//2.让移动方向向量除以2")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  从而降低运动模糊效果的强度，不要过于强烈")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3109]||(l[3109]=i("blockquote",null,[i("p",null,"实现")],-1)),l[3110]||(l[3110]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson112_MotionBlurWithDepthTexture"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Texture"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "white"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //用于控制模糊程度的 模糊偏移量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _BlurSize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"BlurSize"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Float) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ZTest Always")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Cull Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ZWrite Off")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv_depth"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vertex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex_TexelSize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _BlurSize;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _CameraDepthTexture"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//深度纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4x4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _ClipToWorldMatrix"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//裁剪空间到世界空间的变换矩阵")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4x4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _FrontWorldToClipMatrix"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//上一帧 世界空间到裁剪空间的变换矩阵")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," o"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.vertex "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv_depth "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //多平台时建议进行判断")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"if"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UNITY_UV_STARTS_AT_TOP")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                    if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (_MainTex_TexelSize.y "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                        o.uv_depth.y "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o.uv_depth.y;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"endif")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //1.得到裁剪空间下的两个点")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //获取深度值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," depth"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," SAMPLE_DEPTH_TEXTURE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_CameraDepthTexture, i.uv_depth);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //裁剪空间下的一个组合坐标 把0~1范围变换到-1~1范围")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //第一个点")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," nowClipPos"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," float4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.uv.x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 2"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", i.uv.y "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 2"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", depth "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 2"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //用裁剪空间到世界空间的变换矩阵 得到 世界空间下的带你")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldPos"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_ClipToWorldMatrix, nowClipPos);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //透视除法")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                worldPos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," worldPos.w;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //利用上一帧的变换矩阵 得到上一帧 对应的裁剪空间下的点")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //第二个点")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," oldClipPos"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_FrontWorldToClipMatrix, worldPos);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //透视除法")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                oldClipPos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," oldClipPos.w;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //2.得到运动方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float2"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," moveDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (nowClipPos.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," oldClipPos.xy)"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //3.进行模糊处理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float2"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," uv"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," i.uv;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," color"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," float4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                for"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"int"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," it"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"; it "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"; it"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"++"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                    //第一次采样累加的是当前像素所在位置的颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                    //第二次采样累加的是当前像素进行了 moveDir * _BlurSize 偏移后的颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                    //第二次采样累加的是当前像素进行了 2*moveDir * _BlurSize 偏移后的颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    color "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, uv);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," moveDir "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _BlurSize;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算叠加3次后颜色的平均值 相当于就是在进行模糊处理了")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                color "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //返回模糊处理后的颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(color.rgb, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Fallback Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3111]||(l[3111]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," System"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Collections"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," System"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Collections"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Generic"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityEngine"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," class"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Lesson112_MotionBlurWithDepthTexture"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"PostEffectBase")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ["),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," blurSize"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5f"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //用于记录上一次的变换矩阵的变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Matrix4x4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frontWorldToClipMatrix"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," void"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Start"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //开启深度纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Camera.main.depthTextureMode "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," DepthTextureMode.Depth;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //初始化上一次的变换矩阵 用 观察到裁剪变换矩阵（摄像机的透视矩阵） * 世界到观察变换矩阵")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //得到的 就是 世界空间到裁剪空间的变换矩阵")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //frontWorldToClipMatrix = Camera.main.projectionMatrix * Camera.main.worldToCameraMatrix;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," void"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," OnEnable"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //有时我们会在界面上让脚本失活，每次激活时 可以初始化一次")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        frontWorldToClipMatrix "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Camera.main.projectionMatrix "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Camera.main.worldToCameraMatrix;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    protected"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," override"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," void"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," OnRenderImage"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"RenderTexture"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," source"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"RenderTexture"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," destination"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (material "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"!="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," null"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //设置模糊程度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            material."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"SetFloat"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"_BlurSize"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", blurSize);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //设置上一帧世界空间到裁剪空间的矩阵")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            material."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"SetMatrix"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"_FrontWorldToClipMatrix"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", frontWorldToClipMatrix);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //计算这一帧的变换矩阵")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            frontWorldToClipMatrix "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Camera.main.projectionMatrix "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Camera.main.worldToCameraMatrix;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //设置这一帧的 裁剪到世界空间的变换矩阵")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            material."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"SetMatrix"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"_ClipToWorldMatrix"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", frontWorldToClipMatrix.inverse);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //进行屏幕后期处理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Graphics."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Blit"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(source, destination, material);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        else")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Graphics."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Blit"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(source, destination);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3112]||(l[3112]=i("hr",null,null,-1)),l[3113]||(l[3113]=i("h3",{id:"六、全局雾效",tabindex:"-1"},[s("六、全局雾效 "),i("a",{class:"header-anchor",href:"#六、全局雾效","aria-label":'Permalink to "六、全局雾效"'},"​")],-1)),l[3114]||(l[3114]=i("h4",{id:"_1-unity自带全局雾效",tabindex:"-1"},[s("1. Unity自带全局雾效 "),i("a",{class:"header-anchor",href:"#_1-unity自带全局雾效","aria-label":'Permalink to "1. Unity自带全局雾效"'},"​")],-1)),l[3115]||(l[3115]=i("blockquote",null,[i("p",null,"全局雾效是什么")],-1)),l[3116]||(l[3116]=i("p",null,"全局雾效（Global Fog）",-1)),i("p",null,[l[1288]||(l[1288]=s("是一种视觉效果，",-1)),a(n,{color:"red"},{default:k(()=>[...l[1287]||(l[1287]=[s("用于在3D场景中模拟大气中的雾气对远处物体的遮挡",-1)])]),_:1})]),l[3117]||(l[3117]=i("p",null,"它通过在场景中加入雾的效果，使得距离摄像机较远的物体看起来逐渐被雾气覆盖， 从而创造出一种朦胧、模糊的视觉效果。",-1)),l[3118]||(l[3118]=i("blockquote",null,[i("p",null,"Unity自带的全局雾效")],-1)),l[3119]||(l[3119]=i("p",null,"Unity当中本身就存在一个全局雾效功能",-1)),l[3120]||(l[3120]=i("p",null,"我们可以在Window—>Rendering—>Lighting窗口中的",-1)),l[3121]||(l[3121]=i("p",null,"Environment 环境页签中进行开启",-1)),l[3122]||(l[3122]=i("p",null,"雾的计算模式有三种，它们分别是",-1)),i("ol",null,[i("li",null,[l[1290]||(l[1290]=i("p",null,[i("strong",null,"Linear（线性）")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1289]||(l[1289]=[s("f = (end - |d|) / (end – start)",-1)])]),_:1}),l[1291]||(l[1291]=i("p",null,"d代表里摄像机的距离",-1)),l[1292]||(l[1292]=i("p",null,"start代表雾开始的距离（可控）",-1)),l[1293]||(l[1293]=i("p",null,"end代表雾最强时的距离（可控）",-1)),l[1294]||(l[1294]=i("p",null,"这里的距离都是相对于摄像机的",-1))]),i("li",null,[l[1296]||(l[1296]=i("p",null,[i("strong",null,"Exponential（指数）")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1295]||(l[1295]=[s("f = 1 – e^−density∗|d|",-1)])]),_:1}),l[1297]||(l[1297]=i("p",null,"d代表里摄像机的距离",-1)),l[1298]||(l[1298]=i("p",null,"e是自然对数的底约等于2.71828；",-1)),l[1299]||(l[1299]=i("p",null,"density代表雾的浓度（可控）",-1)),l[1300]||(l[1300]=i("p",null,"这里的距离都是相对于摄像机的",-1))]),i("li",null,[l[1302]||(l[1302]=i("p",null,[i("strong",null,"Exponential Squared（指数的平方）")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1301]||(l[1301]=[s("f = 1 – e^−(density−|d|)²",-1)])]),_:1}),l[1303]||(l[1303]=i("p",null,"d代表里摄像机的距离",-1)),l[1304]||(l[1304]=i("p",null,"e是自然对数的底约等于2.71828；",-1)),l[1305]||(l[1305]=i("p",null,"density代表雾的浓度（可控）",-1)),l[1306]||(l[1306]=i("p",null,"这里的距离都是相对于摄像机的",-1))])]),a(n,{color:"red"},{default:k(()=>[...l[1307]||(l[1307]=[s("它们都是用来计算雾的混合因子f 的，有了混合因子，会用雾的颜色和物体本来的颜色进行混合计算",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1308]||(l[1308]=[s("最终的颜色= （1-f）* 物体的颜色+ f * 雾的颜色",-1)])]),_:1}),l[3123]||(l[3123]=i("p",null,[i("strong",null,"也就是说得到的混合因子越大，雾的颜色占比越大，表现效果就是雾越浓")],-1)),l[3124]||(l[3124]=i("p",null,[i("strong",null,"混合因子越小，物体本来的颜色占比越大，表现效果就是雾越淡")],-1)),l[3125]||(l[3125]=i("p",null,[i("strong",null,"需要注意的是:")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1309]||(l[1309]=[s("如果想要让物体响应Unity自带的全局雾效，我们需要在对应物体的Shader中加入相关的CG代码。",-1)])]),_:1}),l[3126]||(l[3126]=i("p",null,[i("strong",null,"关键的几句CG代码是（创建顶点片元着色器时自带）：")],-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1310]||(l[1310]=[s("编译指令#pragma multi_compile_fog ",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1311]||(l[1311]=[s("内置文件#include “UnityCG.cginc” ",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1312]||(l[1312]=[s("v2f结构体中加入用于计算雾效坐标信息(通常是计算深度信息)的宏UNITY_FOG_COORDS(数字) 后面的数字和阴影中的宏一样，前面有几个纹理坐标语义，这里就写几 ",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1313]||(l[1313]=[s("顶点着色器中加入用于计算雾效数据的宏UNITY_TRANSFER_FOG( v2f结构体, v2f结构体.顶点 ); ",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1314]||(l[1314]=[s("片元着色器中加入用于应用雾效的宏UNITY_APPLY_FOG(v2f结构体.fogCoord, 颜色);",-1)])]),_:1})])]),l[3127]||(l[3127]=i("hr",null,null,-1)),l[3128]||(l[3128]=i("h4",{id:"_2-利用深度纹理实现-全局雾效-的基本原理",tabindex:"-1"},[s("2. 利用深度纹理实现 全局雾效 的基本原理 "),i("a",{class:"header-anchor",href:"#_2-利用深度纹理实现-全局雾效-的基本原理","aria-label":'Permalink to "2. 利用深度纹理实现 全局雾效 的基本原理"'},"​")],-1)),l[3129]||(l[3129]=i("blockquote",null,[i("p",null,"为什么要实现屏幕后处理效果的全局雾效")],-1)),l[3130]||(l[3130]=i("p",null,[i("strong",null,"为Unity自带的全局雾效有以下几个缺点：")],-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1315]||(l[1315]=[s("需要为每个自定义Shader按规则书写雾效处理代码",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1316]||(l[1316]=[s("自带的全局雾效无法实现一些自定义效果",-1)])]),_:1}),l[1320]||(l[1320]=i("p",null,[i("strong",null,"比如：")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1317]||(l[1317]=[s("基于高度的雾效- 可以用来做出悬浮的水雾效果",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1318]||(l[1318]=[s("**不规则的雾效（结合噪声图实现）- 可以为雾增加随机性和不规则形** ",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1319]||(l[1319]=[s("动态变化的雾、基于纹理的雾等等",-1)])]),_:1})])]),l[3131]||(l[3131]=i("p",null,[s("基于深度纹理的全局雾效，它相对于Unity自带的全局雾效的"),i("strong",null,"好处"),s("是：")],-1)),l[3132]||(l[3132]=i("ol",null,[i("li",null,[i("strong",null,"一次屏幕后处理便可以得到雾的效果，不用为每个自定义Shader添加雾效代码")]),i("li",null,[i("strong",null,"可以基于该全局雾效拓展出多种雾效，可以方便的模拟出线性、指数、指数平方雾效，甚至实 现一些基于高度的雾效、使用噪声图的雾效、动态变化的雾效等等")])],-1)),l[3133]||(l[3133]=i("hr",null,null,-1)),l[3134]||(l[3134]=i("h4",{id:"_3-利用深度纹理实现全局雾效的基本原理",tabindex:"-1"},[s("3. 利用深度纹理实现全局雾效的基本原理 "),i("a",{class:"header-anchor",href:"#_3-利用深度纹理实现全局雾效的基本原理","aria-label":'Permalink to "3. 利用深度纹理实现全局雾效的基本原理"'},"​")],-1)),a(n,{color:"blue"},{default:k(()=>[...l[1321]||(l[1321]=[s("halfH = Near * tan(FOV/2) ",-1)])]),_:1}),a(n,{color:"blue"},{default:k(()=>[...l[1322]||(l[1322]=[s("halfW = halfH * aspect (摄像机参数得到Game窗口的宽高比 Aspect = 宽: 高= 宽/ 高)</span>",-1)])]),_:1}),a(n,{color:"green"},{default:k(()=>[...l[1323]||(l[1323]=[s("toTop = Camera.up * halfH toRight = Camera.Right * halfW",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1324]||(l[1324]=[s("TL = Camera.forward * Near + toTop – toRight",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1325]||(l[1325]=[s("TR = Camera.forward * Near + toTop + toRight",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1326]||(l[1326]=[s("BL = Camera.forward * Near - toTop – toRight",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1327]||(l[1327]=[s("BR = Camera.forward * Near - toTop + toRight",-1)])]),_:1}),a(n,{color:"blue"},{default:k(()=>[...l[1328]||(l[1328]=[s("***Scale = |TL|/Near*** ",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1329]||(l[1329]=[s("RayTL = TL.Normalized * Scale",-1)])]),_:1}),i("p",null,[l[1331]||(l[1331]=s("**",-1)),a(n,{color:"red"},{default:k(()=>[...l[1330]||(l[1330]=[s("RayTR = TR.Normalized * Scale",-1)])]),_:1}),l[1332]||(l[1332]=s(" **",-1))]),i("p",null,[l[1334]||(l[1334]=s("**",-1)),a(n,{color:"red"},{default:k(()=>[...l[1333]||(l[1333]=[s("RayBL = BL.Normalized * Scale",-1)])]),_:1}),l[1335]||(l[1335]=s(" **",-1))]),a(n,{color:"red"},{default:k(()=>[...l[1336]||(l[1336]=[s("RayBR = BR.Normalized * Scale",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1337]||(l[1337]=[s("像素的世界坐标 = 摄像机位置+ 观察空间线性深度值* 摄像机指向像素世界坐标的方向向量",-1)])]),_:1}),l[3135]||(l[3135]=i("hr",null,null,-1)),l[3136]||(l[3136]=i("h4",{id:"_4-具体实现",tabindex:"-1"},[s("4. 具体实现 "),i("a",{class:"header-anchor",href:"#_4-具体实现","aria-label":'Permalink to "4. 具体实现"'},"​")],-1)),l[3137]||(l[3137]=i("h5",{id:"_4-1-c",tabindex:"-1"},[s("4.1 C# "),i("a",{class:"header-anchor",href:"#_4-1-c","aria-label":'Permalink to "4.1 C#"'},"​")],-1)),l[3138]||(l[3138]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," System"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Collections"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," System"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Collections"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Generic"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityEngine"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," class"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Lesson113_FogWithDepthTexture"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"PostEffectBase")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //雾的颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Color"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fogColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Color.gray;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //雾的浓度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ["),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fogDensity"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1f"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //雾开始的距离")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fogStart"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0f"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //雾最浓时的距离")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fogEnd"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //4x4的矩阵 用于传递 4个向量参数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Matrix4x4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," rayMatrix"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    // Start is called before the first frame update")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    void"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Start"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Camera.main.depthTextureMode "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," DepthTextureMode.Depth;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    protected"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," override"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," void"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UpdateProperty"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(material "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"!="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," null"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //得到摄像机 视口 夹角")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fov"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Camera.main.fieldOfView "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 2f"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //得到近裁剪面距离")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," near"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Camera.main.nearClipPlane;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //得到窗口比例")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," aspect"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Camera.main.aspect;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //计算高的一半")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," halfH"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," near "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Mathf."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Tan"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(fov "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Mathf.Deg2Rad);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //宽的一半")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," halfW"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," halfH "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," aspect;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //计算竖直向上的和水平向右的偏移向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            Vector3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," toTop"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Camera.main.transform.up "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," halfH;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            Vector3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," toRight"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Camera.main.transform.right "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," halfW;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //算出指向四个顶点的向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            Vector3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," TL"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Camera.main.transform.forward "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," near "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," toTop "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," toRight;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            Vector3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," TR"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Camera.main.transform.forward "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," near "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," toTop "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," toRight;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            Vector3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," BL"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Camera.main.transform.forward "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," near "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," toTop "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," toRight;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            Vector3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," BR"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Camera.main.transform.forward "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," near "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," toTop "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," toRight;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //为了让深度值 计算出来是两点间距离 所以需要乘以一个缩放值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," scale"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," TL.magnitude "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," near;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //真正的最终想要的四条射线向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            TL "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," TL.normalized "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," scale;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            TR "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," TR.normalized "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," scale;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            BL "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," BL.normalized "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," scale;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            BR "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," BR.normalized "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," scale;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            rayMatrix."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"SetRow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", BL);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            rayMatrix."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"SetRow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", BR);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            rayMatrix."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"SetRow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", TR);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            rayMatrix."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"SetRow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", TL);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //设置材质球相关属性(Shader属性)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            material."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"SetColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"_FogColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", fogColor);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            material."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"SetFloat"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"_FogDensity"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", fogDensity);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            material."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"SetFloat"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"_FogStart"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", fogStart);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            material."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"SetFloat"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"_FogEnd"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", fogEnd);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            material."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"SetMatrix"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"_RayMatrix"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", rayMatrix);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //protected override void OnRenderImage(RenderTexture source, RenderTexture destination)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //    if (material != null)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //    {")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //    else")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //        Graphics.Blit(source, destination);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3139]||(l[3139]=i("h5",{id:"_4-2-shader",tabindex:"-1"},[s("4.2 Shader "),i("a",{class:"header-anchor",href:"#_4-2-shader","aria-label":'Permalink to "4.2 Shader"'},"​")],-1)),l[3140]||(l[3140]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//1.新建Shader代码，取名和C#相同，删除无用代码")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//2.声明属性，映射属性，注意属性和C#中命名相同")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  还有深度纹理、矩阵、纹素属性")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//3.屏幕后处理标配")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  ZTest Always")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  Cull Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  ZWrite Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//4.v2f结构体")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  考虑翻转的深度纹理half2 uv_depth:TEXCOORD1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  射线向量 loat4 ray:TEXCOORD2")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//5.顶点着色器(图片有四个顶点，会进入四次，我们需要判断每一个顶点使用哪一个射线向量）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  坐标转换、uv赋值（考虑深度纹理翻转）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  根据uv坐标判断顶点位置，决定赋值哪一个向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  同样需要考虑翻转")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//6.片元着色器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  深度纹理采样，转换到观察空间下离摄像机的实际距离")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  利用 摄像机位置 + 深度值*射线向量 得到世界空间坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  利用雾公式 算出混合因子 我们这里不使用传统雾公式")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  我们实现一种特殊的基于高度的线性雾效 并且把浓度也用上")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  利用混合因子 进行颜色混合")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//7.FallBack Off")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3141]||(l[3141]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson113_FogWithDepthTexture"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Texture"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "white"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _FogColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"FogColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _FogDensity"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"FogDensity"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Float) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _FogStart"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"FogStart"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Float) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _FogEnd"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"FogEnd"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Float) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 10")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ZTest Always")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Cull Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ZWrite Off")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //深度纹理UV")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv_depth"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //顶点射线 指向四个角的方向向量 （传递到片元时 会自动进行插值 运算）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ray"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD2;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vertex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //纹素 用来判断翻转会使用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            half4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex_TexelSize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //深度纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _CameraDepthTexture"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //雾相关的属性")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _FogColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _FogDensity;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _FogStart"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _FogEnd"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //矩阵相关 里面存储了 4条射线向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //0-左下 1-右下 2-右上 3-左上")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4x4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _RayMatrix"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," o"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.vertex "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv_depth "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //顶点着色器函数 每一个顶点都会执行一次")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //对于屏幕后处理来说 就会执行4次 因为有4个顶点 （4个角）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //通过uv坐标判断 当前的顶点位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                int"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," index"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.texcoord.x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," &&"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord.y "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    index "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                else"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.texcoord.x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," &&"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord.y "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    index "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                else"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.texcoord.x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," &&"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord.y "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    index "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                else")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    index "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //判断 是否需要进行纹理翻转 如果翻转了 深度的uv和对应顶点需要变化")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"if"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UNITY_UV_STARTS_AT_TOP")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex_TexelSize.y "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    o.uv_depth.y "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o.uv_depth.y;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    index "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 3"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," index;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"endif")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //根据顶点的位置 决定使用那一个射线向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.ray "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _RayMatrix[index];")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //观察空间下 离摄像机的实际距离（Z分量）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," linearDepth"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," LinearEyeDepth"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"SAMPLE_DEPTH_TEXTURE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_CameraDepthTexture,i.uv_depth));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算世界空间下 像素的坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldPos"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _WorldSpaceCameraPos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," linearDepth "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," i.ray;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //雾相关的计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //混合因子")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," f"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (_FogEnd "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," worldPos.y)"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_FogEnd "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _FogStart);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //取0~1之间 超过会取极值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                f "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," saturate"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(f "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _FogDensity);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //利用插值 在两个颜色之间进行融合")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," color"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lerp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv).rgb, _FogColor.rgb, f);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(color.rgb, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Fallback Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3142]||(l[3142]=i("hr",null,null,-1)),l[3143]||(l[3143]=i("h3",{id:"七、深度法线纹理边缘检测效果",tabindex:"-1"},[s("七、深度法线纹理边缘检测效果 "),i("a",{class:"header-anchor",href:"#七、深度法线纹理边缘检测效果","aria-label":'Permalink to "七、深度法线纹理边缘检测效果"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1338]||(l[1338]=[s("基于深度+法线纹理来实现边缘检测屏幕后期处理效果",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1339]||(l[1339]=[s("不会受纹理和光照的影响，只会根据渲染物体的模型信息（深度、法线） 来进行判断检测，这样检测出来的边缘更加的可靠！",-1)])]),_:1}),l[3144]||(l[3144]=i("p",null,[i("strong",null,"注意：")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1340]||(l[1340]=[s("**对于2D图片，基于灰度值的边缘检测更合适** ",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1341]||(l[1341]=[s("对于3D场景，基于深度+法线纹理的边缘检测更合适 主要原因是2D图片中的深度和法线信息往往是一致的，不存在差异性",-1)])]),_:1}),l[3145]||(l[3145]=i("h4",{id:"_1-利用深度-法线纹理实现边缘检测的基本原理",tabindex:"-1"},[s("1. 利用深度+法线纹理实现边缘检测的基本原理 "),i("a",{class:"header-anchor",href:"#_1-利用深度-法线纹理实现边缘检测的基本原理","aria-label":'Permalink to "1. 利用深度+法线纹理实现边缘检测的基本原理"'},"​")],-1)),l[3146]||(l[3146]=i("p",null,"基本原理：",-1)),a(n,{color:"red"},{default:k(()=>[...l[1342]||(l[1342]=[s("基于Roberts(罗伯茨)交叉算子，通过比较对角线上的的像素的深度和法线值，判断是否在边缘上。",-1)])]),_:1}),a(h,{face:"shader/法线和深度纹理:利用深度+法线纹理实现边缘检测"}),i("ol",null,[i("li",null,[l[1346]||(l[1346]=i("p",null,[i("strong",null,"如何得到对角线上的像素")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1343]||(l[1343]=[s("在顶点着色器中，利用纹素进行uv坐标偏移计算",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1344]||(l[1344]=[s("**并且我们可以添加一个可控的采样偏移距离变量_SampleDistance** ",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1345]||(l[1345]=[s("**它可以用来决定描边的粗细，值越大描边越粗** ",-1)])]),_:1}),l[1347]||(l[1347]=i("p",null,[i("strong",null,"原理是")],-1)),l[1348]||(l[1348]=i("p",null,[i("strong",null,"采样离中心像素越近，检测的变化更细微，深度和法线值变化小，边缘会较细")],-1)),l[1349]||(l[1349]=i("p",null,[i("strong",null,"采样离中心像素越远，检测的范围较大，深度和法线值变化大，边缘会较粗")],-1))]),i("li",null,[l[1353]||(l[1353]=i("p",null,[i("strong",null,"如何进行深度和法线的比较")],-1)),l[1354]||(l[1354]=i("p",null,[i("strong",null,"在片元着色器中，利用顶点着色器中得到的uv坐标，")],-1)),l[1355]||(l[1355]=i("p",null,[i("strong",null,"在深度+法线纹理中进行采样，得到深度值和法线值。")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1350]||(l[1350]=[s("再求出对角线上对角的两个像素的深度值差和法线值差。",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1351]||(l[1351]=[s("**如果其中一个的差值大于了自定义的阈值** ",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1352]||(l[1352]=[s("那么我们认为该像素点在物体的边缘上，否则不是边缘",-1)])]),_:1})]),i("li",null,[l[1360]||(l[1360]=i("p",null,[i("strong",null,"如何决定是否在边缘上")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1356]||(l[1356]=[s("**根据刚才进行的深度和法线值的比较，** ",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1357]||(l[1357]=[s("**只要其中之一（深度或者法线）满足了大于自定义阈值的条件，** ",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1358]||(l[1358]=[s("**那么该像素就在边缘上，就使用描边颜色进行颜色处理** ",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1359]||(l[1359]=[s("关键计算规则如下",-1)])]),_:1}),a(h,{face:"shader/法线和深度纹理:利用深度+法线纹理实现边缘检测2"})])]),l[3147]||(l[3147]=i("h4",{id:"_2-具体实现",tabindex:"-1"},[s("2. 具体实现 "),i("a",{class:"header-anchor",href:"#_2-具体实现","aria-label":'Permalink to "2. 具体实现"'},"​")],-1)),l[3148]||(l[3148]=i("h5",{id:"_2-1-shader",tabindex:"-1"},[s("2.1 Shader "),i("a",{class:"header-anchor",href:"#_2-1-shader","aria-label":'Permalink to "2.1 Shader"'},"​")],-1)),l[3149]||(l[3149]=i("div",{class:"language-C#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"C#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//1.新建Shader，取名EdgeDetectionWithDepthNormalsTexture")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  删除无用代码")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//2.声明属性，属性映射")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  主纹理 _MainTex")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  边缘检测强度 _EdgeOnly 0显示场景 1只显示边缘 用于控制自定义背景色程度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  描边颜色 _EdgeColor")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  背景颜色 _BackgroundColor")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  采样偏移距离 _SampleDistance")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  深度敏感度 _SensitivityDepth")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  法线敏感度 _SensitivityNormal")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  注意：映射属性时需要加入")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  纹素 _MainTex_TexelSize")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  深度+法线纹理 _CameraDepthNormalsTexture")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//3.屏幕后处理标配")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//4.结构体")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  uv数组，5个空间（存储中心点、对角线4个点）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//5.顶点着色器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  4-1.顶点坐标转换")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  4-2.5个uv坐标赋值，按这样的顺序")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      中心点、左上角、右下角、右上角、左下角")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//6.片元着色器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  5-1.直接采样得到对角线四个点的深度法线信息")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  5-2.实现一个用于比较两点深度、法线信息的函数，返回0或1，方便进行插值计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  5-3.声明一个插值变量 0代表使用边缘色 1代表使用源颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  5-4.考虑背景色差值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//7.FallBack Off")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3150]||(l[3150]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson114_EdgeDetectionWithDepthNormalsTexture"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Texture"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "white"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //用于控制自定义背景颜色程度的 0要显示原始背景色 1只显示边缘 完全显示自定义背景色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _EdgeOnly"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"EdgeOnly"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Float) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //边缘的描边颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _EdgeColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"EdgeColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //自定义背景颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _BackgroundColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"BackgroundColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //采样偏移程度 主要用来控制描边的粗细 值越大越粗 反之越细")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _SampleDistance"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SampleDistance"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Float) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //深度和法线的敏感度 用来进行这个差值判断时 起作用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _SensitivityDepth"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SensitivityDepth"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Float) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _SensitivityNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SensitivityNormal"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Float) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //屏幕后处理标配")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ZTest Always")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Cull Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ZWrite Off")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //用于存储5个像素的uv坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                half2 uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vertex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //纹素 用于进行uv坐标偏移 取得周围像素的uv坐标的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            half4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex_TexelSize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //深度+法线纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _CameraDepthNormalsTexture"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";\\")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //用于控制自定义背景颜色程度的 0要显示原始背景色 1只显示边缘 完全显示自定义背景色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _EdgeOnly;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //边缘的描边颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _EdgeColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //自定义背景颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _BackgroundColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //采样偏移程度 主要用来控制描边的粗细 值越大越粗 反之越细")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SampleDistance"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //深度和法线的敏感度 用来进行这个差值判断时 起作用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SensitivityDepth"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SensitivityNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //用于比较两个点的深度和法线纹理中采样得到的信息 用来判断是否是边缘")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //返回值的含义")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //1 - 法线和深度值基本相同 处于同一个平面上")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //0 - 差异大 不在一个平面上")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            half"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," CheckSame"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"half4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," depthNormal1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"half4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," depthNormal2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //分别得到两个点信息的深度和法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //第一个点的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //得到深度值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," depth1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," DecodeFloatRG"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(depthNormal1.zw);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //得到法线的xy")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float2"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normal1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," depthNormal1.xy;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //第二个点的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //得到深度值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," depth2"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," DecodeFloatRG"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(depthNormal2.zw);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //得到法线的xy")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float2"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normal2"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," depthNormal2.xy;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //法线的差异计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算两条法线的xy的差值 并且乘以 自定义的敏感度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float2"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalDiff"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," abs"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(normal1 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," normal2) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SensitivityNormal;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //判断两个法线是否在一个平面")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //如果差异不大 证明基本上在一个平面上 返回 1；否则返回0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                int"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," isSameNormal"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (normalDiff.x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," normalDiff.y) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //深度的差异计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," depthDiff"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," abs"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(depth1 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," depth2) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SensitivityDepth;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //判断深度是不是很接近 是不是相当于在一个平面上")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //如果满足条件 证明深度值差异非常小 基本趋近于在一个平面上 返回1；否则 返回0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                int"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," isSameDepth"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," depthDiff "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," depth1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //返回值的含义")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //1 - 法线和深度值基本相同 处于同一个平面上")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //0 - 差异大 不在一个平面上")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," isSameDepth "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," isSameNormal "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"?"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," :"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," o"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.vertex "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //uv相关坐标赋值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                half2"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," uv"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //中心点")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," uv;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //对角线相关像素uv坐标赋值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //左上角")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_TexelSize.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," half2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SampleDistance;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //右下角")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_TexelSize.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," half2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SampleDistance;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //右上角")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_TexelSize.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," half2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SampleDistance;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //左下角")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_TexelSize.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," half2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SampleDistance;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //获取四个点的深度和法线信息")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                half4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," TL"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_CameraDepthNormalsTexture, i.uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                half4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," BR"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_CameraDepthNormalsTexture, i.uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                half4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," TR"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_CameraDepthNormalsTexture, i.uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                half4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," BL"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_CameraDepthNormalsTexture, i.uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //根据深度+法线信息 去判断 是否是边缘")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                half"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," edgeLerpValue"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //得到判断结果 返回1代表是一个平面 值不变为1；返回0代表不是一个平面，值变为0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                edgeLerpValue "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," CheckSame"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(TL, BR);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                edgeLerpValue "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," CheckSame"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(TR, BL);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //通过插值进行颜色变化")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," withEdgeColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lerp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_EdgeColor, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]), edgeLerpValue);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," onlyEdgeColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lerp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_EdgeColor, _BackgroundColor, edgeLerpValue);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lerp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(withEdgeColor, onlyEdgeColor, _EdgeOnly);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3151]||(l[3151]=i("h5",{id:"_2-2-c",tabindex:"-1"},[s("2.2 C# "),i("a",{class:"header-anchor",href:"#_2-2-c","aria-label":'Permalink to "2.2 C#"'},"​")],-1)),l[3152]||(l[3152]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//1.新建C#脚本，取名和Shader相同")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//2.继承PostEffectBase")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//3.声明可控变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//4.Start函数中 开启深度+法线纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  注意：不要直接=，要|=，避免关闭深度纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//5.重写UpdateProperty函数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  在其中设置属性即可")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3153]||(l[3153]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," System"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Collections"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," System"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Collections"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Generic"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityEngine"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," class"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Lesson114_EdgeDetectionWithDepthNormalsTexture"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"PostEffectBase")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ["),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," edgeOnly"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Color"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," edgeColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Color.black;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Color"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," backgroundColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Color.white;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," sampleDistance"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," sensitivityDepth"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," sensitivityNormal"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    void"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Start"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //避免关闭深度纹理 影响其他屏幕后处理效果")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Camera.main.depthTextureMode "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"|="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," DepthTextureMode.DepthNormals;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    protected"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," override"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," void"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UpdateProperty"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(material "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"!="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," null"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            material."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"SetFloat"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"_EdgeOnly"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", edgeOnly);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            material."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"SetColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"_EdgeColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", edgeColor);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            material."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"SetColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"_BackgroundColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", backgroundColor);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            material."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"SetFloat"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"_SampleDistance"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", sampleDistance);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            material."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"SetFloat"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"_SensitivityDepth"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", sensitivityDepth);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            material."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"SetFloat"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"_SensitivityNormal"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", sensitivityNormal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3154]||(l[3154]=i("hr",null,null,-1)),l[3155]||(l[3155]=i("h2",{id:"shader实践知识",tabindex:"-1"},[s("Shader实践知识 "),i("a",{class:"header-anchor",href:"#shader实践知识","aria-label":'Permalink to "Shader实践知识"'},"​")],-1)),l[3156]||(l[3156]=i("h3",{id:"一、流光效果",tabindex:"-1"},[s("一、流光效果 "),i("a",{class:"header-anchor",href:"#一、流光效果","aria-label":'Permalink to "一、流光效果"'},"​")],-1)),l[3157]||(l[3157]=i("h4",{id:"_1-流光效果的基本原理",tabindex:"-1"},[s("1. 流光效果的基本原理 "),i("a",{class:"header-anchor",href:"#_1-流光效果的基本原理","aria-label":'Permalink to "1. 流光效果的基本原理"'},"​")],-1)),l[3158]||(l[3158]=i("p",null,[i("strong",null,"实现流光效果的原理非常简单")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1361]||(l[1361]=[s("**就是利用Unity内置的时间变量_Time，让UV坐标沿着一个固定的方向持续递增，** ",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1362]||(l[1362]=[s("然后用偏移后的UV坐标对纹理贴图进行采样，就可以得到流动的效果了。",-1)])]),_:1}),l[3159]||(l[3159]=i("h4",{id:"_2-美术注意事项",tabindex:"-1"},[s("2. 美术注意事项 "),i("a",{class:"header-anchor",href:"#_2-美术注意事项","aria-label":'Permalink to "2. 美术注意事项"'},"​")],-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1363]||(l[1363]=[s("**UV需要均匀的展开，如果UV展开不均匀或者出现拉伸，流光的移动会出现扭曲和不自然 需要确保模型的UV展开尽量均匀和平滑** ",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1364]||(l[1364]=[s("**UV的比例要一致，模型上不同部分的UV比例需要保持一致，确保流光效果的移动速度在 整个模型上是一致的。如果某些区域的UV比例过大或过小，流光在这些区域的移动速度会不同** ",-1)])]),_:1})]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1365]||(l[1365]=[s("贴图需要无缝衔接（首尾或上下相连），避免流光效果再边界处出现断裂或跳跃",-1)])]),_:1})])]),l[3160]||(l[3160]=i("h4",{id:"_3-实现",tabindex:"-1"},[s("3. 实现 "),i("a",{class:"header-anchor",href:"#_3-实现","aria-label":'Permalink to "3. 实现"'},"​")],-1)),l[3161]||(l[3161]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//1.新建Shader MovingLight")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  删除无用代码")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//2.属性声明 属性映射")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  主纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  叠加颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  移动速度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//3.透明相关设置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  渲染标签设置——渲染类型，渲染队列")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  混合模式 用 Blend One One 直接叠加颜色 让其效果更亮 更有流光的感觉")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  关闭剔除 两面都渲染")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//4.顶点着色器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  坐标转换，纹理缩放偏移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//5.片元着色器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  用_Time进行u轴方向的偏移采样")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  返回采样颜色 * 叠加颜色")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3162]||(l[3162]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson115_MovingLight"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Texture"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "white"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //光叠加的颜色 默认图片时白色 我们叠加一个自定义颜色 可以改变它")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Color"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Color"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //流光移动的速度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Speed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Speed"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Float) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Tags { "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"RenderType"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Transparent"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Queue"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Transparent"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Blend One One")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Cull Off")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vertex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Color"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Speed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," o"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.vertex "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," TRANSFORM_TEX"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.texcoord, _MainTex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //根据时间 进行UV坐标偏移 这样x（u）方向就可以看到移动的效果了")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                i.uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," float2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.uv.x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Time.x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Speed, i.uv.y);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Color;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3163]||(l[3163]=i("hr",null,null,-1)),l[3164]||(l[3164]=i("h3",{id:"二、模型描边效果",tabindex:"-1"},[s("二、模型描边效果 "),i("a",{class:"header-anchor",href:"#二、模型描边效果","aria-label":'Permalink to "二、模型描边效果"'},"​")],-1)),l[3165]||(l[3165]=i("h4",{id:"_1-基本原理-2",tabindex:"-1"},[s("1. 基本原理 "),i("a",{class:"header-anchor",href:"#_1-基本原理-2","aria-label":'Permalink to "1. 基本原理"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1366]||(l[1366]=[s("两个Pass渲染对象，一个Pass用于渲染沿法线方向放大的模型，一个Pass用于正常渲染正常模型。 相当于先用纯色渲染一次放大后的模型，再用模型本来的颜色覆盖重合部分",-1)])]),_:1}),i("ol",null,[i("li",null,[l[1373]||(l[1373]=i("p",null,"如何放大模型",-1)),l[1374]||(l[1374]=i("p",null,"在第一个Pass中",-1)),i("p",null,[l[1368]||(l[1368]=s("我们可以在顶点着色器函数 中",-1)),a(n,{color:"red"},{default:k(()=>[...l[1367]||(l[1367]=[s("将顶点沿着法线方向进行偏移",-1)])]),_:1}),l[1369]||(l[1369]=s("，",-1))]),l[1375]||(l[1375]=i("p",null,[i("strong",null,"偏移的距离可以是一个自定义参数，它可以用来控制边缘线的粗细。")],-1)),i("p",null,[l[1372]||(l[1372]=s("在片元着色器函数 ",-1)),i("strong",null,[l[1371]||(l[1371]=s("中直接返回一个自定义颜色即可，",-1)),a(n,{color:"red"},{default:k(()=>[...l[1370]||(l[1370]=[s("它决定了边缘线的颜色",-1)])]),_:1})])])]),i("li",null,[l[1378]||(l[1378]=i("p",null,"如何覆盖重合部分",-1)),l[1379]||(l[1379]=i("p",null,"在第二个Pass中，我们只需要正常按需求(是否受光照影响等)渲染模型即可",-1)),l[1380]||(l[1380]=i("p",null,[i("strong",null,"但是正常情况下，放大的部分会直接挡住正常大小的模型内容，")],-1)),l[1381]||(l[1381]=i("p",null,[i("strong",null,"这是因为第二个Pass的渲染的重合部分无法通过深度写入，直接被抛弃了")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1376]||(l[1376]=[s("**要解决这个问题很简单，直接让第一个Pass关闭深度写入即可** ",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1377]||(l[1377]=[s("这样重合部分，就会显示为第二个Pass绘制的结果",-1)])]),_:1})])]),a(n,{color:"red"},{default:k(()=>[...l[1382]||(l[1382]=[s("两个Pass渲染对象，一个Pass用于渲染沿法线方向放大的模型，一个Pass用于正常渲染正常模型。 相当于先用纯色渲染一次放大后的模型，再用模型本来的颜色覆盖重合部分。 为了让重合部分能够正常显示为第二个Pass的渲染内容，需要关闭第一个Pass的深度写入！",-1)])]),_:1}),l[3166]||(l[3166]=i("h4",{id:"_2-解决关闭深度写入带来的问题",tabindex:"-1"},[s("2. 解决关闭深度写入带来的问题 "),i("a",{class:"header-anchor",href:"#_2-解决关闭深度写入带来的问题","aria-label":'Permalink to "2. 解决关闭深度写入带来的问题"'},"​")],-1)),i("p",null,[l[1384]||(l[1384]=s("虽然关闭第一个Pass的深度写入可以帮助我们实现出想要的效果， 但是它会带来一个问题，",-1)),a(n,{color:"red"},{default:k(()=>[...l[1383]||(l[1383]=[s("就是物体后方的内容会覆盖掉边缘线！",-1)])]),_:1})]),l[3167]||(l[3167]=i("p",null,"解决这个问题的方案是：",-1)),a(n,{color:"red"},{default:k(()=>[...l[1385]||(l[1385]=[s("设置该模型描边效果Shader 的渲染队列为Transparent，让它晚于几何体进行渲染",-1)])]),_:1}),l[3168]||(l[3168]=i("h4",{id:"_3-具体实现",tabindex:"-1"},[s("3. 具体实现 "),i("a",{class:"header-anchor",href:"#_3-具体实现","aria-label":'Permalink to "3. 具体实现"'},"​")],-1)),l[3169]||(l[3169]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//1.新建Shader 取名 OutLine")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  删除无用代码")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//2.属性声明")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  边缘线颜色 _OutLineColor")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  边缘线粗细 _OutLineWidth")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//3.复制一个Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//4.编写第一个Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  4-1.关闭深度写入")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  4-2.属性映射")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  4-3.结构体相关")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      不需要纹理坐标,因为颜色定死 不需要采样")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  4-4.顶点着色器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      顶点朝法线方向进行偏移后再转换到裁剪空间")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  4-5.片元着色器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      直接返回边缘线颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//5.编写第二个Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  编写传统的纹理采样Pass进行测试即可（如果有光照相关的需求 自定添加即可）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},'//6.FallBack "Diffuse"')])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3170]||(l[3170]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson116_OutLine"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Texture"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "white"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _OutLineColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"OutLineColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _OutLineWidth"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"OutLineWidth"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Float) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Tags { "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"RenderType"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Opaque"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Queue"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Transparent"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //关闭深度写入 目的是 第二个Pass能够覆盖重合的地方")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ZWrite Off")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vertex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //边缘线颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _OutLineColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //边缘线粗细")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _OutLineWidth;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," o"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //偏移顶点位置 朝法线方向偏移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //让我们的顶点朝法线方向 偏移 自定义个单位 这个自定义变量 就是决定模型膨胀多少的 就可以决定边缘线的粗细")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," newVertex"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.vertex "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _OutLineWidth;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //把膨胀过后的顶点转到裁剪空间")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.vertex "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"float4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(newVertex, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _OutLineColor;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vertex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            half4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," o"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.vertex "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," TRANSFORM_TEX"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.texcoord, _MainTex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Fallback "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Diffuse"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3171]||(l[3171]=i("hr",null,null,-1)),l[3172]||(l[3172]=i("h3",{id:"三、遮挡半透明效果",tabindex:"-1"},[s("三、遮挡半透明效果 "),i("a",{class:"header-anchor",href:"#三、遮挡半透明效果","aria-label":'Permalink to "三、遮挡半透明效果"'},"​")],-1)),l[3173]||(l[3173]=i("p",null,"遮挡半透明效果就是",-1)),a(n,{color:"red"},{default:k(()=>[...l[1386]||(l[1386]=[s("物体被挡住的部分，也能呈现出一种半透明效果而被看到（具体效果可以自定义）",-1)])]),_:1}),l[3174]||(l[3174]=i("p",null,"比如当角色在建筑物之间穿行时，被遮挡部分能够呈现出半透明效果而被我们看到。",-1)),l[3175]||(l[3175]=i("h4",{id:"_1-基本原理-3",tabindex:"-1"},[s("1. 基本原理 "),i("a",{class:"header-anchor",href:"#_1-基本原理-3","aria-label":'Permalink to "1. 基本原理"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1387]||(l[1387]=[s("两个Pass渲染对象，一个Pass用于渲染被遮挡部分，一个Pass用于渲染未遮挡模型。 被遮挡部分通过修改深度测试规则和关闭深度写入达到目的",-1)])]),_:1}),i("ol",null,[i("li",null,[l[1391]||(l[1391]=i("p",null,"如何渲染遮挡部分",-1)),l[1392]||(l[1392]=i("p",null,"在第一个Pass中",-1)),l[1393]||(l[1393]=i("p",null,[s("我们"),i("strong",null,"按照想要的遮挡效果去实现Shader"),s("即可（比如半透明或X射线效果）")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1388]||(l[1388]=[s("最关键的点，是需要修改该 Pass的深度测试规则，并且关闭深度写入！",-1)])]),_:1}),l[1394]||(l[1394]=i("p",null,[i("strong",null,"修改深度测试的目的：")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1389]||(l[1389]=[s("只有自己的深度值大于深度缓冲中的值才渲染，相当于只有前方有遮挡时才渲染",-1)])]),_:1}),l[1395]||(l[1395]=i("p",null,[i("strong",null,"关闭深度写入的目的：")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1390]||(l[1390]=[s("如果前方有遮挡，又写入较大的深度值，执行第二个Pass时会通过深度写入， 导致第二个Pass的内容通过深度测试，呈现出未被遮挡的错误效果！",-1)])]),_:1})]),i("li",null,[l[1398]||(l[1398]=i("p",null,"如何渲染未遮挡部分",-1)),l[1399]||(l[1399]=i("p",null,"在第二个Pass中",-1)),i("p",null,[l[1397]||(l[1397]=s("我们",-1)),a(n,{color:"red"},{default:k(()=>[...l[1396]||(l[1396]=[i("strong",null,"只需要正常按需求（是否受光照影响等）渲染模型即可",-1)])]),_:1})]),l[1400]||(l[1400]=i("p",null,"不需要做什么特别处理",-1))])]),l[3176]||(l[3176]=i("h4",{id:"_2-自定义半透明效果",tabindex:"-1"},[s("2. 自定义半透明效果 "),i("a",{class:"header-anchor",href:"#_2-自定义半透明效果","aria-label":'Permalink to "2. 自定义半透明效果"'},"​")],-1)),l[3177]||(l[3177]=i("p",null,"普通的半透明效果非常容易实现，只需要设置混合因子即可。",-1)),a(n,{color:"red"},{default:k(()=>[...l[1401]||(l[1401]=[s("而要实现类似X射线的效果，也就是边缘不透明，中间透明的效果",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1402]||(l[1402]=[s("我们可以利用我们学习过的菲尼尔反射的公式来得到",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1403]||(l[1403]=[s("Schlick 菲涅耳近似等式",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1404]||(l[1404]=[s("R(θ) = R0 + ( 1− R0 )( 1 − V·𝑵)^𝟓",-1)])]),_:1}),l[3178]||(l[3178]=i("p",null,[i("strong",null,"其中：")],-1)),l[3179]||(l[3179]=i("p",null,[i("strong",null,"R(θ) 表示入射角为θ时时的反射率")],-1)),l[3180]||(l[3180]=i("p",null,[i("strong",null,"R0 是垂直入射某介质时的反射率")],-1)),l[3181]||(l[3181]=i("p",null,[i("strong",null,"V 是视角方向单位向量（入射角）")],-1)),l[3182]||(l[3182]=i("p",null,[i("strong",null,"N 是顶点法线单位向量")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1405]||(l[1405]=[s("将得到的入射角为θ的反射率作为自定义颜色的A值，便可以得到类似的结果",-1)])]),_:1}),l[3183]||(l[3183]=i("h4",{id:"_3-具体实现-1",tabindex:"-1"},[s("3. 具体实现 "),i("a",{class:"header-anchor",href:"#_3-具体实现-1","aria-label":'Permalink to "3. 具体实现"'},"​")],-1)),l[3184]||(l[3184]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//1.新建Shader 取名 OcclusionTransparent1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  删除无用改代码")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//2.声明属性 映射属性")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  主纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  透明度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//3.复制一个Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//4.第一个Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  4-1.关键点 深度测试改为大于 关闭深度写入 传统透明混合因子")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      ZTest Greater")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      ZWrite Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      Blend SrcAlpha OneMinusSrcAlpha => 混合后的颜色 = (源颜色*源Alpha)+(目标颜色*(1−源Alpha))")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  4-2.传统纹理采样实现，在片元着色器返回颜色中透明通道用透明度变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//5.第二个Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  传统纹理采样实现")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3185]||(l[3185]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson117_OcclusionTransparent1"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Texture"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "white"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Alpha"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Alpha"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Tags { "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"RenderType"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Opaque"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ZTest Greater")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ZWrite Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Blend SrcAlpha OneMinusSrcAlpha")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vertex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Alpha;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," o"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.vertex "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," TRANSFORM_TEX"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.texcoord, _MainTex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                // sample the texture")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," col"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(col.rgb, _Alpha);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vertex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Alpha;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," o"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.vertex "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," TRANSFORM_TEX"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.texcoord, _MainTex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                // sample the texture")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," col"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," col;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3186]||(l[3186]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//自定义")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson117_OcclusionTransparent2"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Texture"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "white"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //菲涅尔反射 垂直角度反射率")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _FresnelScale"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"FresnelScale"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //菲涅尔反射近似公式中的 N次方")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _FresnelN"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"FresnelN"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 5")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //自定义颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Color"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Color"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Tags { "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"RenderType"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Opaque"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ZTest Greater")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ZWrite Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Blend SrcAlpha OneMinusSrcAlpha")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vertex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //主要用于进行菲尼尔公式计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下 视角方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"worldViewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下 法线方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"worldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //在该Pass当中不需要采样 所以不需要映射主纹理相关内容")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _FresnelScale;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _FresnelN;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Color"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," o"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.vertex "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //视角方向 法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.worldViewDir "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"WorldSpaceViewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.worldNormal "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //菲涅尔反射公式")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," alpha = _FresnelScale +")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                             (1-_FresnelScale) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.worldViewDir), "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.worldNormal)), _FresnelN);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_Color.rgb, alpha);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vertex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Alpha;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," o"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.vertex "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," TRANSFORM_TEX"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.texcoord, _MainTex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                // sample the texture")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," col"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," col;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3187]||(l[3187]=i("hr",null,null,-1)),l[3188]||(l[3188]=i("h3",{id:"四、物体切割效果",tabindex:"-1"},[s("四、物体切割效果 "),i("a",{class:"header-anchor",href:"#四、物体切割效果","aria-label":'Permalink to "四、物体切割效果"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1406]||(l[1406]=[s("物体看似被切割、分割或隐藏一部分的视觉效果。",-1)])]),_:1}),l[3189]||(l[3189]=i("h4",{id:"_1-基本原理-4",tabindex:"-1"},[s("1. 基本原理 "),i("a",{class:"header-anchor",href:"#_1-基本原理-4","aria-label":'Permalink to "1. 基本原理"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1407]||(l[1407]=[s("在片元着色器中判断片元的世界坐标是否满足切割条件，如果满足则直接抛弃片元不渲染 判断片元在模型中的正反面，决定使用哪种纹理进行渲染",-1)])]),_:1}),i("ol",null,[i("li",null,[l[1410]||(l[1410]=i("p",null,"如何判断世界坐标",-1)),a(n,{color:"red"},{default:k(()=>[...l[1408]||(l[1408]=[s("在Shader中声明一个Vector坐标变量",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1409]||(l[1409]=[s("通过C#代码把控制切割位置的物体世界空间位置传递给Shader",-1)])]),_:1}),l[1411]||(l[1411]=i("p",null,"在Shader中用片元的世界坐标和传递进来的世界坐标做比较，我们可以分三种模式，分别比较 x、y、z坐标，切割x、y、z方向的片元",-1))]),i("li",null,[l[1414]||(l[1414]=i("p",null,"如何抛弃片元不渲染",-1)),a(n,{color:"red"},{default:k(()=>[...l[1412]||(l[1412]=[s("Unity Shader中提供了一个内置函数 clip(x)",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1413]||(l[1413]=[s("它的作用就是在片元着色器中调用时来丢弃片元的，之前在透明度测试时使用过",-1)])]),_:1}),l[1415]||(l[1415]=i("p",null,"传入的值x小于0，则会丢弃当前片元，被丢弃的片元不会被进一步处理也就不会被渲染了 也就是说，当我们判断片元位置需要被切割时，直接执行clip函数传入一个负数，这个片元就会被丢弃 不会被渲染了",-1))]),i("li",null,[l[1418]||(l[1418]=i("p",null,"如何判断片元的正反面",-1)),a(n,{color:"red"},{default:k(()=>[...l[1416]||(l[1416]=[s("Unity Shader中提供了一个语义 VFACE，它只能在片元着色器中使用",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1417]||(l[1417]=[s("**它可以作为参数传递给片元着色器** ",-1)])]),_:1}),l[1419]||(l[1419]=i("p",null,"传入值1表示为正面，-1表示为背面，我们可以利用它判断该片元是 模型正面还是背面片元，决定使用哪种纹理或颜色进行渲染",-1)),l[1420]||(l[1420]=i("p",null,[i("strong",null,"注意： 在使用它时建议加上编译指令#pragma target 3.0 或 4.0 、5.0 表示设置着色器模型版本，可以让VFACE语义使用上的兼容性和稳定性更好")],-1))])]),l[3190]||(l[3190]=i("h4",{id:"_2-具体实现-1",tabindex:"-1"},[s("2. 具体实现 "),i("a",{class:"header-anchor",href:"#_2-具体实现-1","aria-label":'Permalink to "2. 具体实现"'},"​")],-1)),l[3191]||(l[3191]=i("h5",{id:"_2-1-shader-1",tabindex:"-1"},[s("2.1 Shader "),i("a",{class:"header-anchor",href:"#_2-1-shader-1","aria-label":'Permalink to "2.1 Shader"'},"​")],-1)),l[3192]||(l[3192]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//1.新建Shader ObjectCutting")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  删除无用代码")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//2.属性声明 属性映射")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  主纹理 _MainTex 2D")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  背面纹理 _BackTex 2D")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  切割方向（用来控制比较x、y、z哪个轴）_CuttingDir Float")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  是否翻转切割 _Invert Float")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  切割位置（从C#传递过来）_CuttingPos Vector")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//3.关闭剔除 因为要两面渲染")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//4.编译指令 #pragma target 3.0 让VFACE兼容性更好")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//5.结构体")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  uv、顶点、世界坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//6.顶点着色器函数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  坐标转换、纹理赋值、世界坐标转换")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//7.片元着色器函数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  7-1.加入VFACE语义参数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  7-2.根据正反面决定采样颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  7-3.根据切割方向判断是否丢弃（0代表丢弃，1代表不丢弃）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      可以使用step(edge, x)函数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      x>=edge 返回 1；x<edge 返回 0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  7-4.利用是否翻转切割参数决定是否反转丢弃")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  7-5.利用clip函数丢弃片元")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  7-6.若不丢弃 直接返回颜色")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3193]||(l[3193]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson118_ObjectCutting"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Texture"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "white"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //用于渲染模型背面像素的纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _BackTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"BackTex"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "white"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //切割的方向 0-x 1-y 2-z")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _CuttingDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"CuttingDir"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Float) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //是否切割翻转 0-不翻转 1-翻转")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Invert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Invert"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Float) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //切割的位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _CuttingPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"CuttingPos"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Vector) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Tags { "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"RenderType"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Opaque"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //因为正反两面都要渲染")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Cull Off")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma target 3.0")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vertex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界坐标位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"worldPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _BackTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _CuttingDir;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Invert;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _CuttingPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," o"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.vertex "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.worldPos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(unity_ObjectToWorld, v.vertex).xyz;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"fixed"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," face"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":VFACE) : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //通过用face来进行正反面判断 Unity Shader 因为有了语义 会自动传入对应的参数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," col"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," face "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ?"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_BackTex, i.uv);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //丢弃中间值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," cutValue;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //比较x坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_CuttingDir "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"=="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    cutValue "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," step"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_CuttingPos.x, i.worldPos.x);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //比较y坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                else"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_CuttingDir "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"=="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    cutValue "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," step"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_CuttingPos.y, i.worldPos.y);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //比较z坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                else"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_CuttingDir "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"=="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    cutValue "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," step"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_CuttingPos.z, i.worldPos.z);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //是否进行翻转切割")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                cutValue "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Invert "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"?"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," cutValue "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," cutValue;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //如果丢弃中间值 是0代表要丢弃 是1代表不丢弃 直接返回颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(cutValue "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"=="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                    clip"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"); "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//传入-1（小于0） 代表这个片元不会渲染 直接丢弃")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," col;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3194]||(l[3194]=i("h5",{id:"_2-2-c-1",tabindex:"-1"},[s("2.2 C# "),i("a",{class:"header-anchor",href:"#_2-2-c-1","aria-label":'Permalink to "2.2 C#"'},"​")],-1)),l[3195]||(l[3195]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //1.新建C#脚本 和Shader名一样")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //2.加入[ExecuteAlways]特性，让编辑模式下也运行，可以看到效果")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //3.声明材质球和切割位置对象")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //4.材质球初始化")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //6.在Update中不停的将切割物体位置传递给Shader")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3196]||(l[3196]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," System"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Collections"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," System"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Collections"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Generic"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityEngine"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"["),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ExecuteAlways"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," class"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Lesson118_ObjectCutting"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"MonoBehaviour")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //材质")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Material"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," material"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //切割对象 用于决定切割位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," GameObject"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," cutObj"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    // Start is called before the first frame update")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    void"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Start"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        material "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," this"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"GetComponent"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Renderer"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">().sharedMaterial;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    // Update is called once per frame")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    void"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(material "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"!="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," null"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," &&"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," cutObj "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"!="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," null"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            material."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"SetVector"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"_CuttingPos"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", cutObj.transform.position);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3197]||(l[3197]=i("hr",null,null,-1)),l[3198]||(l[3198]=i("h3",{id:"五、翻页效果",tabindex:"-1"},[s("五、翻页效果 "),i("a",{class:"header-anchor",href:"#五、翻页效果","aria-label":'Permalink to "五、翻页效果"'},"​")],-1)),l[3199]||(l[3199]=i("h4",{id:"_1-基本原理-5",tabindex:"-1"},[s("1. 基本原理 "),i("a",{class:"header-anchor",href:"#_1-基本原理-5","aria-label":'Permalink to "1. 基本原理"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1421]||(l[1421]=[s("对顶点进行平移—>矩阵旋转—>再平移，并利用三角函数相关知识制做出起伏感",-1)])]),_:1}),i("ol",null,[i("li",null,[l[1432]||(l[1432]=i("p",null,"如何制作旋转",-1)),i("p",null,[l[1427]||(l[1427]=s("我们将利用以前学习的",-1)),a(n,{color:"red"},{default:k(()=>[...l[1422]||(l[1422]=[s("旋转矩阵相关知识，来对顶点进行旋转变换",-1)])]),_:1}),l[1428]||(l[1428]=s(" 但是，",-1)),a(n,{color:"red"},{default:k(()=>[...l[1423]||(l[1423]=[s("旋转前",-1)])]),_:1}),l[1429]||(l[1429]=s("我们需要先对顶点进行平移，否则模型将绕着模型中心点旋转。 因为旋转之前进行了",-1)),a(n,{color:"red"},{default:k(()=>[...l[1424]||(l[1424]=[s("平移",-1)])]),_:1}),l[1430]||(l[1430]=s("，因此",-1)),a(n,{color:"red"},{default:k(()=>[...l[1425]||(l[1425]=[s("旋转结束后",-1)])]),_:1}),l[1431]||(l[1431]=s("，我们需要再将",-1)),a(n,{color:"red"},{default:k(()=>[...l[1426]||(l[1426]=[s("顶点平移回来",-1)])]),_:1})])]),i("li",null,[l[1434]||(l[1434]=i("p",null,"如何制作起伏感",-1)),a(n,{color:"red"},{default:k(()=>[...l[1433]||(l[1433]=[s("只需要在旋转前利用三角函数Sin让顶点在Y轴上进行偏移即可 并且0~90~180度之间变换时，0和180度不需要起伏感，90度时起伏感最大（页面最弯曲）",-1)])]),_:1})])]),l[3200]||(l[3200]=i("h4",{id:"_2-具体实现-2",tabindex:"-1"},[s("2. 具体实现 "),i("a",{class:"header-anchor",href:"#_2-具体实现-2","aria-label":'Permalink to "2. 具体实现"'},"​")],-1)),l[3201]||(l[3201]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//1.新建Shader PageTurning")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  删除无用代码")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//2.属性声明 属性映射")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  正面纹理          _MainTex")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  背面纹理          _BackTex")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  翻页进度(0~180度) _AngleProgress")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  y轴弯曲程度(0~1)  _WeightY")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  x轴收缩程度(0~1)  _WeightY")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  波长(0~3)         _WaveLength")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  平移距离          _MoveDis")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//3.由于要双面渲染")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  Cull Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//4.由于要使用VFACE语义，加入编译指令")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  #pragma target 3.0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//5.结构体")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  顶点和UV")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//6.顶点着色器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  先实现基本的翻页效果")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  1.利用sincos函数得到当前翻页精度对应的sin和cos值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  2.基于得到的值，构建旋转矩阵")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  3.旋转前先平移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  3.基于旋转矩阵进行顶点旋转")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  4.旋转结束再平移回去")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  5.将处理完毕的顶点转换到裁剪空间中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  6.UV赋值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  实现起伏效果")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  将起伏相关的计算加入到旋转矩阵之前")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//7.片元着色器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  通过VFACE语义判断正反面进行对应的采样即可")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3202]||(l[3202]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson119_PageTurning"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Texture"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "white"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _BackTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"BackTex"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _AngleProgress"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"_AngleProgress"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"180"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _WeightX"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"WeightX"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _WeightY"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"WeightY"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _WaveLength"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"WaveLength"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"))"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MoveDis"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MoveDis"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Float) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Tags { "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"RenderType"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Opaque"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Cull Off")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma target 3.0")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vertex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //正面纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //背面纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _BackTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //翻页进度 0~180度的角度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _AngleProgress"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //x轴收缩权重")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _WeightX;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //Y轴弯曲权重")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _WeightY;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //波长")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _WaveLength"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //平移距离")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MoveDis"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," o"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //对顶点进行变换")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //先处理旋转")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //利用sincos函数 配合自定义参数 翻页的角度（进度）来得到对应")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //的sin和cos值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," s"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," c"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                sincos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"radians"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_AngleProgress), s, c);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //构建Z轴旋转矩阵")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float4x4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," rotationM"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {c, "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"s, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                                      s, c, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"                                      0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"                                      0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"};")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //由于我们是基于Z轴旋转 所以我们将其按照x轴方向进行偏移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v.vertex "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," float4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MoveDis, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //进行起伏处理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," weight"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," abs"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"90"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _AngleProgress)"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"90"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //Y轴上下起伏")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v.vertex.y "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," sin"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex.x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _WaveLength) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," weight "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _WeightY;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //X轴收缩")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v.vertex.x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.vertex.x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," weight "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _WeightX;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //平移后 再旋转")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," postion"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(rotationM, v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //再平移回来")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                postion "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," float4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MoveDis,"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.vertex "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(postion);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"fixed"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," face"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":VFACE) : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," col"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," face "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ?"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_BackTex, i.uv);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," col;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3203]||(l[3203]=i("hr",null,null,-1)),l[3204]||(l[3204]=i("h3",{id:"六、卡通渲染",tabindex:"-1"},[s("六、卡通渲染 "),i("a",{class:"header-anchor",href:"#六、卡通渲染","aria-label":'Permalink to "六、卡通渲染"'},"​")],-1)),l[3205]||(l[3205]=i("h4",{id:"_1-基本原理-6",tabindex:"-1"},[s("1. 基本原理 "),i("a",{class:"header-anchor",href:"#_1-基本原理-6","aria-label":'Permalink to "1. 基本原理"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1435]||(l[1435]=[s("让光的过渡效果变硬并且实现轮廓描边！",-1)])]),_:1}),i("ol",null,[i("li",null,[l[1439]||(l[1439]=i("p",null,"如何让光的过渡效果变硬",-1)),i("p",null,[i("strong",null,[l[1437]||(l[1437]=s("影响对象光照效果的部分主要是 ",-1)),a(n,{color:"red"},{default:k(()=>[...l[1436]||(l[1436]=[s("漫反射的计算+ 高光反射的计算",-1)])]),_:1})])]),a(n,{color:"red"},{default:k(()=>[...l[1438]||(l[1438]=[s("高光反射部分的变硬",-1)])]),_:1}),l[1440]||(l[1440]=s("我们只需要基于它的公式修改计算规则即可",-1)),l[1441]||(l[1441]=i("p",null,"我们把pow( max(0, dot(法线单位向量, 半角单位向量)), 幂) 直接进行简化",-1)),l[1442]||(l[1442]=i("p",null,"相当于之前平滑的值变化变得只有1和0两种情况，要不有要不没有",-1))]),i("li",null,[l[1446]||(l[1446]=i("p",null,"如何实现轮廓描边",-1)),l[1447]||(l[1447]=i("p",null,"它的基本原理是",-1)),a(n,{color:"red"},{default:k(()=>[...l[1443]||(l[1443]=[s("两个Pass渲染对象 一个Pass用于渲染沿法线方向放大的模型 一个Pass用于正常渲染正常模型 相当于先用纯色渲染一次放大后的模型 再用模型本来的颜色覆盖重合部分",-1)])]),_:1}),l[1448]||(l[1448]=i("p",null,[i("strong",null,"但是我们在实现卡通风格渲染时不会使用这种方式 我们将采用一种新的方式来制作轮廓描边")],-1)),l[1449]||(l[1449]=i("blockquote",null,[i("p",null,"新方法：")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1444]||(l[1444]=[s("同样两个Pass渲染对象 一个Pass渲染背面将模型背面顶点沿法线方向偏移扩大 一个Pass渲染正面正常渲染",-1)])]),_:1}),l[1450]||(l[1450]=i("p",null,[i("strong",null,"这样实现的效果会让模型上有重叠的结构出现描边效果")],-1)),l[1451]||(l[1451]=i("p",null,[i("strong",null,"注意：")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1445]||(l[1445]=[s("模型背面就是法线方向和摄像机面朝向呈锐角的部分 模型正面就是法线方向和摄像机面朝向呈钝角的部分",-1)])]),_:1})])]),l[3206]||(l[3206]=i("h4",{id:"_2-具体实现-3",tabindex:"-1"},[s("2. 具体实现 "),i("a",{class:"header-anchor",href:"#_2-具体实现-3","aria-label":'Permalink to "2. 具体实现"'},"​")],-1)),l[3207]||(l[3207]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson120_ToonShader"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"     Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainTex"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _BumpMap"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"BumpMap"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _BumpScale"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"BumpScale"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _RampTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"RampTex"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _SpecularNum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularNum"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _OutLineColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"OutLineColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _OutLineWidth"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"OutLineWidth"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.04")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Cull Front")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vertex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," :SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //边缘线颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _OutLineColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //边缘线宽度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _OutLineWidth"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," o"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //这是把背面看不到的顶点朝法线方向去往外扩展 让模型变大")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                v.vertex.xyz "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal)"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"_OutLineWidth;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //再转换坐标到裁剪空间")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.vertex "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"):SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //直接返回边缘线颜色 相当于背面是纯色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _OutLineColor;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Tags { "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"LightMode"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ForwardBase"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Cull Back")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //ZWrite Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            ////设定混合计算的计算方式")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //BlendOp 混合操作")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            ////写法一：混合方式的 基本格式")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //Blend 源因子 目标因子, 源透明因子 目标透明因子")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            ////写法二：混合方式的 省略格式")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //Blend 源因子 目标因子")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma multi_compile_fwdbase")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "Lighting.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "AutoLight.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //float2 uvTex:TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //float2 uvBump:TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //我们可以单独的声明两个float2的成员用于记录 颜色和法线纹理的uv坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //也可以直接声明一个float4的成员 xy用于记录颜色纹理的uv，zw用于记录法线纹理的uv")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //光的方向 相对于切线空间下的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"lightDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //视角的方向 相对于切线空间下的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"viewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD2;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"worldPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD3;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                SHADOW_COORDS"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//漫反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//颜色纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//颜色纹理的缩放和平移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _BumpMap"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//法线纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _BumpMap_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//法线纹理的缩放和平移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _BumpScale"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//凹凸程度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _RampTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//渐变纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _RampTex_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//渐变纹理的缩放和平移（基本不会用）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//高光颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularNum;"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//光泽度")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_full"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," data"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //把模型空间下的顶点转到裁剪空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.pos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算纹理的缩放偏移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.uv.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_ST.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_ST.zw;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.uv.zw "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _BumpMap_ST.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _BumpMap_ST.zw;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //在顶点着色器当中 得到 模型空间到切线空间的 转换矩阵")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //切线、副切线、法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算副切线 计算叉乘结果后 垂直与切线和法线的向量有两条 通过乘以 切线当中的w，就可以确定是哪一条")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," binormal"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," cross"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.tangent), "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal)) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.tangent.w;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //转换矩阵")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3x3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," rotation"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," float3x3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"( v.tangent.xyz,")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                                              binormal,")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                                              v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //模型空间下的光的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //data.lightDir = ObjSpaceLightDir(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //乘以模型空间到切线空间的转换矩阵 就可以得到切线空间下的 光的方向了")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.lightDir "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(rotation, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ObjSpaceLightDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //模型空间下的视角的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //data.viewDir = ObjSpaceViewDir(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.viewDir "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(rotation, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ObjSpaceViewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //得到世界空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.worldPos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(unity_ObjectToWorld, v.vertex).xyz;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //阴影相关")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                TRANSFER_SHADOW"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(data);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //通过纹理采样函数 取出法线纹理贴图当中的数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," packedNormal"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_BumpMap, i.uv.zw);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //将我们取出来的法线数据 进行逆运算并且可能会进行解压缩的运算，最终得到切线空间下的法线数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tangentNormal"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnpackNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(packedNormal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //乘以凹凸程度的系数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                tangentNormal.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _BumpScale;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                tangentNormal.z "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," sqrt"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1.0"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," saturate"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(tangentNormal.xy, tangentNormal.xy)));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //接下来就来处理 带颜色纹理的 布林方光照模型计算")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //颜色纹理和漫反射颜色的 叠加")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," albedo"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv.xy) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainColor.rgb;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //修改为 渐变纹理相关的计算方式")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," halfLambertNum = dot(normalize(tangentNormal), "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.lightDir)) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," +"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                UNITY_LIGHT_ATTENUATION"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(atten, i, i.worldPos);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                halfLambertNum "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," atten;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //渐变纹理 漫反射计算方式")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," diffuseColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," albedo.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_RampTex, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"fixed2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(halfLambertNum,halfLambertNum)).rgb;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //半角向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," halfA"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.viewDir) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.lightDir));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //高光反射")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //fixed3 specularColor = _LightColor0.rgb * _SpecularColor.rgb * pow(max(0, dot(tangentNormal, halfA)), _SpecularNum);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," spec = dot(normalize(tangentNormal), "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(halfA));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //用一个阈值和计算结果进行比较 小于阈值 取0 大于阈值 取1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                spec "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," step"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_SpecularNum, spec);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //用0或1直接和高光反射颜色进行叠加 要不有颜色 要不没有颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," specularColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularColor.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," spec;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //布林方")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," color"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," UNITY_LIGHTMODEL_AMBIENT.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," albedo "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," diffuseColor "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," specularColor;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(color.rgb, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Fallback "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Diffuse"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3208]||(l[3208]=i("hr",null,null,-1)),l[3209]||(l[3209]=i("h3",{id:"七、素描风格渲染",tabindex:"-1"},[s("七、素描风格渲染 "),i("a",{class:"header-anchor",href:"#七、素描风格渲染","aria-label":'Permalink to "七、素描风格渲染"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1452]||(l[1452]=[s("主要目的是使3D模型看起来像手绘素描的视觉效果。",-1)])]),_:1}),l[3210]||(l[3210]=i("h4",{id:"_1-基本原理-7",tabindex:"-1"},[s("1. 基本原理 "),i("a",{class:"header-anchor",href:"#_1-基本原理-7","aria-label":'Permalink to "1. 基本原理"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1453]||(l[1453]=[s("用漫反射系数决定采样权重，在多张具有不同密度和方向的素描纹理中 进行采样，并将采样结果进行叠加得到最终效果",-1)])]),_:1}),i("ol",null,[l[1473]||(l[1473]=i("li",null,[i("p",null,[i("strong",null,"多张具有不同密度和方向的素描纹理")]),i("p",null,"美术需要提供多张素描纹理，我们之后会根据不同位置的光照强度 决定从哪种纹理中进行采样")],-1)),i("li",null,[l[1458]||(l[1458]=i("p",null,[i("strong",null,"漫反射系数决定采样权重（在顶点着色器中决定）")],-1)),l[1459]||(l[1459]=i("p",null,"我们通过兰伯特光照模型中的",-1)),i("p",null,[i("em",null,[l[1455]||(l[1455]=i("em",null,"max（0, 标准化后物体表面法线向量· 标准化后光源方向向量）",-1)),l[1456]||(l[1456]=s()),a(n,{color:"red"},{default:k(()=>[...l[1454]||(l[1454]=[s("（素描纹理数+ 1）",-1)])]),_:1})]),l[1457]||(l[1457]=s("*",-1))]),l[1460]||(l[1460]=i("p",null,"将漫反射光照强度0~1 扩充到0~N ，如果是6张素描纹理，那么就是0 ~ 7",-1)),l[1461]||(l[1461]=i("p",null,"根据不同顶点的不同光照，决定在哪一张纹理中进行采样的权重更大，该权重决定最后的颜色叠加",-1)),l[1462]||(l[1462]=i("p",null,"6~7：不在素描纹理中采样",-1)),l[1463]||(l[1463]=i("p",null,"5~6：第1张素描纹理中采样",-1)),l[1464]||(l[1464]=i("p",null,"4~5：第1、2素描张纹理中采样",-1)),l[1465]||(l[1465]=i("p",null,"3~4：第2、3张纹理中采样",-1)),l[1466]||(l[1466]=i("p",null,"2~3：第3、4张纹理中采样",-1)),l[1467]||(l[1467]=i("p",null,"1~2：第4、5张纹理中采样",-1)),l[1468]||(l[1468]=i("p",null,"0~1：第5、6张纹理中采样",-1))]),i("li",null,[l[1471]||(l[1471]=i("p",null,[i("strong",null,"采样结果进行叠加（在片元着色器中叠加）")],-1)),i("p",null,[l[1470]||(l[1470]=s("根据之前的权重计算，",-1)),a(n,{color:"red"},{default:k(()=>[...l[1469]||(l[1469]=[s("越亮的地方、越趋近于白色，或使用的素描纹理中线条更少更稀疏 而越暗的地方使用的素描纹理中线条更密集。",-1)])]),_:1})]),l[1472]||(l[1472]=i("p",null,"因此我们只需要使用之前的权重值和纹理采样结果相乘，最后将纹理颜色进行叠加即可",-1))])]),l[3211]||(l[3211]=i("h4",{id:"_2-具体实现-4",tabindex:"-1"},[s("2. 具体实现 "),i("a",{class:"header-anchor",href:"#_2-具体实现-4","aria-label":'Permalink to "2. 具体实现"'},"​")],-1)),l[3212]||(l[3212]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	#"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"region"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 知识点二 权重计算(顶点着色器函数逻辑)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //1.v2f结构体声明")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //  顶点位置、uv、用两个fixed3记录素描纹理权重")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //2.顶点着色器函数实现")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //  2-1 顶点坐标转换")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //  2-2 uv坐标平铺缩放 让纹理*平铺系数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //  2-3 世界空间光照方向、世界空间法线转换")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //  2-4 兰伯特漫反射光照系数计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //  2-5 将光照系数 从 0~1 扩充到 0~7")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //  2-6 根据系数决定素描纹理权重")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"endregion")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"region"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 知识点三 颜色采样(片元着色器函数逻辑)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //在片元着色器中实现")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //1.对 1~6 张纹理进行采样 并乘以权重 得到各纹理采样颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //2.根据 1~6张纹理权重计算出白色高光部分颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //3.将1~6张纹理采样颜色 和 白色部分 相加得到最终叠加颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"endregion")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"region"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 知识点四 外轮廓、阴影相关添加")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //1.外轮廓")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //  直接复用Lesson120_ToonShader中的外轮廓Pass代码")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //2.阴影相关添加")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //  加入 SHADOW_COORDS、TRANSFER_SHADOW、UNITY_LIGHT_ATTENUATION")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},'    //  加入 FallBack "Diffuse"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"endregion")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3213]||(l[3213]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson121_Sketch"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //整体颜色叠加")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Color"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Color"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //平铺纹理的系数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _TileFactor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"TileFactor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Float) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //6张素描纹理贴图")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Sketch0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Sketch0"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Sketch1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Sketch1"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Sketch2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Sketch2"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Sketch3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Sketch3"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Sketch4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Sketch4"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Sketch5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Sketch5"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //边缘线相关参数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _OutLineColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"OutLineColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _OutLineWidth"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"OutLineWidth"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.04")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Tags { "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"RenderType"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Opaque"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        UsePass "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson120_ToonShader/OUTLINE"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma multi_compile_fwdbase")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "Lighting.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "AutoLight.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Color"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _TileFactor;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Sketch0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Sketch1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Sketch2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Sketch3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Sketch4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Sketch5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vertex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //xyz分别代表第1、2、3张素描纹理的权重")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                fixed3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sketchWeights0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //xyz分别代表第4、5、6张素描纹理的权重")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                fixed3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sketchWeights1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD2;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"worldPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD3;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                SHADOW_COORDS"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," o"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //顶点坐标转换")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.vertex "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //uv坐标平铺缩放 值越大 之后的素描细节越多 越小 细节越粗糙")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _TileFactor;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间光照方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldLightDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"WorldSpaceLightDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间法线方向转换")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldNormal"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //兰伯特漫反射光照强度 0~1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," diff = max(0, dot(worldLightDir, worldNormal));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //将其扩充到0~7  7/7 = 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //越大越亮 越小越暗")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                diff "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," diff "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 7.0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //初始化权重 默认每一张素描纹理对应的权重都是0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.sketchWeights0 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.sketchWeights1 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //代表6张图的权重都会是0 那么采样就不会使用6张图的颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(diff "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 6.0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"){")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                    //认为是最亮的部分 我们不需要改变任何权重")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                else"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(diff "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 5.0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"){"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//代表 会从第1张图中采样 因此对应权重不会为0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    o.sketchWeights0.x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," diff "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 5.0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                else"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(diff "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 4.0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"){"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//代表 会从第1、2张图中采样 因此对应权重不会为0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    o.sketchWeights0.x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," diff "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 5.0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    o.sketchWeights0.y "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o.sketchWeights0.x;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                else"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(diff "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 3.0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"){"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//代表 会从第2、3张图中采样 因此对应权重不会为0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    o.sketchWeights0.y "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," diff "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 3.0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    o.sketchWeights0.z "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o.sketchWeights0.y;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                else"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(diff "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 2.0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"){"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//代表 会从第3、4张图中采样 因此对应权重不会为0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    o.sketchWeights0.z "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," diff "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 2.0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    o.sketchWeights1.x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o.sketchWeights0.z;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                else"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(diff "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1.0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"){"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//代表 会从第4、5张图中采样 因此对应权重不会为0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    o.sketchWeights1.x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," diff "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1.0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    o.sketchWeights1.y "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o.sketchWeights1.x;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                else"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//代表 会从第5、6张图中采样 因此对应权重不会为0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    o.sketchWeights1.y "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," diff;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    o.sketchWeights1.z "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," diff;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //顶点坐标转世界坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.worldPos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(unity_ObjectToWorld, v.vertex).xyz;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                TRANSFER_SHADOW"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(o);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //如果在顶点着色器中计算的对应素描纹理图片的权重为0 那么这时 对应颜色会为(0,0,0,0)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," sketchColor0"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_Sketch0, i.uv) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," i.sketchWeights0.x;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," sketchColor1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_Sketch1, i.uv) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," i.sketchWeights0.y;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," sketchColor2"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_Sketch2, i.uv) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," i.sketchWeights0.z;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," sketchColor3"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_Sketch3, i.uv) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," i.sketchWeights1.x;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," sketchColor4"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_Sketch4, i.uv) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," i.sketchWeights1.y;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," sketchColor5"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_Sketch5, i.uv) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," i.sketchWeights1.z;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //最亮的部分相关的计算 白色叠加")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," whiteColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," i.sketchWeights0.x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," i.sketchWeights0.y "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"i.sketchWeights0.z "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                                    i.sketchWeights1.x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," i.sketchWeights1.y "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," i.sketchWeights1.z);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," sketchClor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," sketchColor0 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," sketchColor1 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," sketchColor2 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," sketchColor3 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," sketchColor4 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                                    sketchColor5 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," whiteColor;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                UNITY_LIGHT_ATTENUATION"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(atten, i, i.worldPos);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(sketchClor.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," atten "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Color.rgb, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Fallback "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Diffuse"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3214]||(l[3214]=i("hr",null,null,-1)),l[3215]||(l[3215]=i("h3",{id:"八、噪声",tabindex:"-1"},[s("八、噪声 "),i("a",{class:"header-anchor",href:"#八、噪声","aria-label":'Permalink to "八、噪声"'},"​")],-1)),l[3216]||(l[3216]=i("h4",{id:"_1-噪声是什么",tabindex:"-1"},[s("1. 噪声是什么 "),i("a",{class:"header-anchor",href:"#_1-噪声是什么","aria-label":'Permalink to "1. 噪声是什么"'},"​")],-1)),l[3217]||(l[3217]=i("p",null,[i("strong",null,"噪声是一种程序生成的随机或伪随机数据"),s("，在图形学中常用来创建各种自然现象和复杂纹理效果。")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1474]||(l[1474]=[s("它的本质是一种由数学算法公式生成的有规则性或可控的随机数据。",-1)])]),_:1}),l[3218]||(l[3218]=i("p",null,"通过噪声算法生成的随机数据具有以下特点：",-1)),l[3219]||(l[3219]=i("ol",null,[i("li",null,[i("strong",null,"随机性"),s("：噪声数据本质上是随机的，这意味着它具有不规则性，无法通过简单的模式预测")]),i("li",null,[i("strong",null,"平滑性"),s("：数据不会突然跳跃或变化，而是呈现出逐渐过渡的效果，适合模拟自然现象")]),i("li",null,[i("strong",null,"周期性"),s("：随着坐标的变化，噪声值会重复出现，形成一个封闭的循环。也可以通过调整噪声的范围或修 改算法来避免")]),i("li",null,[i("strong",null,"可调性"),s("：大多数噪声算法的输出是可以调整的，这种可调性允许你根据需求灵活地控制噪声的表现，适 应不同的视觉效果或逻辑处理需求")]),i("li",null,[i("strong",null,"多维性"),s("：能够处理多维数据，这意味着它们可以生成二维、三维甚至更高维度的噪声数据")])],-1)),l[3220]||(l[3220]=i("h4",{id:"_2-常用的噪声算法",tabindex:"-1"},[s("2. 常用的噪声算法 "),i("a",{class:"header-anchor",href:"#_2-常用的噪声算法","aria-label":'Permalink to "2. 常用的噪声算法"'},"​")],-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1475]||(l[1475]=[s("Perlin Noise",-1)])]),_:1}),l[1476]||(l[1476]=i("strong",null,"（柏林噪声）",-1)),l[1477]||(l[1477]=s("：适合生成自然现象的纹理（比如云、火焰、地形）",-1))]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1478]||(l[1478]=[s("Simplex Noise",-1)])]),_:1}),l[1479]||(l[1479]=i("strong",null,"（简单噪声）",-1)),l[1480]||(l[1480]=s("：Perlin Noise的优化版，更适合实时计算，适用于体积云、流体动画等",-1))]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1481]||(l[1481]=[s("Random Function",-1)])]),_:1}),l[1482]||(l[1482]=i("strong",null,"（随机噪声/白噪音）",-1)),l[1483]||(l[1483]=s("：计算简单，适合生成粒子效果或星空背景",-1))]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1484]||(l[1484]=[s("Fractal Noise",-1)])]),_:1}),l[1485]||(l[1485]=i("strong",null,"（分形噪声）",-1)),l[1486]||(l[1486]=s("：将多层PerlinNoise或SimplexNoise叠加，生成复杂效果，适用于高细 节地形、云层、火焰等效果",-1))]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1487]||(l[1487]=[s("Worley Noise",-1)])]),_:1}),l[1488]||(l[1488]=i("strong",null,"（沃利噪音）",-1)),l[1489]||(l[1489]=s("：生成类似“细胞”的纹理，适用于模拟裂纹或有机表面 等等",-1))])]),l[3221]||(l[3221]=i("h4",{id:"_3-如何在unity中使用噪声",tabindex:"-1"},[s("3. 如何在Unity中使用噪声 "),i("a",{class:"header-anchor",href:"#_3-如何在unity中使用噪声","aria-label":'Permalink to "3. 如何在Unity中使用噪声"'},"​")],-1)),i("ol",null,[l[1491]||(l[1491]=i("li",null,[i("strong",null,"使用一些第三方的噪声库，利用别人写好的内容直接来计算")],-1)),l[1492]||(l[1492]=i("li",null,[i("strong",null,"根据噪声算法原理自己实现计算逻辑")],-1)),l[1493]||(l[1493]=i("li",null,[i("strong",null,"使用Unity自带的噪声算法API，比如Mathf.PerlinNoise() （但是Unity提供的非常少）")],-1)),l[1494]||(l[1494]=i("li",null,[i("strong",null,"使用Shader逻辑流程图插件（Shader Graph或ASE）中提供的噪声节点")],-1)),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1490]||(l[1490]=[s("使用预生成的噪声纹理，通过材质或Shader对纹理进行采样",-1)])]),_:1})])]),l[3222]||(l[3222]=i("h4",{id:"_4-噪声纹理是什么",tabindex:"-1"},[s("4.噪声纹理是什么 "),i("a",{class:"header-anchor",href:"#_4-噪声纹理是什么","aria-label":'Permalink to "4.噪声纹理是什么"'},"​")],-1)),l[3223]||(l[3223]=i("p",null,"噪声纹理（Noise Texture）是一种常用于计算机图形学中的纹理类型",-1)),l[3224]||(l[3224]=i("p",null,"常用于模拟自然现象如云层、地形、火焰、岩石表面等等。",-1)),a(n,{color:"red"},{default:k(()=>[...l[1495]||(l[1495]=[s("它本质上就是通过噪声算法生成的图像。",-1)])]),_:1}),l[3225]||(l[3225]=i("p",null,[i("strong",null,"它生成的核心原理是利用噪声函数计算每个纹理坐标的值，再将这些值映射为图像的像素值。")],-1)),l[3226]||(l[3226]=i("p",null,[i("strong",null,"将噪声数据存储到图像中，直接采样拿来使用，而不是实时计算。")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1496]||(l[1496]=[s("相当于是在用内存换性能！",-1)])]),_:1}),l[3227]||(l[3227]=i("p",null,"提前将噪声数据计算好存在图片中，使用时从内存中的图片中取出数据，直接使用！",-1)),l[3228]||(l[3228]=i("h4",{id:"_5-补充方法",tabindex:"-1"},[s("5. 补充方法 "),i("a",{class:"header-anchor",href:"#_5-补充方法","aria-label":'Permalink to "5. 补充方法"'},"​")],-1)),l[3229]||(l[3229]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"float"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Mathf."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"PerlinNoise"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"float"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," x, "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"float"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," y)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//该函数是 Unity 提供的一个用于生成 Perlin Noise 的函数，")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//主要用于生成平滑、连续的伪随机值。")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//它广泛应用于纹理生成、地形生成、动画和特效等需要平滑过渡的场景")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//传入的两个参数是二维坐标点，通常用于表示柏林噪声空间中的位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//返回值为一个浮点数，范围为0~1之间")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//返回的噪声值具有连续性，即相邻输入值对应的输出值是平滑过渡的")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3230]||(l[3230]=i("hr",null,null,-1)),l[3231]||(l[3231]=i("h3",{id:"九、消融效果",tabindex:"-1"},[s("九、消融效果 "),i("a",{class:"header-anchor",href:"#九、消融效果","aria-label":'Permalink to "九、消融效果"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1497]||(l[1497]=[s("消融效果是模拟物体逐渐从屏幕上消失或溶解的过程",-1)])]),_:1}),i("p",null,[i("strong",null,[l[1499]||(l[1499]=s("它通常利用",-1)),a(n,{color:"red"},{default:k(()=>[...l[1498]||(l[1498]=[s("噪声纹理",-1)])]),_:1}),l[1500]||(l[1500]=s("实现，使物体按照某种规则逐渐透明或完全不可见。",-1))])]),l[3232]||(l[3232]=i("h4",{id:"_1-基本原理-8",tabindex:"-1"},[s("1. 基本原理 "),i("a",{class:"header-anchor",href:"#_1-基本原理-8","aria-label":'Permalink to "1. 基本原理"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1501]||(l[1501]=[s("通过对比噪声纹理值与消融进度参数，剔除低于阈值的像素， 同时在边缘添加渐变颜色实现动态溶解效果。",-1)])]),_:1}),i("ol",null,[i("li",null,[l[1507]||(l[1507]=i("p",null,[i("strong",null,"如何剔除像素")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1502]||(l[1502]=[s("clip(噪声纹理值 – 消融进度参数)",-1)])]),_:1}),l[1508]||(l[1508]=i("p",null,[s("我们在片元着色器中对"),i("strong",null,"噪声纹理进行采样"),s("，由于噪声纹理是灰度图，只需")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1503]||(l[1503]=[s("取出其中的RGB中的任意一通道的颜色来使用。",-1)])]),_:1}),i("p",null,[l[1505]||(l[1505]=s("再",-1)),a(n,{color:"red"},{default:k(()=>[...l[1504]||(l[1504]=[s("自定义一个用于控制消融进度的参数",-1)])]),_:1}),l[1506]||(l[1506]=s("（0~1）",-1))]),l[1509]||(l[1509]=i("p",null,"最后利用该片元的噪声纹理值– 进度参数 若小于0则不渲染该片元，通过控制进度参数 便可以控制消融程度了",-1))]),i("li",null,[l[1520]||(l[1520]=i("p",null,[i("strong",null,"如何处理边缘")],-1)),l[1521]||(l[1521]=i("p",null,"在处理边缘渐变颜色效果时，我们将使用Unity中内置的三个Shader函数：",-1)),i("ol",null,[i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1510]||(l[1510]=[s("smoothstep(a, b, x)",-1)])]),_:1}),l[1511]||(l[1511]=i("p",null,[i("strong",null,"a起始值；b结束值；x输入值（用于在a和b之间平滑插值） 当xb时，返回1； a < x < b时，返回0~1之间的值")],-1))]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1512]||(l[1512]=[s("**lerp(a,b,t)** ",-1)])]),_:1}),l[1513]||(l[1513]=i("p",null,[i("strong",null,"a起始值；b结束值；t插值因子 当t=0时，返回a；当t=1时，返回b；当0 < t < 1时；返回a和b之间的值")],-1))]),i("li",null,[a(n,{color:"red"},{default:k(()=>[...l[1514]||(l[1514]=[s("**step(value, x)** ",-1)])]),_:1}),l[1515]||(l[1515]=i("p",null,[i("strong",null,"value阈值，x输入值；两值用于比较 x < value，返回0；x>=value，返回1")],-1))])]),l[1522]||(l[1522]=i("p",null,"首先我们利用smoothstep函数决定边缘颜色，我们利用 噪声颜色值– 消融进度值得到一个剔除阈值value 然后自定义一个边缘范围值_Range，然后用smoothstep函数来得到一个值",-1)),l[1523]||(l[1523]=i("p",null,"接着，我们在原本的颜色和渐变颜色之间进行插值，决定使用哪个颜色",-1)),a(n,{color:"red"},{default:k(()=>[...l[1516]||(l[1516]=[s("利用smoothstep结合消融阈值来决定在渐变纹理中采用的渐变颜色",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1517]||(l[1517]=[s("利用lerp来决定在原始颜色和边缘渐变颜色中使用哪个颜色",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1518]||(l[1518]=[s("**利用自定义参数来决定边缘范围** ",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1519]||(l[1519]=[s("从而实现消融边缘渐变色",-1)])]),_:1})])]),l[3233]||(l[3233]=i("h4",{id:"_2-具体实现-5",tabindex:"-1"},[s("2. 具体实现 "),i("a",{class:"header-anchor",href:"#_2-具体实现-5","aria-label":'Permalink to "2. 具体实现"'},"​")],-1)),l[3234]||(l[3234]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//1.添加属性")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  _Noise 噪声纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  _Gradient 渐变纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  _Dissolve 消融进度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  _Range 边缘范围")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  添加属性映射")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//2.结构体 加入一个噪声纹理uv")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//3.片元着色器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  3-1:剔除效果制作")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      从噪声纹理中采样，利用clip函数进行剔除")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  3-2:边缘渐变采样，范围控制，颜色插值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      利用smoothstep函数计算出采样系数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      利用lerp函数决定是用哪个颜色")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3235]||(l[3235]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson124_Dissolve"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"     Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainTex"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _BumpMap"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"BumpMap"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _BumpScale"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"BumpScale"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _SpecularNum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"SpecularNum"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"8"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"256"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 18")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //噪声纹理 用于决定消融效果范围")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Noise"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Noise"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //渐变纹理 用于决定边缘颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Gradient"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Gradient"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //消融进度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Dissolve"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Dissolve"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //消融边界宽窄")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _EdgeRange"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"EdgeRange"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Tags { "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"LightMode"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ForwardBase"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma multi_compile_fwdbase")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "Lighting.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "AutoLight.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //float2 uvTex:TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //float2 uvBump:TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //我们可以单独的声明两个float2的成员用于记录 颜色和法线纹理的uv坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //也可以直接声明一个float4的成员 xy用于记录颜色纹理的uv，zw用于记录法线纹理的uv")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //噪声纹理uv 用于之后计算偏移缩放")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uvNoise"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //光的方向 相对于切线空间下的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"lightDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD2;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //视角的方向 相对于切线空间下的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"viewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD3;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float3 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"worldPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD4;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                SHADOW_COORDS"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//漫反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//颜色纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//颜色纹理的缩放和平移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _BumpMap"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//法线纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _BumpMap_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//法线纹理的缩放和平移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _BumpScale"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//凹凸程度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _SpecularColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//高光颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularNum;"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//光泽度")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Noise"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//噪声纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Noise_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//法线纹理的缩放和平移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Gradient"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//噪声纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Dissolve;"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//消融进度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _EdgeRange;"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//消融边界宽窄范围")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_full"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," data"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //把模型空间下的顶点转到裁剪空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.pos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算纹理的缩放偏移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.uv.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_ST.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_ST.zw;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.uv.zw "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _BumpMap_ST.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _BumpMap_ST.zw;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算噪声纹理的缩放偏移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.uvNoise "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Noise_ST.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Noise_ST.zw;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //在顶点着色器当中 得到 模型空间到切线空间的 转换矩阵")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //切线、副切线、法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算副切线 计算叉乘结果后 垂直与切线和法线的向量有两条 通过乘以 切线当中的w，就可以确定是哪一条")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," binormal"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," cross"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.tangent), "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal)) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.tangent.w;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //转换矩阵")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3x3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," rotation"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," float3x3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"( v.tangent.xyz,")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                                              binormal,")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                                              v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //模型空间下的光的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //data.lightDir = ObjSpaceLightDir(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //乘以模型空间到切线空间的转换矩阵 就可以得到切线空间下的 光的方向了")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.lightDir "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(rotation, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ObjSpaceLightDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //模型空间下的视角的方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //data.viewDir = ObjSpaceViewDir(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.viewDir "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(rotation, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ObjSpaceViewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.worldPos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(unity_ObjectToWorld, v.vertex).xyz;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                TRANSFER_SHADOW"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(data);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //剔除——消融")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," noiseColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_Noise, i.uvNoise.xy).rgb;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                clip"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_Dissolve "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"=="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ?"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," :"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," noiseColor.r "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Dissolve);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //通过纹理采样函数 取出法线纹理贴图当中的数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," packedNormal"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_BumpMap, i.uv.zw);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //将我们取出来的法线数据 进行逆运算并且可能会进行解压缩的运算，最终得到切线空间下的法线数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tangentNormal"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnpackNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(packedNormal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //乘以凹凸程度的系数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                tangentNormal.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _BumpScale;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                tangentNormal.z "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," sqrt"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1.0"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," saturate"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(tangentNormal.xy, tangentNormal.xy)));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //接下来就来处理 带颜色纹理的 布林方光照模型计算")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //颜色纹理和漫反射颜色的 叠加")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," albedo"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv.xy) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainColor.rgb;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //兰伯特")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lambertColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," albedo.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(tangentNormal, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.lightDir)));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //半角向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," halfA"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.viewDir) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.lightDir));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //高光反射")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," specularColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _LightColor0.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _SpecularColor.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(tangentNormal, halfA)), _SpecularNum);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //强度计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                UNITY_LIGHT_ATTENUATION"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(atten, i, i.worldPos);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //布林方")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," color"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," UNITY_LIGHTMODEL_AMBIENT.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," albedo "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," lambertColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"atten "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," specularColor;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //我们需要在模型本来的颜色 和 消融边缘的颜色之间去进行选择")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //渐变颜色的采样")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," value = 1 - smoothstep(0, _EdgeRange, noiseColor.r - _Dissolve);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," gradientColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_Gradient, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"fixed2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(value, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0.5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")).rgb;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //最终颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //当消融进度为0时 一定要让颜色使用我们的模型本来的颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," finalColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lerp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(color, gradientColor, value "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," step"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0.000001"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", _Dissolve));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(finalColor.rgb, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //该注释主要用于进行阴影投影 主要是用来计算阴影映射纹理的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Tags{"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"LightMode"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "ShadowCaster"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //  该编译指令时告诉Unity编译器生成多个着色器变体")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //  用于支持不同类型的阴影（SM，SSSM等等）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //  可以确保着色器能够在所有可能的阴影投射模式下正确渲染")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma multi_compile_shadowcaster")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //  其中包含了关键的阴影计算相关的宏")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //噪声纹理uv 用于之后计算偏移缩放")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uvNoise"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //顶点到片元着色器阴影投射结构体数据宏")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //这个宏定义了一些标准的成员变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //这些变量用于在阴影投射路径中传递顶点数据到片元着色器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //我们主要在结构体中使用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                V2F_SHADOW_CASTER;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Noise"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//噪声纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Noise_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//法线纹理的缩放和平移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Dissolve;"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//消融进度")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," data"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算噪声纹理的缩放偏移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                data.uvNoise "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Noise_ST.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Noise_ST.zw;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //转移阴影投射器法线偏移宏")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //用于在顶点着色器中计算和传递阴影投射所需的变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //主要做了")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //2-2-1.将对象空间的顶点位置转换为裁剪空间的位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //2-2-2.考虑法线偏移，以减轻阴影失真问题，尤其是在处理自阴影时")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //2-2-3.传递顶点的投影空间位置，用于后续的阴影计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //我们主要在顶点着色器中使用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                TRANSFER_SHADOW_CASTER_NORMALOFFSET"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(data);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," data;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"):SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //剔除——消融")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," noiseColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_Noise, i.uvNoise.xy).rgb;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                clip"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_Dissolve "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"=="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ?"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," :"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," noiseColor.r "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Dissolve);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //阴影投射片元宏")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //将深度值写入到阴影映射纹理中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //我们主要在片元着色器中使用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                SHADOW_CASTER_FRAGMENT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Fallback "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Diffuse"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3236]||(l[3236]=i("hr",null,null,-1)),l[3237]||(l[3237]=i("h3",{id:"十、水波效果",tabindex:"-1"},[s("十、水波效果 "),i("a",{class:"header-anchor",href:"#十、水波效果","aria-label":'Permalink to "十、水波效果"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1524]||(l[1524]=[s("水波效果指在计算机图形学中模拟水面波纹的视觉效果",-1)])]),_:1}),l[3238]||(l[3238]=i("h4",{id:"_1-基本原理-9",tabindex:"-1"},[s("1. 基本原理 "),i("a",{class:"header-anchor",href:"#_1-基本原理-9","aria-label":'Permalink to "1. 基本原理"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1525]||(l[1525]=[s("水波效果可以基于我们之前实现的带法线纹理的玻璃效果进行修改 通过添加噪声法线纹理结合Shader内置时间变量实现水波动态效果 加入菲涅耳计算公式实现水面的光学特性",-1)])]),_:1}),i("ol",null,[i("li",null,[l[1533]||(l[1533]=i("p",null,[i("strong",null,"噪声纹理的使用")],-1)),i("p",null,[l[1527]||(l[1527]=s("我们可以利用",-1)),a(n,{color:"red"},{default:k(()=>[...l[1526]||(l[1526]=[s("沃利噪声(细胞噪声)",-1)])]),_:1}),l[1528]||(l[1528]=s("生成的噪声纹理灰度图",-1))]),l[1534]||(l[1534]=i("p",null,"在Unity中将该噪声纹理灰度图作为高度图使用",-1)),l[1535]||(l[1535]=i("p",null,"用它代表水面的法线信息，只需要在Unity中将该灰度图设置为",-1)),i("p",null,[l[1530]||(l[1530]=i("strong",null,"Normal map",-1)),l[1531]||(l[1531]=s("，并勾选",-1)),a(n,{color:"red"},{default:k(()=>[...l[1529]||(l[1529]=[s("Create from Grayscale",-1)])]),_:1}),l[1532]||(l[1532]=s("后应用即可",-1))])]),i("li",null,[l[1539]||(l[1539]=i("p",null,[i("strong",null,"动态效果的实现")],-1)),l[1540]||(l[1540]=i("p",null,"自定义两个属性，代表水平面x和y轴的速度。在片元着色器中利用",-1)),l[1541]||(l[1541]=i("p",null,"Shader内置时间参数_Time.y 得到累积速度变化。然后用该速度变量",-1)),i("p",null,[l[1537]||(l[1537]=s("从噪声法线纹理中进行两次采样，再讲两次采样的结果相加得到扰动后 的法线，最后用该法线处理",-1)),a(n,{color:"red"},{default:k(()=>[...l[1536]||(l[1536]=[s("折射、反射、菲涅耳效果",-1)])]),_:1})]),l[1542]||(l[1542]=i("p",null,"这样看起来就会有动态效果了",-1)),a(n,{color:"red"},{default:k(()=>[...l[1538]||(l[1538]=[s("该算法是图形学前辈们总结的高效的模拟流动感的算法，水波、火焰、玻璃折射都可以用",-1)])]),_:1})]),i("li",null,[l[1544]||(l[1544]=i("p",null,"菲涅耳公式的运用",-1)),l[1545]||(l[1545]=i("p",null,"我们只需要将之前学习过的菲涅耳近似公式在最后的颜色计算中进行运用",-1)),a(n,{color:"red"},{default:k(()=>[...l[1543]||(l[1543]=[s("便可以让水面呈现出菲涅耳现象效果",-1)])]),_:1})])]),a(h,{face:"shader/shader实践:水波"}),l[3239]||(l[3239]=i("h4",{id:"_2-具体实现-6",tabindex:"-1"},[s("2. 具体实现 "),i("a",{class:"header-anchor",href:"#_2-具体实现-6","aria-label":'Permalink to "2. 具体实现"'},"​")],-1)),l[3240]||(l[3240]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//1.属性相关")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  1-1.添加用于控制动态效果的x和y轴方向的速度属性")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      _WaveXSpeed、_WaveXSpeed")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  1-2.将玻璃种的折射属性删除，改为之后菲涅耳效果会用到的反射率")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      删除_RefractAmount，添加_FresnelScale")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  修改对应的属性映射")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//2.修改片元着色器")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  2-1.将原来的法线相关采样 修改为扰动算法（对噪声法线纹理进行 + - 偏移采样，采样后叠加单位化）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  2-2.修改折射相关计算，将对应法线换为新发现")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  2-3.修改反射相关计算，世界空间下法线用扰动后发现进行计算，使用它计算反射相关内容")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  2-4.处理菲涅耳效应，复制Lesson79_FresnelBase中菲涅耳近似公式，用计算出来的系数处理最终的折射和反射相关内容")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3241]||(l[3241]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson125_WaterWave"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //主纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"MainTex"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //法线纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _BumpMap"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"BumpMap"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //立方体纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Cube"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Cubemap"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Cube) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //控制折射扭曲程度的变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Distortion"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Distortion"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"10"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //控制水波水平和竖直速度偏移的属性")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _WaveXSpeed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"WaveXSpeed"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0.1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0.1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.01")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _WaveYSpeed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"WaveYSpeed"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0.1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0.1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.01")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //之后用于计算菲涅耳效果的系数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _FresnelScale"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"FresnelScale"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //将渲染队列改为透明的 目的是让玻璃对象 滞后渲染")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //能够捕获到之前正确的屏幕图像")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Tags{"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"RenderType"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Opaque"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Queue"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Transparent"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //使用它来捕获当前屏幕内容 并存储到默认的渲染纹理变量中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        GrabPass{}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            Tags{"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"LightMode"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ForwardBase"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "Lighting.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _BumpMap"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//法线纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _BumpMap_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//法线纹理的缩放和平移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            samplerCUBE"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Cube"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //GrabPass默认存储的纹理变量 这个是规则")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _GrabTexture"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Distortion"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _WaveXSpeed;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _WaveYSpeed;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _FresnelScale"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"pos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":SV_POSITION;"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//裁剪空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //用于存储从屏幕图像中采样的坐标（顶点相对于屏幕的位置）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"grabPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //用于在颜色纹理中采样的UV坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下的反射向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //我们将把反射向量的计算放在顶点着色器函数中 节约性能 表现效果也不会太差 肉眼几乎分辨不出来")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //float3 worldRefl:TEXCOORD2;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //代表我们切线空间到世界空间的 变换矩阵的3行")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"TtoW0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD3;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"TtoW1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD4;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"TtoW2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD5;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_full"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," o"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //顶点坐标转换")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.pos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //屏幕坐标转换相关的内容")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.grabPos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," ComputeGrabScreenPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(o.pos);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //uv坐标计算相关的内容")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_ST.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _MainTex_ST.zw;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //法线纹理的uv坐标计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv.zw "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _BumpMap_ST.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _BumpMap_ST.zw;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算反射光向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //1.计算世界空间下法线向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldNormal"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToWorldNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.normal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //2.世界空间下的顶点坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldPos"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(unity_ObjectToWorld, v.vertex).xyz;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                ////3.计算视角方向 内部是用摄像机位置 - 世界坐标位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //fixed3 worldViewDir = UnityWorldSpaceViewDir(worldPos);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                ////4.计算反射向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //o.worldRefl = reflect(-worldViewDir, worldNormal);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下切线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldTangent"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToWorldDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.tangent);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算副切线 计算叉乘结果后 垂直与切线和法线的向量有两条 通过乘以 切线当中的w，就可以确定是哪一条")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldBinormal"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," cross"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(worldTangent), "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(worldNormal)) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.tangent.w;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.TtoW0 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," float4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(worldTangent.x, worldBinormal.x,  worldNormal.x, worldPos.x);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.TtoW1 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," float4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(worldTangent.y, worldBinormal.y,  worldNormal.y, worldPos.y);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.TtoW2 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," float4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(worldTangent.z, worldBinormal.z,  worldNormal.z, worldPos.z);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"):SV_TARGET")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //世界空间下视角方向")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldPos"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.TtoW0.w, i.TtoW1.w, i.TtoW2.w);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," viewDir"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"UnityWorldSpaceViewDir"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(worldPos));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                ////通过纹理采样函数 取出法线纹理贴图当中的数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //float4 packedNormal = tex2D(_BumpMap, i.uv.zw);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                ////将我们取出来的法线数据 进行逆运算并且可能会进行解压缩的运算，最终得到切线空间下的法线数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //float3 tangentNormal = UnpackNormal(packedNormal);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //加入的一个水波移动速度的感觉")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //这个是图形学前辈们总结的一套简单的扰动算法 可以让水波、火焰、玻璃折射等 出现扰动感（动态感）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float2"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," speed"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Time.y "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," float2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_WaveXSpeed, _WaveYSpeed);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," bump1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnpackNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_BumpMap, i.uv.zw "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," speed)).rgb;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," bump2"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnpackNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_BumpMap, i.uv.zw "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," speed)).rgb;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," bump"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(bump1 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," bump2);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //把计算完毕后的切线空间下的法线转换到世界空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //float3x3 rotation = float3x3(i.TtoW0.xyz, i.TtoW1.xyz, i.TtoW2.xyz );")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //float3 worldNormal = mul(rotation, bump);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //本质 就是在进行矩阵运算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldNormal"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," float3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.TtoW0.xyz, bump), "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.TtoW1.xyz, bump), "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.TtoW2.xyz, bump));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //反射颜色相关的计算 会叠加主纹理颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //对颜色纹理进行采样")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mainTex"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," speed);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //我们需要在这里计算反射向量 因为这时才把法线纹理中的法线信息 算出来")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," refl"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," reflect"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"viewDir, worldNormal);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //将反射颜色和主纹理颜色进行叠加")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," reflColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," texCUBE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_Cube, refl) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," mainTex;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //折射相关的颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //其实就是从我们抓取的 屏幕渲染纹理中进行采样 参与计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //抓取纹理中的颜色信息 相当于是这个玻璃对象后面的颜色")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //想要有折射效果 可以在采样之前 进行xy屏幕坐标的偏移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float2"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," offset"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," bump.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Distortion;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //xy偏移一个位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                i.grabPos.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," offset"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"i.grabPos.z "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," i.grabPos.xy;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //利用透视除法 将屏幕坐标转换到 0~1范围内 然后再进行采样")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed2"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," screenUV"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," i.grabPos.xy "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," i.grabPos.w;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //从捕获的渲染纹理中进行采样 获取后面的颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," grabColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_GrabTexture, screenUV);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //利用schlick菲涅耳近似等式 计算菲涅耳反射率")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," fresnel = _FresnelScale + (1-_FresnelScale) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(viewDir), "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(worldNormal)), "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," color"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," reflColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"fresnel "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," grabColor "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"fresnel);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3242]||(l[3242]=i("hr",null,null,-1)),l[3243]||(l[3243]=i("h3",{id:"十一、噪声雾效",tabindex:"-1"},[s("十一、噪声雾效 "),i("a",{class:"header-anchor",href:"#十一、噪声雾效","aria-label":'Permalink to "十一、噪声雾效"'},"​")],-1)),l[3244]||(l[3244]=i("h4",{id:"_1-基本原理-10",tabindex:"-1"},[s("1. 基本原理 "),i("a",{class:"header-anchor",href:"#_1-基本原理-10","aria-label":'Permalink to "1. 基本原理"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1546]||(l[1546]=[s("噪声雾效可以基于我们之前实现的屏幕后处理效果的全局雾效进行修改",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1547]||(l[1547]=[s("通过添加噪声纹理结合Shader内置时间变量实现雾的不均匀以及动态效果",-1)])]),_:1}),i("ol",null,[i("li",null,[l[1550]||(l[1550]=i("p",null,[i("strong",null,"不均匀效果的实现")],-1)),l[1551]||(l[1551]=i("p",null,"我们可以利用柏林噪声算法生成的噪声纹理灰度图来制作不均匀感。",-1)),i("p",null,[i("strong",null,[l[1549]||(l[1549]=s("从灰度图中采样得到0~1范围的值，再通过减去0.5的方式将其区间变为-0.5~0.5之间，",-1)),a(n,{color:"red"},{default:k(()=>[...l[1548]||(l[1548]=[s("并用这个系数参与最后的雾的混合因子计算中，从而 让均匀的雾变得不均匀。",-1)])]),_:1})])]),a(h,{face:"shader/shader实践:噪声雾效"})]),i("li",null,[l[1557]||(l[1557]=i("p",null,[i("strong",null,"动态效果的实现")],-1)),i("p",null,[l[1553]||(l[1553]=s("类似水波效果，",-1)),a(n,{color:"red"},{default:k(()=>[...l[1552]||(l[1552]=[s("自定义x轴和y轴的两个速度变量。",-1)])]),_:1})]),i("p",null,[l[1555]||(l[1555]=s("利用Shader内置时间参数",-1)),a(n,{color:"red"},{default:k(()=>[...l[1554]||(l[1554]=[i("strong",null,"_Time.y",-1)])]),_:1}),l[1556]||(l[1556]=s("得到累积变化。",-1))]),l[1558]||(l[1558]=i("p",null,"用该速度变量从噪声纹理中偏移采样，从而达到动态效果。",-1))])]),a(h,{face:"shader/shader实践:噪声雾效2"}),l[3245]||(l[3245]=i("h4",{id:"_2-具体实现-7",tabindex:"-1"},[s("2. 具体实现 "),i("a",{class:"header-anchor",href:"#_2-具体实现-7","aria-label":'Permalink to "2. 具体实现"'},"​")],-1)),l[3246]||(l[3246]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//1.打开 Lesson109场景")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//2.新建Shader Lesson126_NoiseFog 删除相关代码")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//3.复制屏幕后处理效果的全局雾效 Lesson113_FogWithDepthTexture")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//4.修改Shader代码")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  4-1.属性添加")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      噪声纹理 _Noise")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      噪声值偏移系数 _NoiseAmount")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      X、Y轴移动速度 _FogXSpeed, FogYSpeed")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//      属性映射")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  4-2.速度计算，噪声纹理偏移采样，0~1 转 -0.5~0.5")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  4-3.参与雾混合因子计算")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3247]||(l[3247]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson126_NoiseFog"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Texture"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "white"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _FogColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"FogColor"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _FogDensity"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"FogDensity"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Float) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _FogStart"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"FogStart"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Float) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _FogEnd"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"FogEnd"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Float) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 10")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //决定不均匀效果的噪声纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Noise"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Noise"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //噪声系数 控制 偏移范围的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _NoiseAmount"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"NoiseAmount"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Float) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //用于控制动态移动速度的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _FogXSpeed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"FogXSpeed"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Float) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _FogYSpeed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"FogYSpeed"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Float) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ZTest Always")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Cull Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ZWrite Off")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //深度纹理UV")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv_depth"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : TEXCOORD1;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //顶点射线 指向四个角的方向向量 （传递到片元时 会自动进行插值 运算）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ray"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":TEXCOORD2;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vertex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //纹素 用来判断翻转会使用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            half4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex_TexelSize"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //深度纹理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _CameraDepthTexture"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //雾相关的属性")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _FogColor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _FogDensity;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _FogStart"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _FogEnd"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //矩阵相关 里面存储了 4条射线向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //0-左下 1-右下 2-右上 3-左上")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4x4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _RayMatrix"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Noise"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _NoiseAmount"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _FogXSpeed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _FogYSpeed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata_base"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," o"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.vertex "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv_depth "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //顶点着色器函数 每一个顶点都会执行一次")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //对于屏幕后处理来说 就会执行4次 因为有4个顶点 （4个角）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //通过uv坐标判断 当前的顶点位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                int"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," index"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.texcoord.x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," &&"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord.y "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    index "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                else"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.texcoord.x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," &&"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord.y "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    index "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                else"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.texcoord.x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," &&"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.texcoord.y "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    index "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                else")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    index "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //判断 是否需要进行纹理翻转 如果翻转了 深度的uv和对应顶点需要变化")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"if"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UNITY_UV_STARTS_AT_TOP")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex_TexelSize.y "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    o.uv_depth.y "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o.uv_depth.y;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    index "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 3"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," index;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"endif")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //根据顶点的位置 决定使用那一个射线向量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.ray "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _RayMatrix[index];")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //观察空间下 离摄像机的实际距离（Z分量）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," linearDepth"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," LinearEyeDepth"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"SAMPLE_DEPTH_TEXTURE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_CameraDepthTexture,i.uv_depth));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //计算世界空间下 像素的坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldPos"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _WorldSpaceCameraPos "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," linearDepth "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," i.ray;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //噪声纹理采样以及偏移")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                float2"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," speed"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Time.y "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," float2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_FogXSpeed, _FogYSpeed);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //噪声纹理中采样 采样出来的结果是0~1 我们需要将其转为 -0.5~0.5 然后还可以通过自定义系数控制这个正负范围")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," noise"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ( "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_Noise, i.uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," speed).r "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"_NoiseAmount;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //雾相关的计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //混合因子")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," f"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (_FogEnd "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," worldPos.y)"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_FogEnd "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _FogStart);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //取0~1之间 超过会取极值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //之所以乘以1 + noise，是为了在正常计算出来的混合因子中去进行 上下的扰动")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                f "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," saturate"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(f "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _FogDensity "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," +"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," noise));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //利用插值 在两个颜色之间进行融合")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," color"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," lerp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv).rgb, _FogColor.rgb, f);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(color.rgb, "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Fallback Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3248]||(l[3248]=i("hr",null,null,-1)),l[3249]||(l[3249]=i("h2",{id:"shadergui类",tabindex:"-1"},[s("ShaderGUI类 "),i("a",{class:"header-anchor",href:"#shadergui类","aria-label":'Permalink to "ShaderGUI类"'},"​")],-1)),l[3250]||(l[3250]=i("h3",{id:"一、shadergui类",tabindex:"-1"},[s("一、ShaderGUI类 "),i("a",{class:"header-anchor",href:"#一、shadergui类","aria-label":'Permalink to "一、ShaderGUI类"'},"​")],-1)),l[3251]||(l[3251]=i("blockquote",null,[i("p",null,"ShaderGUI类是什么")],-1)),l[3252]||(l[3252]=i("p",null,"它是一个用于自定义材质 Inspector 界面 的基类 通过继承 ShaderGUI，你可以完全控制材质编辑界面的布局和功能 而不仅仅局限于 Shader 的 属性(Properties) 语句块定义的默认行为",-1)),l[3253]||(l[3253]=i("p",null,[s("ShaderGUI可以让我们： "),i("strong",null,"1.自定义材质界面布局"),i("strong",null,"2.通过脚本逻辑，可以基于某些属性值动态隐藏或禁用其他属性"),i("strong",null,"3.添加高级功能，比如通过添加按钮控件，触发某些操作，如实时更新材质预览，显示调试信息等"),i("strong",null,"4.增强材质编辑体验，使美术人员或其他开发者无需关心底层Shader实现，而是通过友好的界面快速调整材质"),i("strong",null,"等等")],-1)),l[3254]||(l[3254]=i("blockquote",null,[i("p",null,"基本使用")],-1)),l[3255]||(l[3255]=i("ol",null,[i("li",null,[i("p",null,[i("strong",null,"自定义C#脚本继承ShaderGUI")])]),i("li",null,[i("p",null,[i("strong",null,"重写OnGUI方法")])]),i("li",null,[i("p",null,[i("strong",null,"在OnGUI方法中书写自定义布局逻辑")])]),i("li",null,[i("p",null,[i("strong",null,'在Shader语句块最后加入 CustomEditor "自定义C#脚本名"')])])],-1)),l[3256]||(l[3256]=i("blockquote",null,[i("p",null,"自定义材质面板")],-1)),l[3257]||(l[3257]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//使用ShaderGUI自定义材质面板的核心方法就是我们重写的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"void"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," OnGUI"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"MaterialEditor"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," materialEditor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"MaterialProperty"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[] "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"properties"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") 方法")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//其中两个参数非常重要：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"1.materialEditor:")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//提供与材质交互的接口，比如材质属性值等")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//关键属性：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//可以利用它获取到材质球")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//关键方法：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'ShaderProperty(MaterialProperty对象, "名字")')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//可以将属性设置为对应名字，并且用默认GUI显示")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"2.properties:")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//包含所有在Shader的属性语句块中定义的属性")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//关键属性：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"displayName")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//获取属性名")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//其他：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'MaterialProperty 属性对象 = FindProperty("属性名", properties)')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"可以利用FindProperty方法，获取到对应属性对象")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3258]||(l[3258]=i("hr",null,null,-1)),l[3259]||(l[3259]=i("h3",{id:"二、materialpropertydrawer类",tabindex:"-1"},[s("二、MaterialPropertyDrawer类 "),i("a",{class:"header-anchor",href:"#二、materialpropertydrawer类","aria-label":'Permalink to "二、MaterialPropertyDrawer类"'},"​")],-1)),i("p",null,[l[1560]||(l[1560]=i("strong",null,"MaterialPropertyDrawer(材质属性绘制器)",-1)),l[1561]||(l[1561]=s(" 用于",-1)),a(n,{color:"red"},{default:k(()=>[...l[1559]||(l[1559]=[s("自定义材质 属性 在 材质面板中的显示和交互方式",-1)])]),_:1}),l[1562]||(l[1562]=s("的 材质属性通常在Shader中通过 属性语句块 定义。 默认情况下，Unity提供了一些基础的控件（如滑块、颜色选择器等） ",-1)),l[1563]||(l[1563]=i("strong",null,"通过继承 MaterialPropertyDrawer(材质属性绘制器)",-1)),l[1564]||(l[1564]=i("strong",null,"你可以为自定义Shader属性创建更加灵活和直观的控件",-1))]),l[3260]||(l[3260]=i("blockquote",null,[i("p",null,"它和ShaderGUI的区别")],-1)),i("p",null,[i("strong",null,[l[1566]||(l[1566]=s("ShaderGUI是用来",-1)),a(n,{color:"red"},{default:k(()=>[...l[1565]||(l[1565]=[s("自定义整个材质面板的",-1)])]),_:1})]),l[1569]||(l[1569]=s(" 而",-1)),i("strong",null,[l[1568]||(l[1568]=s("MaterialPropertyDrawer(材质属性绘制器) 是",-1)),a(n,{color:"red"},{default:k(()=>[...l[1567]||(l[1567]=[s("用来自定义某一个属性的",-1)])]),_:1})]),l[1570]||(l[1570]=s(" 相当于可以更加精细的来进行属性自定义显示封装",-1))]),l[3261]||(l[3261]=i("blockquote",null,[i("p",null,"例子")],-1)),l[3262]||(l[3262]=i("p",null,[i("strong",null,"MaterialPropertyDrawer(材质属性绘制器) 继承自MaterialPropertyDrawer类")],-1)),l[3263]||(l[3263]=i("div",{class:"language-C#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"C#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," System"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Collections"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," System"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Collections"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Generic"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityEditor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"using"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityEngine"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," class"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Lesson128_MaterialPropertyDrawer"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"MaterialPropertyDrawer")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," min"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    private"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //构造函数一般是用来初始化我们自定义的一些变量的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Lesson128_MaterialPropertyDrawer"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," min"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        this"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".min "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," min;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        this"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".max "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," max;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," override"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," void"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," OnGUI"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Rect"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," position"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"MaterialProperty"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," prop"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"string"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," label"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"MaterialEditor"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," editor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //base.OnGUI(position, prop, label, editor);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(prop.type "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"!="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," MaterialProperty.PropType.Float )")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            EditorGUILayout."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"LabelField"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(label, "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"请使用float或者数值 不然无法使用该控件"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        prop.floatValue "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," EditorGUILayout."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Slider"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(label, prop.floatValue, min, max);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3264]||(l[3264]=i("hr",null,null,-1)),l[3265]||(l[3265]=i("h3",{id:"三、shader变体和关键字",tabindex:"-1"},[s("三、Shader变体和关键字 "),i("a",{class:"header-anchor",href:"#三、shader变体和关键字","aria-label":'Permalink to "三、Shader变体和关键字"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1571]||(l[1571]=[s("Shader Variant（变体）指的是一个Shader的特定配置",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1572]||(l[1572]=[s("通过不同的关键字（Keywords）和 设置组合 来实现不同的效果",-1)])]),_:1}),l[3266]||(l[3266]=i("p",null,"每一种关键字组合或设置都会生成一个独立的Shader变体 最终以二进制形式存储在构建文件中供运行时使用",-1)),l[3267]||(l[3267]=i("p",null,[s("Shader变体就是"),i("strong",null,"基于一个Shader文件当中的代码，编译生成多个版本的Shader"),s(" 它"),i("strong",null,"基于关键字来生成各种不同的版本")],-1)),l[3268]||(l[3268]=i("p",null,"举例说明",-1)),a(n,{color:"red"},{default:k(()=>[...l[1573]||(l[1573]=[s("一个Shader中有n个关键字",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1574]||(l[1574]=[s("每个关键字有两种状态（启用或禁用）",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1575]||(l[1575]=[s("最终生成的变体数量为n²",-1)])]),_:1}),l[3269]||(l[3269]=i("p",null,[i("strong",null,"变体 1：没有启用任何关键字（默认）。"),i("strong",null,"变体 2：启用了 关键字1。"),i("strong",null,"变体 3：启用了 关键字2。"),i("strong",null,"变体 4：同时启用了 关键字1 和 关键字2"),s(" 运行时，Unity会根据具体设置选择与之匹配的变体来使用")],-1)),l[3270]||(l[3270]=i("p",null,"Unity的一些内置功能会隐式的生成变体",-1)),l[3271]||(l[3271]=i("h4",{id:"_1-局部shader关键字",tabindex:"-1"},[s("1. 局部Shader关键字 "),i("a",{class:"header-anchor",href:"#_1-局部shader关键字","aria-label":'Permalink to "1. 局部Shader关键字"'},"​")],-1)),l[3272]||(l[3272]=i("div",{class:"language-C#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"C#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".声明：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"声明局部关键字有两种方式")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"#pragma shader_feature 或 #pragma multi_compile 来声明关键词")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".#pragma shader_feature 关键词1 关键词2 关键词3"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"....")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"作用：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"该编译指令声明的关键字，只有关键词启用时才会生成对应Shader变体")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".#pragma multi_compile 关键词1 关键词2 关键词3"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"....")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"作用：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"该编译指令声明的关键字，不管是否启用都会生成对应Shader变体")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"关键词命名规则")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"通常使用大写字母和下划线分隔"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_大写单词_大写单词"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},".."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"比如：_Test_Keyword")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"两种声明方式的区别：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"主要区别在于 生成Shader变体的数量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"shader_feature"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"编译更快，Shader文件更小，适用开关功能较少的场景")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"multi_compile"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"编译更长，Shader文件更大，适用需要完整覆盖的功能")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".使用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"关键字使用规则：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"利用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"#"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"if"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," defined"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"关键词名"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"....")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"#"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"elif"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," defined"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"关键词名"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"....")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"#"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"else")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"....")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"#"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"endif")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"配合使用，判断关键词启用时处理什么逻辑")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3273]||(l[3273]=i("h4",{id:"_2-shader中利用c-代码启用和禁用关键字",tabindex:"-1"},[s("2. Shader中利用C#代码启用和禁用关键字 "),i("a",{class:"header-anchor",href:"#_2-shader中利用c-代码启用和禁用关键字","aria-label":'Permalink to "2. Shader中利用C#代码启用和禁用关键字"'},"​")],-1)),l[3274]||(l[3274]=i("p",null,"Unity Shader中的关键字是一种用于控制Shader变体的机制 允许我们通过启用或者禁用特定功能来动态调整Shader的行为",-1)),l[3275]||(l[3275]=i("p",null,"Shader中的关键字可以分为2种",-1)),l[3276]||(l[3276]=i("ol",null,[i("li",null,[i("p",null,[i("strong",null,"全局关键字"),s(" Unity自带的关键字，所有Shader中共享 可以在C#代码中通过 "),i("strong",null,'Shader.EnableKeyword("全局关键字名")'),i("strong",null,'Shader.DisableKeyword("全局关键字名")'),s(" 来控制关键字的启用和禁用")])]),i("li",null,[i("p",null,[i("strong",null,"局部关键字"),s(" 只在特定的Shader中有效，不会影响其他Shader Unity更推荐使用局部关键字以减少关键字冲突问题 可以在C#代码中通过 "),i("strong",null,'材质球.EnableKeyword("局部关键字名")'),i("strong",null,'材质球.DisableKeyword("局部关键字名")'),s(" 来控制关键字的启用和禁用")])])],-1)),l[3277]||(l[3277]=i("h4",{id:"_3-变体和条件分支的区别",tabindex:"-1"},[s("3. 变体和条件分支的区别 "),i("a",{class:"header-anchor",href:"#_3-变体和条件分支的区别","aria-label":'Permalink to "3. 变体和条件分支的区别"'},"​")],-1)),l[3278]||(l[3278]=i("p",null,"条件分支语句会带来逻辑上执行的开销 虽然运行时直接判断但是会带来对性能的影响",-1)),a(n,{color:"red"},{default:k(()=>[...l[1576]||(l[1576]=[s("变体",-1)])]),_:1}),l[3279]||(l[3279]=s("虽然",-1)),a(n,{color:"red"},{default:k(()=>[...l[1577]||(l[1577]=[s("会增加编译时间并占用更多的内容",-1)])]),_:1}),i("p",null,[i("strong",null,[l[1579]||(l[1579]=s("但是它的",-1)),a(n,{color:"red"},{default:k(()=>[...l[1578]||(l[1578]=[s("性能高，灵活性强",-1)])]),_:1})])]),i("p",null,[i("strong",null,[l[1582]||(l[1582]=s("在",-1)),a(n,{color:"red"},{default:k(()=>[...l[1580]||(l[1580]=[s("静态",-1)])]),_:1}),l[1583]||(l[1583]=s("功能",-1)),a(n,{color:"red"},{default:k(()=>[...l[1581]||(l[1581]=[s("选择时变体更优",-1)])]),_:1})]),i("strong",null,[l[1586]||(l[1586]=s("在",-1)),a(n,{color:"red"},{default:k(()=>[...l[1584]||(l[1584]=[s("动态",-1)])]),_:1}),l[1587]||(l[1587]=s("功能",-1)),a(n,{color:"red"},{default:k(()=>[...l[1585]||(l[1585]=[s("选择时条件分支语句",-1)])]),_:1}),l[1588]||(l[1588]=s("更适合",-1))])]),l[3280]||(l[3280]=i("hr",null,null,-1)),l[3281]||(l[3281]=i("h3",{id:"四、toggledrawer类",tabindex:"-1"},[s("四、ToggleDrawer类 "),i("a",{class:"header-anchor",href:"#四、toggledrawer类","aria-label":'Permalink to "四、ToggleDrawer类"'},"​")],-1)),l[3282]||(l[3282]=i("p",null,[i("strong",null,"作用："),s(" 将float数据以开关的形式在材质属性面板上显示")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1589]||(l[1589]=[s("数值只能设置为0或1, 0为关闭, 1为开启",-1)])]),_:1}),l[3283]||(l[3283]=i("p",null,"使用场景：",-1)),l[3284]||(l[3284]=i("ol",null,[i("li",null,[i("strong",null,"开启或关闭某个特效（比如是否启用边缘）")]),i("li",null,[i("strong",null,"切换某些功能（比如是否使用纹理颜色）")]),i("li",null,[i("strong",null,"控制条件分支逻辑"),s(" 等等")])],-1)),l[3285]||(l[3285]=i("p",null,[s("用法： "),i("strong",null,"在属性语句块中声明属性时")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1590]||(l[1590]=[s("在属性前加上`[Toggle]`或`[Toggle(自定义名称)]`",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1591]||(l[1591]=[s('`[Toggle]_属性名("属性名", Float) = 0或1`',-1)])]),_:1}),l[3286]||(l[3286]=i("blockquote",null,[i("p",null,"ToggleDrawer关联关键字")],-1)),l[3287]||(l[3287]=i("p",null,[i("strong",null,"ToggleDrawer可以和关键字编译指令结合使用"),i("strong",null,"达到在材质面板中通过Toggle禁用启用关键字的效果"),s(" 从而切换功能或者特效等 它可以让开发者在材质球的Inspector窗口中通过简单的复选框启用或者禁用关键字")],-1)),l[3288]||(l[3288]=i("p",null,"使用方式：",-1)),i("ol",null,[l[1595]||(l[1595]=i("li",null,[i("p",null,[i("strong",null,"ToggleDrawer和关键词绑定"),s(" 当我们使用Toggle定义一个Float属性时 Unity会自动根据属性值设置全局关键词 举例： "),i("strong",null,[i("code",null,"[Toggle]"),s('_ShowTex("ShowTex", Float) = 0或1')]),i("strong",null,"默认生成的全局关键词为 _SHOWTEX_ON（勾选时为1时激活）"),i("strong",null,[s("我们也可以利用Toggle自定义关键词名"),i("code",null,"[Toggle(自定义关键词名)]")])])],-1)),i("li",null,[l[1593]||(l[1593]=i("p",null,[i("strong",null,"关键词连接"),s(" 可以使用")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1592]||(l[1592]=[s("#pragma shader_feature 或 #pragma multi_compile 来关联关键词",-1)])]),_:1}),l[1594]||(l[1594]=i("p",null,"当我们在材质面板切换Toggle时，Unity会启用或禁用对应的关键词，触发对应的Shader变体",-1))])]),a(n,{color:"red"},{default:k(()=>[...l[1596]||(l[1596]=[s("注意：编译指令必须与ToggleDrawer的关键词一致，才能正确切换功能",-1)])]),_:1}),l[3289]||(l[3289]=i("h3",{id:"五、enumdrawer和keywordenumdrawer",tabindex:"-1"},[s("五、EnumDrawer和KeywordEnumDrawer "),i("a",{class:"header-anchor",href:"#五、enumdrawer和keywordenumdrawer","aria-label":'Permalink to "五、EnumDrawer和KeywordEnumDrawer"'},"​")],-1)),l[3290]||(l[3290]=i("blockquote",null,[i("p",null,"EnumDrawer的使用")],-1)),i("p",null,[l[1598]||(l[1598]=i("strong",null,"作用：",-1)),l[1599]||(l[1599]=s(" EnumDrawer是Unity自带的继承自MaterialPropertyDrawer(材质属性绘制器) 的类 使用它修饰属性，",-1)),a(n,{color:"red"},{default:k(()=>[...l[1597]||(l[1597]=[s("可以让该属性在Inspector窗口中显示一个下拉列表",-1)])]),_:1}),l[1600]||(l[1600]=s("，供用户选择",-1))]),l[3291]||(l[3291]=i("p",null,[i("strong",null,"使用方式：")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1601]||(l[1601]=[s('`[Enum(显示名1, 值1, 显示名2, 值2, ...)]`属性名("显示名称", Float) = 默认值',-1)])]),_:1}),l[3292]||(l[3292]=i("blockquote",null,[i("p",null,"KeywordEnumDrawer的使用")],-1)),l[3293]||(l[3293]=i("p",null,[i("strong",null,"作用："),s(" KeywordEnumDrawer同样是Unity自带的继承自MaterialPropertyDrawer(材质属性绘制器) 的类")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1602]||(l[1602]=[s("主要使用它和关键词建立联系",-1)])]),_:1}),l[3294]||(l[3294]=i("p",null,[i("strong",null,"使用方式："),i("strong",null,[i("code",null,"[KeywordEnum(显示名1, 显示名2 ...)] "),s('属性名("显示名称", Float) = 0')]),s(" 当我们使用它是，会自动生成对应关键字 _属性名_显示名1、_属性名_显示名2 …")],-1)),l[3295]||(l[3295]=i("blockquote",null,[i("p",null,"例子")],-1)),l[3296]||(l[3296]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson131"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Texture"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "white"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},'        //[Enum(Tex, 0, Red, 1, Green, 2, Blue, 3)]_TestEnum("TestEnum", Float) = 0')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //默认存在关键字")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //_KEYWORDTESTENUM_TEX")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //_KEYWORDTESTENUM_RED")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //_KEYWORDTESTENUM_GREEN")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //_KEYWORDTESTENUM_BLUE")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ["),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"KeywordEnum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(Tex, Red, Green, Blue)]"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"_KeywordTestEnum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"KeywordTestEnum"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Float) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Tags { "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"RenderType"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Opaque"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        LOD "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"100")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            // make fog work")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma multi_compile_fog")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma shader_feature _KEYWORDTESTENUM_TEX _KEYWORDTESTENUM_RED _KEYWORDTESTENUM_GREEN _KEYWORDTESTENUM_BLUE")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct appdata")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vertex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                UNITY_FOG_COORDS"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vertex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _TestEnum;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," o"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.vertex "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," TRANSFORM_TEX"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.uv, _MainTex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                UNITY_TRANSFER_FOG"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(o,o.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                // sample the texture")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," col"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //if(_TestEnum == 0)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //    col = tex2D(_MainTex, i.uv);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //else if(_TestEnum == 1)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //    col = fixed4(1,0,0,1);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //else if(_TestEnum == 2)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //    col = fixed4(0,1,0,1);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //else if(_TestEnum == 3)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                //    col = fixed4(0,0,1,1);")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"if"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," defined"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"_KEYWORDTESTENUM_TEX"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    col "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"elif"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," defined"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"_KEYWORDTESTENUM_RED"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    col "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"elif"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," defined"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"_KEYWORDTESTENUM_GREEN"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    col "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"elif"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," defined"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"_KEYWORDTESTENUM_BLUE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    col "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"else")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    col "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                #"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"endif")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                // apply fog")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                UNITY_APPLY_FOG"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.fogCoord, col);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," col;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3297]||(l[3297]=i("hr",null,null,-1)),l[3298]||(l[3298]=i("h3",{id:"六、powersliderdrawer和intrangedrawer",tabindex:"-1"},[s("六、PowerSliderDrawer和IntRangeDrawer "),i("a",{class:"header-anchor",href:"#六、powersliderdrawer和intrangedrawer","aria-label":'Permalink to "六、PowerSliderDrawer和IntRangeDrawer"'},"​")],-1)),l[3299]||(l[3299]=i("blockquote",null,[i("p",null,"PowerSliderDrawer的使用")],-1)),l[3300]||(l[3300]=i("p",null,[i("strong",null,"作用："),s(" PowerSliderDrawer是Unity自带的继承自MaterialPropertyDrawer(材质属性绘制器) 的类")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1603]||(l[1603]=[s("使用它修饰属性，可以让该属性在Inspector窗口中显示为一个指数滑块",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1604]||(l[1604]=[s("相比普通的线性滑块，它可以更方便的调整那些变化范围较大、非线性分布的参数",-1)])]),_:1}),l[3301]||(l[3301]=i("p",null,[s("比如 "),i("strong",null,"当属性的值范围较大，但其效果对某些特定范围特别敏感时，可以通过 PowerSlider 进行更直观的调整")],-1)),i("p",null,[l[1610]||(l[1610]=s("它和普通滑块属性的",-1)),a(n,{color:"red"},{default:k(()=>[...l[1605]||(l[1605]=[s("区别",-1)])]),_:1}),l[1611]||(l[1611]=s("是： ",-1)),i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[1606]||(l[1606]=[s("普通滑块属性",-1)])]),_:1}),l[1607]||(l[1607]=s("默认是线性分布，即滑块的位置与参数值成正比",-1))]),i("strong",null,[a(n,{color:"red"},{default:k(()=>[...l[1608]||(l[1608]=[s("PowerSlider",-1)])]),_:1}),l[1609]||(l[1609]=s(" 提供了 非线性映射，适合用在参数值对效果影响不均匀的场景",-1))]),l[1612]||(l[1612]=s(" 我们可以用该类修饰",-1))]),l[3302]||(l[3302]=i("ol",null,[i("li",null,[i("strong",null,"光照强度"),s("： 调整光的强弱（低强度变化显著，高强度变化较平滑）。")]),i("li",null,[i("strong",null,"对比度"),s("： 调整图像的对比效果。")]),i("li",null,[i("strong",null,"模糊程度"),s("： 调整模糊范围，尤其是高斯模糊。 等等")])],-1)),l[3303]||(l[3303]=i("p",null,[i("strong",null,"使用方式：")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1613]||(l[1613]=[s('`[PowerSlider(指数)] 属性名 ("显示名称", Range(最小值,最大值)) = 默认值`',-1)])]),_:1}),l[3304]||(l[3304]=i("p",null,[i("strong",null,"对应的函数曲线为"),i("strong",null,"y = x的指数次方"),i("strong",null,"x为滑块所在位置"),i("strong",null,"y为属性的数值")],-1)),l[3305]||(l[3305]=i("blockquote",null,[i("p",null,"IntRangeDrawer的使用")],-1)),l[3306]||(l[3306]=i("p",null,"作用： IntRangeDrawer同样是Unity自带的继承自MaterialPropertyDrawer(材质属性绘制器) 的类",-1)),a(n,{color:"red"},{default:k(()=>[...l[1614]||(l[1614]=[s("使用它修饰属性，可以让该属性在Inspector窗口中显示为一个整数范围滑块",-1)])]),_:1}),l[3307]||(l[3307]=i("p",null,[s("使用方式： "),i("strong",null,[i("code",null,"[IntRange]"),s(' 属性名 ("显示名称", Range(最小值,最大值)) = 默认值')])],-1)),l[3308]||(l[3308]=i("blockquote",null,[i("p",null,"例子")],-1)),l[3309]||(l[3309]=i("div",{class:"language-C#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"C#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Unlit/Lesson132"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Texture"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "white"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ["),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"PowerSlider"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")]"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"_TestNum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"TestNum"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        [IntRange]"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"_TestIntNum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"TestIntNum"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"10"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Tags { "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"RenderType"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Opaque"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        LOD "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"100")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma vertex vert")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma fragment frag")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            // make fog work")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            #pragma multi_compile_fog")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'            #include "UnityCG.cginc"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct appdata")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vertex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            struct v2f")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float2 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"uv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : TEXCOORD0;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                UNITY_FOG_COORDS"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                float4 "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vertex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," : SV_POSITION;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex_ST"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"appdata"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," v"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," o"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.vertex "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnityObjectToClipPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                o.uv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," TRANSFORM_TEX"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(v.uv, _MainTex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                UNITY_TRANSFER_FOG"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(o,o.vertex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," frag"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"v2f"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," i"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") : SV_Target")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                // sample the texture")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," col"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, i.uv);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                // apply fog")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"                UNITY_APPLY_FOG"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(i.fogCoord, col);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," col;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3310]||(l[3310]=i("hr",null,null,-1)),l[3311]||(l[3311]=i("h3",{id:"七、属性的特性",tabindex:"-1"},[s("七、属性的特性 "),i("a",{class:"header-anchor",href:"#七、属性的特性","aria-label":'Permalink to "七、属性的特性"'},"​")],-1)),l[3312]||(l[3312]=i("p",null,[s("所谓的属性的特性 "),i("strong",null,"就是在属性前加上一些类似特性的限制"),i("strong",null,"让属性在Inspector窗口中进行 有限制的显示 或者 特殊的布局显示")],-1)),l[3313]||(l[3313]=i("blockquote",null,[i("p",null,"常用的限制特性")],-1)),l[3314]||(l[3314]=i("div",{class:"language-C#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"C#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"["),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"HideInInspector"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//可以添加到 任意 属性前，是属性在材质面板上隐藏")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"["),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"NoScaleOffset"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//添加到 2D纹理贴图 属性前，可以让其在材质面板上隐藏纹理Tiling和Offset选项")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"["),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Normal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//添加到 2D纹理贴图 属性前，可以检测关联的纹理贴图是否为法线贴图，如果不是法线，会弹出修复提示")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"["),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"HDR"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//添加到 2D纹理贴图 或者 颜色 属性前，可以时属性开启高动态范围（HDR）效果，使数值突破1的限制")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//常用与自发光属性")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3315]||(l[3315]=i("blockquote",null,[i("p",null,"常用的装饰性特性")],-1)),l[3316]||(l[3316]=i("div",{class:"language-C#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"C#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"["),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Space"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"] 或 ["),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Space"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(数值)]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//可以在某一个属性前添加一个空白行")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//如果填入数值，可以添加对应行数的空白行")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"["),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Header"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(文本标题)]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//可以在材质属性面板上添加标题文字")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3317]||(l[3317]=i("hr",null,null,-1)),l[3318]||(l[3318]=i("h2",{id:"帧调试器",tabindex:"-1"},[s("帧调试器 "),i("a",{class:"header-anchor",href:"#帧调试器","aria-label":'Permalink to "帧调试器"'},"​")],-1)),l[3319]||(l[3319]=i("blockquote",null,[i("p",null,"帧调试器的作用")],-1)),l[3320]||(l[3320]=i("p",null,"我们可以利用Unity自带的帧调试工具 看到游戏图像的某一帧是如何一步步渲染出来的 我们可以在 Window(窗口)——>Analysis(分析)——>Frame Debugger(帧调试) 中打开帧调试工具",-1)),l[3321]||(l[3321]=i("p",null,"帧调试器是一个非常强大的工具 特别是在渲染调试、优化和效果分析方面有着重要的意义 它可以帮助我们",-1)),l[3322]||(l[3322]=i("ol",null,[i("li",null,[i("strong",null,"精准调试渲染问题，可以逐步查看渲染调用")]),i("li",null,[i("strong",null,"有助于优化性能，通过分析渲染调用，找出性能瓶颈并优化")]),i("li",null,[i("strong",null,"有助于调试材质、纹理和着色器，可以查看渲染时使用的材质、纹理和参数、快速定位问题")]),i("li",null,[i("strong",null,"可视化渲染过程，可以通过查看渲染目标和中间结果，深入了解渲染过程")])],-1)),l[3323]||(l[3323]=i("hr",null,null,-1)),l[3324]||(l[3324]=i("h2",{id:"表面着色器",tabindex:"-1"},[s("表面着色器 "),i("a",{class:"header-anchor",href:"#表面着色器","aria-label":'Permalink to "表面着色器"'},"​")],-1)),l[3325]||(l[3325]=i("h3",{id:"一、基本结构和原理",tabindex:"-1"},[s("一、基本结构和原理 "),i("a",{class:"header-anchor",href:"#一、基本结构和原理","aria-label":'Permalink to "一、基本结构和原理"'},"​")],-1)),l[3326]||(l[3326]=i("p",null,[s("我们通过事例对比表面着色器和顶点/片元着色器的区别 最大区别就是 "),i("strong",null,"表面着色器中没有显示的Pass了"),s(" 而其中最为关键的几个部分为：")],-1)),l[3327]||(l[3327]=i("ol",null,[i("li",null,[i("strong",null,"编译指令")]),i("li",null,[i("strong",null,"结构体")]),i("li",null,[i("strong",null,"自定义函数")])],-1)),l[3328]||(l[3328]=i("p",null,[i("strong",null,"当我们编写完表面着色器后，Unity会自动将其编译为顶点/片元着色器"),i("strong",null,"会将光照处理、反射、折射、阴影、雾效等等相关计算代码自动加入")],-1)),l[3329]||(l[3329]=i("h3",{id:"二、编译指令",tabindex:"-1"},[s("二、编译指令 "),i("a",{class:"header-anchor",href:"#二、编译指令","aria-label":'Permalink to "二、编译指令"'},"​")],-1)),l[3330]||(l[3330]=i("p",null,"编译指令是表面着色器中用来和Unity沟通的重要方式",-1)),l[3331]||(l[3331]=i("p",null,"通过编译指令，我们可以告诉Unity需要让他做什么和不做什么",-1)),l[3332]||(l[3332]=i("blockquote",null,[i("p",null,"编译指令 的基本构成")],-1)),l[3333]||(l[3333]=i("div",{class:"language-tex"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"tex"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"#pragma surface 表面函数名 光照模型 可选额外参数")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"1.固定部分 #pragma surface")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"2.表面函数名")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"3.光照模型")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"4.可选额外参数")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3334]||(l[3334]=i("blockquote",null,[i("p",null,"第一部分 固定写法")],-1)),l[3335]||(l[3335]=i("div",{class:"language-tex"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"tex"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"#pragma surface 表面函数名 光照模型 可选额外参数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"#pragma surface 是固定写法")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"是用于指明该编译指令是用于表面着色器的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"在他后面我们必须填写表面函数和光照模型")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"还可以填写一些可选参数来控制表面着色器的行为")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3336]||(l[3336]=i("blockquote",null,[i("p",null,"第二部分 表面函数名")],-1)),l[3337]||(l[3337]=i("div",{class:"language-tex"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"tex"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"#pragma surface 表面函数名 光照模型 可选额外参数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"表面函数名可以随意取名，但是需要在后面的代码中有对应名字的函数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"函数的参数有三种固定格式")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"1. void 表面函数名(Input IN, inout SurfaceOutput o)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"2. void 表面函数名(Input IN, inout SurfaceOutputStandard o)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"3. void 表面函数名(Input IN, inout SurfaceOutputStandardSpecular o)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"其中 Input 为输入结构体，其中可以得到各种表面属性")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"SurfaceOutput、SurfaceOutputStandard 和 SurfaceOutputStandardSpecular")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"是Unity内置的写好的用于输出的结构体，他们分别用于不同的工作流，可以配合不同的光照模型使用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"我们之后就可以利用Input结构体中的数据进行计算，计算得到的结构赋值给输出结构体o中的成员")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"之后会自动传递给光照函数进行下一步计算（如果我们不自定义，Unity会自动生成计算代码）")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3338]||(l[3338]=i("blockquote",null,[i("p",null,"第三部分 光照模型")],-1)),l[3339]||(l[3339]=i("div",{class:"language-tex"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"tex"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"#pragma surface 表面函数名 光照模型 可选额外参数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"光照模型是用来计算物体表面的光照效果的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Unity内置了基于物理的光照模型函数 Standard 和 StandardSpecular")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"还有简单的非基于物理的光照模型函数 Lambert 和 BlinnPhong")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"我们可以直接填写他们来应用对应的光照计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"同样我们也可以自定义光照模型计算相关")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"只需要在代码中按照格式书写以下函数")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"不依赖视角的光照模型，比如漫反射")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"half4 Lighting自定义名字 (SurfaceOutput s, half3 lightDir, half atten)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"依赖视角的光照模型，比如高光反射")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"half4 Lighting自定义名字 (SurfaceOutput s, half3 lightDir, half3 viewDir, half atten)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"然后只需要在光照模型处填写 自定义名字 即可")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"就会自动调用函数中的逻辑来处理光照相关逻辑了")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3340]||(l[3340]=i("blockquote",null,[i("p",null,"第四部分 可选额外参数")],-1)),l[3341]||(l[3341]=i("div",{class:"language-C#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"C#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"#pragma surface 表面函数名 光照模型 可选额外参数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"可选额外参数包含了很多非常有用的指令类型")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"我们着重提及几个可选参数：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//1.自定义顶点修改函数 vertex:顶点函数名")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"void"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," 顶点函数名"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"inout"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," appdata_full"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v)")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//2.最终颜色修改函数 finalcolor:自定义最终颜色修改函数名")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"void 自定义最终颜色修改函数名("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Input"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," IN"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"SurfaceOutput"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," o"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"inout"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color)")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//3.阴影相关")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"addshadow 为一些进行了顶点动画、透明度测试的物体显示的进行阴影投射，避免通过FallBack无法准确处理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"fullforwardshadows 在前向渲染路径中支持所有光源类型和阴影")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"noshadow 禁用阴影")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//4.透明相关")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"alphatest:变量名 利用它可以使用指定名字的变量来剔除不满足条件的片元")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//5.光照")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"noambient 不使用任何环境光和光照探针")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"novertexlights 不使用任何逐顶点光照")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"noforwardadd 去掉所有前向渲染中的额外pass，只会支持一个逐像素平行光，其他光源按照逐顶点huoSH来计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"nofog 关闭雾效处理")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"nolightmap 关闭光照烘焙处理")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//6.控制代码生成")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"默认情况下，表面着色器自动生成的代码包含前向渲染路径、延迟渲染路径使用的Pass")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"这会让Shader文件较大，如果我们明确表面着色器只会在某些渲染路径中使用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"可以使用")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"exclude_path:deferred(排除延迟渲染路径)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"exclude_path:forward（排除前向渲染路径）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"exclude_path:prepass（排除预通道渲染路径）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"来明确告诉Unity，不需要为某些渲染路径生成代码")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3342]||(l[3342]=i("h3",{id:"三、输入结构体",tabindex:"-1"},[s("三、输入结构体 "),i("a",{class:"header-anchor",href:"#三、输入结构体","aria-label":'Permalink to "三、输入结构体"'},"​")],-1)),l[3343]||(l[3343]=i("p",null,[s("Input结构体虽然是需要我们自己声明的结构体 但是我们只要在其中按照规定声明成员变量，便能获取到指定的表面属性 "),i("strong",null,"注意：")],-1)),l[3344]||(l[3344]=i("ol",null,[i("li",null,[i("p",null,[i("strong",null,"如果我们在可选额外参数中自定义了顶点修改函数，该结构体还会是顶点修改函数的输出结构体")])]),i("li",null,[i("p",null,[i("strong",null,"除了规范好的参数，我们还可以自己添加自定义参数，比如在自定义顶点修改函数中进行赋值")])]),i("li",null,[i("p",null,[i("strong",null,"在顶点/片元着色器中，这些参数往往需要我们手动计算，而在表面着色器中你可以理解为Unity内部已经"),s(" 帮助我们计算好了，直接拿来用即可")])])],-1)),l[3345]||(l[3345]=i("h3",{id:"四、输出结构体",tabindex:"-1"},[s("四、输出结构体 "),i("a",{class:"header-anchor",href:"#四、输出结构体","aria-label":'Permalink to "四、输出结构体"'},"​")],-1)),l[3346]||(l[3346]=i("p",null,"#pragma surface 表面函数名 光照模型 可选额外参数 其中在讲解表面函数名时提到，需要按规则声明函数 函数的参数有三种固定格式",-1)),i("ol",null,[l[1620]||(l[1620]=i("li",null,[i("strong",null,"void 表面函数名(Input IN, inout SurfaceOutput o)")],-1)),l[1621]||(l[1621]=i("li",null,[i("strong",null,"void 表面函数名(Input IN, inout SurfaceOutputStandard o)")],-1)),i("li",null,[l[1616]||(l[1616]=i("strong",null,"void 表面函数名(Input IN, inout SurfaceOutputStandardSpecular o)",-1)),l[1617]||(l[1617]=s(" 而其中的",-1)),a(n,{color:"red"},{default:k(()=>[...l[1615]||(l[1615]=[s("SurfaceOutput、SurfaceOutputStandard、SurfaceOutputStandardSpecular",-1)])]),_:1}),l[1618]||(l[1618]=s("结构体 就是我们的",-1)),l[1619]||(l[1619]=i("strong",null,"输出结构体",-1))])]),l[3347]||(l[3347]=i("p",null,"我们可以利用输入结构体Input中的数据在表面函数中进行计算后 将计算结果赋值存储在输出结构体中 之后Unity会利用我们输出的数据作为光照模型函数的输入来进行各种光照相关的计算 这三个输出结构体是由Unity提前声明好的，不能自己增加和减少 如果我们没有对其中的某些变量赋值，会使用默认值",-1)),l[3348]||(l[3348]=i("blockquote",null,[i("p",null,"输出结构体中有哪些成员")],-1)),l[3349]||(l[3349]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	//SurfaceOutput结构体（在Unity内置文件 Lighting.cginc 中声明）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //当我们在编译指令中使用 Lambert 和 BlinnPhong 光照模型时，就需要使用该结构体")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    struct"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," SurfaceOutput")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Albedo"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";    "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//漫反射")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Normal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";    "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//切线空间法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Emission"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";  "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//自发光：一般Unity会在片元着色器最后输出前 在输出颜色上直接叠加自发光颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        half"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Specular"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";    "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//镜面反射指数，范围0~1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        fixed"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Gloss"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";      "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//镜面反射强度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        镜面相关的两个参数，如果使用了BlinnPhong光照模型")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            会使用该公式计算高光反射强度："),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," spec"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," pow"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(nh, s.Specular"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"128"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," s.Gloss;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        fixed"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Alpha"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";      "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//透明通道：如果开启了透明度的话，会用该值和颜色进行混合")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	//SurfaceOutputStandard结构体（在Unity内置文件 UnityPBSLighting.cginc 中声明）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //当我们在编译指令中使用 Standard 光照模型时，就需要使用该结构体")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //我们一般称它为金属工作流输出结构体")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    struct"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," SurfaceOutputStandard")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Albedo"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";    "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//漫反射")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Normal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";    "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//切线空间法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Emission"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";  "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//自发光")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        half"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Metallic"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";    "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//0表示非金属，1表示金属")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        half"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Smoothness"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";  "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//0表示最粗糙，1表示最光滑")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        half"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Occlusion"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";   "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//环境光遮蔽，默认为1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        fixed"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Alpha"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";      "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//透明通道")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"	//SurfaceOutputStandardSpecular结构体（在Unity内置文件 UnityPBSLighting.cginc 中声明）")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //当我们在编译指令中使用 StandardSpecular 光照模型时，就需要使用该结构体")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    //我们一般称它为高光工作流输出结构体")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    struct"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," SurfaceOutputStandardSpecular")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Albedo"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";    "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//漫反射")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Normal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";    "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//切线空间法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        fixed3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Emission"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";  "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//自发光")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        half"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Smoothness"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";  "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//0表示最粗糙，1表示最光滑")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        half"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Occlusion"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";   "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//环境光遮蔽，默认为1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        fixed"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Alpha"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";      "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//透明通道")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3350]||(l[3350]=i("blockquote",null,[i("p",null,"表面着色器的渲染流程")],-1)),l[3351]||(l[3351]=i("p",null,"编译指令、结构体、自定义函数（编译指令中的表面函数、光照模型、顶点函数、最终颜色修改函数） 我们只需要了解他们的具体作用便可以知道如何编写表面着色器",-1)),a(h,{face:"shader/表面着色器:输出结构体"}),l[3352]||(l[3352]=i("h3",{id:"五、实现法线贴图",tabindex:"-1"},[s("五、实现法线贴图 "),i("a",{class:"header-anchor",href:"#五、实现法线贴图","aria-label":'Permalink to "五、实现法线贴图"'},"​")],-1)),l[3353]||(l[3353]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Custom/Lesson139"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Color"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Color"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Albedo (RGB)"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "white"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _BumpMap"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"BumpMap"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},'        //_Emission("Emission", Color) = (1,1,1,1)')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Metallic"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Metallic"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Smoothness"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Smoothness"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Tags { "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"RenderType"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Opaque"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        // Physically based Standard lighting model, and enable shadows on all light types")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        #pragma surface surf Standard fullforwardshadows")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        // Use shader model 3.0 target, to get nicer looking lighting")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        #pragma target 3.0")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Color"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _BumpMap"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //fixed4 _Emission;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Metallic;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Smoothness;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        struct Input")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float2"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," uv_MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float2"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," uv_BumpMap"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        void"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," surf"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Input"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," IN"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"inout"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," SurfaceOutputStandard"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," texColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, IN.uv_MainTex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //漫反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            o.Albedo "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," texColor.rgb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Color.rgb;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //透明通道相关")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            o.Alpha "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," texColor.a "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Color.a;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //得到切线空间下的法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            o.Normal "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnpackNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_BumpMap, IN.uv_BumpMap));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //o.Emission = _Emission.rgb;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            o.Metallic "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Metallic;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            o.Smoothness "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Smoothness;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    FallBack "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Diffuse"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3354]||(l[3354]=i("h3",{id:"六、顶点膨胀",tabindex:"-1"},[s("六、顶点膨胀 "),i("a",{class:"header-anchor",href:"#六、顶点膨胀","aria-label":'Permalink to "六、顶点膨胀"'},"​")],-1)),l[3355]||(l[3355]=i("blockquote",null,[i("p",null,"表面着色器中如何处理顶点")],-1)),l[3356]||(l[3356]=i("p",null,[s("在编译指令中 "),i("strong",null,"#pragma surface 表面函数名 光照模型 可选额外参数"),s(" 可选额外参数中添加 "),i("strong",null,"vertex:自定义函数名"),s(" 函数格式： "),i("strong",null,"void 自定义函数名(inout appdata_full v)")],-1)),l[3357]||(l[3357]=i("blockquote",null,[i("p",null,"实现顶点膨胀效果")],-1)),l[3358]||(l[3358]=i("ol",null,[i("li",null,"加入顶点碰撞控制参数"),i("li",null,"在编译指令中加入顶点处理函数"),i("li",null,"自定义顶点处理函数"),i("li",null,"在该函数中对顶点进行偏移")],-1)),l[3359]||(l[3359]=i("div",{class:"language-C#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"C#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//可选额外参数中添加")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"finalcolor"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":自定义函数名")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//函数格式：")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"void"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," 自定义函数名"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Input"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," IN"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", SurfaceOutput... o, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"inout"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color)")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3360]||(l[3360]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Custom/Lesson139"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Color"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Color"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Albedo (RGB)"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "white"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _BumpMap"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"BumpMap"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' ""'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},'        //_Emission("Emission", Color) = (1,1,1,1)')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Metallic"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Metallic"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Smoothness"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Smoothness"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Range"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Expansion"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Expansion"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Float) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Tags { "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"RenderType"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Opaque"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        // Physically based Standard lighting model, and enable shadows on all light types")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        #pragma surface surf Standard fullforwardshadows vertex:vertexFunc finalcolor:colorFunc")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        // Use shader model 3.0 target, to get nicer looking lighting")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        #pragma target 3.0")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Color"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        sampler2D"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _BumpMap"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //fixed4 _Emission;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Metallic;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        fixed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Smoothness;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //顶点往外扩张多少")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Expansion"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        struct Input")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float2"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," uv_MainTex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float2"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," uv_BumpMap"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        void"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," surf"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Input"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," IN"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"inout"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," SurfaceOutputStandard"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," texColor"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_MainTex, IN.uv_MainTex);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //漫反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            o.Albedo "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," texColor.rgb;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //透明通道相关")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            o.Alpha "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," texColor.a "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Color.a;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //得到切线空间下的法线")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            o.Normal "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," UnpackNormal"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"tex2D"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_BumpMap, IN.uv_BumpMap));")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //o.Emission = _Emission.rgb;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            o.Metallic "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Metallic;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            o.Smoothness "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Smoothness;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        void"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," vertexFunc"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"inout"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," appdata_full"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //修改顶点坐标 往外扩充")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            v.vertex.xyz "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," v.normal "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Expansion;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        void"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," colorFunc"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Input"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," IN"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"SurfaceOutputStandard"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," o"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"inout"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," fixed4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," color)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            color "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Color;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    FallBack "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Diffuse"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3361]||(l[3361]=i("h3",{id:"七、动态液体",tabindex:"-1"},[s("七、动态液体 "),i("a",{class:"header-anchor",href:"#七、动态液体","aria-label":'Permalink to "七、动态液体"'},"​")],-1)),l[3362]||(l[3362]=i("p",null,"在游戏开发中，动态液体效果就是",-1)),a(n,{color:"red"},{default:k(()=>[...l[1622]||(l[1622]=[s("用Shader模拟出透明容器装透明液体的效果",-1)])]),_:1}),l[3363]||(l[3363]=i("p",null,"这种效果常用与游戏和动画中，比如用于制作玻璃瓶装液体的效果",-1)),l[3364]||(l[3364]=i("h4",{id:"_1-基本原理-11",tabindex:"-1"},[s("1. 基本原理 "),i("a",{class:"header-anchor",href:"#_1-基本原理-11","aria-label":'Permalink to "1. 基本原理"'},"​")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1623]||(l[1623]=[s("动态液体效果是通过透明渲染、像素剔除、波纹效果模拟来实现的",-1)])]),_:1}),l[3365]||(l[3365]=i("ol",null,[i("li",null,[i("strong",null,"如何被容器装载")])],-1)),a(n,{color:"red"},{default:k(()=>[...l[1624]||(l[1624]=[s("用两个模型，一个容器模型，一个液体模型，液体模型其实和容器模型一模一样",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1625]||(l[1625]=[s("只是稍小一些，让两个模型使用不同的材质。容器使用透明材质，液体使用动态液体材质即可",-1)])]),_:1}),l[3366]||(l[3366]=i("ol",{start:"2"},[i("li",null,[i("strong",null,"如何透明渲染")])],-1)),l[3367]||(l[3367]=i("p",null,[i("strong",null,"在表面着色器中实现透明渲染，和顶点/片元着色器的透明度混合基本一致")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1626]||(l[1626]=[s("只需要通过设置渲染类型、队列、混合模式、关闭深度写入即可",-1)])]),_:1}),a(h,{face:"shader/表面着色器:动态液体"}),l[3368]||(l[3368]=i("ol",{start:"3"},[i("li",null,"如何剔除像素")],-1)),a(n,{color:"red"},{default:k(()=>[...l[1627]||(l[1627]=[s("我们将模型空间中心点作为参考点，将其转换到世界空间下，再用模型当前世界空间下的点和它进行 减法运算。如果判断点在参考点上方的我们便对其进行剔除 这时我们可以加入自定义变量控制液面高度",-1)])]),_:1}),a(h,{face:"shader/表面着色器:动态液体2"}),l[3369]||(l[3369]=i("ol",{start:"4"},[i("li",null,[i("strong",null,"如何模拟波纹效果")])],-1)),a(n,{color:"red"},{default:k(()=>[...l[1628]||(l[1628]=[s("我们可以利用之前学习的流动的河流的相关公式来计算波纹效果",-1)])]),_:1}),a(n,{color:"red"},{default:k(()=>[...l[1629]||(l[1629]=[s("某轴位置偏移量 = sin( _Time.y * 波动频率 + 顶点某轴坐标 * 波长的倒数) * 波动幅度",-1)])]),_:1}),a(h,{face:"shader/表面着色器:动态液体3"}),l[3370]||(l[3370]=i("h4",{id:"_2-具体实现-8",tabindex:"-1"},[s("2.具体实现 "),i("a",{class:"header-anchor",href:"#_2-具体实现-8","aria-label":'Permalink to "2.具体实现"'},"​")],-1)),l[3371]||(l[3371]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//1.新建表面着色器 DynamicLiquid(动态液体)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//2.删除不必要的代码")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//3.声明属性以及属性映射")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  液体颜色 _Color")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  高光颜色和光滑度(rgb做颜色 a做光滑度) _Specular")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  液体高度 _Height")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  波纹变化速度 _Speed")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  波动幅度 _WavaAmplitude")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  波动频率 _WavaFrequency")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  波长的倒数 _InvWaveLength")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//4.透明混合相关设置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  RenderType和Queue为Transparent")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  Blend DstColor SrcColor")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  Zwrite Off")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//5.编译指令设置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  光照模型我们使用StandardSpecular 并且不要阴影 noshadow")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//6.输入结构体")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  只需要当前像素的世界坐标位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//7.实现表面函数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  7-1:模型中心点转世界坐标")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  7-2:计算中心点和像素点y轴坐标差")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  7-3:像素剔除")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  7-4:波纹效果偏移计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"//  7-5:漫反射颜色、高光颜色、光滑度设置")])])]),i("button",{class:"code-block-unfold-btn"})],-1)),l[3372]||(l[3372]=i("div",{class:"language-c#"},[i("button",{title:"Copy code",class:"copy"}),i("span",{class:"lang"},"c#"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Shader "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Custom/DynamicLiquid"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Properties")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //液体颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Color"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Color"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //高光颜色和光滑度参数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Specular"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Specular"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Color) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //液体的高度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Height"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Height"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Float) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //波纹变化速度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _Speed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Speed"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Float) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //波动幅度")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _WaveAmplitude"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"WaveAmplitude"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Float) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //波动频率")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _WaveFrequency"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"WaveFrequency"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Float) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //波长的倒数")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        _InvWaveLength"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"InvWaveLength"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", Float) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    SubShader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        //透明混合相关")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Tags { "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"RenderType"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Transparent"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "Queue"'),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Transparent"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Blend DstColor SrcColor")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ZWrite Off")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        CGPROGRAM")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        // Physically based Standard lighting model, and enable shadows on all light types")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        #pragma surface surf StandardSpecular noshadow")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        // Use shader model 3.0 target, to get nicer looking lighting")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        #pragma target 3.0")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Color"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"        fixed4"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Specular"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Height"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _Speed"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _WaveAmplitude"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _WaveFrequency"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," _InvWaveLength"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        struct Input")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //世界空间下的像素点的位置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," worldPos"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        };")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        void"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," surf"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Input"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," IN"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"inout"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," SurfaceOutputStandardSpecular"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," o)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //将模型空间下中心点转换到世界空间下")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            float3"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," centerPoint"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," mul"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(unity_ObjectToWorld, "),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"float4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"));")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //当前像素点和中心点的高度差")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," liquidHeight"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," centerPoint.y "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," IN.worldPos.y "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Height"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.01"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //波纹偏移计算")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"            float"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," waveOffset"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," sin"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(_Time.y "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _WaveFrequency "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," IN.worldPos.x "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _InvWaveLength) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _WaveAmplitude;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            liquidHeight "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"+="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," waveOffset;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //如果liquidHeight >= 0 则返回1 如果小于0 则返回0")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //如果是0 就希望被剔除 否则不剔除")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            liquidHeight "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," step"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", liquidHeight);")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //如果liquidHeight是0 - 0.001 肯定小于0 就会被剔除 不会被渲染")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"            clip"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(liquidHeight "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0.001"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //漫反射颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            o.Albedo "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Color.rgb;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //高光颜色")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            o.Specular "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Specular.rgb;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"            //光滑度设置")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            o.Smoothness "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," _Specular.a;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        ENDCG")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    FallBack "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Diffuse"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),i("button",{class:"code-block-unfold-btn"})],-1))]),"main-header":k(()=>[e(t.$slots,"main-header")]),"main-header-after":k(()=>[e(t.$slots,"main-header-after")]),"main-nav":k(()=>[e(t.$slots,"main-nav")]),"main-content-before":k(()=>[e(t.$slots,"main-content-before")]),"main-content":k(()=>[e(t.$slots,"main-content")]),"main-content-after":k(()=>[e(t.$slots,"main-content-after")]),"main-nav-before":k(()=>[e(t.$slots,"main-nav-before")]),"main-nav-after":k(()=>[e(t.$slots,"main-nav-after")]),comment:k(()=>[e(t.$slots,"comment")]),footer:k(()=>[e(t.$slots,"footer")]),aside:k(()=>[e(t.$slots,"aside")]),"aside-custom":k(()=>[e(t.$slots,"aside-custom")]),default:k(()=>[e(t.$slots,"default")]),_:3},8,["frontmatter"])}}};export{ii as default,I as usePageData};
